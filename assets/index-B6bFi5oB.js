(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();const Bm=(i,e)=>i===e,vs=Symbol("solid-proxy"),ph=typeof Proxy=="function",Nm=Symbol("solid-track"),ys={equals:Bm};let gh=Ah;const Wt=1,ws=2,_h={owned:null,cleanups:null,context:null,owner:null},eo={};var me=null;let to=null,zm=null,_e=null,Ne=null,Zt=null,Ls=0;function Gi(i,e){const n=_e,r=me,a=i.length===0,l=e===void 0?r:e,u=a?_h:{owned:null,cleanups:null,context:l?l.context:null,owner:l},h=a?i:()=>i(()=>Ge(()=>Qi(u)));me=u,_e=null;try{return $t(h,!0)}finally{_e=n,me=r}}function K(i,e){e=e?Object.assign({},ys,e):ys;const n={value:i,observers:null,observerSlots:null,comparator:e.equals||void 0},r=a=>(typeof a=="function"&&(a=a(n.value)),xh(n,a));return[bh.bind(n),r]}function Fm(i,e,n){const r=$s(i,e,!0,Wt);ai(r)}function Ee(i,e,n){const r=$s(i,e,!1,Wt);ai(r)}function Ht(i,e,n){gh=Jm;const r=$s(i,e,!1,Wt);r.user=!0,Zt?Zt.push(r):ai(r)}function pe(i,e,n){n=n?Object.assign({},ys,n):ys;const r=$s(i,e,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,ai(r),bh.bind(r)}function Um(i){return i&&typeof i=="object"&&"then"in i}function Zm(i,e,n){let r,a,l;typeof e=="function"?(r=i,a=e,l={}):(r=!0,a=i,l=e);let u=null,h=eo,f=!1,m="initialValue"in l,g=typeof r=="function"&&pe(r);const _=new Set,[v,w]=(l.storage||K)(l.initialValue),[P,b]=K(void 0),[x,k]=K(void 0,{equals:!1}),[A,T]=K(m?"ready":"unresolved");function E(j,z,B,F){return u===j&&(u=null,F!==void 0&&(m=!0),(j===h||z===h)&&l.onHydrated&&queueMicrotask(()=>l.onHydrated(F,{value:z})),h=eo,$(z,B)),z}function $(j,z){$t(()=>{z===void 0&&w(()=>j),T(z!==void 0?"errored":m?"ready":"unresolved"),b(z);for(const B of _.keys())B.decrement();_.clear()},!1)}function I(){const j=Km,z=v(),B=P();if(B!==void 0&&!u)throw B;return _e&&_e.user,z}function D(j=!0){if(j!==!1&&f)return;f=!1;const z=g?g():r;if(z==null||z===!1){E(u,Ge(v));return}const B=h!==eo?h:Ge(()=>a(z,{value:v(),refetching:j}));return Um(B)?(u=B,"value"in B?(B.status==="success"?E(u,B.value,void 0,z):E(u,void 0,$o(B.value),z),B):(f=!0,queueMicrotask(()=>f=!1),$t(()=>{T(m?"refreshing":"pending"),k()},!1),B.then(F=>E(B,F,void 0,z),F=>E(B,void 0,$o(F),z)))):(E(u,B,void 0,z),B)}return Object.defineProperties(I,{state:{get:()=>A()},error:{get:()=>P()},loading:{get(){const j=A();return j==="pending"||j==="refreshing"}},latest:{get(){if(!m)return I();const j=P();if(j&&!u)throw j;return v()}}}),g?Fm(()=>D(!1)):D(!1),[I,{refetch:D,mutate:w}]}function Wm(i){return $t(i,!1)}function Ge(i){if(_e===null)return i();const e=_e;_e=null;try{return i()}finally{_e=e}}function al(i,e,n){const r=Array.isArray(i);let a,l=n&&n.defer;return u=>{let h;if(r){h=Array(i.length);for(let m=0;m<i.length;m++)h[m]=i[m]()}else h=i();if(l)return l=!1,u;const f=Ge(()=>e(h,a,u));return a=h,f}}function vh(i){Ht(()=>Ge(i))}function Es(i){return me===null||(me.cleanups===null?me.cleanups=[i]:me.cleanups.push(i)),i}function yh(){return me}function wh(i,e){const n=me,r=_e;me=i,_e=null;try{return $t(e,!0)}catch(a){ul(a)}finally{me=n,_e=r}}function Hm(i){const e=_e,n=me;return Promise.resolve().then(()=>{_e=e,me=n;let r;return $t(i,!1),_e=me=null,r?r.done:void 0})}function ol(i,e){const n=Symbol("context");return{id:n,Provider:Xm(n),defaultValue:i}}function Os(i){let e;return me&&me.context&&(e=me.context[i.id])!==void 0?e:i.defaultValue}function ll(i){const e=pe(i),n=pe(()=>Mo(e()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}let Km;function bh(){if(this.sources&&this.state)if(this.state===Wt)ai(this);else{const i=Ne;Ne=null,$t(()=>xs(this),!1),Ne=i}if(_e){const i=this.observers?this.observers.length:0;_e.sources?(_e.sources.push(this),_e.sourceSlots.push(i)):(_e.sources=[this],_e.sourceSlots=[i]),this.observers?(this.observers.push(_e),this.observerSlots.push(_e.sources.length-1)):(this.observers=[_e],this.observerSlots=[_e.sources.length-1])}return this.value}function xh(i,e,n){let r=i.value;return(!i.comparator||!i.comparator(r,e))&&(i.value=e,i.observers&&i.observers.length&&$t(()=>{for(let a=0;a<i.observers.length;a+=1){const l=i.observers[a],u=to&&to.running;u&&to.disposed.has(l),(u?!l.tState:!l.state)&&(l.pure?Ne.push(l):Zt.push(l),l.observers&&Ph(l)),u||(l.state=Wt)}if(Ne.length>1e6)throw Ne=[],new Error},!1)),e}function ai(i){if(!i.fn)return;Qi(i);const e=Ls;Gm(i,i.value,e)}function Gm(i,e,n){let r;const a=me,l=_e;_e=me=i;try{r=i.fn(e)}catch(u){return i.pure&&(i.state=Wt,i.owned&&i.owned.forEach(Qi),i.owned=null),i.updatedAt=n+1,ul(u)}finally{_e=l,me=a}(!i.updatedAt||i.updatedAt<=n)&&(i.updatedAt!=null&&"observers"in i?xh(i,r):i.value=r,i.updatedAt=n)}function $s(i,e,n,r=Wt,a){const l={fn:i,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:me,context:me?me.context:null,pure:n};return me===null||me!==_h&&(me.owned?me.owned.push(l):me.owned=[l]),l}function bs(i){if(i.state===0)return;if(i.state===ws)return xs(i);if(i.suspense&&Ge(i.suspense.inFallback))return i.suspense.effects.push(i);const e=[i];for(;(i=i.owner)&&(!i.updatedAt||i.updatedAt<Ls);)i.state&&e.push(i);for(let n=e.length-1;n>=0;n--)if(i=e[n],i.state===Wt)ai(i);else if(i.state===ws){const r=Ne;Ne=null,$t(()=>xs(i,e[0]),!1),Ne=r}}function $t(i,e){if(Ne)return i();let n=!1;e||(Ne=[]),Zt?n=!0:Zt=[],Ls++;try{const r=i();return Vm(n),r}catch(r){n||(Zt=null),Ne=null,ul(r)}}function Vm(i){if(Ne&&(Ah(Ne),Ne=null),i)return;const e=Zt;Zt=null,e.length&&$t(()=>gh(e),!1)}function Ah(i){for(let e=0;e<i.length;e++)bs(i[e])}function Jm(i){let e,n=0;for(e=0;e<i.length;e++){const r=i[e];r.user?i[n++]=r:bs(r)}for(e=0;e<n;e++)bs(i[e])}function xs(i,e){i.state=0;for(let n=0;n<i.sources.length;n+=1){const r=i.sources[n];if(r.sources){const a=r.state;a===Wt?r!==e&&(!r.updatedAt||r.updatedAt<Ls)&&bs(r):a===ws&&xs(r,e)}}}function Ph(i){for(let e=0;e<i.observers.length;e+=1){const n=i.observers[e];n.state||(n.state=ws,n.pure?Ne.push(n):Zt.push(n),n.observers&&Ph(n))}}function Qi(i){let e;if(i.sources)for(;i.sources.length;){const n=i.sources.pop(),r=i.sourceSlots.pop(),a=n.observers;if(a&&a.length){const l=a.pop(),u=n.observerSlots.pop();r<a.length&&(l.sourceSlots[u]=r,a[r]=l,n.observerSlots[r]=u)}}if(i.tOwned){for(e=i.tOwned.length-1;e>=0;e--)Qi(i.tOwned[e]);delete i.tOwned}if(i.owned){for(e=i.owned.length-1;e>=0;e--)Qi(i.owned[e]);i.owned=null}if(i.cleanups){for(e=i.cleanups.length-1;e>=0;e--)i.cleanups[e]();i.cleanups=null}i.state=0}function $o(i){return i instanceof Error?i:new Error(typeof i=="string"?i:"Unknown error",{cause:i})}function ul(i,e=me){throw $o(i)}function Mo(i){if(typeof i=="function"&&!i.length)return Mo(i());if(Array.isArray(i)){const e=[];for(let n=0;n<i.length;n++){const r=Mo(i[n]);Array.isArray(r)?e.push.apply(e,r):e.push(r)}return e}return i}function Xm(i,e){return function(r){let a;return Ee(()=>a=Ge(()=>(me.context={...me.context,[i]:r.value},ll(()=>r.children))),void 0),a}}const Ym=Symbol("fallback");function Uu(i){for(let e=0;e<i.length;e++)i[e]()}function Qm(i,e,n={}){let r=[],a=[],l=[],u=0,h=e.length>1?[]:null;return Es(()=>Uu(l)),()=>{let f=i()||[],m=f.length,g,_;return f[Nm],Ge(()=>{let w,P,b,x,k,A,T,E,$;if(m===0)u!==0&&(Uu(l),l=[],r=[],a=[],u=0,h&&(h=[])),n.fallback&&(r=[Ym],a[0]=Gi(I=>(l[0]=I,n.fallback())),u=1);else if(u===0){for(a=new Array(m),_=0;_<m;_++)r[_]=f[_],a[_]=Gi(v);u=m}else{for(b=new Array(m),x=new Array(m),h&&(k=new Array(m)),A=0,T=Math.min(u,m);A<T&&r[A]===f[A];A++);for(T=u-1,E=m-1;T>=A&&E>=A&&r[T]===f[E];T--,E--)b[E]=a[T],x[E]=l[T],h&&(k[E]=h[T]);for(w=new Map,P=new Array(E+1),_=E;_>=A;_--)$=f[_],g=w.get($),P[_]=g===void 0?-1:g,w.set($,_);for(g=A;g<=T;g++)$=r[g],_=w.get($),_!==void 0&&_!==-1?(b[_]=a[g],x[_]=l[g],h&&(k[_]=h[g]),_=P[_],w.set($,_)):l[g]();for(_=A;_<m;_++)_ in b?(a[_]=b[_],l[_]=x[_],h&&(h[_]=k[_],h[_](_))):a[_]=Gi(v);a=a.slice(0,u=m),r=f.slice(0)}return a});function v(w){if(l[_]=w,h){const[P,b]=K(_);return h[_]=b,e(f[_],P)}return e(f[_])}}}function H(i,e){return Ge(()=>i(e||{}))}function Wr(){return!0}const Io={get(i,e,n){return e===vs?n:i.get(e)},has(i,e){return e===vs?!0:i.has(e)},set:Wr,deleteProperty:Wr,getOwnPropertyDescriptor(i,e){return{configurable:!0,enumerable:!0,get(){return i.get(e)},set:Wr,deleteProperty:Wr}},ownKeys(i){return i.keys()}};function no(i){return(i=typeof i=="function"?i():i)?i:{}}function ep(){for(let i=0,e=this.length;i<e;++i){const n=this[i]();if(n!==void 0)return n}}function Ro(...i){let e=!1;for(let u=0;u<i.length;u++){const h=i[u];e=e||!!h&&vs in h,i[u]=typeof h=="function"?(e=!0,pe(h)):h}if(ph&&e)return new Proxy({get(u){for(let h=i.length-1;h>=0;h--){const f=no(i[h])[u];if(f!==void 0)return f}},has(u){for(let h=i.length-1;h>=0;h--)if(u in no(i[h]))return!0;return!1},keys(){const u=[];for(let h=0;h<i.length;h++)u.push(...Object.keys(no(i[h])));return[...new Set(u)]}},Io);const n={},r=Object.create(null);for(let u=i.length-1;u>=0;u--){const h=i[u];if(!h)continue;const f=Object.getOwnPropertyNames(h);for(let m=f.length-1;m>=0;m--){const g=f[m];if(g==="__proto__"||g==="constructor")continue;const _=Object.getOwnPropertyDescriptor(h,g);if(!r[g])r[g]=_.get?{enumerable:!0,configurable:!0,get:ep.bind(n[g]=[_.get.bind(h)])}:_.value!==void 0?_:void 0;else{const v=n[g];v&&(_.get?v.push(_.get.bind(h)):_.value!==void 0&&v.push(()=>_.value))}}}const a={},l=Object.keys(r);for(let u=l.length-1;u>=0;u--){const h=l[u],f=r[h];f&&f.get?Object.defineProperty(a,h,f):a[h]=f?f.value:void 0}return a}function tp(i,...e){if(ph&&vs in i){const a=new Set(e.length>1?e.flat():e[0]),l=e.map(u=>new Proxy({get(h){return u.includes(h)?i[h]:void 0},has(h){return u.includes(h)&&h in i},keys(){return u.filter(h=>h in i)}},Io));return l.push(new Proxy({get(u){return a.has(u)?void 0:i[u]},has(u){return a.has(u)?!1:u in i},keys(){return Object.keys(i).filter(u=>!a.has(u))}},Io)),l}const n={},r=e.map(()=>({}));for(const a of Object.getOwnPropertyNames(i)){const l=Object.getOwnPropertyDescriptor(i,a),u=!l.get&&!l.set&&l.enumerable&&l.writable&&l.configurable;let h=!1,f=0;for(const m of e)m.includes(a)&&(h=!0,u?r[f][a]=l.value:Object.defineProperty(r[f],a,l)),++f;h||(u?n[a]=l.value:Object.defineProperty(n,a,l))}return[...r,n]}const np=i=>`Stale read from <${i}>.`;function Sh(i){const e="fallback"in i&&{fallback:()=>i.fallback};return pe(Qm(()=>i.each,i.children,e||void 0))}function Ms(i){const e=i.keyed,n=pe(()=>i.when,void 0,{equals:(r,a)=>e?r===a:!r==!a});return pe(()=>{const r=n();if(r){const a=i.children;return typeof a=="function"&&a.length>0?Ge(()=>a(e?r:()=>{if(!Ge(n))throw np("Show");return i.when})):a}return i.fallback},void 0,void 0)}const ip=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],rp=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...ip]),sp=new Set(["innerHTML","textContent","innerText","children"]),ap=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),op=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function lp(i,e){const n=op[i];return typeof n=="object"?n[e]?n.$:void 0:n}const up=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]);function cp(i,e,n){let r=n.length,a=e.length,l=r,u=0,h=0,f=e[a-1].nextSibling,m=null;for(;u<a||h<l;){if(e[u]===n[h]){u++,h++;continue}for(;e[a-1]===n[l-1];)a--,l--;if(a===u){const g=l<r?h?n[h-1].nextSibling:n[l-h]:f;for(;h<l;)i.insertBefore(n[h++],g)}else if(l===h)for(;u<a;)(!m||!m.has(e[u]))&&e[u].remove(),u++;else if(e[u]===n[l-1]&&n[h]===e[a-1]){const g=e[--a].nextSibling;i.insertBefore(n[h++],e[u++].nextSibling),i.insertBefore(n[--l],g),e[a]=n[l]}else{if(!m){m=new Map;let _=h;for(;_<l;)m.set(n[_],_++)}const g=m.get(e[u]);if(g!=null)if(h<g&&g<l){let _=u,v=1,w;for(;++_<a&&_<l&&!((w=m.get(e[_]))==null||w!==g+v);)v++;if(v>g-h){const P=e[u];for(;h<g;)i.insertBefore(n[h++],P)}else i.replaceChild(n[h++],e[u++])}else u++;else e[u++].remove()}}}const Zu="_$DX_DELEGATE";function hp(i,e,n,r={}){let a;return Gi(l=>{a=l,e===document?i():R(e,i(),e.firstChild?null:void 0,n)},r.owner),()=>{a(),e.textContent=""}}function te(i,e,n){let r;const a=()=>{const u=document.createElement("template");return u.innerHTML=i,u.content.firstChild},l=()=>(r||(r=a())).cloneNode(!0);return l.cloneNode=l,l}function ht(i,e=window.document){const n=e[Zu]||(e[Zu]=new Set);for(let r=0,a=i.length;r<a;r++){const l=i[r];n.has(l)||(n.add(l),e.addEventListener(l,wp))}}function ct(i,e,n){n==null?i.removeAttribute(e):i.setAttribute(e,n)}function dp(i,e,n){n?i.setAttribute(e,""):i.removeAttribute(e)}function Is(i,e){e==null?i.removeAttribute("class"):i.className=e}function fp(i,e,n,r){if(r)Array.isArray(n)?(i[`$$${e}`]=n[0],i[`$$${e}Data`]=n[1]):i[`$$${e}`]=n;else if(Array.isArray(n)){const a=n[0];i.addEventListener(e,n[0]=l=>a.call(i,n[1],l))}else i.addEventListener(e,n,typeof n!="function"&&n)}function mp(i,e,n={}){const r=Object.keys(e||{}),a=Object.keys(n);let l,u;for(l=0,u=a.length;l<u;l++){const h=a[l];!h||h==="undefined"||e[h]||(Wu(i,h,!1),delete n[h])}for(l=0,u=r.length;l<u;l++){const h=r[l],f=!!e[h];!h||h==="undefined"||n[h]===f||!f||(Wu(i,h,!0),n[h]=f)}return n}function pp(i,e,n){if(!e)return n?ct(i,"style"):e;const r=i.style;if(typeof e=="string")return r.cssText=e;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),e||(e={});let a,l;for(l in n)e[l]==null&&r.removeProperty(l),delete n[l];for(l in e)a=e[l],a!==n[l]&&(r.setProperty(l,a),n[l]=a);return n}function gp(i,e={},n,r){const a={};return Ee(()=>a.children=er(i,e.children,a.children)),Ee(()=>typeof e.ref=="function"&&_p(e.ref,i)),Ee(()=>vp(i,e,n,!0,a,!0)),a}function _p(i,e,n){return Ge(()=>i(e,n))}function R(i,e,n,r){if(n!==void 0&&!r&&(r=[]),typeof e!="function")return er(i,e,r,n);Ee(a=>er(i,e(),a,n),r)}function vp(i,e,n,r,a={},l=!1){e||(e={});for(const u in a)if(!(u in e)){if(u==="children")continue;a[u]=Hu(i,u,null,a[u],n,l,e)}for(const u in e){if(u==="children")continue;const h=e[u];a[u]=Hu(i,u,h,a[u],n,l,e)}}function yp(i){return i.toLowerCase().replace(/-([a-z])/g,(e,n)=>n.toUpperCase())}function Wu(i,e,n){const r=e.trim().split(/\s+/);for(let a=0,l=r.length;a<l;a++)i.classList.toggle(r[a],n)}function Hu(i,e,n,r,a,l,u){let h,f,m,g,_;if(e==="style")return pp(i,n,r);if(e==="classList")return mp(i,n,r);if(n===r)return r;if(e==="ref")l||n(i);else if(e.slice(0,3)==="on:"){const v=e.slice(3);r&&i.removeEventListener(v,r,typeof r!="function"&&r),n&&i.addEventListener(v,n,typeof n!="function"&&n)}else if(e.slice(0,10)==="oncapture:"){const v=e.slice(10);r&&i.removeEventListener(v,r,!0),n&&i.addEventListener(v,n,!0)}else if(e.slice(0,2)==="on"){const v=e.slice(2).toLowerCase(),w=up.has(v);if(!w&&r){const P=Array.isArray(r)?r[0]:r;i.removeEventListener(v,P)}(w||n)&&(fp(i,v,n,w),w&&ht([v]))}else e.slice(0,5)==="attr:"?ct(i,e.slice(5),n):e.slice(0,5)==="bool:"?dp(i,e.slice(5),n):(_=e.slice(0,5)==="prop:")||(m=sp.has(e))||(g=lp(e,i.tagName))||(f=rp.has(e))||(h=i.nodeName.includes("-")||"is"in u)?(_&&(e=e.slice(5),f=!0),e==="class"||e==="className"?Is(i,n):h&&!f&&!m?i[yp(e)]=n:i[g||e]=n):ct(i,ap[e]||e,n);return n}function wp(i){let e=i.target;const n=`$$${i.type}`,r=i.target,a=i.currentTarget,l=f=>Object.defineProperty(i,"target",{configurable:!0,value:f}),u=()=>{const f=e[n];if(f&&!e.disabled){const m=e[`${n}Data`];if(m!==void 0?f.call(e,m,i):f.call(e,i),i.cancelBubble)return}return e.host&&typeof e.host!="string"&&!e.host._$host&&e.contains(i.target)&&l(e.host),!0},h=()=>{for(;u()&&(e=e._$host||e.parentNode||e.host););};if(Object.defineProperty(i,"currentTarget",{configurable:!0,get(){return e||document}}),i.composedPath){const f=i.composedPath();l(f[0]);for(let m=0;m<f.length-2&&(e=f[m],!!u());m++){if(e._$host){e=e._$host,h();break}if(e.parentNode===a)break}}else h();l(r)}function er(i,e,n,r,a){for(;typeof n=="function";)n=n();if(e===n)return n;const l=typeof e,u=r!==void 0;if(i=u&&n[0]&&n[0].parentNode||i,l==="string"||l==="number"){if(l==="number"&&(e=e.toString(),e===n))return n;if(u){let h=n[0];h&&h.nodeType===3?h.data!==e&&(h.data=e):h=document.createTextNode(e),n=Bn(i,n,r,h)}else n!==""&&typeof n=="string"?n=i.firstChild.data=e:n=i.textContent=e}else if(e==null||l==="boolean")n=Bn(i,n,r);else{if(l==="function")return Ee(()=>{let h=e();for(;typeof h=="function";)h=h();n=er(i,h,n,r)}),()=>n;if(Array.isArray(e)){const h=[],f=n&&Array.isArray(n);if(qo(h,e,n,a))return Ee(()=>n=er(i,h,n,r,!0)),()=>n;if(h.length===0){if(n=Bn(i,n,r),u)return n}else f?n.length===0?Ku(i,h,r):cp(i,n,h):(n&&Bn(i),Ku(i,h));n=h}else if(e.nodeType){if(Array.isArray(n)){if(u)return n=Bn(i,n,r,e);Bn(i,n,null,e)}else n==null||n===""||!i.firstChild?i.appendChild(e):i.replaceChild(e,i.firstChild);n=e}}return n}function qo(i,e,n,r){let a=!1;for(let l=0,u=e.length;l<u;l++){let h=e[l],f=n&&n[i.length],m;if(!(h==null||h===!0||h===!1))if((m=typeof h)=="object"&&h.nodeType)i.push(h);else if(Array.isArray(h))a=qo(i,h,f)||a;else if(m==="function")if(r){for(;typeof h=="function";)h=h();a=qo(i,Array.isArray(h)?h:[h],Array.isArray(f)?f:[f])||a}else i.push(h),a=!0;else{const g=String(h);f&&f.nodeType===3&&f.data===g?i.push(f):i.push(document.createTextNode(g))}}return a}function Ku(i,e,n=null){for(let r=0,a=e.length;r<a;r++)i.insertBefore(e[r],n)}function Bn(i,e,n,r){if(n===void 0)return i.textContent="";const a=r||document.createTextNode("");if(e.length){let l=!1;for(let u=e.length-1;u>=0;u--){const h=e[u];if(a!==h){const f=h.parentNode===i;!l&&!u?f?i.replaceChild(a,h):i.insertBefore(a,n):f&&h.remove()}else l=!0}}else i.insertBefore(a,n);return[a]}const bp=!1;function kh(){let i=new Set;function e(a){return i.add(a),()=>i.delete(a)}let n=!1;function r(a,l){if(n)return!(n=!1);const u={to:a,options:l,defaultPrevented:!1,preventDefault:()=>u.defaultPrevented=!0};for(const h of i)h.listener({...u,from:h.location,retry:f=>{f&&(n=!0),h.navigate(a,{...l,resolve:!1})}});return!u.defaultPrevented}return{subscribe:e,confirm:r}}let jo;function cl(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),jo=window.history.state._depth}cl();function xp(i){return{...i,_depth:window.history.state&&window.history.state._depth}}function Ap(i,e){let n=!1;return()=>{const r=jo;cl();const a=r==null?null:jo-r;if(n){n=!1;return}a&&e(a)?(n=!0,window.history.go(-a)):i()}}const Pp=/^(?:[a-z0-9]+:)?\/\//i,Sp=/^\/+|(\/)\/+$/g,Ch="http://sr";function bn(i,e=!1){const n=i.replace(Sp,"$1");return n?e||/^[?#]/.test(n)?n:"/"+n:""}function cs(i,e,n){if(Pp.test(e))return;const r=bn(i),a=n&&bn(n);let l="";return!a||e.startsWith("/")?l=r:a.toLowerCase().indexOf(r.toLowerCase())!==0?l=r+a:l=a,(l||"/")+bn(e,!l)}function kp(i,e){if(i==null)throw new Error(e);return i}function Cp(i,e){return bn(i).replace(/\/*(\*.*)?$/g,"")+bn(e)}function Th(i){const e={};return i.searchParams.forEach((n,r)=>{r in e?Array.isArray(e[r])?e[r].push(n):e[r]=[e[r],n]:e[r]=n}),e}function Tp(i,e,n){const[r,a]=i.split("/*",2),l=r.split("/").filter(Boolean),u=l.length;return h=>{const f=h.split("/").filter(Boolean),m=f.length-u;if(m<0||m>0&&a===void 0&&!e)return null;const g={path:u?"":"/",params:{}},_=v=>n===void 0?void 0:n[v];for(let v=0;v<u;v++){const w=l[v],P=w[0]===":",b=P?f[v]:f[v].toLowerCase(),x=P?w.slice(1):w.toLowerCase();if(P&&io(b,_(x)))g.params[x]=b;else if(P||!io(b,x))return null;g.path+=`/${b}`}if(a){const v=m?f.slice(-m).join("/"):"";if(io(v,_(a)))g.params[a]=v;else return null}return g}}function io(i,e){const n=r=>r===i;return e===void 0?!0:typeof e=="string"?n(e):typeof e=="function"?e(i):Array.isArray(e)?e.some(n):e instanceof RegExp?e.test(i):!1}function Lp(i){const[e,n]=i.pattern.split("/*",2),r=e.split("/").filter(Boolean);return r.reduce((a,l)=>a+(l.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function Lh(i){const e=new Map,n=yh();return new Proxy({},{get(r,a){return e.has(a)||wh(n,()=>e.set(a,pe(()=>i()[a]))),e.get(a)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(i())}})}function Eh(i){let e=/(\/?\:[^\/]+)\?/.exec(i);if(!e)return[i];let n=i.slice(0,e.index),r=i.slice(e.index+e[0].length);const a=[n,n+=e[1]];for(;e=/^(\/\:[^\/]+)\?/.exec(r);)a.push(n+=e[1]),r=r.slice(e[0].length);return Eh(r).reduce((l,u)=>[...l,...a.map(h=>h+u)],[])}const Ep=100,Oh=ol(),hl=ol(),Rs=()=>kp(Os(Oh),"<A> and 'use' router primitives can be only used inside a Route."),Op=()=>Os(hl)||Rs().base,$p=i=>{const e=Op();return pe(()=>e.resolvePath(i()))},Mp=i=>{const e=Rs();return pe(()=>{const n=i();return n!==void 0?e.renderPath(n):n})},xt=()=>Rs().navigatorFactory(),Ip=()=>Rs().location;function Rp(i,e=""){const{component:n,preload:r,load:a,children:l,info:u}=i,h=!l||Array.isArray(l)&&!l.length,f={key:i,component:n,preload:r||a,info:u};return $h(i.path).reduce((m,g)=>{for(const _ of Eh(g)){const v=Cp(e,_);let w=h?v:v.split("/*",1)[0];w=w.split("/").map(P=>P.startsWith(":")||P.startsWith("*")?P:encodeURIComponent(P)).join("/"),m.push({...f,originalPath:g,pattern:w,matcher:Tp(w,!h,i.matchFilters)})}return m},[])}function qp(i,e=0){return{routes:i,score:Lp(i[i.length-1])*1e4-e,matcher(n){const r=[];for(let a=i.length-1;a>=0;a--){const l=i[a],u=l.matcher(n);if(!u)return null;r.unshift({...u,route:l})}return r}}}function $h(i){return Array.isArray(i)?i:[i]}function Mh(i,e="",n=[],r=[]){const a=$h(i);for(let l=0,u=a.length;l<u;l++){const h=a[l];if(h&&typeof h=="object"){h.hasOwnProperty("path")||(h.path="");const f=Rp(h,e);for(const m of f){n.push(m);const g=Array.isArray(h.children)&&h.children.length===0;if(h.children&&!g)Mh(h.children,m.pattern,n,r);else{const _=qp([...n],r.length);r.push(_)}n.pop()}}}return n.length?r:r.sort((l,u)=>u.score-l.score)}function ro(i,e){for(let n=0,r=i.length;n<r;n++){const a=i[n].matcher(e);if(a)return a}return[]}function jp(i,e,n){const r=new URL(Ch),a=pe(g=>{const _=i();try{return new URL(_,r)}catch{return console.error(`Invalid path ${_}`),g}},r,{equals:(g,_)=>g.href===_.href}),l=pe(()=>a().pathname),u=pe(()=>a().search,!0),h=pe(()=>a().hash),f=()=>"",m=al(u,()=>Th(a()));return{get pathname(){return l()},get search(){return u()},get hash(){return h()},get state(){return e()},get key(){return f()},query:n?n(m):Lh(m)}}let _n;function Dp(){return _n}function Bp(i,e,n,r={}){const{signal:[a,l],utils:u={}}=i,h=u.parsePath||(V=>V),f=u.renderPath||(V=>V),m=u.beforeLeave||kh(),g=cs("",r.base||"");if(g===void 0)throw new Error(`${g} is not a valid base path`);g&&!a().value&&l({value:g,replace:!0,scroll:!1});const[_,v]=K(!1);let w;const P=(V,X)=>{X.value===b()&&X.state===k()||(w===void 0&&v(!0),_n=V,w=X,Hm(()=>{w===X&&(x(w.value),A(w.state),$[1](Y=>Y.filter(Ae=>Ae.pending)))}).finally(()=>{w===X&&Wm(()=>{_n=void 0,V==="navigate"&&he(w),v(!1),w=void 0})}))},[b,x]=K(a().value),[k,A]=K(a().state),T=jp(b,k,u.queryWrapper),E=[],$=K([]),I=pe(()=>typeof r.transformUrl=="function"?ro(e(),r.transformUrl(T.pathname)):ro(e(),T.pathname)),D=()=>{const V=I(),X={};for(let Y=0;Y<V.length;Y++)Object.assign(X,V[Y].params);return X},j=u.paramsWrapper?u.paramsWrapper(D,e):Lh(D),z={pattern:g,path:()=>g,outlet:()=>null,resolvePath(V){return cs(g,V)}};return Ee(al(a,V=>P("native",V),{defer:!0})),{base:z,location:T,params:j,isRouting:_,renderPath:f,parsePath:h,navigatorFactory:F,matches:I,beforeLeave:m,preloadRoute:xe,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:$};function B(V,X,Y){Ge(()=>{if(typeof X=="number"){X&&(u.go?u.go(X):console.warn("Router integration does not support relative routing"));return}const Ae=!X||X[0]==="?",{replace:G,resolve:Ue,scroll:U,state:se}={replace:!1,resolve:!Ae,scroll:!0,...Y},ye=Ue?V.resolvePath(X):cs(Ae&&T.pathname||"",X);if(ye===void 0)throw new Error(`Path '${X}' is not a routable path`);if(E.length>=Ep)throw new Error("Too many redirects");const Pe=b();(ye!==Pe||se!==k())&&(bp||m.confirm(ye,Y)&&(E.push({value:Pe,replace:G,scroll:U,state:k()}),P("navigate",{value:ye,state:se})))})}function F(V){return V=V||Os(hl)||z,(X,Y)=>B(V,X,Y)}function he(V){const X=E[0];X&&(l({...V,replace:X.replace,scroll:X.scroll}),E.length=0)}function xe(V,X){const Y=ro(e(),V.pathname),Ae=_n;_n="preload";for(let G in Y){const{route:Ue,params:U}=Y[G];Ue.component&&Ue.component.preload&&Ue.component.preload();const{preload:se}=Ue;X&&se&&wh(n(),()=>se({params:U,location:{pathname:V.pathname,search:V.search,hash:V.hash,query:Th(V),state:null,key:""},intent:"preload"}))}_n=Ae}}function Np(i,e,n,r){const{base:a,location:l,params:u}=i,{pattern:h,component:f,preload:m}=r().route,g=pe(()=>r().path);f&&f.preload&&f.preload();const _=m?m({params:u,location:l,intent:_n||"initial"}):void 0;return{parent:e,pattern:h,path:g,outlet:()=>f?H(f,{params:u,location:l,data:_,get children(){return n()}}):n(),resolvePath(w){return cs(a.path(),w,g())}}}const zp=i=>e=>{const{base:n}=e,r=ll(()=>e.children),a=pe(()=>Mh(r(),e.base||""));let l;const u=Bp(i,a,()=>l,{base:n,singleFlight:e.singleFlight,transformUrl:e.transformUrl});return i.create&&i.create(u),H(Oh.Provider,{value:u,get children(){return H(Fp,{routerState:u,get root(){return e.root},get preload(){return e.rootPreload||e.rootLoad},get children(){return[pe(()=>(l=yh())&&null),H(Up,{routerState:u,get branches(){return a()}})]}})}})};function Fp(i){const e=i.routerState.location,n=i.routerState.params,r=pe(()=>i.preload&&Ge(()=>{i.preload({params:n,location:e,intent:Dp()||"initial"})}));return H(Ms,{get when(){return i.root},keyed:!0,get fallback(){return i.children},children:a=>H(a,{params:n,location:e,get data(){return r()},get children(){return i.children}})})}function Up(i){const e=[];let n;const r=pe(al(i.routerState.matches,(a,l,u)=>{let h=l&&a.length===l.length;const f=[];for(let m=0,g=a.length;m<g;m++){const _=l&&l[m],v=a[m];u&&_&&v.route.key===_.route.key?f[m]=u[m]:(h=!1,e[m]&&e[m](),Gi(w=>{e[m]=w,f[m]=Np(i.routerState,f[m-1]||i.routerState.base,Gu(()=>r()[m+1]),()=>i.routerState.matches()[m])}))}return e.splice(a.length).forEach(m=>m()),u&&h?u:(n=f[0],f)}));return Gu(()=>r()&&n)()}const Gu=i=>()=>H(Ms,{get when(){return i()},keyed:!0,children:e=>H(hl.Provider,{value:e,get children(){return e.outlet()}})}),lt=i=>{const e=ll(()=>i.children);return Ro(i,{get children(){return e()}})};function Zp([i,e],n,r){return[i,a=>e(r(a))]}function Wp(i){let e=!1;const n=a=>typeof a=="string"?{value:a}:a,r=Zp(K(n(i.get()),{equals:(a,l)=>a.value===l.value&&a.state===l.state}),void 0,a=>(!e&&i.set(a),a));return i.init&&Es(i.init((a=i.get())=>{e=!0,r[1](n(a)),e=!1})),zp({signal:r,create:i.create,utils:i.utils})}function Hp(i,e,n){return i.addEventListener(e,n),()=>i.removeEventListener(e,n)}function Kp(i,e){const n=i&&document.getElementById(i);n?n.scrollIntoView():e&&window.scrollTo(0,0)}const Gp=new Map;function Vp(i=!0,e=!1,n="/_server",r){return a=>{const l=a.base.path(),u=a.navigatorFactory(a.base);let h,f;function m(b){return b.namespaceURI==="http://www.w3.org/2000/svg"}function g(b){if(b.defaultPrevented||b.button!==0||b.metaKey||b.altKey||b.ctrlKey||b.shiftKey)return;const x=b.composedPath().find(I=>I instanceof Node&&I.nodeName.toUpperCase()==="A");if(!x||e&&!x.hasAttribute("link"))return;const k=m(x),A=k?x.href.baseVal:x.href;if((k?x.target.baseVal:x.target)||!A&&!x.hasAttribute("state"))return;const E=(x.getAttribute("rel")||"").split(/\s+/);if(x.hasAttribute("download")||E&&E.includes("external"))return;const $=k?new URL(A,document.baseURI):new URL(A);if(!($.origin!==window.location.origin||l&&$.pathname&&!$.pathname.toLowerCase().startsWith(l.toLowerCase())))return[x,$]}function _(b){const x=g(b);if(!x)return;const[k,A]=x,T=a.parsePath(A.pathname+A.search+A.hash),E=k.getAttribute("state");b.preventDefault(),u(T,{resolve:!1,replace:k.hasAttribute("replace"),scroll:!k.hasAttribute("noscroll"),state:E?JSON.parse(E):void 0})}function v(b){const x=g(b);if(!x)return;const[k,A]=x;a.preloadRoute(A,k.getAttribute("preload")!=="false")}function w(b){clearTimeout(h);const x=g(b);if(!x)return f=null;const[k,A]=x;f!==k&&(h=setTimeout(()=>{a.preloadRoute(A,k.getAttribute("preload")!=="false"),f=k},20))}function P(b){if(b.defaultPrevented)return;let x=b.submitter&&b.submitter.hasAttribute("formaction")?b.submitter.getAttribute("formaction"):b.target.getAttribute("action");if(!x)return;if(!x.startsWith("https://action/")){const A=new URL(x,Ch);if(x=a.parsePath(A.pathname+A.search),!x.startsWith(n))return}if(b.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const k=Gp.get(x);if(k){b.preventDefault();const A=new FormData(b.target,b.submitter);k.call({r:a,f:b.target},b.target.enctype==="multipart/form-data"?A:new URLSearchParams(A))}}ht(["click","submit"]),document.addEventListener("click",_),i&&(document.addEventListener("mousemove",w,{passive:!0}),document.addEventListener("focusin",v,{passive:!0}),document.addEventListener("touchstart",v,{passive:!0})),document.addEventListener("submit",P),Es(()=>{document.removeEventListener("click",_),i&&(document.removeEventListener("mousemove",w),document.removeEventListener("focusin",v),document.removeEventListener("touchstart",v)),document.removeEventListener("submit",P)})}}function Jp(i){const e=i.replace(/^.*?#/,"");if(!e.startsWith("/")){const[,n="/"]=window.location.hash.split("#",2);return`${n}#${e}`}return e}function Xp(i){const e=()=>window.location.hash.slice(1),n=kh();return Wp({get:e,set({value:r,replace:a,scroll:l,state:u}){a?window.history.replaceState(xp(u),"","#"+r):window.history.pushState(u,"","#"+r);const h=r.indexOf("#"),f=h>=0?r.slice(h+1):"";Kp(f,l),cl()},init:r=>Hp(window,"hashchange",Ap(r,a=>!n.confirm(a&&a<0?a:e()))),create:Vp(i.preload,i.explicitLinks,i.actionBase),utils:{go:r=>window.history.go(r),renderPath:r=>`#${r}`,parsePath:Jp,beforeLeave:n}})(i)}var Yp=te("<a>");function Do(i){i=Ro({inactiveClass:"inactive",activeClass:"active"},i);const[,e]=tp(i,["href","state","class","activeClass","inactiveClass","end"]),n=$p(()=>i.href),r=Mp(n),a=Ip(),l=pe(()=>{const u=n();if(u===void 0)return[!1,!1];const h=bn(u.split(/[?#]/,1)[0]).toLowerCase(),f=decodeURI(bn(a.pathname).toLowerCase());return[i.end?h===f:f.startsWith(h+"/")||f===h,h===f]});return(()=>{var u=Yp();return gp(u,Ro(e,{get href(){return r()||i.href},get state(){return JSON.stringify(i.state)},get classList(){return{...i.class&&{[i.class]:!0},[i.inactiveClass]:!l()[0],[i.activeClass]:l()[0],...e.classList}},link:"",get"aria-current"(){return l()[1]?"page":void 0}}),!1),u})()}const Qp="modulepreload",eg=function(i){return"/ZavrsniV2/"+i},Vu={},ii=function(e,n,r){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=u?.nonce||u?.getAttribute("nonce");a=Promise.allSettled(n.map(f=>{if(f=eg(f),f in Vu)return;Vu[f]=!0;const m=f.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const _=document.createElement("link");if(_.rel=m?"stylesheet":Qp,m||(_.as="script"),_.crossOrigin="",_.href=f,h&&_.setAttribute("nonce",h),document.head.appendChild(_),m)return new Promise((v,w)=>{_.addEventListener("load",v),_.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${f}`)))})}))}function l(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return a.then(u=>{for(const h of u||[])h.status==="rejected"&&l(h.reason);return e().catch(l)})},tg=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...n)=>ii(async()=>{const{default:r}=await Promise.resolve().then(()=>oi);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class dl extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class ng extends dl{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ig extends dl{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class rg extends dl{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Bo;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(Bo||(Bo={}));var sg=function(i,e,n,r){function a(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function h(g){try{m(r.next(g))}catch(_){u(_)}}function f(g){try{m(r.throw(g))}catch(_){u(_)}}function m(g){g.done?l(g.value):a(g.value).then(h,f)}m((r=r.apply(i,e||[])).next())})};class ag{constructor(e,{headers:n={},customFetch:r,region:a=Bo.Any}={}){this.url=e,this.headers=n,this.region=a,this.fetch=tg(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return sg(this,void 0,void 0,function*(){try{const{headers:a,method:l,body:u}=n;let h={},{region:f}=n;f||(f=this.region),f&&f!=="any"&&(h["x-region"]=f);let m;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",m=u):typeof u=="string"?(h["Content-Type"]="text/plain",m=u):typeof FormData<"u"&&u instanceof FormData?m=u:(h["Content-Type"]="application/json",m=JSON.stringify(u)));const g=yield this.fetch(`${this.url}/${e}`,{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),a),body:m}).catch(P=>{throw new ng(P)}),_=g.headers.get("x-relay-error");if(_&&_==="true")throw new ig(g);if(!g.ok)throw new rg(g);let v=((r=g.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),w;return v==="application/json"?w=yield g.json():v==="application/octet-stream"?w=yield g.blob():v==="text/event-stream"?w=g:v==="multipart/form-data"?w=yield g.formData():w=yield g.text(),{data:w,error:null}}catch(a){return{data:null,error:a}}})}}var nt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function og(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function lg(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(i).forEach(function(r){var a=Object.getOwnPropertyDescriptor(i,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return i[r]}})}),n}var Ke={},fl={},qs={},rr={},js={},Ds={},ug=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ri=ug();const cg=ri.fetch,Ih=ri.fetch.bind(ri),Rh=ri.Headers,hg=ri.Request,dg=ri.Response,oi=Object.freeze(Object.defineProperty({__proto__:null,Headers:Rh,Request:hg,Response:dg,default:Ih,fetch:cg},Symbol.toStringTag,{value:"Module"})),fg=lg(oi);var Bs={};Object.defineProperty(Bs,"__esModule",{value:!0});let mg=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Bs.default=mg;var qh=nt&&nt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ds,"__esModule",{value:!0});const pg=qh(fg),gg=qh(Bs);let _g=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=pg.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let a=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var u,h,f;let m=null,g=null,_=null,v=l.status,w=l.statusText;if(l.ok){if(this.method!=="HEAD"){const k=await l.text();k===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?g=k:g=JSON.parse(k))}const b=(u=this.headers.Prefer)===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),x=(h=l.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");b&&x&&x.length>1&&(_=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(m={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,_=null,v=406,w="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const b=await l.text();try{m=JSON.parse(b),Array.isArray(m)&&l.status===404&&(g=[],m=null,v=200,w="OK")}catch{l.status===404&&b===""?(v=204,w="No Content"):m={message:b}}if(m&&this.isMaybeSingle&&(!((f=m?.details)===null||f===void 0)&&f.includes("0 rows"))&&(m=null,v=200,w="OK"),m&&this.shouldThrowOnError)throw new gg.default(m)}return{error:m,data:g,count:_,status:v,statusText:w}});return this.shouldThrowOnError||(a=a.catch(l=>{var u,h,f;return{error:{message:`${(u=l?.name)!==null&&u!==void 0?u:"FetchError"}: ${l?.message}`,details:`${(h=l?.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(f=l?.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),a.then(e,n)}};Ds.default=_g;var vg=nt&&nt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(js,"__esModule",{value:!0});const yg=vg(Ds);let wg=class extends yg.default{select(e){let n=!1;const r=(e??"*").split("").map(a=>/\s/.test(a)&&!n?"":(a==='"'&&(n=!n),a)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.order`:"order",h=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${h?`${h},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:a=r}={}){const l=typeof a>"u"?"offset":`${a}.offset`,u=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${e}`),this.url.searchParams.set(u,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:a=!1,wal:l=!1,format:u="text"}={}){var h;const f=[e?"analyze":null,n?"verbose":null,r?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),m=(h=this.headers.Accept)!==null&&h!==void 0?h:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${m}"; options=${f};`,u==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};js.default=wg;var bg=nt&&nt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(rr,"__esModule",{value:!0});const xg=bg(js);let Ag=class extends xg.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const u=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${l}fts${u}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const a=r?`${r}.or`:"or";return this.url.searchParams.append(a,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};rr.default=Ag;var Pg=nt&&nt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(qs,"__esModule",{value:!0});const ji=Pg(rr);let Sg=class{constructor(e,{headers:n={},schema:r,fetch:a}){this.url=e,this.headers=n,this.schema=r,this.fetch=a}select(e,{head:n=!1,count:r}={}){const a=n?"HEAD":"GET";let l=!1;const u=(e??"*").split("").map(h=>/\s/.test(h)&&!l?"":(h==='"'&&(l=!l),h)).join("");return this.url.searchParams.set("select",u),r&&(this.headers.Prefer=`count=${r}`),new ji.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const a="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),r||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const u=e.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(u.length>0){const h=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new ji.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:a,defaultToNull:l=!0}={}){const u="POST",h=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&h.push(this.headers.Prefer),a&&h.push(`count=${a}`),l||h.push("missing=default"),this.headers.Prefer=h.join(","),Array.isArray(e)){const f=e.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(f.length>0){const m=[...new Set(f)].map(g=>`"${g}"`);this.url.searchParams.set("columns",m.join(","))}}return new ji.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),this.headers.Prefer=a.join(","),new ji.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new ji.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};qs.default=Sg;var Ns={},zs={};Object.defineProperty(zs,"__esModule",{value:!0});zs.version=void 0;zs.version="0.0.0-automated";Object.defineProperty(Ns,"__esModule",{value:!0});Ns.DEFAULT_HEADERS=void 0;const kg=zs;Ns.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${kg.version}`};var jh=nt&&nt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(fl,"__esModule",{value:!0});const Cg=jh(qs),Tg=jh(rr),Lg=Ns;let Eg=class Dh{constructor(e,{headers:n={},schema:r,fetch:a}={}){this.url=e,this.headers=Object.assign(Object.assign({},Lg.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=a}from(e){const n=new URL(`${this.url}/${e}`);return new Cg.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Dh(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:a=!1,count:l}={}){let u;const h=new URL(`${this.url}/rpc/${e}`);let f;r||a?(u=r?"HEAD":"GET",Object.entries(n).filter(([g,_])=>_!==void 0).map(([g,_])=>[g,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([g,_])=>{h.searchParams.append(g,_)})):(u="POST",f=n);const m=Object.assign({},this.headers);return l&&(m.Prefer=`count=${l}`),new Tg.default({method:u,url:h,headers:m,schema:this.schemaName,body:f,fetch:this.fetch,allowEmpty:!1})}};fl.default=Eg;var li=nt&&nt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.PostgrestError=Ke.PostgrestBuilder=Ke.PostgrestTransformBuilder=Ke.PostgrestFilterBuilder=Ke.PostgrestQueryBuilder=Ke.PostgrestClient=void 0;const Bh=li(fl);Ke.PostgrestClient=Bh.default;const Nh=li(qs);Ke.PostgrestQueryBuilder=Nh.default;const zh=li(rr);Ke.PostgrestFilterBuilder=zh.default;const Fh=li(js);Ke.PostgrestTransformBuilder=Fh.default;const Uh=li(Ds);Ke.PostgrestBuilder=Uh.default;const Zh=li(Bs);Ke.PostgrestError=Zh.default;var Og=Ke.default={PostgrestClient:Bh.default,PostgrestQueryBuilder:Nh.default,PostgrestFilterBuilder:zh.default,PostgrestTransformBuilder:Fh.default,PostgrestBuilder:Uh.default,PostgrestError:Zh.default};const{PostgrestClient:$g,PostgrestQueryBuilder:nA,PostgrestFilterBuilder:iA,PostgrestTransformBuilder:rA,PostgrestBuilder:sA,PostgrestError:aA}=Og,Mg="2.11.2",Ig={"X-Client-Info":`realtime-js/${Mg}`},Rg="1.0.0",Wh=1e4,qg=1e3;var Qn;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(Qn||(Qn={}));var Qe;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(Qe||(Qe={}));var vt;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(vt||(vt={}));var No;(function(i){i.websocket="websocket"})(No||(No={}));var vn;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(vn||(vn={}));class jg{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const a=n.getUint8(1),l=n.getUint8(2);let u=this.HEADER_LENGTH+2;const h=r.decode(e.slice(u,u+a));u=u+a;const f=r.decode(e.slice(u,u+l));u=u+l;const m=JSON.parse(r.decode(e.slice(u,e.byteLength)));return{ref:null,topic:h,event:f,payload:m}}}class Hh{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var be;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(be||(be={}));const Ju=(i,e,n={})=>{var r;const a=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((l,u)=>(l[u]=Dg(u,i,e,a),l),{})},Dg=(i,e,n,r)=>{const a=e.find(h=>h.name===i),l=a?.type,u=n[i];return l&&!r.includes(l)?Kh(l,u):zo(u)},Kh=(i,e)=>{if(i.charAt(0)==="_"){const n=i.slice(1,i.length);return Fg(e,n)}switch(i){case be.bool:return Bg(e);case be.float4:case be.float8:case be.int2:case be.int4:case be.int8:case be.numeric:case be.oid:return Ng(e);case be.json:case be.jsonb:return zg(e);case be.timestamp:return Ug(e);case be.abstime:case be.date:case be.daterange:case be.int4range:case be.int8range:case be.money:case be.reltime:case be.text:case be.time:case be.timestamptz:case be.timetz:case be.tsrange:case be.tstzrange:return zo(e);default:return zo(e)}},zo=i=>i,Bg=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},Ng=i=>{if(typeof i=="string"){const e=parseFloat(i);if(!Number.isNaN(e))return e}return i},zg=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(e){return console.log(`JSON parse error: ${e}`),i}return i},Fg=(i,e)=>{if(typeof i!="string")return i;const n=i.length-1,r=i[n];if(i[0]==="{"&&r==="}"){let l;const u=i.slice(1,n);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(h=>Kh(e,h))}return i},Ug=i=>typeof i=="string"?i.replace(" ","T"):i,Gh=i=>{let e=i;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class so{constructor(e,n,r={},a=Wh){this.channel=e,this.event=n,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Xu;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(Xu||(Xu={}));class Vi{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:l,onLeave:u,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Vi.syncState(this.state,a,l,u),this.pendingDiffs.forEach(f=>{this.state=Vi.syncDiff(this.state,f,l,u)}),this.pendingDiffs=[],h()}),this.channel._on(r.diff,{},a=>{const{onJoin:l,onLeave:u,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Vi.syncDiff(this.state,a,l,u),h())}),this.onJoin((a,l,u)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:u})}),this.onLeave((a,l,u)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,a){const l=this.cloneDeep(e),u=this.transformState(n),h={},f={};return this.map(l,(m,g)=>{u[m]||(f[m]=g)}),this.map(u,(m,g)=>{const _=l[m];if(_){const v=g.map(x=>x.presence_ref),w=_.map(x=>x.presence_ref),P=g.filter(x=>w.indexOf(x.presence_ref)<0),b=_.filter(x=>v.indexOf(x.presence_ref)<0);P.length>0&&(h[m]=P),b.length>0&&(f[m]=b)}else h[m]=g}),this.syncDiff(l,{joins:h,leaves:f},r,a)}static syncDiff(e,n,r,a){const{joins:l,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(l,(h,f)=>{var m;const g=(m=e[h])!==null&&m!==void 0?m:[];if(e[h]=this.cloneDeep(f),g.length>0){const _=e[h].map(w=>w.presence_ref),v=g.filter(w=>_.indexOf(w.presence_ref)<0);e[h].unshift(...v)}r(h,g,f)}),this.map(u,(h,f)=>{let m=e[h];if(!m)return;const g=f.map(_=>_.presence_ref);m=m.filter(_=>g.indexOf(_.presence_ref)<0),e[h]=m,a(h,m,f),m.length===0&&delete e[h]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const a=e[r];return"metas"in a?n[r]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[r]=a,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Yu;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(Yu||(Yu={}));var Qu;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(Qu||(Qu={}));var Ut;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(Ut||(Ut={}));class ml{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Qe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new so(this,vt.join,this.params,this.timeout),this.rejoinTimer=new Hh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Qe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Qe.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Qe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Qe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(vt.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new Vi(this),this.broadcastEndpointURL=Gh(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,a;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:l,presence:u,private:h}}=this.params;this._onError(g=>e?.(Ut.CHANNEL_ERROR,g)),this._onClose(()=>e?.(Ut.CLOSED));const f={},m={broadcast:l,presence:u,postgres_changes:(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&a!==void 0?a:[],private:h};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:m},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var _;if(this.socket.setAuth(),g===void 0){e?.(Ut.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,w=(_=v?.length)!==null&&_!==void 0?_:0,P=[];for(let b=0;b<w;b++){const x=v[b],{filter:{event:k,schema:A,table:T,filter:E}}=x,$=g&&g[b];if($&&$.event===k&&$.schema===A&&$.table===T&&$.filter===E)P.push(Object.assign(Object.assign({},x),{id:$.id}));else{this.unsubscribe(),e?.(Ut.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=P,e&&e(Ut.SUBSCRIBED);return}}).receive("error",g=>{e?.(Ut.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e?.(Ut.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,a;if(!this._canPush()&&e.type==="broadcast"){const{event:l,payload:u}=e,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=m.body)===null||a===void 0?void 0:a.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,h,f;const m=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(h=(u=this.params)===null||u===void 0?void 0:u.config)===null||h===void 0?void 0:h.broadcast)===null||f===void 0)&&f.ack)&&l("ok"),m.receive("ok",()=>l("ok")),m.receive("error",()=>l("error")),m.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Qe.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(vt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const a=new so(this,vt.leave,{},e);a.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),a.send(),this._canPush()||a.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const a=new AbortController,l=setTimeout(()=>a.abort(),r),u=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(l),u}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new so(this,e,n,r);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var a,l;const u=e.toLocaleLowerCase(),{close:h,error:f,leave:m,join:g}=vt;if(r&&[h,f,m,g].indexOf(u)>=0&&r!==this._joinRef())return;let v=this._onMessage(u,n,r);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(w=>{var P,b,x;return((P=w.filter)===null||P===void 0?void 0:P.event)==="*"||((x=(b=w.filter)===null||b===void 0?void 0:b.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===u}).map(w=>w.callback(v,r)):(l=this.bindings[u])===null||l===void 0||l.filter(w=>{var P,b,x,k,A,T;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in w){const E=w.id,$=(P=w.filter)===null||P===void 0?void 0:P.event;return E&&((b=n.ids)===null||b===void 0?void 0:b.includes(E))&&($==="*"||$?.toLocaleLowerCase()===((x=n.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const E=(A=(k=w?.filter)===null||k===void 0?void 0:k.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return E==="*"||E===((T=n?.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===u}).map(w=>{if(typeof v=="object"&&"ids"in v){const P=v.data,{schema:b,table:x,commit_timestamp:k,type:A,errors:T}=P;v=Object.assign(Object.assign({},{schema:b,table:x,commit_timestamp:k,eventType:A,new:{},old:{},errors:T}),this._getPayloadRecords(P))}w.callback(v,r)})}_isClosed(){return this.state===Qe.closed}_isJoined(){return this.state===Qe.joined}_isJoining(){return this.state===Qe.joining}_isLeaving(){return this.state===Qe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const a=e.toLocaleLowerCase(),l={type:a,filter:n,callback:r};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===r&&ml.isEqual(a.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(vt.close,{},e)}_onError(e){this._on(vt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Qe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Ju(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Ju(e.columns,e.old_record)),n}}const Zg=()=>{},Wg=typeof WebSocket<"u",Hg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Kg{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Ig,this.params={},this.timeout=Wh,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Zg,this.conn=null,this.sendBuffer=[],this.serializer=new jg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=l=>{let u;return l?u=l:typeof fetch>"u"?u=(...h)=>ii(async()=>{const{default:f}=await Promise.resolve().then(()=>oi);return{default:f}},void 0).then(({default:f})=>f(...h)):u=fetch,(...h)=>u(...h)},this.endPoint=`${e}/${No.websocket}`,this.httpEndpoint=Gh(e),n?.transport?this.transport=n.transport:this.transport=null,n?.params&&(this.params=n.params),n?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n?.timeout&&(this.timeout=n.timeout),n?.logger&&(this.logger=n.logger),n?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const a=(r=n?.params)===null||r===void 0?void 0:r.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=n?.reconnectAfterMs?n.reconnectAfterMs:l=>[1e3,2e3,5e3,1e4][l-1]||1e4,this.encode=n?.encode?n.encode:(l,u)=>u(JSON.stringify(l)),this.decode=n?.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Hh(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n?.fetch),n?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=n?.worker||!1,this.workerUrl=n?.workerUrl}this.accessToken=n?.accessToken||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(Wg){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new Gg(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),ii(async()=>{const{default:e}=await import("./browser-dPWypWty.js").then(n=>n.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Rg}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Qn.connecting:return vn.Connecting;case Qn.open:return vn.Open;case Qn.closing:return vn.Closing;default:return vn.Closed}}isConnected(){return this.connectionState()===vn.Open}channel(e,n={config:{}}){const r=new ml(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:a,ref:l}=e,u=()=>{this.encode(e,h=>{var f;(f=this.conn)===null||f===void 0||f.send(h)})};this.log("push",`${n} ${r} (${l})`,a),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(a=>{n&&a.updateJoinPayload({access_token:n}),a.joinedOnce&&a._isJoined()&&a._push(vt.access_token,{access_token:n})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(qg,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:a,payload:l,ref:u}=n;u&&u===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${l.status||""} ${r} ${a} ${u&&"("+u+")"||""}`,l),this.channels.filter(h=>h._isMember(r)).forEach(h=>h._trigger(a,l,u)),this.stateChangeCallbacks.message.forEach(h=>h(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(vt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${e}${r}${a}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([Hg],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class Gg{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Qn.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class pl extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Re(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class Vg extends pl{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Fo extends pl{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Jg=function(i,e,n,r){function a(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function h(g){try{m(r.next(g))}catch(_){u(_)}}function f(g){try{m(r.throw(g))}catch(_){u(_)}}function m(g){g.done?l(g.value):a(g.value).then(h,f)}m((r=r.apply(i,e||[])).next())})};const Vh=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...n)=>ii(async()=>{const{default:r}=await Promise.resolve().then(()=>oi);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Xg=()=>Jg(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ii(()=>Promise.resolve().then(()=>oi),void 0)).Response:Response}),Uo=i=>{if(Array.isArray(i))return i.map(n=>Uo(n));if(typeof i=="function"||i!==Object(i))return i;const e={};return Object.entries(i).forEach(([n,r])=>{const a=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=Uo(r)}),e};var xn=function(i,e,n,r){function a(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function h(g){try{m(r.next(g))}catch(_){u(_)}}function f(g){try{m(r.throw(g))}catch(_){u(_)}}function m(g){g.done?l(g.value):a(g.value).then(h,f)}m((r=r.apply(i,e||[])).next())})};const ao=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Yg=(i,e,n)=>xn(void 0,void 0,void 0,function*(){const r=yield Xg();i instanceof r&&!n?.noResolveJson?i.json().then(a=>{e(new Vg(ao(a),i.status||500))}).catch(a=>{e(new Fo(ao(a),a))}):e(new Fo(ao(i),i))}),Qg=(i,e,n,r)=>{const a={method:i,headers:e?.headers||{}};return i==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),r&&(a.body=JSON.stringify(r)),Object.assign(Object.assign({},a),n))};function sr(i,e,n,r,a,l){return xn(this,void 0,void 0,function*(){return new Promise((u,h)=>{i(n,Qg(e,r,a,l)).then(f=>{if(!f.ok)throw f;return r?.noResolveJson?f:f.json()}).then(f=>u(f)).catch(f=>Yg(f,h,r))})})}function As(i,e,n,r){return xn(this,void 0,void 0,function*(){return sr(i,"GET",e,n,r)})}function en(i,e,n,r,a){return xn(this,void 0,void 0,function*(){return sr(i,"POST",e,r,a,n)})}function e_(i,e,n,r,a){return xn(this,void 0,void 0,function*(){return sr(i,"PUT",e,r,a,n)})}function t_(i,e,n,r){return xn(this,void 0,void 0,function*(){return sr(i,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Jh(i,e,n,r,a){return xn(this,void 0,void 0,function*(){return sr(i,"DELETE",e,r,a,n)})}var We=function(i,e,n,r){function a(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function h(g){try{m(r.next(g))}catch(_){u(_)}}function f(g){try{m(r.throw(g))}catch(_){u(_)}}function m(g){g.done?l(g.value):a(g.value).then(h,f)}m((r=r.apply(i,e||[])).next())})};const n_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ec={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class i_{constructor(e,n={},r,a){this.url=e,this.headers=n,this.bucketId=r,this.fetch=Vh(a)}uploadOrUpdate(e,n,r,a){return We(this,void 0,void 0,function*(){try{let l;const u=Object.assign(Object.assign({},ec),a);let h=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const f=u.metadata;typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),f&&l.append("metadata",this.encodeMetadata(f)),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl),f&&l.append("metadata",this.encodeMetadata(f))):(l=r,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType,f&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),a?.headers&&(h=Object.assign(Object.assign({},h),a.headers));const m=this._removeEmptyFolders(n),g=this._getFinalPath(m),_=yield this.fetch(`${this.url}/object/${g}`,Object.assign({method:e,body:l,headers:h},u?.duplex?{duplex:u.duplex}:{})),v=yield _.json();return _.ok?{data:{path:m,id:v.Id,fullPath:v.Key},error:null}:{data:null,error:v}}catch(l){if(Re(l))return{data:null,error:l};throw l}})}upload(e,n,r){return We(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,a){return We(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),u=this._getFinalPath(l),h=new URL(this.url+`/object/upload/sign/${u}`);h.searchParams.set("token",n);try{let f;const m=Object.assign({upsert:ec.upsert},a),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&r instanceof Blob?(f=new FormData,f.append("cacheControl",m.cacheControl),f.append("",r)):typeof FormData<"u"&&r instanceof FormData?(f=r,f.append("cacheControl",m.cacheControl)):(f=r,g["cache-control"]=`max-age=${m.cacheControl}`,g["content-type"]=m.contentType);const _=yield this.fetch(h.toString(),{method:"PUT",body:f,headers:g}),v=yield _.json();return _.ok?{data:{path:l,fullPath:v.Key},error:null}:{data:null,error:v}}catch(f){if(Re(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(e,n){return We(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const a=Object.assign({},this.headers);n?.upsert&&(a["x-upsert"]="true");const l=yield en(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),u=new URL(this.url+l.url),h=u.searchParams.get("token");if(!h)throw new pl("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:h},error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}})}update(e,n,r){return We(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return We(this,void 0,void 0,function*(){try{return{data:yield en(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(Re(a))return{data:null,error:a};throw a}})}copy(e,n,r){return We(this,void 0,void 0,function*(){try{return{data:{path:(yield en(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(Re(a))return{data:null,error:a};throw a}})}createSignedUrl(e,n,r){return We(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),l=yield en(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const u=r?.download?`&download=${r.download===!0?"":r.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${u}`)},{data:l,error:null}}catch(a){if(Re(a))return{data:null,error:a};throw a}})}createSignedUrls(e,n,r){return We(this,void 0,void 0,function*(){try{const a=yield en(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),l=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${l}`):null})),error:null}}catch(a){if(Re(a))return{data:null,error:a};throw a}})}download(e,n){return We(this,void 0,void 0,function*(){const a=typeof n?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(n?.transform||{}),u=l?`?${l}`:"";try{const h=this._getFinalPath(e);return{data:yield(yield As(this.fetch,`${this.url}/${a}/${h}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(h){if(Re(h))return{data:null,error:h};throw h}})}info(e){return We(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield As(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Uo(r),error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}})}exists(e){return We(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield t_(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Re(r)&&r instanceof Fo){const a=r.originalError;if([400,404].includes(a?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),a=[],l=n?.download?`download=${n.download===!0?"":n.download}`:"";l!==""&&a.push(l);const h=typeof n?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(n?.transform||{});f!==""&&a.push(f);let m=a.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${r}${m}`)}}}remove(e){return We(this,void 0,void 0,function*(){try{return{data:yield Jh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}})}list(e,n,r){return We(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},n_),n),{prefix:e||""});return{data:yield en(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(Re(a))return{data:null,error:a};throw a}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const r_="2.7.1",s_={"X-Client-Info":`storage-js/${r_}`};var Nn=function(i,e,n,r){function a(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function h(g){try{m(r.next(g))}catch(_){u(_)}}function f(g){try{m(r.throw(g))}catch(_){u(_)}}function m(g){g.done?l(g.value):a(g.value).then(h,f)}m((r=r.apply(i,e||[])).next())})};class a_{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},s_),n),this.fetch=Vh(r)}listBuckets(){return Nn(this,void 0,void 0,function*(){try{return{data:yield As(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Re(e))return{data:null,error:e};throw e}})}getBucket(e){return Nn(this,void 0,void 0,function*(){try{return{data:yield As(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Nn(this,void 0,void 0,function*(){try{return{data:yield en(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Nn(this,void 0,void 0,function*(){try{return{data:yield e_(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Nn(this,void 0,void 0,function*(){try{return{data:yield en(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Nn(this,void 0,void 0,function*(){try{return{data:yield Jh(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}})}}class o_ extends a_{constructor(e,n={},r){super(e,n,r)}from(e){return new i_(this.url,this.headers,e,this.fetch)}}const l_="2.47.14";let Ni="";typeof Deno<"u"?Ni="deno":typeof document<"u"?Ni="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ni="react-native":Ni="node";const u_={"X-Client-Info":`supabase-js-${Ni}/${l_}`},c_={headers:u_},h_={schema:"public"},d_={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},f_={};var m_=function(i,e,n,r){function a(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function h(g){try{m(r.next(g))}catch(_){u(_)}}function f(g){try{m(r.throw(g))}catch(_){u(_)}}function m(g){g.done?l(g.value):a(g.value).then(h,f)}m((r=r.apply(i,e||[])).next())})};const p_=i=>{let e;return i?e=i:typeof fetch>"u"?e=Ih:e=fetch,(...n)=>e(...n)},g_=()=>typeof Headers>"u"?Rh:Headers,__=(i,e,n)=>{const r=p_(n),a=g_();return(l,u)=>m_(void 0,void 0,void 0,function*(){var h;const f=(h=yield e())!==null&&h!==void 0?h:i;let m=new a(u?.headers);return m.has("apikey")||m.set("apikey",i),m.has("Authorization")||m.set("Authorization",`Bearer ${f}`),r(l,Object.assign(Object.assign({},u),{headers:m}))})};var v_=function(i,e,n,r){function a(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function h(g){try{m(r.next(g))}catch(_){u(_)}}function f(g){try{m(r.throw(g))}catch(_){u(_)}}function m(g){g.done?l(g.value):a(g.value).then(h,f)}m((r=r.apply(i,e||[])).next())})};function y_(i){return i.replace(/\/$/,"")}function w_(i,e){const{db:n,auth:r,realtime:a,global:l}=i,{db:u,auth:h,realtime:f,global:m}=e,g={db:Object.assign(Object.assign({},u),n),auth:Object.assign(Object.assign({},h),r),realtime:Object.assign(Object.assign({},f),a),global:Object.assign(Object.assign({},m),l),accessToken:()=>v_(this,void 0,void 0,function*(){return""})};return i.accessToken?g.accessToken=i.accessToken:delete g.accessToken,g}const Xh="2.67.3",b_="http://localhost:9999",x_="supabase.auth.token",A_={"X-Client-Info":`gotrue-js/${Xh}`},tc=10,Zo="X-Supabase-Api-Version",Yh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function P_(i){return Math.round(Date.now()/1e3)+i}function S_(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){const e=Math.random()*16|0;return(i=="x"?e:e&3|8).toString(16)})}const Tt=()=>typeof window<"u"&&typeof document<"u",mn={tested:!1,writable:!1},Ji=()=>{if(!Tt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(mn.tested)return mn.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),mn.tested=!0,mn.writable=!0}catch{mn.tested=!0,mn.writable=!1}return mn.writable};function k_(i){const e={},n=new URL(i);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return n.searchParams.forEach((r,a)=>{e[a]=r}),e}const Qh=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...n)=>ii(async()=>{const{default:r}=await Promise.resolve().then(()=>oi);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},C_=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",ed=async(i,e,n)=>{await i.setItem(e,JSON.stringify(n))},Hr=async(i,e)=>{const n=await i.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Kr=async(i,e)=>{await i.removeItem(e)};function T_(i){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,a,l,u,h,f,m,g=0;for(i=i.replace("-","+").replace("_","/");g<i.length;)u=e.indexOf(i.charAt(g++)),h=e.indexOf(i.charAt(g++)),f=e.indexOf(i.charAt(g++)),m=e.indexOf(i.charAt(g++)),r=u<<2|h>>4,a=(h&15)<<4|f>>2,l=(f&3)<<6|m,n=n+String.fromCharCode(r),f!=64&&a!=0&&(n=n+String.fromCharCode(a)),m!=64&&l!=0&&(n=n+String.fromCharCode(l));return n}class Fs{constructor(){this.promise=new Fs.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Fs.promiseConstructor=Promise;function nc(i){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=i.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(T_(r))}async function L_(i){return await new Promise(e=>{setTimeout(()=>e(null),i)})}function E_(i,e){return new Promise((r,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await i(l);if(!e(l,null,u)){r(u);return}}catch(u){if(!e(l,u)){a(u);return}}})()})}function O_(i){return("0"+i.toString(16)).substr(-2)}function $_(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let a="";for(let l=0;l<56;l++)a+=n.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(e),Array.from(e,O_).join("")}async function M_(i){const n=new TextEncoder().encode(i),r=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(r);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}function I_(i){return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function R_(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const n=await M_(i);return I_(n)}async function zn(i,e,n=!1){const r=$_();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await ed(i,`${e}-code-verifier`,a);const l=await R_(r);return[l,r===l?"plain":"s256"]}const q_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function j_(i){const e=i.headers.get(Zo);if(!e||!e.match(q_))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}let gl=class extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}};function ie(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class D_ extends gl{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function B_(i){return ie(i)&&i.name==="AuthApiError"}class td extends gl{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class An extends gl{constructor(e,n,r,a){super(e,r,a),this.name=n,this.status=r}}class Yt extends An{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function N_(i){return ie(i)&&i.name==="AuthSessionMissingError"}class oo extends An{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Gr extends An{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Vr extends An{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function z_(i){return ie(i)&&i.name==="AuthImplicitGrantRedirectError"}class ic extends An{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Wo extends An{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function lo(i){return ie(i)&&i.name==="AuthRetryableFetchError"}class rc extends An{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var F_=function(i,e){var n={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(n[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(i);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(i,r[a])&&(n[r[a]]=i[r[a]]);return n};const gn=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),U_=[502,503,504];async function sc(i){var e;if(!C_(i))throw new Wo(gn(i),0);if(U_.includes(i.status))throw new Wo(gn(i),i.status);let n;try{n=await i.json()}catch(l){throw new td(gn(l),l)}let r;const a=j_(i);if(a&&a.getTime()>=Yh["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new rc(gn(n),i.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Yt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new rc(gn(n),i.status,n.weak_password.reasons);throw new D_(gn(n),i.status||500,r)}const Z_=(i,e,n,r)=>{const a={method:i,headers:e?.headers||{}};return i==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))};async function le(i,e,n,r){var a;const l=Object.assign({},r?.headers);l[Zo]||(l[Zo]=Yh["2024-01-01"].name),r?.jwt&&(l.Authorization=`Bearer ${r.jwt}`);const u=(a=r?.query)!==null&&a!==void 0?a:{};r?.redirectTo&&(u.redirect_to=r.redirectTo);const h=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",f=await W_(i,e,n+h,{headers:l,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(f):{data:Object.assign({},f),error:null}}async function W_(i,e,n,r,a,l){const u=Z_(e,r,a,l);let h;try{h=await i(n,Object.assign({},u))}catch(f){throw console.error(f),new Wo(gn(f),0)}if(h.ok||await sc(h),r?.noResolveJson)return h;try{return await h.json()}catch(f){await sc(f)}}function Qt(i){var e;let n=null;V_(i)&&(n=Object.assign({},i),i.expires_at||(n.expires_at=P_(i.expires_in)));const r=(e=i.user)!==null&&e!==void 0?e:i;return{data:{session:n,user:r},error:null}}function ac(i){const e=Qt(i);return!e.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=i.weak_password),e}function nn(i){var e;return{data:{user:(e=i.user)!==null&&e!==void 0?e:i},error:null}}function H_(i){return{data:i,error:null}}function K_(i){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:a,verification_type:l}=i,u=F_(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:n,hashed_token:r,redirect_to:a,verification_type:l},f=Object.assign({},u);return{data:{properties:h,user:f},error:null}}function G_(i){return i}function V_(i){return i.access_token&&i.refresh_token&&i.expires_in}var J_=function(i,e){var n={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(n[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(i);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(i,r[a])&&(n[r[a]]=i[r[a]]);return n};class X_{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Qh(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await le(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ie(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await le(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:nn})}catch(r){if(ie(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=J_(e,["options"]),a=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(a.new_email=r?.newEmail,delete a.newEmail),await le(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:K_,redirectTo:n?.redirectTo})}catch(n){if(ie(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await le(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:nn})}catch(n){if(ie(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,a,l,u,h,f;try{const m={nextPage:null,lastPage:0,total:0},g=await le(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(l=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:G_});if(g.error)throw g.error;const _=await g.json(),v=(u=g.headers.get("x-total-count"))!==null&&u!==void 0?u:0,w=(f=(h=g.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&f!==void 0?f:[];return w.length>0&&(w.forEach(P=>{const b=parseInt(P.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(P.split(";")[1].split("=")[1]);m[`${x}Page`]=b}),m.total=parseInt(v)),{data:Object.assign(Object.assign({},_),m),error:null}}catch(m){if(ie(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){try{return await le(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:nn})}catch(n){if(ie(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await le(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:nn})}catch(r){if(ie(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await le(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:nn})}catch(r){if(ie(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await le(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:r}}catch(n){if(ie(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await le(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ie(n))return{data:null,error:n};throw n}}}const Y_={getItem:i=>Ji()?globalThis.localStorage.getItem(i):null,setItem:(i,e)=>{Ji()&&globalThis.localStorage.setItem(i,e)},removeItem:i=>{Ji()&&globalThis.localStorage.removeItem(i)}};function oc(i={}){return{getItem:e=>i[e]||null,setItem:(e,n)=>{i[e]=n},removeItem:e=>{delete i[e]}}}function Q_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Fn={debug:!!(globalThis&&Ji()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class nd extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class ev extends nd{}async function tv(i,e,n){Fn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Fn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){Fn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,a.name);try{return await n()}finally{Fn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,a.name)}}else{if(e===0)throw Fn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new ev(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(Fn.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}Q_();const nv={url:b_,storageKey:x_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:A_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Di=30*1e3,lc=3;async function uc(i,e,n){return await n()}class tr{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=tr.nextInstanceID,tr.nextInstanceID+=1,this.instanceID>0&&Tt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},nv),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new X_({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Qh(a.fetch),this.lock=a.lock||uc,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Tt()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=tv:this.lock=uc,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:Ji()?this.storage=Y_:(this.memoryStorage={},this.storage=oc(this.memoryStorage)):(this.memoryStorage={},this.storage=oc(this.memoryStorage)),Tt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Xh}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=k_(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Tt()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:l}=await this._getSessionFromURL(n,r);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),z_(l)){const f=(e=l.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:u,redirectType:h}=a;return this._debug("#_initialize()","detected session in URL",u,"redirect type",h),await this._saveSession(u),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ie(n)?{error:n}:{error:new td("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,a;try{const l=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=e?.options)===null||a===void 0?void 0:a.captchaToken}},xform:Qt}),{data:u,error:h}=l;if(h||!u)return{data:{user:null,session:null},error:h};const f=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:m,session:f},error:null}}catch(l){if(ie(l))return{data:{user:null,session:null},error:l};throw l}}async signUp(e){var n,r,a;try{let l;if("email"in e){const{email:g,password:_,options:v}=e;let w=null,P=null;this.flowType==="pkce"&&([w,P]=await zn(this.storage,this.storageKey)),l=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:g,password:_,data:(n=v?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:w,code_challenge_method:P},xform:Qt})}else if("phone"in e){const{phone:g,password:_,options:v}=e;l=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:_,data:(r=v?.data)!==null&&r!==void 0?r:{},channel:(a=v?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:Qt})}else throw new Gr("You must provide either an email or phone number and a password");const{data:u,error:h}=l;if(h||!u)return{data:{user:null,session:null},error:h};const f=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:m,session:f},error:null}}catch(l){if(ie(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithPassword(e){try{let n;if("email"in e){const{email:l,password:u,options:h}=e;n=await le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:ac})}else if("phone"in e){const{phone:l,password:u,options:h}=e;n=await le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:ac})}else throw new Gr("You must provide either an email or phone number and a password");const{data:r,error:a}=n;return a?{data:{user:null,session:null},error:a}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new oo}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(n){if(ie(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await Hr(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(n??"").split("/");try{const{data:l,error:u}=await le(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Qt});if(await Kr(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!l||!l.session||!l.user?{data:{user:null,session:null,redirectType:null},error:new oo}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:u})}catch(l){if(ie(l))return{data:{user:null,session:null,redirectType:null},error:l};throw l}}async signInWithIdToken(e){try{const{options:n,provider:r,token:a,access_token:l,nonce:u}=e,h=await le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Qt}),{data:f,error:m}=h;return m?{data:{user:null,session:null},error:m}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new oo}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:m})}catch(n){if(ie(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,a,l,u;try{if("email"in e){const{email:h,options:f}=e;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await zn(this.storage,this.storageKey));const{error:_}=await le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(n=f?.data)!==null&&n!==void 0?n:{},create_user:(r=f?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:m,code_challenge_method:g},redirectTo:f?.emailRedirectTo});return{data:{user:null,session:null},error:_}}if("phone"in e){const{phone:h,options:f}=e,{data:m,error:g}=await le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(a=f?.data)!==null&&a!==void 0?a:{},create_user:(l=f?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},channel:(u=f?.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:m?.message_id},error:g}}throw new Gr("You must provide either an email or phone number.")}catch(h){if(ie(h))return{data:{user:null,session:null},error:h};throw h}}async verifyOtp(e){var n,r;try{let a,l;"options"in e&&(a=(n=e.options)===null||n===void 0?void 0:n.redirectTo,l=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:u,error:h}=await le(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:Qt});if(h)throw h;if(!u)throw new Error("An error occurred on token verification.");const f=u.session,m=u.user;return f?.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:m,session:f},error:null}}catch(a){if(ie(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var n,r,a;try{let l=null,u=null;return this.flowType==="pkce"&&([l,u]=await zn(this.storage,this.storageKey)),await le(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=e?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:u}),headers:this.headers,xform:H_})}catch(l){if(ie(l))return{data:null,error:l};throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Yt;const{error:a}=await le(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(ie(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:a,options:l}=e,{error:u}=await le(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in e){const{phone:r,type:a,options:l}=e,{data:u,error:h}=await le(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return{data:{user:null,session:null,messageId:u?.message_id},error:h}}throw new Gr("You must provide either an email or phone number and a type")}catch(n){if(ie(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Hr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let u=this.suppressGetSessionWarning;e=new Proxy(e,{get:(f,m,g)=>(!u&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,m,g))})}return{data:{session:e},error:null}}const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{session:null},error:l}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:nn}):await this._useSession(async n=>{var r,a,l;const{data:u,error:h}=n;if(h)throw h;return!(!((r=u.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Yt}:await le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=u.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:nn})})}catch(n){if(ie(n))return N_(n)&&(await this._removeSession(),await Kr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:a,error:l}=r;if(l)throw l;if(!a.session)throw new Yt;const u=a.session;let h=null,f=null;this.flowType==="pkce"&&e.email!=null&&([h,f]=await zn(this.storage,this.storageKey));const{data:m,error:g}=await le(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:f}),jwt:u.access_token,xform:nn});if(g)throw g;return u.user=m.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(r){if(ie(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return nc(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Yt;const n=Date.now()/1e3;let r=n,a=!0,l=null;const u=nc(e.access_token);if(u.exp&&(r=u.exp,a=r<=n),a){const{session:h,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!h)return{data:{user:null,session:null},error:null};l=h}else{const{data:h,error:f}=await this._getUser(e.access_token);if(f)throw f;l={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return{data:{user:l.user,session:l},error:null}}catch(n){if(ie(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:u,error:h}=n;if(h)throw h;e=(r=u.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new Yt;const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{user:null,session:null},error:l}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ie(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Tt())throw new Vr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Vr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new ic("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Vr("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ic("No code detected.");const{data:A,error:T}=await this._exchangeCodeForSession(e.code);if(T)throw T;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:A.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:l,refresh_token:u,expires_in:h,expires_at:f,token_type:m}=e;if(!l||!h||!u||!m)throw new Vr("No session defined in URL");const g=Math.round(Date.now()/1e3),_=parseInt(h);let v=g+_;f&&(v=parseInt(f));const w=v-g;w*1e3<=Di&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${_}s`);const P=v-_;g-P>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",P,v,g):g-P<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",P,v,g);const{data:b,error:x}=await this._getUser(l);if(x)throw x;const k={provider_token:r,provider_refresh_token:a,access_token:l,expires_in:_,expires_at:v,refresh_token:u,token_type:m,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:k,redirectType:e.type},error:null}}catch(r){if(ie(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Hr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:a,error:l}=n;if(l)return{error:l};const u=(r=a.session)===null||r===void 0?void 0:r.access_token;if(u){const{error:h}=await this.admin.signOut(u,e);if(h&&!(B_(h)&&(h.status===404||h.status===401||h.status===403)))return{error:h}}return e!=="others"&&(await this._removeSession(),await Kr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=S_(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,a;try{const{data:{session:l},error:u}=n;if(u)throw u;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,n={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await zn(this.storage,this.storageKey,!0));try{return await le(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if(ie(l))return{data:null,error:l};throw l}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(ie(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:a}=await this._useSession(async l=>{var u,h,f,m,g;const{data:_,error:v}=l;if(v)throw v;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await le(this.fetch,"GET",w,{headers:this.headers,jwt:(g=(m=_.session)===null||m===void 0?void 0:m.access_token)!==null&&g!==void 0?g:void 0})});if(a)throw a;return Tt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:e.provider,url:r?.url},error:null}}catch(r){if(ie(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,a;const{data:l,error:u}=n;if(u)throw u;return await le(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(r=l.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(ie(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await E_(async a=>(a>0&&await L_(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await le(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Qt})),(a,l)=>{const u=200*Math.pow(2,a);return l&&lo(l)&&Date.now()+u-r<Di})}catch(r){if(this._debug(n,"error",r),ie(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Tt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Hr(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const a=Math.round(Date.now()/1e3),l=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<a+tc;if(this._debug(n,`session has${l?"":" not"} expired with margin of ${tc}s`),l){if(this.autoRefreshToken&&r.refresh_token){const{error:u}=await this._callRefreshToken(r.refresh_token);u&&(console.error(u),lo(u)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Yt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Fs;const{data:l,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!l.session)throw new Yt;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const h={session:l.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(l){if(this._debug(a,"error",l),ie(l)){const u={session:null,error:l};return lo(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,n,r=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,n)}catch(f){l.push(f)}});if(await Promise.all(u),l.length>0){for(let h=0;h<l.length;h+=1)console.error(l[h]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await ed(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Kr(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Tt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Di);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-e)/Di);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Di}ms, refresh threshold is ${lc} ticks`),a<=lc&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof nd)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Tt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const a=[`provider=${encodeURIComponent(n)}`];if(r?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[l,u]=await zn(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});a.push(h.toString())}if(r?.queryParams){const l=new URLSearchParams(r.queryParams);a.push(l.toString())}return r?.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:a,error:l}=n;return l?{data:null,error:l}:await le(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ie(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,a;const{data:l,error:u}=n;if(u)return{data:null,error:u};const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:f,error:m}=await le(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(r=l?.session)===null||r===void 0?void 0:r.access_token});return m?{data:null,error:m}:(e.factorType==="totp"&&(!((a=f?.totp)===null||a===void 0)&&a.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(n){if(ie(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:l}=n;if(l)return{data:null,error:l};const{data:u,error:h}=await le(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:h})})}catch(n){if(ie(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:l}=n;return l?{data:null,error:l}:await le(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ie(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=e?.factors||[],a=r.filter(u=>u.factor_type==="totp"&&u.status==="verified"),l=r.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:r,totp:a,phone:l},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:a},error:l}=e;if(l)return{data:null,error:l};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const u=this._decodeJWT(a.access_token);let h=null;u.aal&&(h=u.aal);let f=h;((r=(n=a.user.factors)===null||n===void 0?void 0:n.filter(_=>_.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(f="aal2");const g=u.amr||[];return{data:{currentLevel:h,nextLevel:f,currentAuthenticationMethods:g},error:null}}))}}tr.nextInstanceID=0;const iv=tr;class rv extends iv{constructor(e){super(e)}}var sv=function(i,e,n,r){function a(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function h(g){try{m(r.next(g))}catch(_){u(_)}}function f(g){try{m(r.throw(g))}catch(_){u(_)}}function m(g){g.done?l(g.value):a(g.value).then(h,f)}m((r=r.apply(i,e||[])).next())})};class av{constructor(e,n,r){var a,l,u;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const h=y_(e);this.realtimeUrl=`${h}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${h}/auth/v1`,this.storageUrl=`${h}/storage/v1`,this.functionsUrl=`${h}/functions/v1`;const f=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,m={db:h_,realtime:f_,auth:Object.assign(Object.assign({},d_),{storageKey:f}),global:c_},g=w_(r??{},m);this.storageKey=(a=g.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=g.global.headers)!==null&&l!==void 0?l:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(_,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=g.auth)!==null&&u!==void 0?u:{},this.headers,g.global.fetch),this.fetch=__(n,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new $g(`${h}/rest/v1`,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),g.accessToken||this._listenForAuthEvents()}get functions(){return new ag(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new o_(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return sv(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:a,storageKey:l,flowType:u,lock:h,debug:f},m,g){var _;const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new rv({url:this.authUrl,headers:Object.assign(Object.assign({},v),m),storageKey:l,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:a,flowType:u,lock:h,debug:f,fetch:g,hasCustomAuthorizationHeader:(_="Authorization"in this.headers)!==null&&_!==void 0?_:!1})}_initRealtimeClient(e){return new Kg(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r?.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ov=(i,e,n)=>new av(i,e,n);var id={},Us={},Ve={},ee={};Object.defineProperty(ee,"__esModule",{value:!0});ee.areaConversion=ee.timeConversion=ee.distanceConversion=ee.altitudeKeys=ee.latitudeKeys=ee.longitudeKeys=ee.MAXLON=ee.MINLON=ee.MAXLAT=ee.MINLAT=ee.earthRadius=ee.sexagesimalPattern=void 0;var lv=/^([0-9]{1,3})\s*([0-9]{1,3}(?:\.(?:[0-9]{1,}))?)[']\s*(([0-9]{1,3}(\.([0-9]{1,}))?)["]\s*)?([NEOSW]?)$/;ee.sexagesimalPattern=lv;var uv=6378137;ee.earthRadius=uv;var cv=-90;ee.MINLAT=cv;var hv=90;ee.MAXLAT=hv;var dv=-180;ee.MINLON=dv;var fv=180;ee.MAXLON=fv;var mv=["lng","lon","longitude",0];ee.longitudeKeys=mv;var pv=["lat","latitude",1];ee.latitudeKeys=pv;var gv=["alt","altitude","elevation","elev",2];ee.altitudeKeys=gv;var _v={m:1,km:.001,cm:100,mm:1e3,mi:1/1609.344,sm:1/1852.216,ft:100/30.48,in:100/2.54,yd:1/.9144};ee.distanceConversion=_v;var vv={m:60,h:3600,d:86400};ee.timeConversion=vv;var bt={m2:1,km2:1e-6,ha:1e-4,a:.01,ft2:10.763911,yd2:1.19599,in2:1550.0031};ee.areaConversion=bt;bt.sqm=bt.m2;bt.sqkm=bt.km2;bt.sqft=bt.ft2;bt.sqyd=bt.yd2;bt.sqin=bt.in2;var Pn={};Object.defineProperty(Pn,"__esModule",{value:!0});Pn.default=void 0;var yv=function(e,n){return n.reduce(function(r,a){if(typeof e>"u"||e===null)throw new Error("'".concat(e,"' is no valid coordinate."));return Object.prototype.hasOwnProperty.call(e,a)&&typeof a<"u"&&typeof r>"u"?(r=a,a):r},void 0)},wv=yv;Pn.default=wv;var ui={},Sn={};Object.defineProperty(Sn,"__esModule",{value:!0});Sn.default=void 0;var bv=function(e){var n=e.toString().trim();return isNaN(parseFloat(n))?!1:parseFloat(n)===Number(n)},xv=bv;Sn.default=xv;var kn={};Object.defineProperty(kn,"__esModule",{value:!0});kn.default=void 0;var Av=ee,Pv=function(e){return Av.sexagesimalPattern.test(e.toString().trim())},Sv=Pv;kn.default=Sv;var Cn={};Object.defineProperty(Cn,"__esModule",{value:!0});Cn.default=void 0;var kv=ee,Cv=function(e){var n=new RegExp(kv.sexagesimalPattern).exec(e.toString().trim());if(typeof n>"u"||n===null)throw new Error("Given value is not in sexagesimal format");var r=Number(n[2])/60||0,a=Number(n[4])/3600||0,l=parseFloat(n[1])+r+a;return["S","W"].includes(n[7])?-l:l},Tv=Cv;Cn.default=Tv;var ar={},ci={};Object.defineProperty(ci,"__esModule",{value:!0});ci.default=void 0;var uo=ee,co=Lv(Pn);function Lv(i){return i.__esModule?i:{default:i}}function cc(i,e){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(i,a).enumerable})),n.push.apply(n,r)}return n}function Ev(i){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cc(Object(n),!0).forEach(function(r){Ov(i,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):cc(Object(n)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(n,r))})}return i}function Ov(i,e,n){return e in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}var $v=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{longitude:uo.longitudeKeys,latitude:uo.latitudeKeys,altitude:uo.altitudeKeys},r=(0,co.default)(e,n.longitude),a=(0,co.default)(e,n.latitude),l=(0,co.default)(e,n.altitude);return Ev({latitude:a,longitude:r},l?{altitude:l}:{})},Mv=$v;ci.default=Mv;var or={};Object.defineProperty(or,"__esModule",{value:!0});or.default=void 0;var Iv=_l(Sn),Rv=_l(kn),qv=_l(Cn),hc=ee;function _l(i){return i&&i.__esModule?i:{default:i}}var jv=function i(e){return(0,Iv.default)(e)?!(parseFloat(e)>hc.MAXLAT||e<hc.MINLAT):(0,Rv.default)(e)?i((0,qv.default)(e)):!1},Dv=jv;or.default=Dv;var lr={};Object.defineProperty(lr,"__esModule",{value:!0});lr.default=void 0;var Bv=vl(Sn),Nv=vl(kn),zv=vl(Cn),dc=ee;function vl(i){return i&&i.__esModule?i:{default:i}}var Fv=function i(e){return(0,Bv.default)(e)?!(parseFloat(e)>dc.MAXLON||e<dc.MINLON):(0,Nv.default)(e)?i((0,zv.default)(e)):!1},Uv=Fv;lr.default=Uv;Object.defineProperty(ar,"__esModule",{value:!0});ar.default=void 0;var Zv=yl(ci),fc=yl(or),mc=yl(lr);function yl(i){return i&&i.__esModule?i:{default:i}}var Wv=function(e){var n=(0,Zv.default)(e),r=n.latitude,a=n.longitude;if(Array.isArray(e)&&e.length>=2)return(0,mc.default)(e[0])&&(0,fc.default)(e[1]);if(typeof r>"u"||typeof a>"u")return!1;var l=e[a],u=e[r];return!(typeof u>"u"||typeof l>"u"||(0,fc.default)(u)===!1||(0,mc.default)(l)===!1)},Hv=Wv;ar.default=Hv;Object.defineProperty(ui,"__esModule",{value:!0});ui.default=void 0;var Kv=ur(Sn),Gv=ur(kn),Vv=ur(Cn),pc=ur(ar),Jv=ur(ci);function ur(i){return i&&i.__esModule?i:{default:i}}function gc(i,e){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(i,a).enumerable})),n.push.apply(n,r)}return n}function ho(i){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gc(Object(n),!0).forEach(function(r){Ho(i,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):gc(Object(n)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(n,r))})}return i}function Ho(i,e,n){return e in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}var Xv=function i(e){if((0,Kv.default)(e))return Number(e);if((0,Gv.default)(e))return(0,Vv.default)(e);if((0,pc.default)(e)){var n=(0,Jv.default)(e);return Array.isArray(e)?e.map(function(r,a){return[0,1].includes(a)?i(r):r}):ho(ho(ho({},e),n.latitude&&Ho({},n.latitude,i(e[n.latitude]))),n.longitude&&Ho({},n.longitude,i(e[n.longitude])))}return Array.isArray(e)?e.map(function(r){return(0,pc.default)(r)?i(r):r}):e},Yv=Xv;ui.default=Yv;Object.defineProperty(Ve,"__esModule",{value:!0});Ve.default=void 0;var Qv=ee,ey=rd(Pn),ty=rd(ui);function rd(i){return i&&i.__esModule?i:{default:i}}var ny=function(e,n){var r=(0,ey.default)(e,Qv.latitudeKeys);if(!(typeof r>"u"||r===null)){var a=e[r];return n===!0?a:(0,ty.default)(a)}},iy=ny;Ve.default=iy;var Je={};Object.defineProperty(Je,"__esModule",{value:!0});Je.default=void 0;var ry=ee,sy=sd(Pn),ay=sd(ui);function sd(i){return i&&i.__esModule?i:{default:i}}var oy=function(e,n){var r=(0,sy.default)(e,ry.longitudeKeys);if(!(typeof r>"u"||r===null)){var a=e[r];return n===!0?a:(0,ay.default)(a)}},ly=oy;Je.default=ly;var dt={};Object.defineProperty(dt,"__esModule",{value:!0});dt.default=void 0;var uy=function(e){return e*Math.PI/180},cy=uy;dt.default=cy;var Kt={};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.default=void 0;var hy=function(e){return e*180/Math.PI},dy=hy;Kt.default=dy;Object.defineProperty(Us,"__esModule",{value:!0});Us.default=void 0;var fy=Zs(Ve),my=Zs(Je),fo=Zs(dt),mo=Zs(Kt),_c=ee;function Zs(i){return i&&i.__esModule?i:{default:i}}var py=function(e,n,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:6371e3,l=(0,fy.default)(e),u=(0,my.default)(e),h=n/a,f=(0,fo.default)(r),m=(0,fo.default)(l),g=(0,fo.default)(u),_=Math.asin(Math.sin(m)*Math.cos(h)+Math.cos(m)*Math.sin(h)*Math.cos(f)),v=g+Math.atan2(Math.sin(f)*Math.sin(h)*Math.cos(m),Math.cos(h)-Math.sin(m)*Math.sin(_)),w=(0,mo.default)(v);return(w<_c.MINLON||w>_c.MAXLON)&&(v=(v+3*Math.PI)%(2*Math.PI)-Math.PI,w=(0,mo.default)(v)),{latitude:(0,mo.default)(_),longitude:w}},gy=py;Us.default=gy;var Ws={};Object.defineProperty(Ws,"__esModule",{value:!0});Ws.default=void 0;var _y=ee,vy=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"m",r=_y.areaConversion[n];if(r)return e*r;throw new Error("Invalid unit used for area conversion.")},yy=vy;Ws.default=yy;var Hs={};Object.defineProperty(Hs,"__esModule",{value:!0});Hs.default=void 0;var wy=ee,by=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"m",r=wy.distanceConversion[n];if(r)return e*r;throw new Error("Invalid unit used for distance conversion.")},xy=by;Hs.default=xy;var Ks={};Object.defineProperty(Ks,"__esModule",{value:!0});Ks.default=void 0;var Jr=ee,Ay=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"kmh";switch(n){case"kmh":return e*Jr.timeConversion.h*Jr.distanceConversion.km;case"mph":return e*Jr.timeConversion.h*Jr.distanceConversion.mi;default:return e}},Py=Ay;Ks.default=Py;var Gs={};Object.defineProperty(Gs,"__esModule",{value:!0});Gs.default=void 0;function vc(i,e){return Ty(i)||Cy(i,e)||ky(i,e)||Sy()}function Sy(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ky(i,e){if(i){if(typeof i=="string")return yc(i,e);var n=Object.prototype.toString.call(i).slice(8,-1);if(n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set")return Array.from(i);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yc(i,e)}}function yc(i,e){(e==null||e>i.length)&&(e=i.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=i[n];return r}function Cy(i,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(i)))){var n=[],r=!0,a=!1,l=void 0;try{for(var u=i[Symbol.iterator](),h;!(r=(h=u.next()).done)&&(n.push(h.value),!(e&&n.length===e));r=!0);}catch(f){a=!0,l=f}finally{try{!r&&u.return!=null&&u.return()}finally{if(a)throw l}}return n}}function Ty(i){if(Array.isArray(i))return i}var Ly=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4,r=Math.pow(10,n);return Math.round(e*r)/r},Ey=function(e){var n=e.toString().split("."),r=vc(n,2),a=r[0],l=r[1],u=Math.abs(Number(a)),h=+("0."+(l||0))*60,f=h.toString().split("."),m=Math.floor(h),g=Ly(+("0."+(f[1]||0))*60).toString(),_=g.split("."),v=vc(_,2),w=v[0],P=v[1],b=P===void 0?"0":P;return u+" "+m.toString().padStart(2,"0")+"' "+w.padStart(2,"0")+"."+b.padEnd(1,"0")+'"'},Oy=Ey;Gs.default=Oy;var Vs={},cr={},Mt={},hr={};Object.defineProperty(hr,"__esModule",{value:!0});hr.default=void 0;var $y=function(e){return e>1?1:e<-1?-1:e},My=$y;hr.default=My;Object.defineProperty(Mt,"__esModule",{value:!0});Mt.default=void 0;var wc=Js(Ve),bc=Js(Je),Un=Js(dt),Iy=Js(hr),Ry=ee;function Js(i){return i&&i.__esModule?i:{default:i}}var qy=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;r=typeof r<"u"&&!isNaN(r)?r:1;var a=(0,wc.default)(e),l=(0,bc.default)(e),u=(0,wc.default)(n),h=(0,bc.default)(n),f=Math.acos((0,Iy.default)(Math.sin((0,Un.default)(u))*Math.sin((0,Un.default)(a))+Math.cos((0,Un.default)(u))*Math.cos((0,Un.default)(a))*Math.cos((0,Un.default)(l)-(0,Un.default)(h))))*Ry.earthRadius;return Math.round(f/r)*r},jy=qy;Mt.default=jy;Object.defineProperty(cr,"__esModule",{value:!0});cr.default=void 0;var xc=Dy(Mt);function Dy(i){return i.__esModule?i:{default:i}}var By=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:xc.default;return r=typeof r=="function"?r:xc.default,n.slice().sort(function(a,l){return r(e,a)-r(e,l)})},Ny=By;cr.default=Ny;Object.defineProperty(Vs,"__esModule",{value:!0});Vs.default=void 0;var zy=Fy(cr);function Fy(i){return i.__esModule?i:{default:i}}var Uy=function(e,n){return(0,zy.default)(e,n)[0]},Zy=Uy;Vs.default=Zy;var Xs={};Object.defineProperty(Xs,"__esModule",{value:!0});Xs.default=void 0;var po=wl(dt),Wy=wl(Ve),Ac=wl(Je),Pc=ee;function wl(i){return i&&i.__esModule?i:{default:i}}var Hy=function(e){var n=0;if(e.length>2){for(var r,a,l,u=0;u<e.length;u++){u===e.length-2?(r=e.length-2,a=e.length-1,l=0):u===e.length-1?(r=e.length-1,a=0,l=1):(r=u,a=u+1,l=u+2);var h=(0,Ac.default)(e[r]),f=(0,Wy.default)(e[a]),m=(0,Ac.default)(e[l]);n+=((0,po.default)(m)-(0,po.default)(h))*Math.sin((0,po.default)(f))}n=n*Pc.earthRadius*Pc.earthRadius/2}return Math.abs(n)},Ky=Hy;Xs.default=Ky;var dr={};Object.defineProperty(dr,"__esModule",{value:!0});dr.default=void 0;var Gy=ad(Ve),Vy=ad(Je);function ad(i){return i&&i.__esModule?i:{default:i}}var Jy=function(e){if(Array.isArray(e)===!1||e.length===0)throw new Error("No points were given.");return e.reduce(function(n,r){var a=(0,Gy.default)(r),l=(0,Vy.default)(r);return{maxLat:Math.max(a,n.maxLat),minLat:Math.min(a,n.minLat),maxLng:Math.max(l,n.maxLng),minLng:Math.min(l,n.minLng)}},{maxLat:-1/0,minLat:1/0,maxLng:-1/0,minLng:1/0})},Xy=Jy;dr.default=Xy;var Ys={};Object.defineProperty(Ys,"__esModule",{value:!0});Ys.default=void 0;var Yy=Qs(Ve),Qy=Qs(Je),Zn=Qs(dt),Xr=Qs(Kt),Bi=ee;function Qs(i){return i&&i.__esModule?i:{default:i}}var ew=function(e,n){var r=(0,Yy.default)(e),a=(0,Qy.default)(e),l=(0,Zn.default)(r),u=(0,Zn.default)(a),h=n/Bi.earthRadius,f=l-h,m=l+h,g=(0,Zn.default)(Bi.MAXLAT),_=(0,Zn.default)(Bi.MINLAT),v=(0,Zn.default)(Bi.MAXLON),w=(0,Zn.default)(Bi.MINLON),P,b;if(f>_&&m<g){var x=Math.asin(Math.sin(h)/Math.cos(l));P=u-x,P<w&&(P+=Math.PI*2),b=u+x,b>v&&(b-=Math.PI*2)}else f=Math.max(f,_),m=Math.min(m,g),P=w,b=v;return[{latitude:(0,Xr.default)(f),longitude:(0,Xr.default)(P)},{latitude:(0,Xr.default)(m),longitude:(0,Xr.default)(b)}]},tw=ew;Ys.default=tw;var ea={};Object.defineProperty(ea,"__esModule",{value:!0});ea.default=void 0;var nw=ta(Ve),iw=ta(Je),Sc=ta(dt),kc=ta(Kt);function ta(i){return i&&i.__esModule?i:{default:i}}var rw=function(e){if(Array.isArray(e)===!1||e.length===0)return!1;var n=e.length,r=e.reduce(function(h,f){var m=(0,Sc.default)((0,nw.default)(f)),g=(0,Sc.default)((0,iw.default)(f));return{X:h.X+Math.cos(m)*Math.cos(g),Y:h.Y+Math.cos(m)*Math.sin(g),Z:h.Z+Math.sin(m)}},{X:0,Y:0,Z:0}),a=r.X/n,l=r.Y/n,u=r.Z/n;return{longitude:(0,kc.default)(Math.atan2(l,a)),latitude:(0,kc.default)(Math.atan2(u,Math.sqrt(a*a+l*l)))}},sw=rw;ea.default=sw;var na={};Object.defineProperty(na,"__esModule",{value:!0});na.default=void 0;var aw=ow(dr);function ow(i){return i.__esModule?i:{default:i}}var lw=function(e){var n=(0,aw.default)(e),r=n.minLat+(n.maxLat-n.minLat)/2,a=n.minLng+(n.maxLng-n.minLng)/2;return{latitude:parseFloat(r.toFixed(6)),longitude:parseFloat(a.toFixed(6))}},uw=lw;na.default=uw;var ia={},fr={};Object.defineProperty(fr,"__esModule",{value:!0});fr.default=void 0;var Cc=ra(Ve),Tc=ra(Je),Yr=ra(dt),cw=ra(Kt);function ra(i){return i&&i.__esModule?i:{default:i}}var hw=function(e,n){var r=(0,Yr.default)((0,Tc.default)(n))-(0,Yr.default)((0,Tc.default)(e)),a=Math.log(Math.tan((0,Yr.default)((0,Cc.default)(n))/2+Math.PI/4)/Math.tan((0,Yr.default)((0,Cc.default)(e))/2+Math.PI/4));return Math.abs(r)>Math.PI&&(r>0?r=(Math.PI*2-r)*-1:r=Math.PI*2+r),((0,cw.default)(Math.atan2(r,a))+360)%360},dw=hw;fr.default=dw;Object.defineProperty(ia,"__esModule",{value:!0});ia.default=void 0;var Lc=fw(fr);function fw(i){return i.__esModule?i:{default:i}}var mw=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Lc.default,a=typeof r=="function"?r(e,n):(0,Lc.default)(e,n);if(isNaN(a))throw new Error("Could not calculate bearing for given points. Check your bearing function");switch(Math.round(a/22.5)){case 1:return"NNE";case 2:return"NE";case 3:return"ENE";case 4:return"E";case 5:return"ESE";case 6:return"SE";case 7:return"SSE";case 8:return"S";case 9:return"SSW";case 10:return"SW";case 11:return"WSW";case 12:return"W";case 13:return"WNW";case 14:return"NW";case 15:return"NNW";default:return"N"}},pw=mw;ia.default=pw;var mr={};Object.defineProperty(mr,"__esModule",{value:!0});mr.default=void 0;var go=od(Mt),Ec=od(hr);function od(i){return i&&i.__esModule?i:{default:i}}var gw=function(e,n,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,l=(0,go.default)(n,e,a),u=(0,go.default)(e,r,a),h=(0,go.default)(n,r,a),f=Math.acos((0,Ec.default)((l*l+h*h-u*u)/(2*l*h))),m=Math.acos((0,Ec.default)((u*u+h*h-l*l)/(2*u*h)));return f>Math.PI/2?l:m>Math.PI/2?u:Math.sin(f)*l},_w=gw;mr.default=_w;var sa={};Object.defineProperty(sa,"__esModule",{value:!0});sa.default=void 0;var Oc=aa(Ve),$c=aa(Je),Nt=aa(dt),vw=aa(Kt);function aa(i){return i&&i.__esModule?i:{default:i}}var yw=function(e,n){var r=(0,Oc.default)(n),a=(0,$c.default)(n),l=(0,Oc.default)(e),u=(0,$c.default)(e),h=((0,vw.default)(Math.atan2(Math.sin((0,Nt.default)(a)-(0,Nt.default)(u))*Math.cos((0,Nt.default)(r)),Math.cos((0,Nt.default)(l))*Math.sin((0,Nt.default)(r))-Math.sin((0,Nt.default)(l))*Math.cos((0,Nt.default)(r))*Math.cos((0,Nt.default)(a)-(0,Nt.default)(u))))+360)%360;return h},ww=yw;sa.default=ww;var oa={};Object.defineProperty(oa,"__esModule",{value:!0});oa.default=void 0;var bw=xw(Mt);function xw(i){return i.__esModule?i:{default:i}}function hs(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?hs=function(n){return typeof n}:hs=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},hs(i)}var Aw=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bw.default;return e.reduce(function(r,a){return hs(r)==="object"&&r.last!==null&&(r.distance+=n(a,r.last)),r.last=a,r},{last:null,distance:0}).distance},Pw=Aw;oa.default=Pw;var la={};Object.defineProperty(la,"__esModule",{value:!0});la.default=void 0;var Mc=bl(Ve),Ic=bl(Je),_o=bl(dt),Rc=ee;function bl(i){return i&&i.__esModule?i:{default:i}}var Sw=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;r=typeof r<"u"&&!isNaN(r)?r:1;var a=(0,Mc.default)(e),l=(0,Ic.default)(e),u=(0,Mc.default)(n),h=(0,Ic.default)(n),f=6356752314245e-6,m=1/298.257223563,g=(0,_o.default)(h-l),_,v,w,P,b,x,k=Math.atan((1-m)*Math.tan((0,_o.default)(parseFloat(a)))),A=Math.atan((1-m)*Math.tan((0,_o.default)(parseFloat(u)))),T=Math.sin(k),E=Math.cos(k),$=Math.sin(A),I=Math.cos(A),D=g,j,z=100;do{var B=Math.sin(D),F=Math.cos(D);if(x=Math.sqrt(I*B*(I*B)+(E*$-T*I*F)*(E*$-T*I*F)),x===0)return 0;_=T*$+E*I*F,v=Math.atan2(x,_),w=E*I*B/x,P=1-w*w,b=_-2*T*$/P,isNaN(b)&&(b=0);var he=m/16*P*(4+m*(4-3*P));j=D,D=g+(1-he)*m*w*(v+he*x*(b+he*_*(-1+2*b*b)))}while(Math.abs(D-j)>1e-12&&--z>0);if(z===0)return NaN;var xe=P*(Rc.earthRadius*Rc.earthRadius-f*f)/(f*f),V=1+xe/16384*(4096+xe*(-768+xe*(320-175*xe))),X=xe/1024*(256+xe*(-128+xe*(74-47*xe))),Y=X*x*(b+X/4*(_*(-1+2*b*b)-X/6*b*(-3+4*x*x)*(-3+4*b*b))),Ae=f*V*(v-Y);return Math.round(Ae/r)*r},kw=Sw;la.default=kw;var ua={};Object.defineProperty(ua,"__esModule",{value:!0});ua.default=void 0;var Cw=function(e){if(/^(NNE|NE|NNW|N)$/.test(e))return"N";if(/^(ENE|E|ESE|SE)$/.test(e))return"E";if(/^(SSE|S|SSW|SW)$/.test(e))return"S";if(/^(WSW|W|WNW|NW)$/.test(e))return"W"},Tw=Cw;ua.default=Tw;var ca={};Object.defineProperty(ca,"__esModule",{value:!0});ca.default=void 0;var Lw=Ew(Mt);function Ew(i){return i.__esModule?i:{default:i}}var Ow=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Lw.default,a=r(e,n),l=Number(n.time)-Number(e.time),u=a/l*1e3;return u},$w=Ow;ca.default=$w;var ha={};Object.defineProperty(ha,"__esModule",{value:!0});ha.default=void 0;var vo=Mw(Mt);function Mw(i){return i.__esModule?i:{default:i}}var Iw=function(e,n,r){return(0,vo.default)(n,e)+(0,vo.default)(e,r)===(0,vo.default)(n,r)},Rw=Iw;ha.default=Rw;var da={};Object.defineProperty(da,"__esModule",{value:!0});da.default=void 0;var Qr=ld(Ve),ut=ld(Je);function ld(i){return i&&i.__esModule?i:{default:i}}var qw=function(e,n){for(var r=!1,a=n.length,l=-1,u=a-1;++l<a;u=l)((0,ut.default)(n[l])<=(0,ut.default)(e)&&(0,ut.default)(e)<(0,ut.default)(n[u])||(0,ut.default)(n[u])<=(0,ut.default)(e)&&(0,ut.default)(e)<(0,ut.default)(n[l]))&&(0,Qr.default)(e)<((0,Qr.default)(n[u])-(0,Qr.default)(n[l]))*((0,ut.default)(e)-(0,ut.default)(n[l]))/((0,ut.default)(n[u])-(0,ut.default)(n[l]))+(0,Qr.default)(n[l])&&(r=!r);return r},jw=qw;da.default=jw;var fa={};Object.defineProperty(fa,"__esModule",{value:!0});fa.default=void 0;var Dw=Bw(mr);function Bw(i){return i.__esModule?i:{default:i}}var Nw=function(e,n,r,a){return(0,Dw.default)(e,n,r)<a},zw=Nw;fa.default=zw;var ma={};Object.defineProperty(ma,"__esModule",{value:!0});ma.default=void 0;var Fw=Uw(Mt);function Uw(i){return i.__esModule?i:{default:i}}var Zw=function(e,n,r){var a=.01;return(0,Fw.default)(e,n,a)<r},Ww=Zw;ma.default=Ww;var pa={};Object.defineProperty(pa,"__esModule",{value:!0});pa.default=void 0;function Hw(i,e){return Jw(i)||Vw(i,e)||Gw(i,e)||Kw()}function Kw(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gw(i,e){if(i){if(typeof i=="string")return qc(i,e);var n=Object.prototype.toString.call(i).slice(8,-1);if(n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set")return Array.from(i);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qc(i,e)}}function qc(i,e){(e==null||e>i.length)&&(e=i.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=i[n];return r}function Vw(i,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(i)))){var n=[],r=!0,a=!1,l=void 0;try{for(var u=i[Symbol.iterator](),h;!(r=(h=u.next()).done)&&(n.push(h.value),!(e&&n.length===e));r=!0);}catch(f){a=!0,l=f}finally{try{!r&&u.return!=null&&u.return()}finally{if(a)throw l}}return n}}function Jw(i){if(Array.isArray(i))return i}var Xw=function(e){if(!e.startsWith("POLYGON"))throw new Error("Invalid wkt.");var n=e.slice(e.indexOf("(")+2,e.indexOf(")")).split(", "),r=n.map(function(a){var l=a.split(" "),u=Hw(l,2),h=u[0],f=u[1];return{longitude:parseFloat(h),latitude:parseFloat(f)}});return r},Yw=Xw;pa.default=Yw;(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e={computeDestinationPoint:!0,convertArea:!0,convertDistance:!0,convertSpeed:!0,decimalToSexagesimal:!0,findNearest:!0,getAreaOfPolygon:!0,getBounds:!0,getBoundsOfDistance:!0,getCenter:!0,getCenterOfBounds:!0,getCompassDirection:!0,getCoordinateKey:!0,getCoordinateKeys:!0,getDistance:!0,getDistanceFromLine:!0,getGreatCircleBearing:!0,getLatitude:!0,getLongitude:!0,getPathLength:!0,getPreciseDistance:!0,getRhumbLineBearing:!0,getRoughCompassDirection:!0,getSpeed:!0,isDecimal:!0,isPointInLine:!0,isPointInPolygon:!0,isPointNearLine:!0,isPointWithinRadius:!0,isSexagesimal:!0,isValidCoordinate:!0,isValidLatitude:!0,isValidLongitude:!0,orderByDistance:!0,sexagesimalToDecimal:!0,toDecimal:!0,toRad:!0,toDeg:!0,wktToPolygon:!0};Object.defineProperty(i,"computeDestinationPoint",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(i,"convertArea",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(i,"convertDistance",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(i,"convertSpeed",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(i,"decimalToSexagesimal",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(i,"findNearest",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(i,"getAreaOfPolygon",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(i,"getBounds",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(i,"getBoundsOfDistance",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(i,"getCenter",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(i,"getCenterOfBounds",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(i,"getCompassDirection",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(i,"getCoordinateKey",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(i,"getCoordinateKeys",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(i,"getDistance",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(i,"getDistanceFromLine",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(i,"getGreatCircleBearing",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(i,"getLatitude",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(i,"getLongitude",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(i,"getPathLength",{enumerable:!0,get:function(){return $.default}}),Object.defineProperty(i,"getPreciseDistance",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(i,"getRhumbLineBearing",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(i,"getRoughCompassDirection",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(i,"getSpeed",{enumerable:!0,get:function(){return z.default}}),Object.defineProperty(i,"isDecimal",{enumerable:!0,get:function(){return B.default}}),Object.defineProperty(i,"isPointInLine",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(i,"isPointInPolygon",{enumerable:!0,get:function(){return he.default}}),Object.defineProperty(i,"isPointNearLine",{enumerable:!0,get:function(){return xe.default}}),Object.defineProperty(i,"isPointWithinRadius",{enumerable:!0,get:function(){return V.default}}),Object.defineProperty(i,"isSexagesimal",{enumerable:!0,get:function(){return X.default}}),Object.defineProperty(i,"isValidCoordinate",{enumerable:!0,get:function(){return Y.default}}),Object.defineProperty(i,"isValidLatitude",{enumerable:!0,get:function(){return Ae.default}}),Object.defineProperty(i,"isValidLongitude",{enumerable:!0,get:function(){return G.default}}),Object.defineProperty(i,"orderByDistance",{enumerable:!0,get:function(){return Ue.default}}),Object.defineProperty(i,"sexagesimalToDecimal",{enumerable:!0,get:function(){return U.default}}),Object.defineProperty(i,"toDecimal",{enumerable:!0,get:function(){return se.default}}),Object.defineProperty(i,"toRad",{enumerable:!0,get:function(){return ye.default}}),Object.defineProperty(i,"toDeg",{enumerable:!0,get:function(){return Pe.default}}),Object.defineProperty(i,"wktToPolygon",{enumerable:!0,get:function(){return ve.default}});var n=M(Us),r=M(Ws),a=M(Hs),l=M(Ks),u=M(Gs),h=M(Vs),f=M(Xs),m=M(dr),g=M(Ys),_=M(ea),v=M(na),w=M(ia),P=M(Pn),b=M(ci),x=M(Mt),k=M(mr),A=M(sa),T=M(Ve),E=M(Je),$=M(oa),I=M(la),D=M(fr),j=M(ua),z=M(ca),B=M(Sn),F=M(ha),he=M(da),xe=M(fa),V=M(ma),X=M(kn),Y=M(ar),Ae=M(or),G=M(lr),Ue=M(cr),U=M(Cn),se=M(ui),ye=M(dt),Pe=M(Kt),ve=M(pa),oe=ee;Object.keys(oe).forEach(function(N){N==="default"||N==="__esModule"||Object.prototype.hasOwnProperty.call(e,N)||Object.defineProperty(i,N,{enumerable:!0,get:function(){return oe[N]}})});function M(N){return N&&N.__esModule?N:{default:N}}})(id);async function Qw(i){const r="https://fr24api.flightradar24.com/api/live/flight-positions/full",l={Accept:"application/json",Authorization:"Bearer 9e2dd2d8-c7a9-4fa2-b0ed-636cb07f4045|rLXFrMVWPfXMu59uq3WKWD9yFLoTHll9sXLAjtzodb17ef85","Accept-Version":"v1"};try{if(i===null)console.log("API nije pronaao granice zranog prostora");else{const u=await fetch(`${r}?bounds=${i}`,{method:"GET",headers:l});if(!u.ok){const f=await u.text();throw new Error(`Error ${u.status}: ${f}`)}const h=await u.json();if(h.length!==0)return h.data.map(m=>({lat:m.lat,lon:m.lon,alt:m.alt,call:m.callsign,brz:m.gspeed,modelA:m.type}))}}catch(u){throw console.error("Greka pri dohvaanju podataka o letovima:",u),u}}async function eb(i,e){const n=`https://api.open-meteo.com/v1/elevation?latitude=${i}&longitude=${e}`;try{if(i===null||e===null)return console.log("API nije uspio dohvatiti latitudu ili longitudu"),null;const r=await fetch(n);if(!r.ok){const l=await r.text();throw new Error(`Error ${r.status}: ${l}`)}const a=await r.json();return a!==null?a.elevation:(console.log("API nije pronaao podatke za elevaciju."),null)}catch(r){throw console.error("Greka pri dohvaanju podataka o elevaciji:",r),r}}const Ko="RFC3986",Go={RFC1738:i=>String(i).replace(/%20/g,"+"),RFC3986:i=>String(i)},tb="RFC1738",nb=Array.isArray,Ct=(()=>{const i=[];for(let e=0;e<256;++e)i.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return i})(),yo=1024,ib=(i,e,n,r,a)=>{if(i.length===0)return i;let l=i;if(typeof i=="symbol"?l=Symbol.prototype.toString.call(i):typeof i!="string"&&(l=String(i)),n==="iso-8859-1")return escape(l).replace(/%u[0-9a-f]{4}/gi,function(h){return"%26%23"+parseInt(h.slice(2),16)+"%3B"});let u="";for(let h=0;h<l.length;h+=yo){const f=l.length>=yo?l.slice(h,h+yo):l,m=[];for(let g=0;g<f.length;++g){let _=f.charCodeAt(g);if(_===45||_===46||_===95||_===126||_>=48&&_<=57||_>=65&&_<=90||_>=97&&_<=122||a===tb&&(_===40||_===41)){m[m.length]=f.charAt(g);continue}if(_<128){m[m.length]=Ct[_];continue}if(_<2048){m[m.length]=Ct[192|_>>6]+Ct[128|_&63];continue}if(_<55296||_>=57344){m[m.length]=Ct[224|_>>12]+Ct[128|_>>6&63]+Ct[128|_&63];continue}g+=1,_=65536+((_&1023)<<10|f.charCodeAt(g)&1023),m[m.length]=Ct[240|_>>18]+Ct[128|_>>12&63]+Ct[128|_>>6&63]+Ct[128|_&63]}u+=m.join("")}return u};function rb(i){return!i||typeof i!="object"?!1:!!(i.constructor&&i.constructor.isBuffer&&i.constructor.isBuffer(i))}function jc(i,e){if(nb(i)){const n=[];for(let r=0;r<i.length;r+=1)n.push(e(i[r]));return n}return e(i)}const sb=Object.prototype.hasOwnProperty,ud={brackets(i){return String(i)+"[]"},comma:"comma",indices(i,e){return String(i)+"["+e+"]"},repeat(i){return String(i)}},Lt=Array.isArray,ab=Array.prototype.push,cd=function(i,e){ab.apply(i,Lt(e)?e:[e])},ob=Date.prototype.toISOString,$e={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:ib,encodeValuesOnly:!1,format:Ko,formatter:Go[Ko],indices:!1,serializeDate(i){return ob.call(i)},skipNulls:!1,strictNullHandling:!1};function lb(i){return typeof i=="string"||typeof i=="number"||typeof i=="boolean"||typeof i=="symbol"||typeof i=="bigint"}const wo={};function hd(i,e,n,r,a,l,u,h,f,m,g,_,v,w,P,b,x,k){let A=i,T=k,E=0,$=!1;for(;(T=T.get(wo))!==void 0&&!$;){const B=T.get(i);if(E+=1,typeof B<"u"){if(B===E)throw new RangeError("Cyclic object value");$=!0}typeof T.get(wo)>"u"&&(E=0)}if(typeof m=="function"?A=m(e,A):A instanceof Date?A=v?.(A):n==="comma"&&Lt(A)&&(A=jc(A,function(B){return B instanceof Date?v?.(B):B})),A===null){if(l)return f&&!b?f(e,$e.encoder,x,"key",w):e;A=""}if(lb(A)||rb(A)){if(f){const B=b?e:f(e,$e.encoder,x,"key",w);return[P?.(B)+"="+P?.(f(A,$e.encoder,x,"value",w))]}return[P?.(e)+"="+P?.(String(A))]}const I=[];if(typeof A>"u")return I;let D;if(n==="comma"&&Lt(A))b&&f&&(A=jc(A,f)),D=[{value:A.length>0?A.join(",")||null:void 0}];else if(Lt(m))D=m;else{const B=Object.keys(A);D=g?B.sort(g):B}const j=h?String(e).replace(/\./g,"%2E"):String(e),z=r&&Lt(A)&&A.length===1?j+"[]":j;if(a&&Lt(A)&&A.length===0)return z+"[]";for(let B=0;B<D.length;++B){const F=D[B],he=typeof F=="object"&&typeof F.value<"u"?F.value:A[F];if(u&&he===null)continue;const xe=_&&h?F.replace(/\./g,"%2E"):F,V=Lt(A)?typeof n=="function"?n(z,xe):z:z+(_?"."+xe:"["+xe+"]");k.set(i,E);const X=new WeakMap;X.set(wo,k),cd(I,hd(he,V,n,r,a,l,u,h,n==="comma"&&b&&Lt(A)?null:f,m,g,_,v,w,P,b,x,X))}return I}function ub(i=$e){if(typeof i.allowEmptyArrays<"u"&&typeof i.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof i.encodeDotInKeys<"u"&&typeof i.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(i.encoder!==null&&typeof i.encoder<"u"&&typeof i.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=i.charset||$e.charset;if(typeof i.charset<"u"&&i.charset!=="utf-8"&&i.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=Ko;if(typeof i.format<"u"){if(!sb.call(Go,i.format))throw new TypeError("Unknown format option provided.");n=i.format}const r=Go[n];let a=$e.filter;(typeof i.filter=="function"||Lt(i.filter))&&(a=i.filter);let l;if(i.arrayFormat&&i.arrayFormat in ud?l=i.arrayFormat:"indices"in i?l=i.indices?"indices":"repeat":l=$e.arrayFormat,"commaRoundTrip"in i&&typeof i.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const u=typeof i.allowDots>"u"?i.encodeDotInKeys?!0:$e.allowDots:!!i.allowDots;return{addQueryPrefix:typeof i.addQueryPrefix=="boolean"?i.addQueryPrefix:$e.addQueryPrefix,allowDots:u,allowEmptyArrays:typeof i.allowEmptyArrays=="boolean"?!!i.allowEmptyArrays:$e.allowEmptyArrays,arrayFormat:l,charset:e,charsetSentinel:typeof i.charsetSentinel=="boolean"?i.charsetSentinel:$e.charsetSentinel,commaRoundTrip:!!i.commaRoundTrip,delimiter:typeof i.delimiter>"u"?$e.delimiter:i.delimiter,encode:typeof i.encode=="boolean"?i.encode:$e.encode,encodeDotInKeys:typeof i.encodeDotInKeys=="boolean"?i.encodeDotInKeys:$e.encodeDotInKeys,encoder:typeof i.encoder=="function"?i.encoder:$e.encoder,encodeValuesOnly:typeof i.encodeValuesOnly=="boolean"?i.encodeValuesOnly:$e.encodeValuesOnly,filter:a,format:n,formatter:r,serializeDate:typeof i.serializeDate=="function"?i.serializeDate:$e.serializeDate,skipNulls:typeof i.skipNulls=="boolean"?i.skipNulls:$e.skipNulls,sort:typeof i.sort=="function"?i.sort:null,strictNullHandling:typeof i.strictNullHandling=="boolean"?i.strictNullHandling:$e.strictNullHandling}}function cb(i,e={}){let n=i;const r=ub(e);let a,l;typeof r.filter=="function"?(l=r.filter,n=l("",n)):Lt(r.filter)&&(l=r.filter,a=l);const u=[];if(typeof n!="object"||n===null)return"";const h=ud[r.arrayFormat],f=h==="comma"&&r.commaRoundTrip;a||(a=Object.keys(n)),r.sort&&a.sort(r.sort);const m=new WeakMap;for(let v=0;v<a.length;++v){const w=a[v];r.skipNulls&&n[w]===null||cd(u,hd(n[w],w,h,f,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,m))}const g=u.join(r.delimiter);let _=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?_+="utf8=%26%2310003%3B&":_+="utf8=%E2%9C%93&"),g.length>0?_+g:""}const Vn="4.85.3";let Dc=!1,Xi,dd,fd,Vo,md,pd,gd,_d,vd;function hb(i,e={auto:!1}){if(Dc)throw new Error(`you must \`import 'openai/shims/${i.kind}'\` before importing anything else from openai`);if(Xi)throw new Error(`can't \`import 'openai/shims/${i.kind}'\` after \`import 'openai/shims/${Xi}'\``);Dc=e.auto,Xi=i.kind,dd=i.fetch,fd=i.FormData,Vo=i.File,md=i.ReadableStream,pd=i.getMultipartRequestOptions,gd=i.getDefaultAgent,_d=i.fileFromPath,vd=i.isFsReadStream}class db{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function fb({manuallyImported:i}={}){const e=i?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,a,l;try{n=fetch,r=Request,a=Response,l=Headers}catch(u){throw new Error(`this environment is missing the following Web Fetch API type: ${u.message}. ${e}`)}return{kind:"web",fetch:n,Request:r,Response:a,Headers:l,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(u,h)=>({...h,body:new db(u)}),getDefaultAgent:u=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:u=>!1}}Xi||hb(fb(),{auto:!0});class ae extends Error{}class De extends ae{constructor(e,n,r,a){super(`${De.makeMessage(e,n,r)}`),this.status=e,this.headers=a,this.request_id=a?.["x-request-id"],this.error=n;const l=n;this.code=l?.code,this.param=l?.param,this.type=l?.type}static makeMessage(e,n,r){const a=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,n,r,a){if(!e||!a)return new ga({message:r,cause:Xo(n)});const l=n?.error;return e===400?new yd(e,l,r,a):e===401?new wd(e,l,r,a):e===403?new bd(e,l,r,a):e===404?new xd(e,l,r,a):e===409?new Ad(e,l,r,a):e===422?new Pd(e,l,r,a):e===429?new Sd(e,l,r,a):e>=500?new kd(e,l,r,a):new De(e,l,r,a)}}class yt extends De{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class ga extends De{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class xl extends ga{constructor({message:e}={}){super({message:e??"Request timed out."})}}class yd extends De{}class wd extends De{}class bd extends De{}class xd extends De{}class Ad extends De{}class Pd extends De{}class Sd extends De{}class kd extends De{}class Cd extends ae{constructor(){super("Could not parse response content as the length limit was reached")}}class Td extends ae{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var es=function(i,e,n,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!a:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(i,n):a?a.value=n:e.set(i,n),n},pn=function(i,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(i):r?r.value:e.get(i)},Ye;class _a{constructor(){Ye.set(this,void 0),this.buffer=new Uint8Array,es(this,Ye,null,"f")}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e;let r=new Uint8Array(this.buffer.length+n.length);r.set(this.buffer),r.set(n,this.buffer.length),this.buffer=r;const a=[];let l;for(;(l=mb(this.buffer,pn(this,Ye,"f")))!=null;){if(l.carriage&&pn(this,Ye,"f")==null){es(this,Ye,l.index,"f");continue}if(pn(this,Ye,"f")!=null&&(l.index!==pn(this,Ye,"f")+1||l.carriage)){a.push(this.decodeText(this.buffer.slice(0,pn(this,Ye,"f")-1))),this.buffer=this.buffer.slice(pn(this,Ye,"f")),es(this,Ye,null,"f");continue}const u=pn(this,Ye,"f")!==null?l.preceding-1:l.preceding,h=this.decodeText(this.buffer.slice(0,u));a.push(h),this.buffer=this.buffer.slice(l.index),es(this,Ye,null,"f")}return a}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new ae(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new ae(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new ae("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}Ye=new WeakMap;_a.NEWLINE_CHARS=new Set([`
`,"\r"]);_a.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function mb(i,e){for(let a=e??0;a<i.length;a++){if(i[a]===10)return{preceding:a,index:a+1,carriage:!1};if(i[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function pb(i){for(let r=0;r<i.length-1;r++){if(i[r]===10&&i[r+1]===10||i[r]===13&&i[r+1]===13)return r+2;if(i[r]===13&&i[r+1]===10&&r+3<i.length&&i[r+2]===13&&i[r+3]===10)return r+4}return-1}function Ld(i){if(i[Symbol.asyncIterator])return i;const e=i.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class Ot{constructor(e,n){this.iterator=e,this.controller=n}static fromSSEResponse(e,n){let r=!1;async function*a(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let l=!1;try{for await(const u of gb(e,n))if(!l){if(u.data.startsWith("[DONE]")){l=!0;continue}if(u.event===null){let h;try{h=JSON.parse(u.data)}catch(f){throw console.error("Could not parse message into JSON:",u.data),console.error("From chunk:",u.raw),f}if(h&&h.error)throw new De(void 0,h.error,void 0,void 0);yield h}else{let h;try{h=JSON.parse(u.data)}catch(f){throw console.error("Could not parse message into JSON:",u.data),console.error("From chunk:",u.raw),f}if(u.event=="error")throw new De(void 0,h.error,h.message,void 0);yield{event:u.event,data:h}}}l=!0}catch(u){if(u instanceof Error&&u.name==="AbortError")return;throw u}finally{l||n.abort()}}return new Ot(a,n)}static fromReadableStream(e,n){let r=!1;async function*a(){const u=new _a,h=Ld(e);for await(const f of h)for(const m of u.decode(f))yield m;for(const f of u.flush())yield f}async function*l(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let u=!1;try{for await(const h of a())u||h&&(yield JSON.parse(h));u=!0}catch(h){if(h instanceof Error&&h.name==="AbortError")return;throw h}finally{u||n.abort()}}return new Ot(l,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),a=l=>({next:()=>{if(l.length===0){const u=r.next();e.push(u),n.push(u)}return l.shift()}});return[new Ot(()=>a(e),this.controller),new Ot(()=>a(n),this.controller)]}toReadableStream(){const e=this;let n;const r=new TextEncoder;return new md({async start(){n=e[Symbol.asyncIterator]()},async pull(a){try{const{value:l,done:u}=await n.next();if(u)return a.close();const h=r.encode(JSON.stringify(l)+`
`);a.enqueue(h)}catch(l){a.error(l)}},async cancel(){await n.return?.()}})}}async function*gb(i,e){if(!i.body)throw e.abort(),new ae("Attempted to iterate over a response with no body");const n=new vb,r=new _a,a=Ld(i.body);for await(const l of _b(a))for(const u of r.decode(l)){const h=n.decode(u);h&&(yield h)}for(const l of r.flush()){const u=n.decode(l);u&&(yield u)}}async function*_b(i){let e=new Uint8Array;for await(const n of i){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?new TextEncoder().encode(n):n;let a=new Uint8Array(e.length+r.length);a.set(e),a.set(r,e.length),e=a;let l;for(;(l=pb(e))!==-1;)yield e.slice(0,l),e=e.slice(l)}e.length>0&&(yield e)}class vb{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,a]=yb(e,":");return a.startsWith(" ")&&(a=a.substring(1)),n==="event"?this.event=a:n==="data"&&this.data.push(a),null}}function yb(i,e){const n=i.indexOf(e);return n!==-1?[i.substring(0,n),e,i.substring(n+e.length)]:[i,"",""]}const Ed=i=>i!=null&&typeof i=="object"&&typeof i.url=="string"&&typeof i.blob=="function",Od=i=>i!=null&&typeof i=="object"&&typeof i.name=="string"&&typeof i.lastModified=="number"&&va(i),va=i=>i!=null&&typeof i=="object"&&typeof i.size=="number"&&typeof i.type=="string"&&typeof i.text=="function"&&typeof i.slice=="function"&&typeof i.arrayBuffer=="function",wb=i=>Od(i)||Ed(i)||vd(i);async function $d(i,e,n){if(i=await i,Od(i))return i;if(Ed(i)){const a=await i.blob();e||(e=new URL(i.url).pathname.split(/[\\/]/).pop()??"unknown_file");const l=va(a)?[await a.arrayBuffer()]:[a];return new Vo(l,e,n)}const r=await bb(i);if(e||(e=Ab(i)??"unknown_file"),!n?.type){const a=r[0]?.type;typeof a=="string"&&(n={...n,type:a})}return new Vo(r,e,n)}async function bb(i){let e=[];if(typeof i=="string"||ArrayBuffer.isView(i)||i instanceof ArrayBuffer)e.push(i);else if(va(i))e.push(await i.arrayBuffer());else if(Pb(i))for await(const n of i)e.push(n);else throw new Error(`Unexpected data type: ${typeof i}; constructor: ${i?.constructor?.name}; props: ${xb(i)}`);return e}function xb(i){return`[${Object.getOwnPropertyNames(i).map(n=>`"${n}"`).join(", ")}]`}function Ab(i){return bo(i.name)||bo(i.filename)||bo(i.path)?.split(/[\\/]/).pop()}const bo=i=>{if(typeof i=="string")return i;if(typeof Buffer<"u"&&i instanceof Buffer)return String(i)},Pb=i=>i!=null&&typeof i=="object"&&typeof i[Symbol.asyncIterator]=="function",Bc=i=>i&&typeof i=="object"&&i.body&&i[Symbol.toStringTag]==="MultipartBody",si=async i=>{const e=await Sb(i.body);return pd(e,i)},Sb=async i=>{const e=new fd;return await Promise.all(Object.entries(i||{}).map(([n,r])=>Jo(e,n,r))),e},Jo=async(i,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")i.append(e,String(n));else if(wb(n)){const r=await $d(n);i.append(e,r)}else if(Array.isArray(n))await Promise.all(n.map(r=>Jo(i,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,a])=>Jo(i,`${e}[${r}]`,a)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var Md={},kb=function(i,e,n,r,a){if(typeof e=="function"?i!==e||!0:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(i,n),n},Cb=function(i,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(i):r?r.value:e.get(i)},ts;async function Id(i){const{response:e}=i;if(i.options.stream)return ei("response",e.status,e.url,e.headers,e.body),i.options.__streamClass?i.options.__streamClass.fromSSEResponse(e,i.controller):Ot.fromSSEResponse(e,i.controller);if(e.status===204)return null;if(i.options.__binaryResponse)return e;const n=e.headers.get("content-type");if(n?.includes("application/json")||n?.includes("application/vnd.api+json")){const l=await e.json();return ei("response",e.status,e.url,e.headers,l),Rd(l,e)}const a=await e.text();return ei("response",e.status,e.url,e.headers,a),a}function Rd(i,e){return!i||typeof i!="object"||Array.isArray(i)?i:Object.defineProperty(i,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class ya extends Promise{constructor(e,n=Id){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=n}_thenUnwrap(e){return new ya(this.responsePromise,async n=>Rd(e(await this.parseResponse(n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class Tb{constructor({baseURL:e,maxRetries:n=2,timeout:r=6e5,httpAgent:a,fetch:l}){this.baseURL=e,this.maxRetries=xo("maxRetries",n),this.timeout=xo("timeout",r),this.httpAgent=a,this.fetch=l??dd}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...Ib(),...this.authHeaders(e)}}validateHeaders(e,n){}defaultIdempotencyKey(){return`stainless-node-retry-${Db()}`}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(async a=>{const l=a&&va(a?.body)?new DataView(await a.body.arrayBuffer()):a?.body instanceof DataView?a.body:a?.body instanceof ArrayBuffer?new DataView(a.body):a&&ArrayBuffer.isView(a?.body)?new DataView(a.body.buffer):a?.body;return{method:e,path:n,...a,body:l}}))}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:n=0}={}){e={...e};const{method:r,path:a,query:l,headers:u={}}=e,h=ArrayBuffer.isView(e.body)||e.__binaryRequest&&typeof e.body=="string"?e.body:Bc(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,f=this.calculateContentLength(h),m=this.buildURL(a,l);"timeout"in e&&xo("timeout",e.timeout),e.timeout=e.timeout??this.timeout;const g=e.httpAgent??this.httpAgent??gd(m),_=e.timeout+1e3;typeof g?.options?.timeout=="number"&&_>(g.options.timeout??0)&&(g.options.timeout=_),this.idempotencyHeader&&r!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),u[this.idempotencyHeader]=e.idempotencyKey);const v=this.buildHeaders({options:e,headers:u,contentLength:f,retryCount:n});return{req:{method:r,...h&&{body:h},headers:v,...g&&{agent:g},signal:e.signal??null},url:m,timeout:e.timeout}}buildHeaders({options:e,headers:n,contentLength:r,retryCount:a}){const l={};r&&(l["content-length"]=r);const u=this.defaultHeaders(e);return Uc(l,u),Uc(l,n),Bc(e.body)&&Xi!=="node"&&delete l["content-type"],is(u,"x-stainless-retry-count")===void 0&&is(n,"x-stainless-retry-count")===void 0&&(l["x-stainless-retry-count"]=String(a)),is(u,"x-stainless-timeout")===void 0&&is(n,"x-stainless-timeout")===void 0&&e.timeout&&(l["x-stainless-timeout"]=String(e.timeout)),this.validateHeaders(l,n),l}async prepareOptions(e){}async prepareRequest(e,{url:n,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(n=>[...n])):{...e}:{}}makeStatusError(e,n,r,a){return De.generate(e,n,r,a)}request(e,n=null){return new ya(this.makeRequest(e,n))}async makeRequest(e,n){const r=await e,a=r.maxRetries??this.maxRetries;n==null&&(n=a),await this.prepareOptions(r);const{req:l,url:u,timeout:h}=this.buildRequest(r,{retryCount:a-n});if(await this.prepareRequest(l,{url:u,options:r}),ei("request",u,r,l.headers),r.signal?.aborted)throw new yt;const f=new AbortController,m=await this.fetchWithTimeout(u,l,h,f).catch(Xo);if(m instanceof Error){if(r.signal?.aborted)throw new yt;if(n)return this.retryRequest(r,n);throw m.name==="AbortError"?new xl:new ga({cause:m})}const g=Eb(m.headers);if(!m.ok){if(n&&this.shouldRetry(m)){const x=`retrying, ${n} attempts remaining`;return ei(`response (error; ${x})`,m.status,u,g),this.retryRequest(r,n,g)}const _=await m.text().catch(x=>Xo(x).message),v=Rb(_),w=v?void 0:_;throw ei(`response (error; ${n?"(error; no more retries left)":"(error; not retryable)"})`,m.status,u,g,w),this.makeStatusError(m.status,v,w,g)}return{response:m,options:r,controller:f}}requestAPIList(e,n){const r=this.makeRequest(n,null);return new Lb(this,r,e)}buildURL(e,n){const r=jb(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return jd(a)||(n={...a,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new ae(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,n,r,a){const{signal:l,...u}=n||{};l&&l.addEventListener("abort",()=>a.abort());const h=setTimeout(()=>a.abort(),r),f={signal:a.signal,...u};return f.method&&(f.method=f.method.toUpperCase()),this.fetch.call(void 0,e,f).finally(()=>{clearTimeout(h)})}shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r){let a;const l=r?.["retry-after-ms"];if(l){const h=parseFloat(l);Number.isNaN(h)||(a=h)}const u=r?.["retry-after"];if(u&&!a){const h=parseFloat(u);Number.isNaN(h)?a=Date.parse(u)-Date.now():a=h*1e3}if(!(a&&0<=a&&a<60*1e3)){const h=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,h)}return await pr(a),this.makeRequest(e,n-1)}calculateDefaultRetryTimeoutMillis(e,n){const l=n-e,u=Math.min(.5*Math.pow(2,l),8),h=1-Math.random()*.25;return u*h*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Vn}`}}class qd{constructor(e,n,r,a){ts.set(this,void 0),kb(this,ts,e),this.options=a,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new ae("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const n={...this.options};if("params"in e&&typeof n.query=="object")n.query={...n.query,...e.params};else if("url"in e){const r=[...Object.entries(n.query||{}),...e.url.searchParams.entries()];for(const[a,l]of r)e.url.searchParams.set(a,l);n.query=void 0,n.path=e.url.toString()}return await Cb(this,ts,"f").requestAPIList(this.constructor,n)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(ts=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class Lb extends ya{constructor(e,n,r){super(n,async a=>new r(e,a.response,await Id(a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}const Eb=i=>new Proxy(Object.fromEntries(i.entries()),{get(e,n){const r=n.toString();return e[r.toLowerCase()]||e[r]}}),Ob={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},ze=i=>typeof i=="object"&&i!==null&&!jd(i)&&Object.keys(i).every(e=>Dd(Ob,e)),$b=()=>{if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Vn,"X-Stainless-OS":zc(Deno.build.os),"X-Stainless-Arch":Nc(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Vn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Vn,"X-Stainless-OS":zc(process.platform),"X-Stainless-Arch":Nc(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const i=Mb();return i?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Vn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${i.browser}`,"X-Stainless-Runtime-Version":i.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Vn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Mb(){if(typeof navigator>"u"||!navigator)return null;const i=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of i){const r=n.exec(navigator.userAgent);if(r){const a=r[1]||0,l=r[2]||0,u=r[3]||0;return{browser:e,version:`${a}.${l}.${u}`}}}return null}const Nc=i=>i==="x32"?"x32":i==="x86_64"||i==="x64"?"x64":i==="arm"?"arm":i==="aarch64"||i==="arm64"?"arm64":i?`other:${i}`:"unknown",zc=i=>(i=i.toLowerCase(),i.includes("ios")?"iOS":i==="android"?"Android":i==="darwin"?"MacOS":i==="win32"?"Windows":i==="freebsd"?"FreeBSD":i==="openbsd"?"OpenBSD":i==="linux"?"Linux":i?`Other:${i}`:"Unknown");let Fc;const Ib=()=>Fc??(Fc=$b()),Rb=i=>{try{return JSON.parse(i)}catch{return}},qb=/^[a-z][a-z0-9+.-]*:/i,jb=i=>qb.test(i),pr=i=>new Promise(e=>setTimeout(e,i)),xo=(i,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ae(`${i} must be an integer`);if(e<0)throw new ae(`${i} must be a positive integer`);return e},Xo=i=>{if(i instanceof Error)return i;if(typeof i=="object"&&i!==null)try{return new Error(JSON.stringify(i))}catch{}return new Error(i)},ns=i=>{if(typeof process<"u")return Md?.[i]?.trim()??void 0;if(typeof Deno<"u")return Deno.env?.get?.(i)?.trim()};function jd(i){if(!i)return!0;for(const e in i)return!1;return!0}function Dd(i,e){return Object.prototype.hasOwnProperty.call(i,e)}function Uc(i,e){for(const n in e){if(!Dd(e,n))continue;const r=n.toLowerCase();if(!r)continue;const a=e[n];a===null?delete i[r]:a!==void 0&&(i[r]=a)}}const Zc=new Set(["authorization","api-key"]);function ei(i,...e){if(typeof process<"u"&&Md?.DEBUG==="true"){const n=e.map(r=>{if(!r)return r;if(r.headers){const l={...r,headers:{...r.headers}};for(const u in r.headers)Zc.has(u.toLowerCase())&&(l.headers[u]="REDACTED");return l}let a=null;for(const l in r)Zc.has(l.toLowerCase())&&(a??(a={...r}),a[l]="REDACTED");return a??r});console.log(`OpenAI:DEBUG:${i}`,...n)}}const Db=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const e=Math.random()*16|0;return(i==="x"?e:e&3|8).toString(16)}),Bb=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",Nb=i=>typeof i?.get=="function",is=(i,e)=>{const n=e.toLowerCase();if(Nb(i)){const r=e[0]?.toUpperCase()+e.substring(1).replace(/([^\w])(\w)/g,(a,l,u)=>l+u.toUpperCase());for(const a of[e,n,e.toUpperCase(),r]){const l=i.get(a);if(l)return l}}for(const[r,a]of Object.entries(i))if(r.toLowerCase()===n)return Array.isArray(a)?(a.length<=1||console.warn(`Received ${a.length} entries for the ${e} header, using the first entry.`),a[0]):a};function Ao(i){return i!=null&&typeof i=="object"&&!Array.isArray(i)}class zb extends qd{constructor(e,n,r,a){super(e,n,r,a),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class it extends qd{constructor(e,n,r,a){super(e,n,r,a),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const n=Object.fromEntries(e.url.searchParams);return Object.keys(n).length?n:null}nextPageInfo(){const e=this.getPaginatedItems();if(!e.length)return null;const n=e[e.length-1]?.id;return n?{params:{after:n}}:null}}class fe{constructor(e){this._client=e}}let Bd=class extends fe{list(e,n={},r){return ze(n)?this.list(e,{},n):this._client.getAPIList(`/chat/completions/${e}/messages`,Fb,{query:n,...r})}},wa=class extends fe{constructor(){super(...arguments),this.messages=new Bd(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return ze(e)?this.list({},e):this._client.getAPIList("/chat/completions",ba,{query:e,...n})}del(e,n){return this._client.delete(`/chat/completions/${e}`,n)}};class ba extends it{}class Fb extends it{}wa.ChatCompletionsPage=ba;wa.Messages=Bd;let xa=class extends fe{constructor(){super(...arguments),this.completions=new wa(this._client)}};xa.Completions=wa;xa.ChatCompletionsPage=ba;class Nd extends fe{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:{Accept:"application/octet-stream",...n?.headers},__binaryResponse:!0})}}class zd extends fe{create(e,n){return this._client.post("/audio/transcriptions",si({body:e,...n,__metadata:{model:e.model}}))}}class Fd extends fe{create(e,n){return this._client.post("/audio/translations",si({body:e,...n,__metadata:{model:e.model}}))}}class gr extends fe{constructor(){super(...arguments),this.transcriptions=new zd(this._client),this.translations=new Fd(this._client),this.speech=new Nd(this._client)}}gr.Transcriptions=zd;gr.Translations=Fd;gr.Speech=Nd;class Al extends fe{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(`/batches/${e}`,n)}list(e={},n){return ze(e)?this.list({},e):this._client.getAPIList("/batches",Pl,{query:e,...n})}cancel(e,n){return this._client.post(`/batches/${e}/cancel`,n)}}class Pl extends it{}Al.BatchesPage=Pl;class Sl extends fe{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,n){return this._client.get(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,n,r){return this._client.post(`/assistants/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e={},n){return ze(e)?this.list({},e):this._client.getAPIList("/assistants",kl,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,n){return this._client.delete(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class kl extends it{}Sl.AssistantsPage=kl;function Wc(i){return typeof i.parse=="function"}const ti=i=>i?.role==="assistant",Ud=i=>i?.role==="function",Zd=i=>i?.role==="tool";var gt=function(i,e,n,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!a:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(i,n):a?a.value=n:e.set(i,n),n},ke=function(i,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(i):r?r.value:e.get(i)},Yo,ds,fs,zi,Fi,ms,Ui,Ft,Zi,Ps,Ss,Jn,Wd;class Hd{constructor(){Yo.add(this),this.controller=new AbortController,ds.set(this,void 0),fs.set(this,()=>{}),zi.set(this,()=>{}),Fi.set(this,void 0),ms.set(this,()=>{}),Ui.set(this,()=>{}),Ft.set(this,{}),Zi.set(this,!1),Ps.set(this,!1),Ss.set(this,!1),Jn.set(this,!1),gt(this,ds,new Promise((e,n)=>{gt(this,fs,e,"f"),gt(this,zi,n,"f")}),"f"),gt(this,Fi,new Promise((e,n)=>{gt(this,ms,e,"f"),gt(this,Ui,n,"f")}),"f"),ke(this,ds,"f").catch(()=>{}),ke(this,Fi,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},ke(this,Yo,"m",Wd).bind(this))},0)}_connected(){this.ended||(ke(this,fs,"f").call(this),this._emit("connect"))}get ended(){return ke(this,Zi,"f")}get errored(){return ke(this,Ps,"f")}get aborted(){return ke(this,Ss,"f")}abort(){this.controller.abort()}on(e,n){return(ke(this,Ft,"f")[e]||(ke(this,Ft,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=ke(this,Ft,"f")[e];if(!r)return this;const a=r.findIndex(l=>l.listener===n);return a>=0&&r.splice(a,1),this}once(e,n){return(ke(this,Ft,"f")[e]||(ke(this,Ft,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{gt(this,Jn,!0,"f"),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){gt(this,Jn,!0,"f"),await ke(this,Fi,"f")}_emit(e,...n){if(ke(this,Zi,"f"))return;e==="end"&&(gt(this,Zi,!0,"f"),ke(this,ms,"f").call(this));const r=ke(this,Ft,"f")[e];if(r&&(ke(this,Ft,"f")[e]=r.filter(a=>!a.once),r.forEach(({listener:a})=>a(...n))),e==="abort"){const a=n[0];!ke(this,Jn,"f")&&!r?.length&&Promise.reject(a),ke(this,zi,"f").call(this,a),ke(this,Ui,"f").call(this,a),this._emit("end");return}if(e==="error"){const a=n[0];!ke(this,Jn,"f")&&!r?.length&&Promise.reject(a),ke(this,zi,"f").call(this,a),ke(this,Ui,"f").call(this,a),this._emit("end")}}_emitFinal(){}}ds=new WeakMap,fs=new WeakMap,zi=new WeakMap,Fi=new WeakMap,ms=new WeakMap,Ui=new WeakMap,Ft=new WeakMap,Zi=new WeakMap,Ps=new WeakMap,Ss=new WeakMap,Jn=new WeakMap,Yo=new WeakSet,Wd=function(e){if(gt(this,Ps,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new yt),e instanceof yt)return gt(this,Ss,!0,"f"),this._emit("abort",e);if(e instanceof ae)return this._emit("error",e);if(e instanceof Error){const n=new ae(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new ae(String(e)))};function Kd(i){return i?.$brand==="auto-parseable-response-format"}function _r(i){return i?.$brand==="auto-parseable-tool"}function Ub(i,e){return!e||!Gd(e)?{...i,choices:i.choices.map(n=>({...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:Cl(i,e)}function Cl(i,e){const n=i.choices.map(r=>{if(r.finish_reason==="length")throw new Cd;if(r.finish_reason==="content_filter")throw new Td;return{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:r.message.tool_calls?.map(a=>Wb(e,a))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?Zb(e,r.message.content):null}}});return{...i,choices:n}}function Zb(i,e){return i.response_format?.type!=="json_schema"?null:i.response_format?.type==="json_schema"?"$parseRaw"in i.response_format?i.response_format.$parseRaw(e):JSON.parse(e):null}function Wb(i,e){const n=i.tools?.find(r=>r.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:_r(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function Hb(i,e){if(!i)return!1;const n=i.tools?.find(r=>r.function?.name===e.function.name);return _r(n)||n?.function.strict||!1}function Gd(i){return Kd(i.response_format)?!0:i.tools?.some(e=>_r(e)||e.type==="function"&&e.function.strict===!0)??!1}function Kb(i){for(const e of i??[]){if(e.type!=="function")throw new ae(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new ae(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var He=function(i,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(i):r?r.value:e.get(i)},Be,Qo,ks,el,tl,nl,Vd,il;const Hc=10;class Jd extends Hd{constructor(){super(...arguments),Be.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),(Ud(e)||Zd(e))&&e.content)this._emit("functionCallResult",e.content);else if(ti(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(ti(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new ae("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),He(this,Be,"m",Qo).call(this)}async finalMessage(){return await this.done(),He(this,Be,"m",ks).call(this)}async finalFunctionCall(){return await this.done(),He(this,Be,"m",el).call(this)}async finalFunctionCallResult(){return await this.done(),He(this,Be,"m",tl).call(this)}async totalUsage(){return await this.done(),He(this,Be,"m",nl).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=He(this,Be,"m",ks).call(this);n&&this._emit("finalMessage",n);const r=He(this,Be,"m",Qo).call(this);r&&this._emit("finalContent",r);const a=He(this,Be,"m",el).call(this);a&&this._emit("finalFunctionCall",a);const l=He(this,Be,"m",tl).call(this);l!=null&&this._emit("finalFunctionCallResult",l),this._chatCompletions.some(u=>u.usage)&&this._emit("totalUsage",He(this,Be,"m",nl).call(this))}async _createChatCompletion(e,n,r){const a=r?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),He(this,Be,"m",Vd).call(this,n);const l=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Cl(l,n))}async _runChatCompletion(e,n,r){for(const a of n.messages)this._addMessage(a,!1);return await this._createChatCompletion(e,n,r)}async _runFunctions(e,n,r){const a="function",{function_call:l="auto",stream:u,...h}=n,f=typeof l!="string"&&l?.name,{maxChatCompletions:m=Hc}=r||{},g={};for(const v of n.functions)g[v.name||v.function.name]=v;const _=n.functions.map(v=>({name:v.name||v.function.name,parameters:v.parameters,description:v.description}));for(const v of n.messages)this._addMessage(v,!1);for(let v=0;v<m;++v){const P=(await this._createChatCompletion(e,{...h,function_call:l,functions:_,messages:[...this.messages]},r)).choices[0]?.message;if(!P)throw new ae("missing message in ChatCompletion response");if(!P.function_call)return;const{name:b,arguments:x}=P.function_call,k=g[b];if(k){if(f&&f!==b){const $=`Invalid function_call: ${JSON.stringify(b)}. ${JSON.stringify(f)} requested. Please try again`;this._addMessage({role:a,name:b,content:$});continue}}else{const $=`Invalid function_call: ${JSON.stringify(b)}. Available options are: ${_.map(I=>JSON.stringify(I.name)).join(", ")}. Please try again`;this._addMessage({role:a,name:b,content:$});continue}let A;try{A=Wc(k)?await k.parse(x):x}catch($){this._addMessage({role:a,name:b,content:$ instanceof Error?$.message:String($)});continue}const T=await k.function(A,this),E=He(this,Be,"m",il).call(this,T);if(this._addMessage({role:a,name:b,content:E}),f)return}}async _runTools(e,n,r){const a="tool",{tool_choice:l="auto",stream:u,...h}=n,f=typeof l!="string"&&l?.function?.name,{maxChatCompletions:m=Hc}=r||{},g=n.tools.map(w=>{if(_r(w)){if(!w.$callback)throw new ae("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:w.$callback,name:w.function.name,description:w.function.description||"",parameters:w.function.parameters,parse:w.$parseRaw,strict:!0}}}return w}),_={};for(const w of g)w.type==="function"&&(_[w.function.name||w.function.function.name]=w.function);const v="tools"in n?g.map(w=>w.type==="function"?{type:"function",function:{name:w.function.name||w.function.function.name,parameters:w.function.parameters,description:w.function.description,strict:w.function.strict}}:w):void 0;for(const w of n.messages)this._addMessage(w,!1);for(let w=0;w<m;++w){const b=(await this._createChatCompletion(e,{...h,tool_choice:l,tools:v,messages:[...this.messages]},r)).choices[0]?.message;if(!b)throw new ae("missing message in ChatCompletion response");if(!b.tool_calls?.length)return;for(const x of b.tool_calls){if(x.type!=="function")continue;const k=x.id,{name:A,arguments:T}=x.function,E=_[A];if(E){if(f&&f!==A){const j=`Invalid tool_call: ${JSON.stringify(A)}. ${JSON.stringify(f)} requested. Please try again`;this._addMessage({role:a,tool_call_id:k,content:j});continue}}else{const j=`Invalid tool_call: ${JSON.stringify(A)}. Available options are: ${Object.keys(_).map(z=>JSON.stringify(z)).join(", ")}. Please try again`;this._addMessage({role:a,tool_call_id:k,content:j});continue}let $;try{$=Wc(E)?await E.parse(T):T}catch(j){const z=j instanceof Error?j.message:String(j);this._addMessage({role:a,tool_call_id:k,content:z});continue}const I=await E.function($,this),D=He(this,Be,"m",il).call(this,I);if(this._addMessage({role:a,tool_call_id:k,content:D}),f)return}}}}Be=new WeakSet,Qo=function(){return He(this,Be,"m",ks).call(this).content??null},ks=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(ti(n)){const{function_call:r,...a}=n,l={...a,content:n.content??null,refusal:n.refusal??null};return r&&(l.function_call=r),l}}throw new ae("stream ended without producing a ChatCompletionMessage with role=assistant")},el=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(ti(n)&&n?.function_call)return n.function_call;if(ti(n)&&n?.tool_calls?.length)return n.tool_calls.at(-1)?.function}},tl=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(Ud(n)&&n.content!=null||Zd(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>r.role==="assistant"&&r.tool_calls?.some(a=>a.type==="function"&&a.id===n.tool_call_id)))return n.content}},nl=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},Vd=function(e){if(e.n!=null&&e.n>1)throw new ae("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},il=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class nr extends Jd{static runFunctions(e,n,r){const a=new nr,l={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return a._run(()=>a._runFunctions(e,n,l)),a}static runTools(e,n,r){const a=new nr,l={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return a._run(()=>a._runTools(e,n,l)),a}_addMessage(e,n=!0){super._addMessage(e,n),ti(e)&&e.content&&this._emit("content",e.content)}}const Xd=1,Yd=2,Qd=4,ef=8,tf=16,nf=32,rf=64,sf=128,af=256,of=sf|af,lf=tf|nf|of|rf,uf=Xd|Yd|lf,cf=Qd|ef,Gb=uf|cf,Ie={STR:Xd,NUM:Yd,ARR:Qd,OBJ:ef,NULL:tf,BOOL:nf,NAN:rf,INFINITY:sf,MINUS_INFINITY:af,INF:of,SPECIAL:lf,ATOM:uf,COLLECTION:cf,ALL:Gb};class Vb extends Error{}class Jb extends Error{}function Xb(i,e=Ie.ALL){if(typeof i!="string")throw new TypeError(`expecting str, got ${typeof i}`);if(!i.trim())throw new Error(`${i} is empty`);return Yb(i.trim(),e)}const Yb=(i,e)=>{const n=i.length;let r=0;const a=v=>{throw new Vb(`${v} at position ${r}`)},l=v=>{throw new Jb(`${v} at position ${r}`)},u=()=>(_(),r>=n&&a("Unexpected end of input"),i[r]==='"'?h():i[r]==="{"?f():i[r]==="["?m():i.substring(r,r+4)==="null"||Ie.NULL&e&&n-r<4&&"null".startsWith(i.substring(r))?(r+=4,null):i.substring(r,r+4)==="true"||Ie.BOOL&e&&n-r<4&&"true".startsWith(i.substring(r))?(r+=4,!0):i.substring(r,r+5)==="false"||Ie.BOOL&e&&n-r<5&&"false".startsWith(i.substring(r))?(r+=5,!1):i.substring(r,r+8)==="Infinity"||Ie.INFINITY&e&&n-r<8&&"Infinity".startsWith(i.substring(r))?(r+=8,1/0):i.substring(r,r+9)==="-Infinity"||Ie.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(i.substring(r))?(r+=9,-1/0):i.substring(r,r+3)==="NaN"||Ie.NAN&e&&n-r<3&&"NaN".startsWith(i.substring(r))?(r+=3,NaN):g()),h=()=>{const v=r;let w=!1;for(r++;r<n&&(i[r]!=='"'||w&&i[r-1]==="\\");)w=i[r]==="\\"?!w:!1,r++;if(i.charAt(r)=='"')try{return JSON.parse(i.substring(v,++r-Number(w)))}catch(P){l(String(P))}else if(Ie.STR&e)try{return JSON.parse(i.substring(v,r-Number(w))+'"')}catch{return JSON.parse(i.substring(v,i.lastIndexOf("\\"))+'"')}a("Unterminated string literal")},f=()=>{r++,_();const v={};try{for(;i[r]!=="}";){if(_(),r>=n&&Ie.OBJ&e)return v;const w=h();_(),r++;try{const P=u();Object.defineProperty(v,w,{value:P,writable:!0,enumerable:!0,configurable:!0})}catch(P){if(Ie.OBJ&e)return v;throw P}_(),i[r]===","&&r++}}catch{if(Ie.OBJ&e)return v;a("Expected '}' at end of object")}return r++,v},m=()=>{r++;const v=[];try{for(;i[r]!=="]";)v.push(u()),_(),i[r]===","&&r++}catch{if(Ie.ARR&e)return v;a("Expected ']' at end of array")}return r++,v},g=()=>{if(r===0){i==="-"&&Ie.NUM&e&&a("Not sure what '-' is");try{return JSON.parse(i)}catch(w){if(Ie.NUM&e)try{return i[i.length-1]==="."?JSON.parse(i.substring(0,i.lastIndexOf("."))):JSON.parse(i.substring(0,i.lastIndexOf("e")))}catch{}l(String(w))}}const v=r;for(i[r]==="-"&&r++;i[r]&&!",]}".includes(i[r]);)r++;r==n&&!(Ie.NUM&e)&&a("Unterminated number literal");try{return JSON.parse(i.substring(v,r))}catch{i.substring(v,r)==="-"&&Ie.NUM&e&&a("Not sure what '-' is");try{return JSON.parse(i.substring(v,i.lastIndexOf("e")))}catch(P){l(String(P))}}},_=()=>{for(;r<n&&` 
\r	`.includes(i[r]);)r++};return u()},Kc=i=>Xb(i,Ie.ALL^Ie.NUM);var Wn=function(i,e,n,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!a:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(i,n):a?a.value=n:e.set(i,n),n},ge=function(i,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(i):r?r.value:e.get(i)},Oe,zt,Hn,Jt,Po,rs,So,ko,Co,ss,To,Gc;class ir extends Jd{constructor(e){super(),Oe.add(this),zt.set(this,void 0),Hn.set(this,void 0),Jt.set(this,void 0),Wn(this,zt,e,"f"),Wn(this,Hn,[],"f")}get currentChatCompletionSnapshot(){return ge(this,Jt,"f")}static fromReadableStream(e){const n=new ir(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const a=new ir(n);return a._run(()=>a._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createChatCompletion(e,n,r){super._createChatCompletion;const a=r?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),ge(this,Oe,"m",Po).call(this);const l=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const u of l)ge(this,Oe,"m",So).call(this,u);if(l.controller.signal?.aborted)throw new yt;return this._addChatCompletion(ge(this,Oe,"m",ss).call(this))}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),ge(this,Oe,"m",Po).call(this),this._connected();const a=Ot.fromReadableStream(e,this.controller);let l;for await(const u of a)l&&l!==u.id&&this._addChatCompletion(ge(this,Oe,"m",ss).call(this)),ge(this,Oe,"m",So).call(this,u),l=u.id;if(a.controller.signal?.aborted)throw new yt;return this._addChatCompletion(ge(this,Oe,"m",ss).call(this))}[(zt=new WeakMap,Hn=new WeakMap,Jt=new WeakMap,Oe=new WeakSet,Po=function(){this.ended||Wn(this,Jt,void 0,"f")},rs=function(n){let r=ge(this,Hn,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},ge(this,Hn,"f")[n.index]=r,r)},So=function(n){if(this.ended)return;const r=ge(this,Oe,"m",Gc).call(this,n);this._emit("chunk",n,r);for(const a of n.choices){const l=r.choices[a.index];a.delta.content!=null&&l.message?.role==="assistant"&&l.message?.content&&(this._emit("content",a.delta.content,l.message.content),this._emit("content.delta",{delta:a.delta.content,snapshot:l.message.content,parsed:l.message.parsed})),a.delta.refusal!=null&&l.message?.role==="assistant"&&l.message?.refusal&&this._emit("refusal.delta",{delta:a.delta.refusal,snapshot:l.message.refusal}),a.logprobs?.content!=null&&l.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:a.logprobs?.content,snapshot:l.logprobs?.content??[]}),a.logprobs?.refusal!=null&&l.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:a.logprobs?.refusal,snapshot:l.logprobs?.refusal??[]});const u=ge(this,Oe,"m",rs).call(this,l);l.finish_reason&&(ge(this,Oe,"m",Co).call(this,l),u.current_tool_call_index!=null&&ge(this,Oe,"m",ko).call(this,l,u.current_tool_call_index));for(const h of a.delta.tool_calls??[])u.current_tool_call_index!==h.index&&(ge(this,Oe,"m",Co).call(this,l),u.current_tool_call_index!=null&&ge(this,Oe,"m",ko).call(this,l,u.current_tool_call_index)),u.current_tool_call_index=h.index;for(const h of a.delta.tool_calls??[]){const f=l.message.tool_calls?.[h.index];f?.type&&(f?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:f.function?.name,index:h.index,arguments:f.function.arguments,parsed_arguments:f.function.parsed_arguments,arguments_delta:h.function?.arguments??""}):(f?.type,void 0))}}},ko=function(n,r){if(ge(this,Oe,"m",rs).call(this,n).done_tool_calls.has(r))return;const l=n.message.tool_calls?.[r];if(!l)throw new Error("no tool call snapshot");if(!l.type)throw new Error("tool call snapshot missing `type`");if(l.type==="function"){const u=ge(this,zt,"f")?.tools?.find(h=>h.type==="function"&&h.function.name===l.function.name);this._emit("tool_calls.function.arguments.done",{name:l.function.name,index:r,arguments:l.function.arguments,parsed_arguments:_r(u)?u.$parseRaw(l.function.arguments):u?.function.strict?JSON.parse(l.function.arguments):null})}else l.type},Co=function(n){const r=ge(this,Oe,"m",rs).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const a=ge(this,Oe,"m",To).call(this);this._emit("content.done",{content:n.message.content,parsed:a?a.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},ss=function(){if(this.ended)throw new ae("stream has ended, this shouldn't happen");const n=ge(this,Jt,"f");if(!n)throw new ae("request ended without sending any chunks");return Wn(this,Jt,void 0,"f"),Wn(this,Hn,[],"f"),Qb(n,ge(this,zt,"f"))},To=function(){const n=ge(this,zt,"f")?.response_format;return Kd(n)?n:null},Gc=function(n){var r,a,l,u;let h=ge(this,Jt,"f");const{choices:f,...m}=n;h?Object.assign(h,m):h=Wn(this,Jt,{...m,choices:[]},"f");for(const{delta:g,finish_reason:_,index:v,logprobs:w=null,...P}of n.choices){let b=h.choices[v];if(b||(b=h.choices[v]={finish_reason:_,index:v,message:{},logprobs:w,...P}),w)if(!b.logprobs)b.logprobs=Object.assign({},w);else{const{content:I,refusal:D,...j}=w;Object.assign(b.logprobs,j),I&&((r=b.logprobs).content??(r.content=[]),b.logprobs.content.push(...I)),D&&((a=b.logprobs).refusal??(a.refusal=[]),b.logprobs.refusal.push(...D))}if(_&&(b.finish_reason=_,ge(this,zt,"f")&&Gd(ge(this,zt,"f")))){if(_==="length")throw new Cd;if(_==="content_filter")throw new Td}if(Object.assign(b,P),!g)continue;const{content:x,refusal:k,function_call:A,role:T,tool_calls:E,...$}=g;if(Object.assign(b.message,$),k&&(b.message.refusal=(b.message.refusal||"")+k),T&&(b.message.role=T),A&&(b.message.function_call?(A.name&&(b.message.function_call.name=A.name),A.arguments&&((l=b.message.function_call).arguments??(l.arguments=""),b.message.function_call.arguments+=A.arguments)):b.message.function_call=A),x&&(b.message.content=(b.message.content||"")+x,!b.message.refusal&&ge(this,Oe,"m",To).call(this)&&(b.message.parsed=Kc(b.message.content))),E){b.message.tool_calls||(b.message.tool_calls=[]);for(const{index:I,id:D,type:j,function:z,...B}of E){const F=(u=b.message.tool_calls)[I]??(u[I]={});Object.assign(F,B),D&&(F.id=D),j&&(F.type=j),z&&(F.function??(F.function={name:z.name??"",arguments:""})),z?.name&&(F.function.name=z.name),z?.arguments&&(F.function.arguments+=z.arguments,Hb(ge(this,zt,"f"),F)&&(F.function.parsed_arguments=Kc(F.function.arguments)))}}}return h},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",a=>{const l=n.shift();l?l.resolve(a):e.push(a)}),this.on("end",()=>{r=!0;for(const a of n)a.resolve(void 0);n.length=0}),this.on("abort",a=>{r=!0;for(const l of n)l.reject(a);n.length=0}),this.on("error",a=>{r=!0;for(const l of n)l.reject(a);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((l,u)=>n.push({resolve:l,reject:u})).then(l=>l?{value:l,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Ot(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Qb(i,e){const{id:n,choices:r,created:a,model:l,system_fingerprint:u,...h}=i,f={...h,id:n,choices:r.map(({message:m,finish_reason:g,index:_,logprobs:v,...w})=>{if(!g)throw new ae(`missing finish_reason for choice ${_}`);const{content:P=null,function_call:b,tool_calls:x,...k}=m,A=m.role;if(!A)throw new ae(`missing role for choice ${_}`);if(b){const{arguments:T,name:E}=b;if(T==null)throw new ae(`missing function_call.arguments for choice ${_}`);if(!E)throw new ae(`missing function_call.name for choice ${_}`);return{...w,message:{content:P,function_call:{arguments:T,name:E},role:A,refusal:m.refusal??null},finish_reason:g,index:_,logprobs:v}}return x?{...w,index:_,finish_reason:g,logprobs:v,message:{...k,role:A,content:P,refusal:m.refusal??null,tool_calls:x.map((T,E)=>{const{function:$,type:I,id:D,...j}=T,{arguments:z,name:B,...F}=$||{};if(D==null)throw new ae(`missing choices[${_}].tool_calls[${E}].id
${as(i)}`);if(I==null)throw new ae(`missing choices[${_}].tool_calls[${E}].type
${as(i)}`);if(B==null)throw new ae(`missing choices[${_}].tool_calls[${E}].function.name
${as(i)}`);if(z==null)throw new ae(`missing choices[${_}].tool_calls[${E}].function.arguments
${as(i)}`);return{...j,id:D,type:I,function:{...F,name:B,arguments:z}}})}}:{...w,message:{...k,content:P,role:A,refusal:m.refusal??null},finish_reason:g,index:_,logprobs:v}}),created:a,model:l,object:"chat.completion",...u?{system_fingerprint:u}:{}};return Ub(f,e)}function as(i){return JSON.stringify(i)}class ni extends ir{static fromReadableStream(e){const n=new ni(null);return n._run(()=>n._fromReadableStream(e)),n}static runFunctions(e,n,r){const a=new ni(null),l={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return a._run(()=>a._runFunctions(e,n,l)),a}static runTools(e,n,r){const a=new ni(n),l={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return a._run(()=>a._runTools(e,n,l)),a}}let hf=class extends fe{parse(e,n){return Kb(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(r=>Cl(r,e))}runFunctions(e,n){return e.stream?ni.runFunctions(this._client,e,n):nr.runFunctions(this._client,e,n)}runTools(e,n){return e.stream?ni.runTools(this._client,e,n):nr.runTools(this._client,e,n)}stream(e,n){return ir.createChatCompletion(this._client,e,n)}};class df extends fe{constructor(){super(...arguments),this.completions=new hf(this._client)}}(function(i){i.Completions=hf})(df);class ff extends fe{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class Tl extends fe{constructor(){super(...arguments),this.sessions=new ff(this._client)}}Tl.Sessions=ff;var W=function(i,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(i):r?r.value:e.get(i)},Xe=function(i,e,n,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!a:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(i,n):a?a.value=n:e.set(i,n),n},je,rl,Et,ps,_t,wn,Yn,yn,Cs,et,gs,_s,Yi,Wi,Hi,Vc,Jc,Xc,Yc,Qc,eh,th;class wt extends Hd{constructor(){super(...arguments),je.add(this),rl.set(this,[]),Et.set(this,{}),ps.set(this,{}),_t.set(this,void 0),wn.set(this,void 0),Yn.set(this,void 0),yn.set(this,void 0),Cs.set(this,void 0),et.set(this,void 0),gs.set(this,void 0),_s.set(this,void 0),Yi.set(this,void 0)}[(rl=new WeakMap,Et=new WeakMap,ps=new WeakMap,_t=new WeakMap,wn=new WeakMap,Yn=new WeakMap,yn=new WeakMap,Cs=new WeakMap,et=new WeakMap,gs=new WeakMap,_s=new WeakMap,Yi=new WeakMap,je=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",a=>{const l=n.shift();l?l.resolve(a):e.push(a)}),this.on("end",()=>{r=!0;for(const a of n)a.resolve(void 0);n.length=0}),this.on("abort",a=>{r=!0;for(const l of n)l.reject(a);n.length=0}),this.on("error",a=>{r=!0;for(const l of n)l.reject(a);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((l,u)=>n.push({resolve:l,reject:u})).then(l=>l?{value:l,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new wt;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const a=Ot.fromReadableStream(e,this.controller);for await(const l of a)W(this,je,"m",Wi).call(this,l);if(a.controller.signal?.aborted)throw new yt;return this._addRun(W(this,je,"m",Hi).call(this))}toReadableStream(){return new Ot(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,a,l){const u=new wt;return u._run(()=>u._runToolAssistantStream(e,n,r,a,{...l,headers:{...l?.headers,"X-Stainless-Helper-Method":"stream"}})),u}async _createToolAssistantStream(e,n,r,a,l){const u=l?.signal;u&&(u.aborted&&this.controller.abort(),u.addEventListener("abort",()=>this.controller.abort()));const h={...a,stream:!0},f=await e.submitToolOutputs(n,r,h,{...l,signal:this.controller.signal});this._connected();for await(const m of f)W(this,je,"m",Wi).call(this,m);if(f.controller.signal?.aborted)throw new yt;return this._addRun(W(this,je,"m",Hi).call(this))}static createThreadAssistantStream(e,n,r){const a=new wt;return a._run(()=>a._threadAssistantStream(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),a}static createAssistantStream(e,n,r,a){const l=new wt;return l._run(()=>l._runAssistantStream(e,n,r,{...a,headers:{...a?.headers,"X-Stainless-Helper-Method":"stream"}})),l}currentEvent(){return W(this,gs,"f")}currentRun(){return W(this,_s,"f")}currentMessageSnapshot(){return W(this,_t,"f")}currentRunStepSnapshot(){return W(this,Yi,"f")}async finalRunSteps(){return await this.done(),Object.values(W(this,Et,"f"))}async finalMessages(){return await this.done(),Object.values(W(this,ps,"f"))}async finalRun(){if(await this.done(),!W(this,wn,"f"))throw Error("Final run was not received.");return W(this,wn,"f")}async _createThreadAssistantStream(e,n,r){const a=r?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...n,stream:!0},u=await e.createAndRun(l,{...r,signal:this.controller.signal});this._connected();for await(const h of u)W(this,je,"m",Wi).call(this,h);if(u.controller.signal?.aborted)throw new yt;return this._addRun(W(this,je,"m",Hi).call(this))}async _createAssistantStream(e,n,r,a){const l=a?.signal;l&&(l.aborted&&this.controller.abort(),l.addEventListener("abort",()=>this.controller.abort()));const u={...r,stream:!0},h=await e.create(n,u,{...a,signal:this.controller.signal});this._connected();for await(const f of h)W(this,je,"m",Wi).call(this,f);if(h.controller.signal?.aborted)throw new yt;return this._addRun(W(this,je,"m",Hi).call(this))}static accumulateDelta(e,n){for(const[r,a]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=a;continue}let l=e[r];if(l==null){e[r]=a;continue}if(r==="index"||r==="type"){e[r]=a;continue}if(typeof l=="string"&&typeof a=="string")l+=a;else if(typeof l=="number"&&typeof a=="number")l+=a;else if(Ao(l)&&Ao(a))l=this.accumulateDelta(l,a);else if(Array.isArray(l)&&Array.isArray(a)){if(l.every(u=>typeof u=="string"||typeof u=="number")){l.push(...a);continue}for(const u of a){if(!Ao(u))throw new Error(`Expected array delta entry to be an object but got: ${u}`);const h=u.index;if(h==null)throw console.error(u),new Error("Expected array delta entry to have an `index` property");if(typeof h!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${h}`);const f=l[h];f==null?l.push(u):l[h]=this.accumulateDelta(f,u)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${a}, accValue: ${l}`);e[r]=l}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,a){return await this._createAssistantStream(n,e,r,a)}async _runToolAssistantStream(e,n,r,a,l){return await this._createToolAssistantStream(r,e,n,a,l)}}Wi=function(e){if(!this.ended)switch(Xe(this,gs,e,"f"),W(this,je,"m",Xc).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":W(this,je,"m",th).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":W(this,je,"m",Jc).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":W(this,je,"m",Vc).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Hi=function(){if(this.ended)throw new ae("stream has ended, this shouldn't happen");if(!W(this,wn,"f"))throw Error("Final run has not been received");return W(this,wn,"f")},Vc=function(e){const[n,r]=W(this,je,"m",Qc).call(this,e,W(this,_t,"f"));Xe(this,_t,n,"f"),W(this,ps,"f")[n.id]=n;for(const a of r){const l=n.content[a.index];l?.type=="text"&&this._emit("textCreated",l.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const a of e.data.delta.content){if(a.type=="text"&&a.text){let l=a.text,u=n.content[a.index];if(u&&u.type=="text")this._emit("textDelta",l,u.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(a.index!=W(this,Yn,"f")){if(W(this,yn,"f"))switch(W(this,yn,"f").type){case"text":this._emit("textDone",W(this,yn,"f").text,W(this,_t,"f"));break;case"image_file":this._emit("imageFileDone",W(this,yn,"f").image_file,W(this,_t,"f"));break}Xe(this,Yn,a.index,"f")}Xe(this,yn,n.content[a.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(W(this,Yn,"f")!==void 0){const a=e.data.content[W(this,Yn,"f")];if(a)switch(a.type){case"image_file":this._emit("imageFileDone",a.image_file,W(this,_t,"f"));break;case"text":this._emit("textDone",a.text,W(this,_t,"f"));break}}W(this,_t,"f")&&this._emit("messageDone",e.data),Xe(this,_t,void 0,"f")}},Jc=function(e){const n=W(this,je,"m",Yc).call(this,e);switch(Xe(this,Yi,n,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const l of r.step_details.tool_calls)l.index==W(this,Cs,"f")?this._emit("toolCallDelta",l,n.step_details.tool_calls[l.index]):(W(this,et,"f")&&this._emit("toolCallDone",W(this,et,"f")),Xe(this,Cs,l.index,"f"),Xe(this,et,n.step_details.tool_calls[l.index],"f"),W(this,et,"f")&&this._emit("toolCallCreated",W(this,et,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Xe(this,Yi,void 0,"f"),e.data.step_details.type=="tool_calls"&&W(this,et,"f")&&(this._emit("toolCallDone",W(this,et,"f")),Xe(this,et,void 0,"f")),this._emit("runStepDone",e.data,n);break}},Xc=function(e){W(this,rl,"f").push(e),this._emit("event",e)},Yc=function(e){switch(e.event){case"thread.run.step.created":return W(this,Et,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=W(this,Et,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const a=wt.accumulateDelta(n,r.delta);W(this,Et,"f")[e.data.id]=a}return W(this,Et,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":W(this,Et,"f")[e.data.id]=e.data;break}if(W(this,Et,"f")[e.data.id])return W(this,Et,"f")[e.data.id];throw new Error("No snapshot available")},Qc=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let a=e.data;if(a.delta.content)for(const l of a.delta.content)if(l.index in n.content){let u=n.content[l.index];n.content[l.index]=W(this,je,"m",eh).call(this,l,u)}else n.content[l.index]=l,r.push(l);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},eh=function(e,n){return wt.accumulateDelta(n,e)},th=function(e){switch(Xe(this,_s,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":Xe(this,wn,e.data,"f"),W(this,et,"f")&&(this._emit("toolCallDone",W(this,et,"f")),Xe(this,et,void 0,"f"));break}};class Ll extends fe{create(e,n,r){return this._client.post(`/threads/${e}/messages`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,n,r){return this._client.get(`/threads/${e}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(e,n,r,a){return this._client.post(`/threads/${e}/messages/${n}`,{body:r,...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers}})}list(e,n={},r){return ze(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/messages`,El,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(e,n,r){return this._client.delete(`/threads/${e}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}}class El extends it{}Ll.MessagesPage=El;class Ol extends fe{retrieve(e,n,r,a={},l){return ze(a)?this.retrieve(e,n,r,{},a):this._client.get(`/threads/${e}/runs/${n}/steps/${r}`,{query:a,...l,headers:{"OpenAI-Beta":"assistants=v2",...l?.headers}})}list(e,n,r={},a){return ze(r)?this.list(e,n,{},r):this._client.getAPIList(`/threads/${e}/runs/${n}/steps`,$l,{query:r,...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers}})}}class $l extends it{}Ol.RunStepsPage=$l;class vr extends fe{constructor(){super(...arguments),this.steps=new Ol(this._client)}create(e,n,r){const{include:a,...l}=n;return this._client.post(`/threads/${e}/runs`,{query:{include:a},body:l,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers},stream:n.stream??!1})}retrieve(e,n,r){return this._client.get(`/threads/${e}/runs/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(e,n,r,a){return this._client.post(`/threads/${e}/runs/${n}`,{body:r,...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers}})}list(e,n={},r){return ze(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/runs`,Ml,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}cancel(e,n,r){return this._client.post(`/threads/${e}/runs/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async createAndPoll(e,n,r){const a=await this.create(e,n,r);return await this.poll(e,a.id,r)}createAndStream(e,n,r){return wt.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){const a={...r?.headers,"X-Stainless-Poll-Helper":"true"};for(r?.pollIntervalMs&&(a["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:l,response:u}=await this.retrieve(e,n,{...r,headers:{...r?.headers,...a}}).withResponse();switch(l.status){case"queued":case"in_progress":case"cancelling":let h=5e3;if(r?.pollIntervalMs)h=r.pollIntervalMs;else{const f=u.headers.get("openai-poll-after-ms");if(f){const m=parseInt(f);isNaN(m)||(h=m)}}await pr(h);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return l}}}stream(e,n,r){return wt.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r,a){return this._client.post(`/threads/${e}/runs/${n}/submit_tool_outputs`,{body:r,...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(e,n,r,a){const l=await this.submitToolOutputs(e,n,r,a);return await this.poll(e,l.id,a)}submitToolOutputsStream(e,n,r,a){return wt.createToolAssistantStream(e,n,this._client.beta.threads.runs,r,a)}}class Ml extends it{}vr.RunsPage=Ml;vr.Steps=Ol;vr.RunStepsPage=$l;class hi extends fe{constructor(){super(...arguments),this.runs=new vr(this._client),this.messages=new Ll(this._client)}create(e={},n){return ze(e)?this.create({},e):this._client.post("/threads",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,n){return this._client.get(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,n,r){return this._client.post(`/threads/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(e,n){return this._client.delete(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers},stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.thread_id,r.id,n)}createAndRunStream(e,n){return wt.createThreadAssistantStream(e,this._client.beta.threads,n)}}hi.Runs=vr;hi.RunsPage=Ml;hi.Messages=Ll;hi.MessagesPage=El;const e0=async i=>{const e=await Promise.allSettled(i),n=e.filter(a=>a.status==="rejected");if(n.length){for(const a of n)console.error(a.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const a of e)a.status==="fulfilled"&&r.push(a.value);return r};let Il=class extends fe{create(e,n,r){return this._client.post(`/vector_stores/${e}/files`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,n,r){return this._client.get(`/vector_stores/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e,n={},r){return ze(n)?this.list(e,{},n):this._client.getAPIList(`/vector_stores/${e}/files`,Aa,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(e,n,r){return this._client.delete(`/vector_stores/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async createAndPoll(e,n,r){const a=await this.create(e,n,r);return await this.poll(e,a.id,r)}async poll(e,n,r){const a={...r?.headers,"X-Stainless-Poll-Helper":"true"};for(r?.pollIntervalMs&&(a["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const l=await this.retrieve(e,n,{...r,headers:a}).withResponse(),u=l.data;switch(u.status){case"in_progress":let h=5e3;if(r?.pollIntervalMs)h=r.pollIntervalMs;else{const f=l.response.headers.get("openai-poll-after-ms");if(f){const m=parseInt(f);isNaN(m)||(h=m)}}await pr(h);break;case"failed":case"completed":return u}}}async upload(e,n,r){const a=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:a.id},r)}async uploadAndPoll(e,n,r){const a=await this.upload(e,n,r);return await this.poll(e,a.id,r)}};class Aa extends it{}Il.VectorStoreFilesPage=Aa;class mf extends fe{create(e,n,r){return this._client.post(`/vector_stores/${e}/file_batches`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,n,r){return this._client.get(`/vector_stores/${e}/file_batches/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}cancel(e,n,r){return this._client.post(`/vector_stores/${e}/file_batches/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async createAndPoll(e,n,r){const a=await this.create(e,n);return await this.poll(e,a.id,r)}listFiles(e,n,r={},a){return ze(r)?this.listFiles(e,n,{},r):this._client.getAPIList(`/vector_stores/${e}/file_batches/${n}/files`,Aa,{query:r,...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers}})}async poll(e,n,r){const a={...r?.headers,"X-Stainless-Poll-Helper":"true"};for(r?.pollIntervalMs&&(a["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:l,response:u}=await this.retrieve(e,n,{...r,headers:a}).withResponse();switch(l.status){case"in_progress":let h=5e3;if(r?.pollIntervalMs)h=r.pollIntervalMs;else{const f=u.headers.get("openai-poll-after-ms");if(f){const m=parseInt(f);isNaN(m)||(h=m)}}await pr(h);break;case"failed":case"cancelled":case"completed":return l}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},a){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const l=a?.maxConcurrency??5,u=Math.min(l,n.length),h=this._client,f=n.values(),m=[...r];async function g(v){for(let w of v){const P=await h.files.create({file:w,purpose:"assistants"},a);m.push(P.id)}}const _=Array(u).fill(f).map(g);return await e0(_),await this.createAndPoll(e,{file_ids:m})}}class di extends fe{constructor(){super(...arguments),this.files=new Il(this._client),this.fileBatches=new mf(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,n){return this._client.get(`/vector_stores/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,n,r){return this._client.post(`/vector_stores/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e={},n){return ze(e)?this.list({},e):this._client.getAPIList("/vector_stores",Rl,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,n){return this._client.delete(`/vector_stores/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class Rl extends it{}di.VectorStoresPage=Rl;di.Files=Il;di.VectorStoreFilesPage=Aa;di.FileBatches=mf;class rn extends fe{constructor(){super(...arguments),this.realtime=new Tl(this._client),this.vectorStores=new di(this._client),this.chat=new df(this._client),this.assistants=new Sl(this._client),this.threads=new hi(this._client)}}rn.Realtime=Tl;rn.VectorStores=di;rn.VectorStoresPage=Rl;rn.Assistants=Sl;rn.AssistantsPage=kl;rn.Threads=hi;class pf extends fe{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class gf extends fe{create(e,n){return this._client.post("/embeddings",{body:e,...n})}}class ql extends fe{create(e,n){return this._client.post("/files",si({body:e,...n}))}retrieve(e,n){return this._client.get(`/files/${e}`,n)}list(e={},n){return ze(e)?this.list({},e):this._client.getAPIList("/files",jl,{query:e,...n})}del(e,n){return this._client.delete(`/files/${e}`,n)}content(e,n){return this._client.get(`/files/${e}/content`,{...n,headers:{Accept:"application/binary",...n?.headers},__binaryResponse:!0})}retrieveContent(e,n){return this._client.get(`/files/${e}/content`,n)}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const a=new Set(["processed","error","deleted"]),l=Date.now();let u=await this.retrieve(e);for(;!u.status||!a.has(u.status);)if(await pr(n),u=await this.retrieve(e),Date.now()-l>r)throw new xl({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return u}}class jl extends it{}ql.FileObjectsPage=jl;class Dl extends fe{list(e,n={},r){return ze(n)?this.list(e,{},n):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,Bl,{query:n,...r})}}class Bl extends it{}Dl.FineTuningJobCheckpointsPage=Bl;class fi extends fe{constructor(){super(...arguments),this.checkpoints=new Dl(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(`/fine_tuning/jobs/${e}`,n)}list(e={},n){return ze(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",Nl,{query:e,...n})}cancel(e,n){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return ze(n)?this.listEvents(e,{},n):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,zl,{query:n,...r})}}class Nl extends it{}class zl extends it{}fi.FineTuningJobsPage=Nl;fi.FineTuningJobEventsPage=zl;fi.Checkpoints=Dl;fi.FineTuningJobCheckpointsPage=Bl;class yr extends fe{constructor(){super(...arguments),this.jobs=new fi(this._client)}}yr.Jobs=fi;yr.FineTuningJobsPage=Nl;yr.FineTuningJobEventsPage=zl;class _f extends fe{createVariation(e,n){return this._client.post("/images/variations",si({body:e,...n}))}edit(e,n){return this._client.post("/images/edits",si({body:e,...n}))}generate(e,n){return this._client.post("/images/generations",{body:e,...n})}}class Fl extends fe{retrieve(e,n){return this._client.get(`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",Ul,e)}del(e,n){return this._client.delete(`/models/${e}`,n)}}class Ul extends zb{}Fl.ModelsPage=Ul;class vf extends fe{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class yf extends fe{create(e,n,r){return this._client.post(`/uploads/${e}/parts`,si({body:n,...r}))}}class Zl extends fe{constructor(){super(...arguments),this.parts=new yf(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(`/uploads/${e}/complete`,{body:n,...r})}}Zl.Parts=yf;var wf;class ue extends Tb{constructor({baseURL:e=ns("OPENAI_BASE_URL"),apiKey:n=ns("OPENAI_API_KEY"),organization:r=ns("OPENAI_ORG_ID")??null,project:a=ns("OPENAI_PROJECT_ID")??null,...l}={}){if(n===void 0)throw new ae("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const u={apiKey:n,organization:r,project:a,...l,baseURL:e||"https://api.openai.com/v1"};if(!u.dangerouslyAllowBrowser&&Bb())throw new ae(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:u.baseURL,timeout:u.timeout??6e5,httpAgent:u.httpAgent,maxRetries:u.maxRetries,fetch:u.fetch}),this.completions=new pf(this),this.chat=new xa(this),this.embeddings=new gf(this),this.files=new ql(this),this.images=new _f(this),this.audio=new gr(this),this.moderations=new vf(this),this.models=new Fl(this),this.fineTuning=new yr(this),this.beta=new rn(this),this.batches=new Al(this),this.uploads=new Zl(this),this._options=u,this.apiKey=n,this.organization=r,this.project=a}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return cb(e,{arrayFormat:"brackets"})}}wf=ue;ue.OpenAI=wf;ue.DEFAULT_TIMEOUT=6e5;ue.OpenAIError=ae;ue.APIError=De;ue.APIConnectionError=ga;ue.APIConnectionTimeoutError=xl;ue.APIUserAbortError=yt;ue.NotFoundError=xd;ue.ConflictError=Ad;ue.RateLimitError=Sd;ue.BadRequestError=yd;ue.AuthenticationError=wd;ue.InternalServerError=kd;ue.PermissionDeniedError=bd;ue.UnprocessableEntityError=Pd;ue.toFile=$d;ue.fileFromPath=_d;ue.Completions=pf;ue.Chat=xa;ue.ChatCompletionsPage=ba;ue.Embeddings=gf;ue.Files=ql;ue.FileObjectsPage=jl;ue.Images=_f;ue.Audio=gr;ue.Moderations=vf;ue.Models=Fl;ue.ModelsPage=Ul;ue.FineTuning=yr;ue.Beta=rn;ue.Batches=Al;ue.BatchesPage=Pl;ue.Uploads=Zl;const t0=new ue({apiKey:"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",dangerouslyAllowBrowser:!0});async function n0(i){try{if(i===null)return console.log("API nije uspio dohvatiti model aviona"),null;const n=(await t0.chat.completions.create({model:"gpt-3.5-turbo",messages:[{role:"developer",content:"Ti si asistent koji pie 4 reenice o navedenom zrakoplovu. Neka informacije budu kratke i tone, a zadnja reenica neka bude: 'Ukupna peoizvodnja modela je (toan broj proizvedenih aviona bez . ili , u notaciji)'."},{role:"user",content:`Napii mi neke vane informacije o zrakoplovu: ${i}.`}]})).choices[0].message.content;let r=[];r=n.split(" ");let a=r.length,l=r[a-1];l=l.replace(".","");let u=parseInt(l,10);return await G0(i,n,u),alert("AVION JE DODAN"),n}catch(e){throw console.error("Greka pri dohvaanju podataka o modelu aviona:",e),e}}const i0="/ZavrsniV2/assets/bingo-By8HdSJr.mp3",r0="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAAJAAAPfAA8PDw8PDw8PDw8PFJSUlJSUlJSUlJSXFxcXFxcXFxcXFyBgYGBgYGBgYGBgba2tra2tra2tra20NDQ0NDQ0NDQ0NDj4+Pj4+Pj4+Pj4/Dw8PDw8PDw8PDw//////////////8AAABQTEFNRTMuMTAwBLkAAAAAAAAAABUgJAN7QQAB4AAAD3wjY5PZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//vQxAAACYwDcfQQACTDw2m3PbBRREZwAEl/LLJPhg+D7ww0HwfD6z+fDHKawfBAEHKAfgh/B8EHf/Lg+D4Pg+CAIO/iAEAxWD4Pg+CAIAgCAJg+D4Pg/1AmD4Pg/9IPg+dmgABQICBfQAgCCUAgmkCQAG9XqMgKmBcBwYEoHhgRAYygwFwPEQDAaCvMLAJgwBQEjHrI7EgQzRodMMAYD5kKgpiQE/JUJ2SqliTjUbDEcUkGcuC1puxhQK/MfXMauII90gWHz5BwOCVbi7yAZfKKo6TBcCUechmJiAe9rguurmGZpSyVQTQ5pTCALiEtvvqx46UOSbuYuTLa1Z2YRL71zN9oDjdjCtTZKUmTAE7q1LodlFeafLGta7lWf6DF65f//+AgGGb0m943J59ZLR65+X61v0C6n6//7v8iQLIgzm////fdbuS7LH68q//+lbWl3ld3zNO2W4YTMbZWteR9rcwz6slrlrd6vWyy3jjrLL//////////HWW98z5n3///////////+pr//7ySjFi/Ff2HYAAmnmCPkRNFql1Bp/gqAIbQzkqVdzDjEUoAW5iwSGAtiNCFGQXxMLR90MZTLnOlCIBYB0WTdv//1IQWQAQtP///5EA+Ck3Rf/9DjigilIm////NN////Ix4Kx3///yE4Nf/kd+WVAAqinhBgKPvwWxEgLkKcjS0TEyQYBLvGDgJGDoknNLFGGYAoKLXfhwH/pLcDRCcwkYx5DXZTBzQqgCx9erqsCzM0f+PCUBEMnI///9jhSD1t5z5rehzqaaaOjURQcllN//+j1YeGzt///XHSOr/g0JQ0t6AABddwAABj3U3BAiHY0qinMW6NgU9UDC4DnOdQQExKAEQcEMPAUF+2tvpBttgVbdmWo3KrTiQKGAScJGiRqJpYhAAFI4AH7tNcrl6mUl6kHQUCCRjE5MEMXw1lzXTCPBGOCS50Zfp7YepHLv55WE4UAMrVZmFIAABj7QAAAzi45D46Go7j4EDQx4BRJhAA8HApYy4sKTDA9IdMQJu4wDQgzAyC6pZxLzrLH0bd22tv2j+kuX7QFsnfhgD+R+flUgjksyr18sK8/tYoIGe3KgACsqoYP/7cMTYAAzBk039tQAB0qunvdQeXEATRiABfGAkBCYZIephHgaGGQGMGBEmBsAwYFQJhg+gjmCYAAYTYDhjTDIHPZQGYhwARg9hRmBmCAAgMSgEEwKQVTBNASMLwRYw0gMDCjFhMhsfEwujWjNCBBNBo1owMSSTH9E3MM8HMzRFjhiYBRRMXkkaLRkcwmSQeYKFBiYPGFAIKg0wuCWRO6yQvuYDAKXYUBRhYLBwURvV+tNZxgQMGJBIYYAifqWZgILGHAkHB8LAYwUAi5BgIOGNiQZQIxi4DAEMmNhMJBUaCZiYpGYjgZwAxq+DmTZQd6OxyyUGGkOZvGoKFRkw9GeC0Y0AwJBaZwKAYgDBjIgGPhgDhYlWxIwECA4IX0AQBWCAAQKMscMwOSYUzQUaYtACAC3kCsPf5QD/+yDE/IBIAFcprPjK6NCG5X2fYUVS+JLCPyxN6EhEwGyoKMJLbuMFAQOMGRXmNSHCJGgWA4CYMKHAxAAAwhrqRcDKBtnR4R8jLW4spg3jDH4pWBtsCACtKEtrRaNryKjkoru8iYgEZorYnQwstmgu0YtggAXQqdTduwAFGQBBUmYE//ugxPiACzRhI+17Ki+SPeMl7mqoMaAcIwpjASsKl60EiHkht/6affRnDiTMvgBrkyxCKw/HHcsVL1fHOYjFivflEOVoYnJXL4Aa5JnbeRlbL1GjCABGTKE5jiQ0AXwmpd6qKoWBBxGMxemQQEGJ5XAJmwcOLXQEDJgQA5fUwME0yDnY/d2gaxIIEUIA0VBYxtAEzgCMyzFA0xQY0MT00iQUwfXg5VtoyElElMtOBzzCvgGUwNAGSMC1AmDNcYDIZNTLITDCwWzEkmjGAMTCUNjCsEgIBBgCC5g0BpVAZm4WAVDrUehQ4MAJKcwKAFNUKgApaIQEMEQSDAKW2W9fCGwACpgqCQGBZJ8mAEEgAYIgIIgJMGgbMHABMDAFMBgBMGw2MTxEDBfMQh3MlihCt3GMfSmZCWmLQqg4IDEUSjD0DRQHzEoJS6gVAIwMAgwpAowdCgLgWpqEASGAECgFBgTgYMi/wWANpEFJ5FkS4KsDNdhUAlJRtMGo1xA8MApkiUZfFlS5pE9KVq2VMXqLjJFCIATBINSobhigMJhyDZgYDKFgNAAvktEuy4Cw0Oq3LWbq4vGlPel6807H2WoTlGSzq7EFmyIrPOoC1hFKD8k9UflDS7L2ICjAMAFRMpgWGlpGAYDA4BioBJhIEZgWMxiWXqMZgkAoFAFMJdTd0iX5pH6ZU/VqAWuw//vAxNOAPHXvHg7/sgK0vSh9wdbRY6zortjbEYIa9BMJpojORmJQ9nS0tBFo65U9DMCvs5UfYbBytrNWVFsiz5ggF5hcYwsPoQLAiBBJYiBS+9POTCAYCeiR2NGAwGZ0DQQWWW+gBiiKSVTd1esSaTRPrGHKpZqNV3dRFHQAY7F5uAEHABat5H1gz+yqljW8gMHBVLwzyGpNz/+Ic573agmTgmYGhQ0A0NAvkQ0NmFGTPIl44mytFS1tb7pvutzNkNRgggrUVyfIuRgNwCAwhISRumpAwMEHrTL5ubp2QQQQb6f//VzMuCbwMhhoPXKo7DT///////VmgyxkVzNS7rvL2DAAewCCGdF5VYGDcu8uynV2O2WfOhZycXGCnWXZH3YEIAhQVDADxjFEazCUDERU1l0vdKZ/7RifTbzxPoom55B6X6CdetqVZifWZEeJYCRtA10Wg1WBYiMkVSseVfWj61KSSSS60UW/0UUUazImiBEGIsTwiQGTSAW+h3hPQyRPJJJF4vGqPWyNaKKPWiklqSdJX/11mQSDgaYCMiYnS0rXr+v///9etqnRMisJQGmRQuGaF1VVmwAAKAFW7SquoC9oVAAsDbUFqZfYht/GdqAAEBmJhQeTfB9MdGEgCoM5MNR2f3hYKDJIrqTIrNk7ra36S+r+mgbkwLnBs6B+N4WyJUwWy2//T9VmQVRczpJp/1IMy3G6AmqDIwjodx4413XuvUyr7OilutSbVO6KVS1HUDybFc1KwYpBsHiyiHFYyOsmyVnRSW1S7f////TSEFhFzRAso5kJiZoAAL0BgjP95//c/7vm6isjEGqNy7XjDpugnOKAFDIN5gdp/mE+EsYIgDoCAeQApnOy16K37I/FcoZDt1m1pMeTVdSZdKuio2LqjoJgA66DQBBxqmeLy27r9BFST1OiilrRRpJIo1JPopJHSdKJUHsAhYGwonIipxMumrVIosr/+4DE7gCW7e077taW4oo9pzw+UWxJJKtJLRRapFHUklXvWi2iiipIhwfEPYrUtkVNUW6X/////9H5dLo1nZgWFAAA4EZCGRHvNP+j3LLbSbUFwwpmgALJmDAUGNo/nnnQnrArmFYFBQBVTLRXk/salFGAN+ccKzqIfNV3dmeGIAA/AAApC8uLi3ME1mlrllscWJLbC8X0iLAEnQaCsYAafBjzA6mCuAwBgNRIApNVUzu0dS4AIu3xqBEYIoOgj0iQtT2YmXiUAAD/A3yHkEG4GAjSfi5qPSvVahNJESLKIp7rvxB50AhgMGmEAMc5yQcv4PbZ+6COSjG7LKmfcqljfc6enldykqY/hdp+6wxr09jX////hhWUeWeUdAcAlhfywhAAAAAABJWPmqWmHaRKjUAMAKNfxOSufWImGAmNQGmemIYTkNBMBBogNAIAUQiwLiAIMoCiKFKgZaaoGLx8BgMCgCBMAwEheQIgWP/7YMTtAFU55zPvDnao9g1lPB6JbQoKBAcT+A0MQMFBcG2gKAYXMTRWJkNjFwDwTIfOBhMRABAMCQMAwIDwsYWySnK5fMEDRYnIQmIUgpDSR/d7Nl4yNi6Ymht//SsTRfLRASYK5AimTn/R/8gJYJ8ixRLhdMjNIu////5wRAqZBsAiMGf//+osLgIiARGqTEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqv/7QMTxAEkAaynjeKtpTRBlPp/ABKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//tQxPOAGeVfLfmqggAAAD/DgAAEqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==",s0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",a0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";var sl={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(i,e){(function(n,r){r(e)})(nt,function(n){var r="1.9.4";function a(t){var s,o,c,d;for(o=1,c=arguments.length;o<c;o++){d=arguments[o];for(s in d)t[s]=d[s]}return t}var l=Object.create||function(){function t(){}return function(s){return t.prototype=s,new t}}();function u(t,s){var o=Array.prototype.slice;if(t.bind)return t.bind.apply(t,o.call(arguments,1));var c=o.call(arguments,2);return function(){return t.apply(s,c.length?c.concat(o.call(arguments)):arguments)}}var h=0;function f(t){return"_leaflet_id"in t||(t._leaflet_id=++h),t._leaflet_id}function m(t,s,o){var c,d,p,y;return y=function(){c=!1,d&&(p.apply(o,d),d=!1)},p=function(){c?d=arguments:(t.apply(o,arguments),setTimeout(y,s),c=!0)},p}function g(t,s,o){var c=s[1],d=s[0],p=c-d;return t===c&&o?t:((t-d)%p+p)%p+d}function _(){return!1}function v(t,s){if(s===!1)return t;var o=Math.pow(10,s===void 0?6:s);return Math.round(t*o)/o}function w(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function P(t){return w(t).split(/\s+/)}function b(t,s){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?l(t.options):{});for(var o in s)t.options[o]=s[o];return t.options}function x(t,s,o){var c=[];for(var d in t)c.push(encodeURIComponent(o?d.toUpperCase():d)+"="+encodeURIComponent(t[d]));return(!s||s.indexOf("?")===-1?"?":"&")+c.join("&")}var k=/\{ *([\w_ -]+) *\}/g;function A(t,s){return t.replace(k,function(o,c){var d=s[c];if(d===void 0)throw new Error("No value provided for variable "+o);return typeof d=="function"&&(d=d(s)),d})}var T=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function E(t,s){for(var o=0;o<t.length;o++)if(t[o]===s)return o;return-1}var $="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function I(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var D=0;function j(t){var s=+new Date,o=Math.max(0,16-(s-D));return D=s+o,window.setTimeout(t,o)}var z=window.requestAnimationFrame||I("RequestAnimationFrame")||j,B=window.cancelAnimationFrame||I("CancelAnimationFrame")||I("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function F(t,s,o){if(o&&z===j)t.call(s);else return z.call(window,u(t,s))}function he(t){t&&B.call(window,t)}var xe={__proto__:null,extend:a,create:l,bind:u,get lastId(){return h},stamp:f,throttle:m,wrapNum:g,falseFn:_,formatNum:v,trim:w,splitWords:P,setOptions:b,getParamString:x,template:A,isArray:T,indexOf:E,emptyImageUrl:$,requestFn:z,cancelFn:B,requestAnimFrame:F,cancelAnimFrame:he};function V(){}V.extend=function(t){var s=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=s.__super__=this.prototype,c=l(o);c.constructor=s,s.prototype=c;for(var d in this)Object.prototype.hasOwnProperty.call(this,d)&&d!=="prototype"&&d!=="__super__"&&(s[d]=this[d]);return t.statics&&a(s,t.statics),t.includes&&(X(t.includes),a.apply(null,[c].concat(t.includes))),a(c,t),delete c.statics,delete c.includes,c.options&&(c.options=o.options?l(o.options):{},a(c.options,t.options)),c._initHooks=[],c.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var p=0,y=c._initHooks.length;p<y;p++)c._initHooks[p].call(this)}},s},V.include=function(t){var s=this.prototype.options;return a(this.prototype,t),t.options&&(this.prototype.options=s,this.mergeOptions(t.options)),this},V.mergeOptions=function(t){return a(this.prototype.options,t),this},V.addInitHook=function(t){var s=Array.prototype.slice.call(arguments,1),o=typeof t=="function"?t:function(){this[t].apply(this,s)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(o),this};function X(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=T(t)?t:[t];for(var s=0;s<t.length;s++)t[s]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Y={on:function(t,s,o){if(typeof t=="object")for(var c in t)this._on(c,t[c],s);else{t=P(t);for(var d=0,p=t.length;d<p;d++)this._on(t[d],s,o)}return this},off:function(t,s,o){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var c in t)this._off(c,t[c],s);else{t=P(t);for(var d=arguments.length===1,p=0,y=t.length;p<y;p++)d?this._off(t[p]):this._off(t[p],s,o)}return this},_on:function(t,s,o,c){if(typeof s!="function"){console.warn("wrong listener type: "+typeof s);return}if(this._listens(t,s,o)===!1){o===this&&(o=void 0);var d={fn:s,ctx:o};c&&(d.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(d)}},_off:function(t,s,o){var c,d,p;if(this._events&&(c=this._events[t],!!c)){if(arguments.length===1){if(this._firingCount)for(d=0,p=c.length;d<p;d++)c[d].fn=_;delete this._events[t];return}if(typeof s!="function"){console.warn("wrong listener type: "+typeof s);return}var y=this._listens(t,s,o);if(y!==!1){var S=c[y];this._firingCount&&(S.fn=_,this._events[t]=c=c.slice()),c.splice(y,1)}}},fire:function(t,s,o){if(!this.listens(t,o))return this;var c=a({},s,{type:t,target:this,sourceTarget:s&&s.sourceTarget||this});if(this._events){var d=this._events[t];if(d){this._firingCount=this._firingCount+1||1;for(var p=0,y=d.length;p<y;p++){var S=d[p],C=S.fn;S.once&&this.off(t,C,S.ctx),C.call(S.ctx||this,c)}this._firingCount--}}return o&&this._propagateEvent(c),this},listens:function(t,s,o,c){typeof t!="string"&&console.warn('"string" type argument expected');var d=s;typeof s!="function"&&(c=!!s,d=void 0,o=void 0);var p=this._events&&this._events[t];if(p&&p.length&&this._listens(t,d,o)!==!1)return!0;if(c){for(var y in this._eventParents)if(this._eventParents[y].listens(t,s,o,c))return!0}return!1},_listens:function(t,s,o){if(!this._events)return!1;var c=this._events[t]||[];if(!s)return!!c.length;o===this&&(o=void 0);for(var d=0,p=c.length;d<p;d++)if(c[d].fn===s&&c[d].ctx===o)return d;return!1},once:function(t,s,o){if(typeof t=="object")for(var c in t)this._on(c,t[c],s,!0);else{t=P(t);for(var d=0,p=t.length;d<p;d++)this._on(t[d],s,o,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[f(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[f(t)],this},_propagateEvent:function(t){for(var s in this._eventParents)this._eventParents[s].fire(t.type,a({layer:t.target,propagatedFrom:t.target},t),!0)}};Y.addEventListener=Y.on,Y.removeEventListener=Y.clearAllEventListeners=Y.off,Y.addOneTimeEventListener=Y.once,Y.fireEvent=Y.fire,Y.hasEventListeners=Y.listens;var Ae=V.extend(Y);function G(t,s,o){this.x=o?Math.round(t):t,this.y=o?Math.round(s):s}var Ue=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};G.prototype={clone:function(){return new G(this.x,this.y)},add:function(t){return this.clone()._add(U(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(U(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new G(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new G(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ue(this.x),this.y=Ue(this.y),this},distanceTo:function(t){t=U(t);var s=t.x-this.x,o=t.y-this.y;return Math.sqrt(s*s+o*o)},equals:function(t){return t=U(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=U(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function U(t,s,o){return t instanceof G?t:T(t)?new G(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new G(t.x,t.y):new G(t,s,o)}function se(t,s){if(t)for(var o=s?[t,s]:t,c=0,d=o.length;c<d;c++)this.extend(o[c])}se.prototype={extend:function(t){var s,o;if(!t)return this;if(t instanceof G||typeof t[0]=="number"||"x"in t)s=o=U(t);else if(t=ye(t),s=t.min,o=t.max,!s||!o)return this;return!this.min&&!this.max?(this.min=s.clone(),this.max=o.clone()):(this.min.x=Math.min(s.x,this.min.x),this.max.x=Math.max(o.x,this.max.x),this.min.y=Math.min(s.y,this.min.y),this.max.y=Math.max(o.y,this.max.y)),this},getCenter:function(t){return U((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return U(this.min.x,this.max.y)},getTopRight:function(){return U(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var s,o;return typeof t[0]=="number"||t instanceof G?t=U(t):t=ye(t),t instanceof se?(s=t.min,o=t.max):s=o=t,s.x>=this.min.x&&o.x<=this.max.x&&s.y>=this.min.y&&o.y<=this.max.y},intersects:function(t){t=ye(t);var s=this.min,o=this.max,c=t.min,d=t.max,p=d.x>=s.x&&c.x<=o.x,y=d.y>=s.y&&c.y<=o.y;return p&&y},overlaps:function(t){t=ye(t);var s=this.min,o=this.max,c=t.min,d=t.max,p=d.x>s.x&&c.x<o.x,y=d.y>s.y&&c.y<o.y;return p&&y},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var s=this.min,o=this.max,c=Math.abs(s.x-o.x)*t,d=Math.abs(s.y-o.y)*t;return ye(U(s.x-c,s.y-d),U(o.x+c,o.y+d))},equals:function(t){return t?(t=ye(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function ye(t,s){return!t||t instanceof se?t:new se(t,s)}function Pe(t,s){if(t)for(var o=s?[t,s]:t,c=0,d=o.length;c<d;c++)this.extend(o[c])}Pe.prototype={extend:function(t){var s=this._southWest,o=this._northEast,c,d;if(t instanceof oe)c=t,d=t;else if(t instanceof Pe){if(c=t._southWest,d=t._northEast,!c||!d)return this}else return t?this.extend(M(t)||ve(t)):this;return!s&&!o?(this._southWest=new oe(c.lat,c.lng),this._northEast=new oe(d.lat,d.lng)):(s.lat=Math.min(c.lat,s.lat),s.lng=Math.min(c.lng,s.lng),o.lat=Math.max(d.lat,o.lat),o.lng=Math.max(d.lng,o.lng)),this},pad:function(t){var s=this._southWest,o=this._northEast,c=Math.abs(s.lat-o.lat)*t,d=Math.abs(s.lng-o.lng)*t;return new Pe(new oe(s.lat-c,s.lng-d),new oe(o.lat+c,o.lng+d))},getCenter:function(){return new oe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new oe(this.getNorth(),this.getWest())},getSouthEast:function(){return new oe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof oe||"lat"in t?t=M(t):t=ve(t);var s=this._southWest,o=this._northEast,c,d;return t instanceof Pe?(c=t.getSouthWest(),d=t.getNorthEast()):c=d=t,c.lat>=s.lat&&d.lat<=o.lat&&c.lng>=s.lng&&d.lng<=o.lng},intersects:function(t){t=ve(t);var s=this._southWest,o=this._northEast,c=t.getSouthWest(),d=t.getNorthEast(),p=d.lat>=s.lat&&c.lat<=o.lat,y=d.lng>=s.lng&&c.lng<=o.lng;return p&&y},overlaps:function(t){t=ve(t);var s=this._southWest,o=this._northEast,c=t.getSouthWest(),d=t.getNorthEast(),p=d.lat>s.lat&&c.lat<o.lat,y=d.lng>s.lng&&c.lng<o.lng;return p&&y},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,s){return t?(t=ve(t),this._southWest.equals(t.getSouthWest(),s)&&this._northEast.equals(t.getNorthEast(),s)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ve(t,s){return t instanceof Pe?t:new Pe(t,s)}function oe(t,s,o){if(isNaN(t)||isNaN(s))throw new Error("Invalid LatLng object: ("+t+", "+s+")");this.lat=+t,this.lng=+s,o!==void 0&&(this.alt=+o)}oe.prototype={equals:function(t,s){if(!t)return!1;t=M(t);var o=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return o<=(s===void 0?1e-9:s)},toString:function(t){return"LatLng("+v(this.lat,t)+", "+v(this.lng,t)+")"},distanceTo:function(t){return rt.distance(this,M(t))},wrap:function(){return rt.wrapLatLng(this)},toBounds:function(t){var s=180*t/40075017,o=s/Math.cos(Math.PI/180*this.lat);return ve([this.lat-s,this.lng-o],[this.lat+s,this.lng+o])},clone:function(){return new oe(this.lat,this.lng,this.alt)}};function M(t,s,o){return t instanceof oe?t:T(t)&&typeof t[0]!="object"?t.length===3?new oe(t[0],t[1],t[2]):t.length===2?new oe(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new oe(t.lat,"lng"in t?t.lng:t.lon,t.alt):s===void 0?null:new oe(t,s,o)}var N={latLngToPoint:function(t,s){var o=this.projection.project(t),c=this.scale(s);return this.transformation._transform(o,c)},pointToLatLng:function(t,s){var o=this.scale(s),c=this.transformation.untransform(t,o);return this.projection.unproject(c)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var s=this.projection.bounds,o=this.scale(t),c=this.transformation.transform(s.min,o),d=this.transformation.transform(s.max,o);return new se(c,d)},infinite:!1,wrapLatLng:function(t){var s=this.wrapLng?g(t.lng,this.wrapLng,!0):t.lng,o=this.wrapLat?g(t.lat,this.wrapLat,!0):t.lat,c=t.alt;return new oe(o,s,c)},wrapLatLngBounds:function(t){var s=t.getCenter(),o=this.wrapLatLng(s),c=s.lat-o.lat,d=s.lng-o.lng;if(c===0&&d===0)return t;var p=t.getSouthWest(),y=t.getNorthEast(),S=new oe(p.lat-c,p.lng-d),C=new oe(y.lat-c,y.lng-d);return new Pe(S,C)}},rt=a({},N,{wrapLng:[-180,180],R:6371e3,distance:function(t,s){var o=Math.PI/180,c=t.lat*o,d=s.lat*o,p=Math.sin((s.lat-t.lat)*o/2),y=Math.sin((s.lng-t.lng)*o/2),S=p*p+Math.cos(c)*Math.cos(d)*y*y,C=2*Math.atan2(Math.sqrt(S),Math.sqrt(1-S));return this.R*C}}),Tn=6378137,sn={R:Tn,MAX_LATITUDE:85.0511287798,project:function(t){var s=Math.PI/180,o=this.MAX_LATITUDE,c=Math.max(Math.min(o,t.lat),-o),d=Math.sin(c*s);return new G(this.R*t.lng*s,this.R*Math.log((1+d)/(1-d))/2)},unproject:function(t){var s=180/Math.PI;return new oe((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*s,t.x*s/this.R)},bounds:function(){var t=Tn*Math.PI;return new se([-t,-t],[t,t])}()};function Rt(t,s,o,c){if(T(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=s,this._c=o,this._d=c}Rt.prototype={transform:function(t,s){return this._transform(t.clone(),s)},_transform:function(t,s){return s=s||1,t.x=s*(this._a*t.x+this._b),t.y=s*(this._c*t.y+this._d),t},untransform:function(t,s){return s=s||1,new G((t.x/s-this._b)/this._a,(t.y/s-this._d)/this._c)}};function ft(t,s,o,c){return new Rt(t,s,o,c)}var mi=a({},rt,{code:"EPSG:3857",projection:sn,transformation:function(){var t=.5/(Math.PI*sn.R);return ft(t,.5,-t,.5)}()}),wr=a({},mi,{code:"EPSG:900913"});function pi(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function gi(t,s){var o="",c,d,p,y,S,C;for(c=0,p=t.length;c<p;c++){for(S=t[c],d=0,y=S.length;d<y;d++)C=S[d],o+=(d?"L":"M")+C.x+" "+C.y;o+=s?Z.svg?"z":"x":""}return o||"M0 0"}var _i=document.documentElement.style,an="ActiveXObject"in window,br=an&&!document.addEventListener,vi="msLaunchUri"in navigator&&!("documentMode"in document),yi=At("webkit"),wi=At("android"),xr=At("android 2")||At("android 3"),Ar=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Pa=wi&&At("Google")&&Ar<537&&!("AudioNode"in window),Ln=!!window.opera,bi=!vi&&At("chrome"),xi=At("gecko")&&!yi&&!Ln&&!an,Pr=!bi&&At("safari"),Sr=At("phantom"),kr="OTransition"in _i,Sa=navigator.platform.indexOf("Win")===0,on=an&&"transition"in _i,Ai="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!xr,ln="MozPerspective"in _i,ka=!window.L_DISABLE_3D&&(on||Ai||ln)&&!kr&&!Sr,Pi=typeof orientation<"u"||At("mobile"),xf=Pi&&yi,Af=Pi&&Ai,Wl=!window.PointerEvent&&window.MSPointerEvent,Hl=!!(window.PointerEvent||Wl),Kl="ontouchstart"in window||!!window.TouchEvent,Pf=!window.L_NO_TOUCH&&(Kl||Hl),Sf=Pi&&Ln,kf=Pi&&xi,Cf=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Tf=function(){var t=!1;try{var s=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",_,s),window.removeEventListener("testPassiveEventSupport",_,s)}catch{}return t}(),Lf=function(){return!!document.createElement("canvas").getContext}(),Ca=!!(document.createElementNS&&pi("svg").createSVGRect),Ef=!!Ca&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Of=!Ca&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var s=t.firstChild;return s.style.behavior="url(#default#VML)",s&&typeof s.adj=="object"}catch{return!1}}(),$f=navigator.platform.indexOf("Mac")===0,Mf=navigator.platform.indexOf("Linux")===0;function At(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Z={ie:an,ielt9:br,edge:vi,webkit:yi,android:wi,android23:xr,androidStock:Pa,opera:Ln,chrome:bi,gecko:xi,safari:Pr,phantom:Sr,opera12:kr,win:Sa,ie3d:on,webkit3d:Ai,gecko3d:ln,any3d:ka,mobile:Pi,mobileWebkit:xf,mobileWebkit3d:Af,msPointer:Wl,pointer:Hl,touch:Pf,touchNative:Kl,mobileOpera:Sf,mobileGecko:kf,retina:Cf,passiveEvents:Tf,canvas:Lf,svg:Ca,vml:Of,inlineSvg:Ef,mac:$f,linux:Mf},Gl=Z.msPointer?"MSPointerDown":"pointerdown",Vl=Z.msPointer?"MSPointerMove":"pointermove",Jl=Z.msPointer?"MSPointerUp":"pointerup",Xl=Z.msPointer?"MSPointerCancel":"pointercancel",Ta={touchstart:Gl,touchmove:Vl,touchend:Jl,touchcancel:Xl},Yl={touchstart:Bf,touchmove:Cr,touchend:Cr,touchcancel:Cr},En={},Ql=!1;function If(t,s,o){return s==="touchstart"&&Df(),Yl[s]?(o=Yl[s].bind(this,o),t.addEventListener(Ta[s],o,!1),o):(console.warn("wrong event specified:",s),_)}function Rf(t,s,o){if(!Ta[s]){console.warn("wrong event specified:",s);return}t.removeEventListener(Ta[s],o,!1)}function qf(t){En[t.pointerId]=t}function jf(t){En[t.pointerId]&&(En[t.pointerId]=t)}function eu(t){delete En[t.pointerId]}function Df(){Ql||(document.addEventListener(Gl,qf,!0),document.addEventListener(Vl,jf,!0),document.addEventListener(Jl,eu,!0),document.addEventListener(Xl,eu,!0),Ql=!0)}function Cr(t,s){if(s.pointerType!==(s.MSPOINTER_TYPE_MOUSE||"mouse")){s.touches=[];for(var o in En)s.touches.push(En[o]);s.changedTouches=[s],t(s)}}function Bf(t,s){s.MSPOINTER_TYPE_TOUCH&&s.pointerType===s.MSPOINTER_TYPE_TOUCH&&qe(s),Cr(t,s)}function Nf(t){var s={},o,c;for(c in t)o=t[c],s[c]=o&&o.bind?o.bind(t):o;return t=s,s.type="dblclick",s.detail=2,s.isTrusted=!1,s._simulated=!0,s}var zf=200;function Ff(t,s){t.addEventListener("dblclick",s);var o=0,c;function d(p){if(p.detail!==1){c=p.detail;return}if(!(p.pointerType==="mouse"||p.sourceCapabilities&&!p.sourceCapabilities.firesTouchEvents)){var y=su(p);if(!(y.some(function(C){return C instanceof HTMLLabelElement&&C.attributes.for})&&!y.some(function(C){return C instanceof HTMLInputElement||C instanceof HTMLSelectElement}))){var S=Date.now();S-o<=zf?(c++,c===2&&s(Nf(p))):c=1,o=S}}}return t.addEventListener("click",d),{dblclick:s,simDblclick:d}}function Uf(t,s){t.removeEventListener("dblclick",s.dblclick),t.removeEventListener("click",s.simDblclick)}var La=Er(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Si=Er(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),tu=Si==="webkitTransition"||Si==="OTransition"?Si+"End":"transitionend";function nu(t){return typeof t=="string"?document.getElementById(t):t}function ki(t,s){var o=t.style[s]||t.currentStyle&&t.currentStyle[s];if((!o||o==="auto")&&document.defaultView){var c=document.defaultView.getComputedStyle(t,null);o=c?c[s]:null}return o==="auto"?null:o}function de(t,s,o){var c=document.createElement(t);return c.className=s||"",o&&o.appendChild(c),c}function Se(t){var s=t.parentNode;s&&s.removeChild(t)}function Tr(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function On(t){var s=t.parentNode;s&&s.lastChild!==t&&s.appendChild(t)}function $n(t){var s=t.parentNode;s&&s.firstChild!==t&&s.insertBefore(t,s.firstChild)}function Ea(t,s){if(t.classList!==void 0)return t.classList.contains(s);var o=Lr(t);return o.length>0&&new RegExp("(^|\\s)"+s+"(\\s|$)").test(o)}function ne(t,s){if(t.classList!==void 0)for(var o=P(s),c=0,d=o.length;c<d;c++)t.classList.add(o[c]);else if(!Ea(t,s)){var p=Lr(t);Oa(t,(p?p+" ":"")+s)}}function Ce(t,s){t.classList!==void 0?t.classList.remove(s):Oa(t,w((" "+Lr(t)+" ").replace(" "+s+" "," ")))}function Oa(t,s){t.className.baseVal===void 0?t.className=s:t.className.baseVal=s}function Lr(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function st(t,s){"opacity"in t.style?t.style.opacity=s:"filter"in t.style&&Zf(t,s)}function Zf(t,s){var o=!1,c="DXImageTransform.Microsoft.Alpha";try{o=t.filters.item(c)}catch{if(s===1)return}s=Math.round(s*100),o?(o.Enabled=s!==100,o.Opacity=s):t.style.filter+=" progid:"+c+"(opacity="+s+")"}function Er(t){for(var s=document.documentElement.style,o=0;o<t.length;o++)if(t[o]in s)return t[o];return!1}function un(t,s,o){var c=s||new G(0,0);t.style[La]=(Z.ie3d?"translate("+c.x+"px,"+c.y+"px)":"translate3d("+c.x+"px,"+c.y+"px,0)")+(o?" scale("+o+")":"")}function Te(t,s){t._leaflet_pos=s,Z.any3d?un(t,s):(t.style.left=s.x+"px",t.style.top=s.y+"px")}function cn(t){return t._leaflet_pos||new G(0,0)}var Ci,Ti,$a;if("onselectstart"in document)Ci=function(){Q(window,"selectstart",qe)},Ti=function(){we(window,"selectstart",qe)};else{var Li=Er(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ci=function(){if(Li){var t=document.documentElement.style;$a=t[Li],t[Li]="none"}},Ti=function(){Li&&(document.documentElement.style[Li]=$a,$a=void 0)}}function Ma(){Q(window,"dragstart",qe)}function Ia(){we(window,"dragstart",qe)}var Or,Ra;function qa(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&($r(),Or=t,Ra=t.style.outlineStyle,t.style.outlineStyle="none",Q(window,"keydown",$r))}function $r(){Or&&(Or.style.outlineStyle=Ra,Or=void 0,Ra=void 0,we(window,"keydown",$r))}function iu(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function ja(t){var s=t.getBoundingClientRect();return{x:s.width/t.offsetWidth||1,y:s.height/t.offsetHeight||1,boundingClientRect:s}}var Wf={__proto__:null,TRANSFORM:La,TRANSITION:Si,TRANSITION_END:tu,get:nu,getStyle:ki,create:de,remove:Se,empty:Tr,toFront:On,toBack:$n,hasClass:Ea,addClass:ne,removeClass:Ce,setClass:Oa,getClass:Lr,setOpacity:st,testProp:Er,setTransform:un,setPosition:Te,getPosition:cn,get disableTextSelection(){return Ci},get enableTextSelection(){return Ti},disableImageDrag:Ma,enableImageDrag:Ia,preventOutline:qa,restoreOutline:$r,getSizedParentNode:iu,getScale:ja};function Q(t,s,o,c){if(s&&typeof s=="object")for(var d in s)Ba(t,d,s[d],o);else{s=P(s);for(var p=0,y=s.length;p<y;p++)Ba(t,s[p],o,c)}return this}var Pt="_leaflet_events";function we(t,s,o,c){if(arguments.length===1)ru(t),delete t[Pt];else if(s&&typeof s=="object")for(var d in s)Na(t,d,s[d],o);else if(s=P(s),arguments.length===2)ru(t,function(S){return E(s,S)!==-1});else for(var p=0,y=s.length;p<y;p++)Na(t,s[p],o,c);return this}function ru(t,s){for(var o in t[Pt]){var c=o.split(/\d/)[0];(!s||s(c))&&Na(t,c,null,null,o)}}var Da={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ba(t,s,o,c){var d=s+f(o)+(c?"_"+f(c):"");if(t[Pt]&&t[Pt][d])return this;var p=function(S){return o.call(c||t,S||window.event)},y=p;!Z.touchNative&&Z.pointer&&s.indexOf("touch")===0?p=If(t,s,p):Z.touch&&s==="dblclick"?p=Ff(t,p):"addEventListener"in t?s==="touchstart"||s==="touchmove"||s==="wheel"||s==="mousewheel"?t.addEventListener(Da[s]||s,p,Z.passiveEvents?{passive:!1}:!1):s==="mouseenter"||s==="mouseleave"?(p=function(S){S=S||window.event,Fa(t,S)&&y(S)},t.addEventListener(Da[s],p,!1)):t.addEventListener(s,y,!1):t.attachEvent("on"+s,p),t[Pt]=t[Pt]||{},t[Pt][d]=p}function Na(t,s,o,c,d){d=d||s+f(o)+(c?"_"+f(c):"");var p=t[Pt]&&t[Pt][d];if(!p)return this;!Z.touchNative&&Z.pointer&&s.indexOf("touch")===0?Rf(t,s,p):Z.touch&&s==="dblclick"?Uf(t,p):"removeEventListener"in t?t.removeEventListener(Da[s]||s,p,!1):t.detachEvent("on"+s,p),t[Pt][d]=null}function hn(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function za(t){return Ba(t,"wheel",hn),this}function Ei(t){return Q(t,"mousedown touchstart dblclick contextmenu",hn),t._leaflet_disable_click=!0,this}function qe(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function dn(t){return qe(t),hn(t),this}function su(t){if(t.composedPath)return t.composedPath();for(var s=[],o=t.target;o;)s.push(o),o=o.parentNode;return s}function au(t,s){if(!s)return new G(t.clientX,t.clientY);var o=ja(s),c=o.boundingClientRect;return new G((t.clientX-c.left)/o.x-s.clientLeft,(t.clientY-c.top)/o.y-s.clientTop)}var Hf=Z.linux&&Z.chrome?window.devicePixelRatio:Z.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ou(t){return Z.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Hf:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function Fa(t,s){var o=s.relatedTarget;if(!o)return!0;try{for(;o&&o!==t;)o=o.parentNode}catch{return!1}return o!==t}var Kf={__proto__:null,on:Q,off:we,stopPropagation:hn,disableScrollPropagation:za,disableClickPropagation:Ei,preventDefault:qe,stop:dn,getPropagationPath:su,getMousePosition:au,getWheelDelta:ou,isExternalTarget:Fa,addListener:Q,removeListener:we},lu=Ae.extend({run:function(t,s,o,c){this.stop(),this._el=t,this._inProgress=!0,this._duration=o||.25,this._easeOutPower=1/Math.max(c||.5,.2),this._startPos=cn(t),this._offset=s.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=F(this._animate,this),this._step()},_step:function(t){var s=+new Date-this._startTime,o=this._duration*1e3;s<o?this._runFrame(this._easeOut(s/o),t):(this._runFrame(1),this._complete())},_runFrame:function(t,s){var o=this._startPos.add(this._offset.multiplyBy(t));s&&o._round(),Te(this._el,o),this.fire("step")},_complete:function(){he(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),ce=Ae.extend({options:{crs:mi,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,s){s=b(this,s),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),s.maxBounds&&this.setMaxBounds(s.maxBounds),s.zoom!==void 0&&(this._zoom=this._limitZoom(s.zoom)),s.center&&s.zoom!==void 0&&this.setView(M(s.center),s.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Si&&Z.any3d&&!Z.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Q(this._proxy,tu,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,s,o){if(s=s===void 0?this._zoom:this._limitZoom(s),t=this._limitCenter(M(t),s,this.options.maxBounds),o=o||{},this._stop(),this._loaded&&!o.reset&&o!==!0){o.animate!==void 0&&(o.zoom=a({animate:o.animate},o.zoom),o.pan=a({animate:o.animate,duration:o.duration},o.pan));var c=this._zoom!==s?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,s,o.zoom):this._tryAnimatedPan(t,o.pan);if(c)return clearTimeout(this._sizeTimer),this}return this._resetView(t,s,o.pan&&o.pan.noMoveStart),this},setZoom:function(t,s){return this._loaded?this.setView(this.getCenter(),t,{zoom:s}):(this._zoom=t,this)},zoomIn:function(t,s){return t=t||(Z.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,s)},zoomOut:function(t,s){return t=t||(Z.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,s)},setZoomAround:function(t,s,o){var c=this.getZoomScale(s),d=this.getSize().divideBy(2),p=t instanceof G?t:this.latLngToContainerPoint(t),y=p.subtract(d).multiplyBy(1-1/c),S=this.containerPointToLatLng(d.add(y));return this.setView(S,s,{zoom:o})},_getBoundsCenterZoom:function(t,s){s=s||{},t=t.getBounds?t.getBounds():ve(t);var o=U(s.paddingTopLeft||s.padding||[0,0]),c=U(s.paddingBottomRight||s.padding||[0,0]),d=this.getBoundsZoom(t,!1,o.add(c));if(d=typeof s.maxZoom=="number"?Math.min(s.maxZoom,d):d,d===1/0)return{center:t.getCenter(),zoom:d};var p=c.subtract(o).divideBy(2),y=this.project(t.getSouthWest(),d),S=this.project(t.getNorthEast(),d),C=this.unproject(y.add(S).divideBy(2).add(p),d);return{center:C,zoom:d}},fitBounds:function(t,s){if(t=ve(t),!t.isValid())throw new Error("Bounds are not valid.");var o=this._getBoundsCenterZoom(t,s);return this.setView(o.center,o.zoom,s)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,s){return this.setView(t,this._zoom,{pan:s})},panBy:function(t,s){if(t=U(t).round(),s=s||{},!t.x&&!t.y)return this.fire("moveend");if(s.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new lu,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),s.noMoveStart||this.fire("movestart"),s.animate!==!1){ne(this._mapPane,"leaflet-pan-anim");var o=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,o,s.duration||.25,s.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,s,o){if(o=o||{},o.animate===!1||!Z.any3d)return this.setView(t,s,o);this._stop();var c=this.project(this.getCenter()),d=this.project(t),p=this.getSize(),y=this._zoom;t=M(t),s=s===void 0?y:s;var S=Math.max(p.x,p.y),C=S*this.getZoomScale(y,s),O=d.distanceTo(c)||1,q=1.42,J=q*q;function re(Le){var Zr=Le?-1:1,Rm=Le?C:S,qm=C*C-S*S+Zr*J*J*O*O,jm=2*Rm*J*O,Qa=qm/jm,Fu=Math.sqrt(Qa*Qa+1)-Qa,Dm=Fu<1e-9?-18:Math.log(Fu);return Dm}function Fe(Le){return(Math.exp(Le)-Math.exp(-Le))/2}function Me(Le){return(Math.exp(Le)+Math.exp(-Le))/2}function ot(Le){return Fe(Le)/Me(Le)}var Ze=re(0);function Dn(Le){return S*(Me(Ze)/Me(Ze+q*Le))}function Om(Le){return S*(Me(Ze)*ot(Ze+q*Le)-Fe(Ze))/J}function $m(Le){return 1-Math.pow(1-Le,1.5)}var Mm=Date.now(),Nu=(re(1)-Ze)/q,Im=o.duration?1e3*o.duration:1e3*Nu*.8;function zu(){var Le=(Date.now()-Mm)/Im,Zr=$m(Le)*Nu;Le<=1?(this._flyToFrame=F(zu,this),this._move(this.unproject(c.add(d.subtract(c).multiplyBy(Om(Zr)/O)),y),this.getScaleZoom(S/Dn(Zr),y),{flyTo:!0})):this._move(t,s)._moveEnd(!0)}return this._moveStart(!0,o.noMoveStart),zu.call(this),this},flyToBounds:function(t,s){var o=this._getBoundsCenterZoom(t,s);return this.flyTo(o.center,o.zoom,s)},setMaxBounds:function(t){return t=ve(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var s=this.options.minZoom;return this.options.minZoom=t,this._loaded&&s!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var s=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&s!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,s){this._enforcingBounds=!0;var o=this.getCenter(),c=this._limitCenter(o,this._zoom,ve(t));return o.equals(c)||this.panTo(c,s),this._enforcingBounds=!1,this},panInside:function(t,s){s=s||{};var o=U(s.paddingTopLeft||s.padding||[0,0]),c=U(s.paddingBottomRight||s.padding||[0,0]),d=this.project(this.getCenter()),p=this.project(t),y=this.getPixelBounds(),S=ye([y.min.add(o),y.max.subtract(c)]),C=S.getSize();if(!S.contains(p)){this._enforcingBounds=!0;var O=p.subtract(S.getCenter()),q=S.extend(p).getSize().subtract(C);d.x+=O.x<0?-q.x:q.x,d.y+=O.y<0?-q.y:q.y,this.panTo(this.unproject(d),s),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=a({animate:!1,pan:!0},t===!0?{animate:!0}:t);var s=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),c=s.divideBy(2).round(),d=o.divideBy(2).round(),p=c.subtract(d);return!p.x&&!p.y?this:(t.animate&&t.pan?this.panBy(p):(t.pan&&this._rawPanBy(p),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:s,newSize:o}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=a({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var s=u(this._handleGeolocationResponse,this),o=u(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(s,o,t):navigator.geolocation.getCurrentPosition(s,o,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var s=t.code,o=t.message||(s===1?"permission denied":s===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:s,message:"Geolocation error: "+o+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var s=t.coords.latitude,o=t.coords.longitude,c=new oe(s,o),d=c.toBounds(t.coords.accuracy*2),p=this._locateOptions;if(p.setView){var y=this.getBoundsZoom(d);this.setView(c,p.maxZoom?Math.min(y,p.maxZoom):y)}var S={latlng:c,bounds:d,timestamp:t.timestamp};for(var C in t.coords)typeof t.coords[C]=="number"&&(S[C]=t.coords[C]);this.fire("locationfound",S)}},addHandler:function(t,s){if(!s)return this;var o=this[t]=new s(this);return this._handlers.push(o),this.options[t]&&o.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Se(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(he(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)Se(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,s){var o="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),c=de("div",o,s||this._mapPane);return t&&(this._panes[t]=c),c},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),s=this.unproject(t.getBottomLeft()),o=this.unproject(t.getTopRight());return new Pe(s,o)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,s,o){t=ve(t),o=U(o||[0,0]);var c=this.getZoom()||0,d=this.getMinZoom(),p=this.getMaxZoom(),y=t.getNorthWest(),S=t.getSouthEast(),C=this.getSize().subtract(o),O=ye(this.project(S,c),this.project(y,c)).getSize(),q=Z.any3d?this.options.zoomSnap:1,J=C.x/O.x,re=C.y/O.y,Fe=s?Math.max(J,re):Math.min(J,re);return c=this.getScaleZoom(Fe,c),q&&(c=Math.round(c/(q/100))*(q/100),c=s?Math.ceil(c/q)*q:Math.floor(c/q)*q),Math.max(d,Math.min(p,c))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new G(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,s){var o=this._getTopLeftPoint(t,s);return new se(o,o.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,s){var o=this.options.crs;return s=s===void 0?this._zoom:s,o.scale(t)/o.scale(s)},getScaleZoom:function(t,s){var o=this.options.crs;s=s===void 0?this._zoom:s;var c=o.zoom(t*o.scale(s));return isNaN(c)?1/0:c},project:function(t,s){return s=s===void 0?this._zoom:s,this.options.crs.latLngToPoint(M(t),s)},unproject:function(t,s){return s=s===void 0?this._zoom:s,this.options.crs.pointToLatLng(U(t),s)},layerPointToLatLng:function(t){var s=U(t).add(this.getPixelOrigin());return this.unproject(s)},latLngToLayerPoint:function(t){var s=this.project(M(t))._round();return s._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(M(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(ve(t))},distance:function(t,s){return this.options.crs.distance(M(t),M(s))},containerPointToLayerPoint:function(t){return U(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return U(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var s=this.containerPointToLayerPoint(U(t));return this.layerPointToLatLng(s)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(M(t)))},mouseEventToContainerPoint:function(t){return au(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var s=this._container=nu(t);if(s){if(s._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Q(s,"scroll",this._onScroll,this),this._containerId=f(s)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&Z.any3d,ne(t,"leaflet-container"+(Z.touch?" leaflet-touch":"")+(Z.retina?" leaflet-retina":"")+(Z.ielt9?" leaflet-oldie":"")+(Z.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var s=ki(t,"position");s!=="absolute"&&s!=="relative"&&s!=="fixed"&&s!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Te(this._mapPane,new G(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ne(t.markerPane,"leaflet-zoom-hide"),ne(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,s,o){Te(this._mapPane,new G(0,0));var c=!this._loaded;this._loaded=!0,s=this._limitZoom(s),this.fire("viewprereset");var d=this._zoom!==s;this._moveStart(d,o)._move(t,s)._moveEnd(d),this.fire("viewreset"),c&&this.fire("load")},_moveStart:function(t,s){return t&&this.fire("zoomstart"),s||this.fire("movestart"),this},_move:function(t,s,o,c){s===void 0&&(s=this._zoom);var d=this._zoom!==s;return this._zoom=s,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),c?o&&o.pinch&&this.fire("zoom",o):((d||o&&o.pinch)&&this.fire("zoom",o),this.fire("move",o)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return he(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Te(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[f(this._container)]=this;var s=t?we:Q;s(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&s(window,"resize",this._onResize,this),Z.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){he(this._resizeRequest),this._resizeRequest=F(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,s){for(var o=[],c,d=s==="mouseout"||s==="mouseover",p=t.target||t.srcElement,y=!1;p;){if(c=this._targets[f(p)],c&&(s==="click"||s==="preclick")&&this._draggableMoved(c)){y=!0;break}if(c&&c.listens(s,!0)&&(d&&!Fa(p,t)||(o.push(c),d))||p===this._container)break;p=p.parentNode}return!o.length&&!y&&!d&&this.listens(s,!0)&&(o=[this]),o},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var s=t.target||t.srcElement;if(!(!this._loaded||s._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(s))){var o=t.type;o==="mousedown"&&qa(s),this._fireDOMEvent(t,o)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,s,o){if(t.type==="click"){var c=a({},t);c.type="preclick",this._fireDOMEvent(c,c.type,o)}var d=this._findEventTargets(t,s);if(o){for(var p=[],y=0;y<o.length;y++)o[y].listens(s,!0)&&p.push(o[y]);d=p.concat(d)}if(d.length){s==="contextmenu"&&qe(t);var S=d[0],C={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var O=S.getLatLng&&(!S._radius||S._radius<=10);C.containerPoint=O?this.latLngToContainerPoint(S.getLatLng()):this.mouseEventToContainerPoint(t),C.layerPoint=this.containerPointToLayerPoint(C.containerPoint),C.latlng=O?S.getLatLng():this.layerPointToLatLng(C.layerPoint)}for(y=0;y<d.length;y++)if(d[y].fire(s,C,!0),C.originalEvent._stopped||d[y].options.bubblingMouseEvents===!1&&E(this._mouseEvents,s)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,s=this._handlers.length;t<s;t++)this._handlers[t].disable()},whenReady:function(t,s){return this._loaded?t.call(s||this,{target:this}):this.on("load",t,s),this},_getMapPanePos:function(){return cn(this._mapPane)||new G(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,s){var o=t&&s!==void 0?this._getNewPixelOrigin(t,s):this.getPixelOrigin();return o.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,s){var o=this.getSize()._divideBy(2);return this.project(t,s)._subtract(o)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,s,o){var c=this._getNewPixelOrigin(o,s);return this.project(t,s)._subtract(c)},_latLngBoundsToNewLayerBounds:function(t,s,o){var c=this._getNewPixelOrigin(o,s);return ye([this.project(t.getSouthWest(),s)._subtract(c),this.project(t.getNorthWest(),s)._subtract(c),this.project(t.getSouthEast(),s)._subtract(c),this.project(t.getNorthEast(),s)._subtract(c)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,s,o){if(!o)return t;var c=this.project(t,s),d=this.getSize().divideBy(2),p=new se(c.subtract(d),c.add(d)),y=this._getBoundsOffset(p,o,s);return Math.abs(y.x)<=1&&Math.abs(y.y)<=1?t:this.unproject(c.add(y),s)},_limitOffset:function(t,s){if(!s)return t;var o=this.getPixelBounds(),c=new se(o.min.add(t),o.max.add(t));return t.add(this._getBoundsOffset(c,s))},_getBoundsOffset:function(t,s,o){var c=ye(this.project(s.getNorthEast(),o),this.project(s.getSouthWest(),o)),d=c.min.subtract(t.min),p=c.max.subtract(t.max),y=this._rebound(d.x,-p.x),S=this._rebound(d.y,-p.y);return new G(y,S)},_rebound:function(t,s){return t+s>0?Math.round(t-s)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(s))},_limitZoom:function(t){var s=this.getMinZoom(),o=this.getMaxZoom(),c=Z.any3d?this.options.zoomSnap:1;return c&&(t=Math.round(t/c)*c),Math.max(s,Math.min(o,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ce(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,s){var o=this._getCenterOffset(t)._trunc();return(s&&s.animate)!==!0&&!this.getSize().contains(o)?!1:(this.panBy(o,s),!0)},_createAnimProxy:function(){var t=this._proxy=de("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(s){var o=La,c=this._proxy.style[o];un(this._proxy,this.project(s.center,s.zoom),this.getZoomScale(s.zoom,1)),c===this._proxy.style[o]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Se(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),s=this.getZoom();un(this._proxy,this.project(t,s),this.getZoomScale(s,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,s,o){if(this._animatingZoom)return!0;if(o=o||{},!this._zoomAnimated||o.animate===!1||this._nothingToAnimate()||Math.abs(s-this._zoom)>this.options.zoomAnimationThreshold)return!1;var c=this.getZoomScale(s),d=this._getCenterOffset(t)._divideBy(1-1/c);return o.animate!==!0&&!this.getSize().contains(d)?!1:(F(function(){this._moveStart(!0,o.noMoveStart||!1)._animateZoom(t,s,!0)},this),!0)},_animateZoom:function(t,s,o,c){this._mapPane&&(o&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=s,ne(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:s,noUpdate:c}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ce(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Gf(t,s){return new ce(t,s)}var mt=V.extend({options:{position:"topright"},initialize:function(t){b(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var s=this._map;return s&&s.removeControl(this),this.options.position=t,s&&s.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var s=this._container=this.onAdd(t),o=this.getPosition(),c=t._controlCorners[o];return ne(s,"leaflet-control"),o.indexOf("bottom")!==-1?c.insertBefore(s,c.firstChild):c.appendChild(s),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Se(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Oi=function(t){return new mt(t)};ce.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},s="leaflet-",o=this._controlContainer=de("div",s+"control-container",this._container);function c(d,p){var y=s+d+" "+s+p;t[d+p]=de("div",y,o)}c("top","left"),c("top","right"),c("bottom","left"),c("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)Se(this._controlCorners[t]);Se(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var uu=mt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,s,o,c){return o<c?-1:c<o?1:0}},initialize:function(t,s,o){b(this,o),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var c in t)this._addLayer(t[c],c);for(c in s)this._addLayer(s[c],c,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return mt.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,s){return this._addLayer(t,s),this._map?this._update():this},addOverlay:function(t,s){return this._addLayer(t,s,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var s=this._getLayer(f(t));return s&&this._layers.splice(this._layers.indexOf(s),1),this._map?this._update():this},expand:function(){ne(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(ne(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):Ce(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ce(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",s=this._container=de("div",t),o=this.options.collapsed;s.setAttribute("aria-haspopup",!0),Ei(s),za(s);var c=this._section=de("section",t+"-list");o&&(this._map.on("click",this.collapse,this),Q(s,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var d=this._layersLink=de("a",t+"-toggle",s);d.href="#",d.title="Layers",d.setAttribute("role","button"),Q(d,{keydown:function(p){p.keyCode===13&&this._expandSafely()},click:function(p){qe(p),this._expandSafely()}},this),o||this.expand(),this._baseLayersList=de("div",t+"-base",c),this._separator=de("div",t+"-separator",c),this._overlaysList=de("div",t+"-overlays",c),s.appendChild(c)},_getLayer:function(t){for(var s=0;s<this._layers.length;s++)if(this._layers[s]&&f(this._layers[s].layer)===t)return this._layers[s]},_addLayer:function(t,s,o){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:s,overlay:o}),this.options.sortLayers&&this._layers.sort(u(function(c,d){return this.options.sortFunction(c.layer,d.layer,c.name,d.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Tr(this._baseLayersList),Tr(this._overlaysList),this._layerControlInputs=[];var t,s,o,c,d=0;for(o=0;o<this._layers.length;o++)c=this._layers[o],this._addItem(c),s=s||c.overlay,t=t||!c.overlay,d+=c.overlay?0:1;return this.options.hideSingleBase&&(t=t&&d>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=s&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var s=this._getLayer(f(t.target)),o=s.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;o&&this._map.fire(o,s)},_createRadioElement:function(t,s){var o='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(s?' checked="checked"':"")+"/>",c=document.createElement("div");return c.innerHTML=o,c.firstChild},_addItem:function(t){var s=document.createElement("label"),o=this._map.hasLayer(t.layer),c;t.overlay?(c=document.createElement("input"),c.type="checkbox",c.className="leaflet-control-layers-selector",c.defaultChecked=o):c=this._createRadioElement("leaflet-base-layers_"+f(this),o),this._layerControlInputs.push(c),c.layerId=f(t.layer),Q(c,"click",this._onInputClick,this);var d=document.createElement("span");d.innerHTML=" "+t.name;var p=document.createElement("span");s.appendChild(p),p.appendChild(c),p.appendChild(d);var y=t.overlay?this._overlaysList:this._baseLayersList;return y.appendChild(s),this._checkDisabledLayers(),s},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,s,o,c=[],d=[];this._handlingClick=!0;for(var p=t.length-1;p>=0;p--)s=t[p],o=this._getLayer(s.layerId).layer,s.checked?c.push(o):s.checked||d.push(o);for(p=0;p<d.length;p++)this._map.hasLayer(d[p])&&this._map.removeLayer(d[p]);for(p=0;p<c.length;p++)this._map.hasLayer(c[p])||this._map.addLayer(c[p]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,s,o,c=this._map.getZoom(),d=t.length-1;d>=0;d--)s=t[d],o=this._getLayer(s.layerId).layer,s.disabled=o.options.minZoom!==void 0&&c<o.options.minZoom||o.options.maxZoom!==void 0&&c>o.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,Q(t,"click",qe),this.expand();var s=this;setTimeout(function(){we(t,"click",qe),s._preventClick=!1})}}),Vf=function(t,s,o){return new uu(t,s,o)},Ua=mt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var s="leaflet-control-zoom",o=de("div",s+" leaflet-bar"),c=this.options;return this._zoomInButton=this._createButton(c.zoomInText,c.zoomInTitle,s+"-in",o,this._zoomIn),this._zoomOutButton=this._createButton(c.zoomOutText,c.zoomOutTitle,s+"-out",o,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),o},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,s,o,c,d){var p=de("a",o,c);return p.innerHTML=t,p.href="#",p.title=s,p.setAttribute("role","button"),p.setAttribute("aria-label",s),Ei(p),Q(p,"click",dn),Q(p,"click",d,this),Q(p,"click",this._refocusOnMap,this),p},_updateDisabled:function(){var t=this._map,s="leaflet-disabled";Ce(this._zoomInButton,s),Ce(this._zoomOutButton,s),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(ne(this._zoomOutButton,s),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(ne(this._zoomInButton,s),this._zoomInButton.setAttribute("aria-disabled","true"))}});ce.mergeOptions({zoomControl:!0}),ce.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ua,this.addControl(this.zoomControl))});var Jf=function(t){return new Ua(t)},cu=mt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var s="leaflet-control-scale",o=de("div",s),c=this.options;return this._addScales(c,s+"-line",o),t.on(c.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),o},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,s,o){t.metric&&(this._mScale=de("div",s,o)),t.imperial&&(this._iScale=de("div",s,o))},_update:function(){var t=this._map,s=t.getSize().y/2,o=t.distance(t.containerPointToLatLng([0,s]),t.containerPointToLatLng([this.options.maxWidth,s]));this._updateScales(o)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var s=this._getRoundNum(t),o=s<1e3?s+" m":s/1e3+" km";this._updateScale(this._mScale,o,s/t)},_updateImperial:function(t){var s=t*3.2808399,o,c,d;s>5280?(o=s/5280,c=this._getRoundNum(o),this._updateScale(this._iScale,c+" mi",c/o)):(d=this._getRoundNum(s),this._updateScale(this._iScale,d+" ft",d/s))},_updateScale:function(t,s,o){t.style.width=Math.round(this.options.maxWidth*o)+"px",t.innerHTML=s},_getRoundNum:function(t){var s=Math.pow(10,(Math.floor(t)+"").length-1),o=t/s;return o=o>=10?10:o>=5?5:o>=3?3:o>=2?2:1,s*o}}),Xf=function(t){return new cu(t)},Yf='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Za=mt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Z.inlineSvg?Yf+" ":"")+"Leaflet</a>"},initialize:function(t){b(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=de("div","leaflet-control-attribution"),Ei(this._container);for(var s in t._layers)t._layers[s].getAttribution&&this.addAttribution(t._layers[s].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var s in this._attributions)this._attributions[s]&&t.push(s);var o=[];this.options.prefix&&o.push(this.options.prefix),t.length&&o.push(t.join(", ")),this._container.innerHTML=o.join(' <span aria-hidden="true">|</span> ')}}});ce.mergeOptions({attributionControl:!0}),ce.addInitHook(function(){this.options.attributionControl&&new Za().addTo(this)});var Qf=function(t){return new Za(t)};mt.Layers=uu,mt.Zoom=Ua,mt.Scale=cu,mt.Attribution=Za,Oi.layers=Vf,Oi.zoom=Jf,Oi.scale=Xf,Oi.attribution=Qf;var St=V.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});St.addTo=function(t,s){return t.addHandler(s,this),this};var em={Events:Y},hu=Z.touch?"touchstart mousedown":"mousedown",Gt=Ae.extend({options:{clickTolerance:3},initialize:function(t,s,o,c){b(this,c),this._element=t,this._dragStartTarget=s||t,this._preventOutline=o},enable:function(){this._enabled||(Q(this._dragStartTarget,hu,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Gt._dragging===this&&this.finishDrag(!0),we(this._dragStartTarget,hu,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!Ea(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){Gt._dragging===this&&this.finishDrag();return}if(!(Gt._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(Gt._dragging=this,this._preventOutline&&qa(this._element),Ma(),Ci(),!this._moving)){this.fire("down");var s=t.touches?t.touches[0]:t,o=iu(this._element);this._startPoint=new G(s.clientX,s.clientY),this._startPos=cn(this._element),this._parentScale=ja(o);var c=t.type==="mousedown";Q(document,c?"mousemove":"touchmove",this._onMove,this),Q(document,c?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var s=t.touches&&t.touches.length===1?t.touches[0]:t,o=new G(s.clientX,s.clientY)._subtract(this._startPoint);!o.x&&!o.y||Math.abs(o.x)+Math.abs(o.y)<this.options.clickTolerance||(o.x/=this._parentScale.x,o.y/=this._parentScale.y,qe(t),this._moved||(this.fire("dragstart"),this._moved=!0,ne(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ne(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(o),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Te(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){Ce(document.body,"leaflet-dragging"),this._lastTarget&&(Ce(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),we(document,"mousemove touchmove",this._onMove,this),we(document,"mouseup touchend touchcancel",this._onUp,this),Ia(),Ti();var s=this._moved&&this._moving;this._moving=!1,Gt._dragging=!1,s&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function du(t,s,o){var c,d=[1,4,2,8],p,y,S,C,O,q,J,re;for(p=0,q=t.length;p<q;p++)t[p]._code=fn(t[p],s);for(S=0;S<4;S++){for(J=d[S],c=[],p=0,q=t.length,y=q-1;p<q;y=p++)C=t[p],O=t[y],C._code&J?O._code&J||(re=Mr(O,C,J,s,o),re._code=fn(re,s),c.push(re)):(O._code&J&&(re=Mr(O,C,J,s,o),re._code=fn(re,s),c.push(re)),c.push(C));t=c}return t}function fu(t,s){var o,c,d,p,y,S,C,O,q;if(!t||t.length===0)throw new Error("latlngs not passed");at(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var J=M([0,0]),re=ve(t),Fe=re.getNorthWest().distanceTo(re.getSouthWest())*re.getNorthEast().distanceTo(re.getNorthWest());Fe<1700&&(J=Wa(t));var Me=t.length,ot=[];for(o=0;o<Me;o++){var Ze=M(t[o]);ot.push(s.project(M([Ze.lat-J.lat,Ze.lng-J.lng])))}for(S=C=O=0,o=0,c=Me-1;o<Me;c=o++)d=ot[o],p=ot[c],y=d.y*p.x-p.y*d.x,C+=(d.x+p.x)*y,O+=(d.y+p.y)*y,S+=y*3;S===0?q=ot[0]:q=[C/S,O/S];var Dn=s.unproject(U(q));return M([Dn.lat+J.lat,Dn.lng+J.lng])}function Wa(t){for(var s=0,o=0,c=0,d=0;d<t.length;d++){var p=M(t[d]);s+=p.lat,o+=p.lng,c++}return M([s/c,o/c])}var tm={__proto__:null,clipPolygon:du,polygonCenter:fu,centroid:Wa};function mu(t,s){if(!s||!t.length)return t.slice();var o=s*s;return t=rm(t,o),t=im(t,o),t}function pu(t,s,o){return Math.sqrt($i(t,s,o,!0))}function nm(t,s,o){return $i(t,s,o)}function im(t,s){var o=t.length,c=typeof Uint8Array<"u"?Uint8Array:Array,d=new c(o);d[0]=d[o-1]=1,Ha(t,d,s,0,o-1);var p,y=[];for(p=0;p<o;p++)d[p]&&y.push(t[p]);return y}function Ha(t,s,o,c,d){var p=0,y,S,C;for(S=c+1;S<=d-1;S++)C=$i(t[S],t[c],t[d],!0),C>p&&(y=S,p=C);p>o&&(s[y]=1,Ha(t,s,o,c,y),Ha(t,s,o,y,d))}function rm(t,s){for(var o=[t[0]],c=1,d=0,p=t.length;c<p;c++)sm(t[c],t[d])>s&&(o.push(t[c]),d=c);return d<p-1&&o.push(t[p-1]),o}var gu;function _u(t,s,o,c,d){var p=c?gu:fn(t,o),y=fn(s,o),S,C,O;for(gu=y;;){if(!(p|y))return[t,s];if(p&y)return!1;S=p||y,C=Mr(t,s,S,o,d),O=fn(C,o),S===p?(t=C,p=O):(s=C,y=O)}}function Mr(t,s,o,c,d){var p=s.x-t.x,y=s.y-t.y,S=c.min,C=c.max,O,q;return o&8?(O=t.x+p*(C.y-t.y)/y,q=C.y):o&4?(O=t.x+p*(S.y-t.y)/y,q=S.y):o&2?(O=C.x,q=t.y+y*(C.x-t.x)/p):o&1&&(O=S.x,q=t.y+y*(S.x-t.x)/p),new G(O,q,d)}function fn(t,s){var o=0;return t.x<s.min.x?o|=1:t.x>s.max.x&&(o|=2),t.y<s.min.y?o|=4:t.y>s.max.y&&(o|=8),o}function sm(t,s){var o=s.x-t.x,c=s.y-t.y;return o*o+c*c}function $i(t,s,o,c){var d=s.x,p=s.y,y=o.x-d,S=o.y-p,C=y*y+S*S,O;return C>0&&(O=((t.x-d)*y+(t.y-p)*S)/C,O>1?(d=o.x,p=o.y):O>0&&(d+=y*O,p+=S*O)),y=t.x-d,S=t.y-p,c?y*y+S*S:new G(d,p)}function at(t){return!T(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function vu(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),at(t)}function yu(t,s){var o,c,d,p,y,S,C,O;if(!t||t.length===0)throw new Error("latlngs not passed");at(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var q=M([0,0]),J=ve(t),re=J.getNorthWest().distanceTo(J.getSouthWest())*J.getNorthEast().distanceTo(J.getNorthWest());re<1700&&(q=Wa(t));var Fe=t.length,Me=[];for(o=0;o<Fe;o++){var ot=M(t[o]);Me.push(s.project(M([ot.lat-q.lat,ot.lng-q.lng])))}for(o=0,c=0;o<Fe-1;o++)c+=Me[o].distanceTo(Me[o+1])/2;if(c===0)O=Me[0];else for(o=0,p=0;o<Fe-1;o++)if(y=Me[o],S=Me[o+1],d=y.distanceTo(S),p+=d,p>c){C=(p-c)/d,O=[S.x-C*(S.x-y.x),S.y-C*(S.y-y.y)];break}var Ze=s.unproject(U(O));return M([Ze.lat+q.lat,Ze.lng+q.lng])}var am={__proto__:null,simplify:mu,pointToSegmentDistance:pu,closestPointOnSegment:nm,clipSegment:_u,_getEdgeIntersection:Mr,_getBitCode:fn,_sqClosestPointOnSegment:$i,isFlat:at,_flat:vu,polylineCenter:yu},Ka={project:function(t){return new G(t.lng,t.lat)},unproject:function(t){return new oe(t.y,t.x)},bounds:new se([-180,-90],[180,90])},Ga={R:6378137,R_MINOR:6356752314245179e-9,bounds:new se([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var s=Math.PI/180,o=this.R,c=t.lat*s,d=this.R_MINOR/o,p=Math.sqrt(1-d*d),y=p*Math.sin(c),S=Math.tan(Math.PI/4-c/2)/Math.pow((1-y)/(1+y),p/2);return c=-o*Math.log(Math.max(S,1e-10)),new G(t.lng*s*o,c)},unproject:function(t){for(var s=180/Math.PI,o=this.R,c=this.R_MINOR/o,d=Math.sqrt(1-c*c),p=Math.exp(-t.y/o),y=Math.PI/2-2*Math.atan(p),S=0,C=.1,O;S<15&&Math.abs(C)>1e-7;S++)O=d*Math.sin(y),O=Math.pow((1-O)/(1+O),d/2),C=Math.PI/2-2*Math.atan(p*O)-y,y+=C;return new oe(y*s,t.x*s/o)}},om={__proto__:null,LonLat:Ka,Mercator:Ga,SphericalMercator:sn},lm=a({},rt,{code:"EPSG:3395",projection:Ga,transformation:function(){var t=.5/(Math.PI*Ga.R);return ft(t,.5,-t,.5)}()}),wu=a({},rt,{code:"EPSG:4326",projection:Ka,transformation:ft(1/180,1,-1/180,.5)}),um=a({},N,{projection:Ka,transformation:ft(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,s){var o=s.lng-t.lng,c=s.lat-t.lat;return Math.sqrt(o*o+c*c)},infinite:!0});N.Earth=rt,N.EPSG3395=lm,N.EPSG3857=mi,N.EPSG900913=wr,N.EPSG4326=wu,N.Simple=um;var pt=Ae.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[f(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[f(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var s=t.target;if(s.hasLayer(this)){if(this._map=s,this._zoomAnimated=s._zoomAnimated,this.getEvents){var o=this.getEvents();s.on(o,this),this.once("remove",function(){s.off(o,this)},this)}this.onAdd(s),this.fire("add"),s.fire("layeradd",{layer:this})}}});ce.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var s=f(t);return this._layers[s]?this:(this._layers[s]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var s=f(t);return this._layers[s]?(this._loaded&&t.onRemove(this),delete this._layers[s],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return f(t)in this._layers},eachLayer:function(t,s){for(var o in this._layers)t.call(s,this._layers[o]);return this},_addLayers:function(t){t=t?T(t)?t:[t]:[];for(var s=0,o=t.length;s<o;s++)this.addLayer(t[s])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[f(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var s=f(t);this._zoomBoundLayers[s]&&(delete this._zoomBoundLayers[s],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,s=-1/0,o=this._getZoomSpan();for(var c in this._zoomBoundLayers){var d=this._zoomBoundLayers[c].options;t=d.minZoom===void 0?t:Math.min(t,d.minZoom),s=d.maxZoom===void 0?s:Math.max(s,d.maxZoom)}this._layersMaxZoom=s===-1/0?void 0:s,this._layersMinZoom=t===1/0?void 0:t,o!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Mn=pt.extend({initialize:function(t,s){b(this,s),this._layers={};var o,c;if(t)for(o=0,c=t.length;o<c;o++)this.addLayer(t[o])},addLayer:function(t){var s=this.getLayerId(t);return this._layers[s]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var s=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[s]&&this._map.removeLayer(this._layers[s]),delete this._layers[s],this},hasLayer:function(t){var s=typeof t=="number"?t:this.getLayerId(t);return s in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var s=Array.prototype.slice.call(arguments,1),o,c;for(o in this._layers)c=this._layers[o],c[t]&&c[t].apply(c,s);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,s){for(var o in this._layers)t.call(s,this._layers[o]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return f(t)}}),cm=function(t,s){return new Mn(t,s)},qt=Mn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Mn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Mn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new Pe;for(var s in this._layers){var o=this._layers[s];t.extend(o.getBounds?o.getBounds():o.getLatLng())}return t}}),hm=function(t,s){return new qt(t,s)},In=V.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){b(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,s){var o=this._getIconUrl(t);if(!o){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var c=this._createImg(o,s&&s.tagName==="IMG"?s:null);return this._setIconStyles(c,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),c},_setIconStyles:function(t,s){var o=this.options,c=o[s+"Size"];typeof c=="number"&&(c=[c,c]);var d=U(c),p=U(s==="shadow"&&o.shadowAnchor||o.iconAnchor||d&&d.divideBy(2,!0));t.className="leaflet-marker-"+s+" "+(o.className||""),p&&(t.style.marginLeft=-p.x+"px",t.style.marginTop=-p.y+"px"),d&&(t.style.width=d.x+"px",t.style.height=d.y+"px")},_createImg:function(t,s){return s=s||document.createElement("img"),s.src=t,s},_getIconUrl:function(t){return Z.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function dm(t){return new In(t)}var Mi=In.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Mi.imagePath!="string"&&(Mi.imagePath=this._detectIconPath()),(this.options.imagePath||Mi.imagePath)+In.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var s=function(o,c,d){var p=c.exec(o);return p&&p[d]};return t=s(t,/^url\((['"])?(.+)\1\)$/,2),t&&s(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=de("div","leaflet-default-icon-path",document.body),s=ki(t,"background-image")||ki(t,"backgroundImage");if(document.body.removeChild(t),s=this._stripUrl(s),s)return s;var o=document.querySelector('link[href$="leaflet.css"]');return o?o.href.substring(0,o.href.length-11-1):""}}),bu=St.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Gt(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ne(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ce(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var s=this._marker,o=s._map,c=this._marker.options.autoPanSpeed,d=this._marker.options.autoPanPadding,p=cn(s._icon),y=o.getPixelBounds(),S=o.getPixelOrigin(),C=ye(y.min._subtract(S).add(d),y.max._subtract(S).subtract(d));if(!C.contains(p)){var O=U((Math.max(C.max.x,p.x)-C.max.x)/(y.max.x-C.max.x)-(Math.min(C.min.x,p.x)-C.min.x)/(y.min.x-C.min.x),(Math.max(C.max.y,p.y)-C.max.y)/(y.max.y-C.max.y)-(Math.min(C.min.y,p.y)-C.min.y)/(y.min.y-C.min.y)).multiplyBy(c);o.panBy(O,{animate:!1}),this._draggable._newPos._add(O),this._draggable._startPos._add(O),Te(s._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=F(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(he(this._panRequest),this._panRequest=F(this._adjustPan.bind(this,t)))},_onDrag:function(t){var s=this._marker,o=s._shadow,c=cn(s._icon),d=s._map.layerPointToLatLng(c);o&&Te(o,c),s._latlng=d,t.latlng=d,t.oldLatLng=this._oldLatLng,s.fire("move",t).fire("drag",t)},_onDragEnd:function(t){he(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Ir=pt.extend({options:{icon:new Mi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,s){b(this,s),this._latlng=M(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var s=this._latlng;return this._latlng=M(t),this.update(),this.fire("move",{oldLatLng:s,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,s="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),o=t.icon.createIcon(this._icon),c=!1;o!==this._icon&&(this._icon&&this._removeIcon(),c=!0,t.title&&(o.title=t.title),o.tagName==="IMG"&&(o.alt=t.alt||"")),ne(o,s),t.keyboard&&(o.tabIndex="0",o.setAttribute("role","button")),this._icon=o,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Q(o,"focus",this._panOnFocus,this);var d=t.icon.createShadow(this._shadow),p=!1;d!==this._shadow&&(this._removeShadow(),p=!0),d&&(ne(d,s),d.alt=""),this._shadow=d,t.opacity<1&&this._updateOpacity(),c&&this.getPane().appendChild(this._icon),this._initInteraction(),d&&p&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&we(this._icon,"focus",this._panOnFocus,this),Se(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Se(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&Te(this._icon,t),this._shadow&&Te(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var s=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(s)},_initInteraction:function(){if(this.options.interactive&&(ne(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),bu)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new bu(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&st(this._icon,t),this._shadow&&st(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var s=this.options.icon.options,o=s.iconSize?U(s.iconSize):U(0,0),c=s.iconAnchor?U(s.iconAnchor):U(0,0);t.panInside(this._latlng,{paddingTopLeft:c,paddingBottomRight:o.subtract(c)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function fm(t,s){return new Ir(t,s)}var Vt=pt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return b(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Rr=Vt.extend({options:{fill:!0,radius:10},initialize:function(t,s){b(this,s),this._latlng=M(t),this._radius=this.options.radius},setLatLng:function(t){var s=this._latlng;return this._latlng=M(t),this.redraw(),this.fire("move",{oldLatLng:s,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var s=t&&t.radius||this._radius;return Vt.prototype.setStyle.call(this,t),this.setRadius(s),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,s=this._radiusY||t,o=this._clickTolerance(),c=[t+o,s+o];this._pxBounds=new se(this._point.subtract(c),this._point.add(c))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function mm(t,s){return new Rr(t,s)}var Va=Rr.extend({initialize:function(t,s,o){if(typeof s=="number"&&(s=a({},o,{radius:s})),b(this,s),this._latlng=M(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new Pe(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Vt.prototype.setStyle,_project:function(){var t=this._latlng.lng,s=this._latlng.lat,o=this._map,c=o.options.crs;if(c.distance===rt.distance){var d=Math.PI/180,p=this._mRadius/rt.R/d,y=o.project([s+p,t]),S=o.project([s-p,t]),C=y.add(S).divideBy(2),O=o.unproject(C).lat,q=Math.acos((Math.cos(p*d)-Math.sin(s*d)*Math.sin(O*d))/(Math.cos(s*d)*Math.cos(O*d)))/d;(isNaN(q)||q===0)&&(q=p/Math.cos(Math.PI/180*s)),this._point=C.subtract(o.getPixelOrigin()),this._radius=isNaN(q)?0:C.x-o.project([O,t-q]).x,this._radiusY=C.y-y.y}else{var J=c.unproject(c.project(this._latlng).subtract([this._mRadius,0]));this._point=o.latLngToLayerPoint(this._latlng),this._radius=this._point.x-o.latLngToLayerPoint(J).x}this._updateBounds()}});function pm(t,s,o){return new Va(t,s,o)}var jt=Vt.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,s){b(this,s),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var s=1/0,o=null,c=$i,d,p,y=0,S=this._parts.length;y<S;y++)for(var C=this._parts[y],O=1,q=C.length;O<q;O++){d=C[O-1],p=C[O];var J=c(t,d,p,!0);J<s&&(s=J,o=c(t,d,p))}return o&&(o.distance=Math.sqrt(s)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return yu(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,s){return s=s||this._defaultShape(),t=M(t),s.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new Pe,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return at(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var s=[],o=at(t),c=0,d=t.length;c<d;c++)o?(s[c]=M(t[c]),this._bounds.extend(s[c])):s[c]=this._convertLatLngs(t[c]);return s},_project:function(){var t=new se;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),s=new G(t,t);this._rawPxBounds&&(this._pxBounds=new se([this._rawPxBounds.min.subtract(s),this._rawPxBounds.max.add(s)]))},_projectLatlngs:function(t,s,o){var c=t[0]instanceof oe,d=t.length,p,y;if(c){for(y=[],p=0;p<d;p++)y[p]=this._map.latLngToLayerPoint(t[p]),o.extend(y[p]);s.push(y)}else for(p=0;p<d;p++)this._projectLatlngs(t[p],s,o)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var s=this._parts,o,c,d,p,y,S,C;for(o=0,d=0,p=this._rings.length;o<p;o++)for(C=this._rings[o],c=0,y=C.length;c<y-1;c++)S=_u(C[c],C[c+1],t,c,!0),S&&(s[d]=s[d]||[],s[d].push(S[0]),(S[1]!==C[c+1]||c===y-2)&&(s[d].push(S[1]),d++))}},_simplifyPoints:function(){for(var t=this._parts,s=this.options.smoothFactor,o=0,c=t.length;o<c;o++)t[o]=mu(t[o],s)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,s){var o,c,d,p,y,S,C=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(o=0,p=this._parts.length;o<p;o++)for(S=this._parts[o],c=0,y=S.length,d=y-1;c<y;d=c++)if(!(!s&&c===0)&&pu(t,S[d],S[c])<=C)return!0;return!1}});function gm(t,s){return new jt(t,s)}jt._flat=vu;var Rn=jt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return fu(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var s=jt.prototype._convertLatLngs.call(this,t),o=s.length;return o>=2&&s[0]instanceof oe&&s[0].equals(s[o-1])&&s.pop(),s},_setLatLngs:function(t){jt.prototype._setLatLngs.call(this,t),at(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return at(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,s=this.options.weight,o=new G(s,s);if(t=new se(t.min.subtract(o),t.max.add(o)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var c=0,d=this._rings.length,p;c<d;c++)p=du(this._rings[c],t,!0),p.length&&this._parts.push(p)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var s=!1,o,c,d,p,y,S,C,O;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(p=0,C=this._parts.length;p<C;p++)for(o=this._parts[p],y=0,O=o.length,S=O-1;y<O;S=y++)c=o[y],d=o[S],c.y>t.y!=d.y>t.y&&t.x<(d.x-c.x)*(t.y-c.y)/(d.y-c.y)+c.x&&(s=!s);return s||jt.prototype._containsPoint.call(this,t,!0)}});function _m(t,s){return new Rn(t,s)}var Dt=qt.extend({initialize:function(t,s){b(this,s),this._layers={},t&&this.addData(t)},addData:function(t){var s=T(t)?t:t.features,o,c,d;if(s){for(o=0,c=s.length;o<c;o++)d=s[o],(d.geometries||d.geometry||d.features||d.coordinates)&&this.addData(d);return this}var p=this.options;if(p.filter&&!p.filter(t))return this;var y=qr(t,p);return y?(y.feature=Br(t),y.defaultOptions=y.options,this.resetStyle(y),p.onEachFeature&&p.onEachFeature(t,y),this.addLayer(y)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=a({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(s){this._setLayerStyle(s,t)},this)},_setLayerStyle:function(t,s){t.setStyle&&(typeof s=="function"&&(s=s(t.feature)),t.setStyle(s))}});function qr(t,s){var o=t.type==="Feature"?t.geometry:t,c=o?o.coordinates:null,d=[],p=s&&s.pointToLayer,y=s&&s.coordsToLatLng||Ja,S,C,O,q;if(!c&&!o)return null;switch(o.type){case"Point":return S=y(c),xu(p,t,S,s);case"MultiPoint":for(O=0,q=c.length;O<q;O++)S=y(c[O]),d.push(xu(p,t,S,s));return new qt(d);case"LineString":case"MultiLineString":return C=jr(c,o.type==="LineString"?0:1,y),new jt(C,s);case"Polygon":case"MultiPolygon":return C=jr(c,o.type==="Polygon"?1:2,y),new Rn(C,s);case"GeometryCollection":for(O=0,q=o.geometries.length;O<q;O++){var J=qr({geometry:o.geometries[O],type:"Feature",properties:t.properties},s);J&&d.push(J)}return new qt(d);case"FeatureCollection":for(O=0,q=o.features.length;O<q;O++){var re=qr(o.features[O],s);re&&d.push(re)}return new qt(d);default:throw new Error("Invalid GeoJSON object.")}}function xu(t,s,o,c){return t?t(s,o):new Ir(o,c&&c.markersInheritOptions&&c)}function Ja(t){return new oe(t[1],t[0],t[2])}function jr(t,s,o){for(var c=[],d=0,p=t.length,y;d<p;d++)y=s?jr(t[d],s-1,o):(o||Ja)(t[d]),c.push(y);return c}function Xa(t,s){return t=M(t),t.alt!==void 0?[v(t.lng,s),v(t.lat,s),v(t.alt,s)]:[v(t.lng,s),v(t.lat,s)]}function Dr(t,s,o,c){for(var d=[],p=0,y=t.length;p<y;p++)d.push(s?Dr(t[p],at(t[p])?0:s-1,o,c):Xa(t[p],c));return!s&&o&&d.length>0&&d.push(d[0].slice()),d}function qn(t,s){return t.feature?a({},t.feature,{geometry:s}):Br(s)}function Br(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var Ya={toGeoJSON:function(t){return qn(this,{type:"Point",coordinates:Xa(this.getLatLng(),t)})}};Ir.include(Ya),Va.include(Ya),Rr.include(Ya),jt.include({toGeoJSON:function(t){var s=!at(this._latlngs),o=Dr(this._latlngs,s?1:0,!1,t);return qn(this,{type:(s?"Multi":"")+"LineString",coordinates:o})}}),Rn.include({toGeoJSON:function(t){var s=!at(this._latlngs),o=s&&!at(this._latlngs[0]),c=Dr(this._latlngs,o?2:s?1:0,!0,t);return s||(c=[c]),qn(this,{type:(o?"Multi":"")+"Polygon",coordinates:c})}}),Mn.include({toMultiPoint:function(t){var s=[];return this.eachLayer(function(o){s.push(o.toGeoJSON(t).geometry.coordinates)}),qn(this,{type:"MultiPoint",coordinates:s})},toGeoJSON:function(t){var s=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(s==="MultiPoint")return this.toMultiPoint(t);var o=s==="GeometryCollection",c=[];return this.eachLayer(function(d){if(d.toGeoJSON){var p=d.toGeoJSON(t);if(o)c.push(p.geometry);else{var y=Br(p);y.type==="FeatureCollection"?c.push.apply(c,y.features):c.push(y)}}}),o?qn(this,{geometries:c,type:"GeometryCollection"}):{type:"FeatureCollection",features:c}}});function Au(t,s){return new Dt(t,s)}var vm=Au,Nr=pt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,s,o){this._url=t,this._bounds=ve(s),b(this,o)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ne(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Se(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&On(this._image),this},bringToBack:function(){return this._map&&$n(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=ve(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",s=this._image=t?this._url:de("img");if(ne(s,"leaflet-image-layer"),this._zoomAnimated&&ne(s,"leaflet-zoom-animated"),this.options.className&&ne(s,this.options.className),s.onselectstart=_,s.onmousemove=_,s.onload=u(this.fire,this,"load"),s.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(s.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=s.src;return}s.src=this._url,s.alt=this.options.alt},_animateZoom:function(t){var s=this._map.getZoomScale(t.zoom),o=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;un(this._image,o,s)},_reset:function(){var t=this._image,s=new se(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),o=s.getSize();Te(t,s.min),t.style.width=o.x+"px",t.style.height=o.y+"px"},_updateOpacity:function(){st(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),ym=function(t,s,o){return new Nr(t,s,o)},Pu=Nr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",s=this._image=t?this._url:de("video");if(ne(s,"leaflet-image-layer"),this._zoomAnimated&&ne(s,"leaflet-zoom-animated"),this.options.className&&ne(s,this.options.className),s.onselectstart=_,s.onmousemove=_,s.onloadeddata=u(this.fire,this,"load"),t){for(var o=s.getElementsByTagName("source"),c=[],d=0;d<o.length;d++)c.push(o[d].src);this._url=o.length>0?c:[s.src];return}T(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(s.style,"objectFit")&&(s.style.objectFit="fill"),s.autoplay=!!this.options.autoplay,s.loop=!!this.options.loop,s.muted=!!this.options.muted,s.playsInline=!!this.options.playsInline;for(var p=0;p<this._url.length;p++){var y=de("source");y.src=this._url[p],s.appendChild(y)}}});function wm(t,s,o){return new Pu(t,s,o)}var Su=Nr.extend({_initImage:function(){var t=this._image=this._url;ne(t,"leaflet-image-layer"),this._zoomAnimated&&ne(t,"leaflet-zoom-animated"),this.options.className&&ne(t,this.options.className),t.onselectstart=_,t.onmousemove=_}});function bm(t,s,o){return new Su(t,s,o)}var kt=pt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,s){t&&(t instanceof oe||T(t))?(this._latlng=M(t),b(this,s)):(b(this,t),this._source=s),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&st(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&st(this._container,1),this.bringToFront(),this.options.interactive&&(ne(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(st(this._container,0),this._removeTimeout=setTimeout(u(Se,void 0,this._container),200)):Se(this._container),this.options.interactive&&(Ce(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=M(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&On(this._container),this},bringToBack:function(){return this._map&&$n(this._container),this},_prepareOpen:function(t){var s=this._source;if(!s._map)return!1;if(s instanceof qt){s=null;var o=this._source._layers;for(var c in o)if(o[c]._map){s=o[c];break}if(!s)return!1;this._source=s}if(!t)if(s.getCenter)t=s.getCenter();else if(s.getLatLng)t=s.getLatLng();else if(s.getBounds)t=s.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,s=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof s=="string")t.innerHTML=s;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(s)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),s=U(this.options.offset),o=this._getAnchor();this._zoomAnimated?Te(this._container,t.add(o)):s=s.add(t).add(o);var c=this._containerBottom=-s.y,d=this._containerLeft=-Math.round(this._containerWidth/2)+s.x;this._container.style.bottom=c+"px",this._container.style.left=d+"px"}},_getAnchor:function(){return[0,0]}});ce.include({_initOverlay:function(t,s,o,c){var d=s;return d instanceof t||(d=new t(c).setContent(s)),o&&d.setLatLng(o),d}}),pt.include({_initOverlay:function(t,s,o,c){var d=o;return d instanceof t?(b(d,c),d._source=this):(d=s&&!c?s:new t(c,this),d.setContent(o)),d}});var zr=kt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,kt.prototype.openOn.call(this,t)},onAdd:function(t){kt.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Vt||this._source.on("preclick",hn))},onRemove:function(t){kt.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Vt||this._source.off("preclick",hn))},getEvents:function(){var t=kt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",s=this._container=de("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),o=this._wrapper=de("div",t+"-content-wrapper",s);if(this._contentNode=de("div",t+"-content",o),Ei(s),za(this._contentNode),Q(s,"contextmenu",hn),this._tipContainer=de("div",t+"-tip-container",s),this._tip=de("div",t+"-tip",this._tipContainer),this.options.closeButton){var c=this._closeButton=de("a",t+"-close-button",s);c.setAttribute("role","button"),c.setAttribute("aria-label","Close popup"),c.href="#close",c.innerHTML='<span aria-hidden="true">&#215;</span>',Q(c,"click",function(d){qe(d),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,s=t.style;s.width="",s.whiteSpace="nowrap";var o=t.offsetWidth;o=Math.min(o,this.options.maxWidth),o=Math.max(o,this.options.minWidth),s.width=o+1+"px",s.whiteSpace="",s.height="";var c=t.offsetHeight,d=this.options.maxHeight,p="leaflet-popup-scrolled";d&&c>d?(s.height=d+"px",ne(t,p)):Ce(t,p),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var s=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),o=this._getAnchor();Te(this._container,s.add(o))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,s=parseInt(ki(this._container,"marginBottom"),10)||0,o=this._container.offsetHeight+s,c=this._containerWidth,d=new G(this._containerLeft,-o-this._containerBottom);d._add(cn(this._container));var p=t.layerPointToContainerPoint(d),y=U(this.options.autoPanPadding),S=U(this.options.autoPanPaddingTopLeft||y),C=U(this.options.autoPanPaddingBottomRight||y),O=t.getSize(),q=0,J=0;p.x+c+C.x>O.x&&(q=p.x+c-O.x+C.x),p.x-q-S.x<0&&(q=p.x-S.x),p.y+o+C.y>O.y&&(J=p.y+o-O.y+C.y),p.y-J-S.y<0&&(J=p.y-S.y),(q||J)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([q,J]))}},_getAnchor:function(){return U(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),xm=function(t,s){return new zr(t,s)};ce.mergeOptions({closePopupOnClick:!0}),ce.include({openPopup:function(t,s,o){return this._initOverlay(zr,t,s,o).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),pt.include({bindPopup:function(t,s){return this._popup=this._initOverlay(zr,this._popup,t,s),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof qt||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){dn(t);var s=t.layer||t.target;if(this._popup._source===s&&!(s instanceof Vt)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=s,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Fr=kt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){kt.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){kt.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=kt.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",s=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=de("div",s),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var s,o,c=this._map,d=this._container,p=c.latLngToContainerPoint(c.getCenter()),y=c.layerPointToContainerPoint(t),S=this.options.direction,C=d.offsetWidth,O=d.offsetHeight,q=U(this.options.offset),J=this._getAnchor();S==="top"?(s=C/2,o=O):S==="bottom"?(s=C/2,o=0):S==="center"?(s=C/2,o=O/2):S==="right"?(s=0,o=O/2):S==="left"?(s=C,o=O/2):y.x<p.x?(S="right",s=0,o=O/2):(S="left",s=C+(q.x+J.x)*2,o=O/2),t=t.subtract(U(s,o,!0)).add(q).add(J),Ce(d,"leaflet-tooltip-right"),Ce(d,"leaflet-tooltip-left"),Ce(d,"leaflet-tooltip-top"),Ce(d,"leaflet-tooltip-bottom"),ne(d,"leaflet-tooltip-"+S),Te(d,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&st(this._container,t)},_animateZoom:function(t){var s=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(s)},_getAnchor:function(){return U(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Am=function(t,s){return new Fr(t,s)};ce.include({openTooltip:function(t,s,o){return this._initOverlay(Fr,t,s,o).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),pt.include({bindTooltip:function(t,s){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Fr,this._tooltip,t,s),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var s=t?"off":"on",o={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?o.add=this._openTooltip:(o.mouseover=this._openTooltip,o.mouseout=this.closeTooltip,o.click=this._openTooltip,this._map?this._addFocusListeners():o.add=this._addFocusListeners),this._tooltip.options.sticky&&(o.mousemove=this._moveTooltip),this[s](o),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof qt||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var s=typeof t.getElement=="function"&&t.getElement();s&&(Q(s,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),Q(s,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var s=typeof t.getElement=="function"&&t.getElement();s&&s.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var s=this;this._map.once("moveend",function(){s._openOnceFlag=!1,s._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var s=t.latlng,o,c;this._tooltip.options.sticky&&t.originalEvent&&(o=this._map.mouseEventToContainerPoint(t.originalEvent),c=this._map.containerPointToLayerPoint(o),s=this._map.layerPointToLatLng(c)),this._tooltip.setLatLng(s)}});var ku=In.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var s=t&&t.tagName==="DIV"?t:document.createElement("div"),o=this.options;if(o.html instanceof Element?(Tr(s),s.appendChild(o.html)):s.innerHTML=o.html!==!1?o.html:"",o.bgPos){var c=U(o.bgPos);s.style.backgroundPosition=-c.x+"px "+-c.y+"px"}return this._setIconStyles(s,"icon"),s},createShadow:function(){return null}});function Pm(t){return new ku(t)}In.Default=Mi;var Ii=pt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Z.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){b(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),Se(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(On(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&($n(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof G?t:new G(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var s=this.getPane().children,o=-t(-1/0,1/0),c=0,d=s.length,p;c<d;c++)p=s[c].style.zIndex,s[c]!==this._container&&p&&(o=t(o,+p));isFinite(o)&&(this.options.zIndex=o+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Z.ielt9){st(this._container,this.options.opacity);var t=+new Date,s=!1,o=!1;for(var c in this._tiles){var d=this._tiles[c];if(!(!d.current||!d.loaded)){var p=Math.min(1,(t-d.loaded)/200);st(d.el,p),p<1?s=!0:(d.active?o=!0:this._onOpaqueTile(d),d.active=!0)}}o&&!this._noPrune&&this._pruneTiles(),s&&(he(this._fadeFrame),this._fadeFrame=F(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=de("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,s=this.options.maxZoom;if(t!==void 0){for(var o in this._levels)o=Number(o),this._levels[o].el.children.length||o===t?(this._levels[o].el.style.zIndex=s-Math.abs(t-o),this._onUpdateLevel(o)):(Se(this._levels[o].el),this._removeTilesAtZoom(o),this._onRemoveLevel(o),delete this._levels[o]);var c=this._levels[t],d=this._map;return c||(c=this._levels[t]={},c.el=de("div","leaflet-tile-container leaflet-zoom-animated",this._container),c.el.style.zIndex=s,c.origin=d.project(d.unproject(d.getPixelOrigin()),t).round(),c.zoom=t,this._setZoomTransform(c,d.getCenter(),d.getZoom()),_(c.el.offsetWidth),this._onCreateLevel(c)),this._level=c,c}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var t,s,o=this._map.getZoom();if(o>this.options.maxZoom||o<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)s=this._tiles[t],s.retain=s.current;for(t in this._tiles)if(s=this._tiles[t],s.current&&!s.active){var c=s.coords;this._retainParent(c.x,c.y,c.z,c.z-5)||this._retainChildren(c.x,c.y,c.z,c.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var s in this._tiles)this._tiles[s].coords.z===t&&this._removeTile(s)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)Se(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,s,o,c){var d=Math.floor(t/2),p=Math.floor(s/2),y=o-1,S=new G(+d,+p);S.z=+y;var C=this._tileCoordsToKey(S),O=this._tiles[C];return O&&O.active?(O.retain=!0,!0):(O&&O.loaded&&(O.retain=!0),y>c?this._retainParent(d,p,y,c):!1)},_retainChildren:function(t,s,o,c){for(var d=2*t;d<2*t+2;d++)for(var p=2*s;p<2*s+2;p++){var y=new G(d,p);y.z=o+1;var S=this._tileCoordsToKey(y),C=this._tiles[S];if(C&&C.active){C.retain=!0;continue}else C&&C.loaded&&(C.retain=!0);o+1<c&&this._retainChildren(d,p,o+1,c)}},_resetView:function(t){var s=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),s,s)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var s=this.options;return s.minNativeZoom!==void 0&&t<s.minNativeZoom?s.minNativeZoom:s.maxNativeZoom!==void 0&&s.maxNativeZoom<t?s.maxNativeZoom:t},_setView:function(t,s,o,c){var d=Math.round(s);this.options.maxZoom!==void 0&&d>this.options.maxZoom||this.options.minZoom!==void 0&&d<this.options.minZoom?d=void 0:d=this._clampZoom(d);var p=this.options.updateWhenZooming&&d!==this._tileZoom;(!c||p)&&(this._tileZoom=d,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),d!==void 0&&this._update(t),o||this._pruneTiles(),this._noPrune=!!o),this._setZoomTransforms(t,s)},_setZoomTransforms:function(t,s){for(var o in this._levels)this._setZoomTransform(this._levels[o],t,s)},_setZoomTransform:function(t,s,o){var c=this._map.getZoomScale(o,t.zoom),d=t.origin.multiplyBy(c).subtract(this._map._getNewPixelOrigin(s,o)).round();Z.any3d?un(t.el,d,c):Te(t.el,d)},_resetGrid:function(){var t=this._map,s=t.options.crs,o=this._tileSize=this.getTileSize(),c=this._tileZoom,d=this._map.getPixelWorldBounds(this._tileZoom);d&&(this._globalTileRange=this._pxBoundsToTileRange(d)),this._wrapX=s.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,s.wrapLng[0]],c).x/o.x),Math.ceil(t.project([0,s.wrapLng[1]],c).x/o.y)],this._wrapY=s.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([s.wrapLat[0],0],c).y/o.x),Math.ceil(t.project([s.wrapLat[1],0],c).y/o.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var s=this._map,o=s._animatingZoom?Math.max(s._animateToZoom,s.getZoom()):s.getZoom(),c=s.getZoomScale(o,this._tileZoom),d=s.project(t,this._tileZoom).floor(),p=s.getSize().divideBy(c*2);return new se(d.subtract(p),d.add(p))},_update:function(t){var s=this._map;if(s){var o=this._clampZoom(s.getZoom());if(t===void 0&&(t=s.getCenter()),this._tileZoom!==void 0){var c=this._getTiledPixelBounds(t),d=this._pxBoundsToTileRange(c),p=d.getCenter(),y=[],S=this.options.keepBuffer,C=new se(d.getBottomLeft().subtract([S,-S]),d.getTopRight().add([S,-S]));if(!(isFinite(d.min.x)&&isFinite(d.min.y)&&isFinite(d.max.x)&&isFinite(d.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var O in this._tiles){var q=this._tiles[O].coords;(q.z!==this._tileZoom||!C.contains(new G(q.x,q.y)))&&(this._tiles[O].current=!1)}if(Math.abs(o-this._tileZoom)>1){this._setView(t,o);return}for(var J=d.min.y;J<=d.max.y;J++)for(var re=d.min.x;re<=d.max.x;re++){var Fe=new G(re,J);if(Fe.z=this._tileZoom,!!this._isValidTile(Fe)){var Me=this._tiles[this._tileCoordsToKey(Fe)];Me?Me.current=!0:y.push(Fe)}}if(y.sort(function(Ze,Dn){return Ze.distanceTo(p)-Dn.distanceTo(p)}),y.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var ot=document.createDocumentFragment();for(re=0;re<y.length;re++)this._addTile(y[re],ot);this._level.el.appendChild(ot)}}}},_isValidTile:function(t){var s=this._map.options.crs;if(!s.infinite){var o=this._globalTileRange;if(!s.wrapLng&&(t.x<o.min.x||t.x>o.max.x)||!s.wrapLat&&(t.y<o.min.y||t.y>o.max.y))return!1}if(!this.options.bounds)return!0;var c=this._tileCoordsToBounds(t);return ve(this.options.bounds).overlaps(c)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var s=this._map,o=this.getTileSize(),c=t.scaleBy(o),d=c.add(o),p=s.unproject(c,t.z),y=s.unproject(d,t.z);return[p,y]},_tileCoordsToBounds:function(t){var s=this._tileCoordsToNwSe(t),o=new Pe(s[0],s[1]);return this.options.noWrap||(o=this._map.wrapLatLngBounds(o)),o},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var s=t.split(":"),o=new G(+s[0],+s[1]);return o.z=+s[2],o},_removeTile:function(t){var s=this._tiles[t];s&&(Se(s.el),delete this._tiles[t],this.fire("tileunload",{tile:s.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){ne(t,"leaflet-tile");var s=this.getTileSize();t.style.width=s.x+"px",t.style.height=s.y+"px",t.onselectstart=_,t.onmousemove=_,Z.ielt9&&this.options.opacity<1&&st(t,this.options.opacity)},_addTile:function(t,s){var o=this._getTilePos(t),c=this._tileCoordsToKey(t),d=this.createTile(this._wrapCoords(t),u(this._tileReady,this,t));this._initTile(d),this.createTile.length<2&&F(u(this._tileReady,this,t,null,d)),Te(d,o),this._tiles[c]={el:d,coords:t,current:!0},s.appendChild(d),this.fire("tileloadstart",{tile:d,coords:t})},_tileReady:function(t,s,o){s&&this.fire("tileerror",{error:s,tile:o,coords:t});var c=this._tileCoordsToKey(t);o=this._tiles[c],o&&(o.loaded=+new Date,this._map._fadeAnimated?(st(o.el,0),he(this._fadeFrame),this._fadeFrame=F(this._updateOpacity,this)):(o.active=!0,this._pruneTiles()),s||(ne(o.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:o.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Z.ielt9||!this._map._fadeAnimated?F(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var s=new G(this._wrapX?g(t.x,this._wrapX):t.x,this._wrapY?g(t.y,this._wrapY):t.y);return s.z=t.z,s},_pxBoundsToTileRange:function(t){var s=this.getTileSize();return new se(t.min.unscaleBy(s).floor(),t.max.unscaleBy(s).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Sm(t){return new Ii(t)}var jn=Ii.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,s){this._url=t,s=b(this,s),s.detectRetina&&Z.retina&&s.maxZoom>0?(s.tileSize=Math.floor(s.tileSize/2),s.zoomReverse?(s.zoomOffset--,s.minZoom=Math.min(s.maxZoom,s.minZoom+1)):(s.zoomOffset++,s.maxZoom=Math.max(s.minZoom,s.maxZoom-1)),s.minZoom=Math.max(0,s.minZoom)):s.zoomReverse?s.minZoom=Math.min(s.maxZoom,s.minZoom):s.maxZoom=Math.max(s.minZoom,s.maxZoom),typeof s.subdomains=="string"&&(s.subdomains=s.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,s){return this._url===t&&s===void 0&&(s=!0),this._url=t,s||this.redraw(),this},createTile:function(t,s){var o=document.createElement("img");return Q(o,"load",u(this._tileOnLoad,this,s,o)),Q(o,"error",u(this._tileOnError,this,s,o)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(o.referrerPolicy=this.options.referrerPolicy),o.alt="",o.src=this.getTileUrl(t),o},getTileUrl:function(t){var s={r:Z.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var o=this._globalTileRange.max.y-t.y;this.options.tms&&(s.y=o),s["-y"]=o}return A(this._url,a(s,this.options))},_tileOnLoad:function(t,s){Z.ielt9?setTimeout(u(t,this,null,s),0):t(null,s)},_tileOnError:function(t,s,o){var c=this.options.errorTileUrl;c&&s.getAttribute("src")!==c&&(s.src=c),t(o,s)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,s=this.options.maxZoom,o=this.options.zoomReverse,c=this.options.zoomOffset;return o&&(t=s-t),t+c},_getSubdomain:function(t){var s=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[s]},_abortLoading:function(){var t,s;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(s=this._tiles[t].el,s.onload=_,s.onerror=_,!s.complete)){s.src=$;var o=this._tiles[t].coords;Se(s),delete this._tiles[t],this.fire("tileabort",{tile:s,coords:o})}},_removeTile:function(t){var s=this._tiles[t];if(s)return s.el.setAttribute("src",$),Ii.prototype._removeTile.call(this,t)},_tileReady:function(t,s,o){if(!(!this._map||o&&o.getAttribute("src")===$))return Ii.prototype._tileReady.call(this,t,s,o)}});function Cu(t,s){return new jn(t,s)}var Tu=jn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,s){this._url=t;var o=a({},this.defaultWmsParams);for(var c in s)c in this.options||(o[c]=s[c]);s=b(this,s);var d=s.detectRetina&&Z.retina?2:1,p=this.getTileSize();o.width=p.x*d,o.height=p.y*d,this.wmsParams=o},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var s=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[s]=this._crs.code,jn.prototype.onAdd.call(this,t)},getTileUrl:function(t){var s=this._tileCoordsToNwSe(t),o=this._crs,c=ye(o.project(s[0]),o.project(s[1])),d=c.min,p=c.max,y=(this._wmsVersion>=1.3&&this._crs===wu?[d.y,d.x,p.y,p.x]:[d.x,d.y,p.x,p.y]).join(","),S=jn.prototype.getTileUrl.call(this,t);return S+x(this.wmsParams,S,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+y},setParams:function(t,s){return a(this.wmsParams,t),s||this.redraw(),this}});function km(t,s){return new Tu(t,s)}jn.WMS=Tu,Cu.wms=km;var Bt=pt.extend({options:{padding:.1},initialize:function(t){b(this,t),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ne(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,s){var o=this._map.getZoomScale(s,this._zoom),c=this._map.getSize().multiplyBy(.5+this.options.padding),d=this._map.project(this._center,s),p=c.multiplyBy(-o).add(d).subtract(this._map._getNewPixelOrigin(t,s));Z.any3d?un(this._container,p,o):Te(this._container,p)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,s=this._map.getSize(),o=this._map.containerPointToLayerPoint(s.multiplyBy(-t)).round();this._bounds=new se(o,o.add(s.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Lu=Bt.extend({options:{tolerance:0},getEvents:function(){var t=Bt.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Bt.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Q(t,"mousemove",this._onMouseMove,this),Q(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Q(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){he(this._redrawRequest),delete this._ctx,Se(this._container),we(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var s in this._layers)t=this._layers[s],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Bt.prototype._update.call(this);var t=this._bounds,s=this._container,o=t.getSize(),c=Z.retina?2:1;Te(s,t.min),s.width=c*o.x,s.height=c*o.y,s.style.width=o.x+"px",s.style.height=o.y+"px",Z.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Bt.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[f(t)]=t;var s=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=s),this._drawLast=s,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var s=t._order,o=s.next,c=s.prev;o?o.prev=c:this._drawLast=c,c?c.next=o:this._drawFirst=o,delete t._order,delete this._layers[f(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var s=t.options.dashArray.split(/[, ]+/),o=[],c,d;for(d=0;d<s.length;d++){if(c=Number(s[d]),isNaN(c))return;o.push(c)}t.options._dashArray=o}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||F(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var s=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new se,this._redrawBounds.extend(t._pxBounds.min.subtract([s,s])),this._redrawBounds.extend(t._pxBounds.max.add([s,s]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var s=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,s.x,s.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,s=this._redrawBounds;if(this._ctx.save(),s){var o=s.getSize();this._ctx.beginPath(),this._ctx.rect(s.min.x,s.min.y,o.x,o.y),this._ctx.clip()}this._drawing=!0;for(var c=this._drawFirst;c;c=c.next)t=c.layer,(!s||t._pxBounds&&t._pxBounds.intersects(s))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,s){if(this._drawing){var o,c,d,p,y=t._parts,S=y.length,C=this._ctx;if(S){for(C.beginPath(),o=0;o<S;o++){for(c=0,d=y[o].length;c<d;c++)p=y[o][c],C[c?"lineTo":"moveTo"](p.x,p.y);s&&C.closePath()}this._fillStroke(C,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var s=t._point,o=this._ctx,c=Math.max(Math.round(t._radius),1),d=(Math.max(Math.round(t._radiusY),1)||c)/c;d!==1&&(o.save(),o.scale(1,d)),o.beginPath(),o.arc(s.x,s.y/d,c,0,Math.PI*2,!1),d!==1&&o.restore(),this._fillStroke(o,t)}},_fillStroke:function(t,s){var o=s.options;o.fill&&(t.globalAlpha=o.fillOpacity,t.fillStyle=o.fillColor||o.color,t.fill(o.fillRule||"evenodd")),o.stroke&&o.weight!==0&&(t.setLineDash&&t.setLineDash(s.options&&s.options._dashArray||[]),t.globalAlpha=o.opacity,t.lineWidth=o.weight,t.strokeStyle=o.color,t.lineCap=o.lineCap,t.lineJoin=o.lineJoin,t.stroke())},_onClick:function(t){for(var s=this._map.mouseEventToLayerPoint(t),o,c,d=this._drawFirst;d;d=d.next)o=d.layer,o.options.interactive&&o._containsPoint(s)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(o))&&(c=o);this._fireEvent(c?[c]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var s=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,s)}},_handleMouseOut:function(t){var s=this._hoveredLayer;s&&(Ce(this._container,"leaflet-interactive"),this._fireEvent([s],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,s){if(!this._mouseHoverThrottled){for(var o,c,d=this._drawFirst;d;d=d.next)o=d.layer,o.options.interactive&&o._containsPoint(s)&&(c=o);c!==this._hoveredLayer&&(this._handleMouseOut(t),c&&(ne(this._container,"leaflet-interactive"),this._fireEvent([c],t,"mouseover"),this._hoveredLayer=c)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,s,o){this._map._fireDOMEvent(s,o||s.type,t)},_bringToFront:function(t){var s=t._order;if(s){var o=s.next,c=s.prev;if(o)o.prev=c;else return;c?c.next=o:o&&(this._drawFirst=o),s.prev=this._drawLast,this._drawLast.next=s,s.next=null,this._drawLast=s,this._requestRedraw(t)}},_bringToBack:function(t){var s=t._order;if(s){var o=s.next,c=s.prev;if(c)c.next=o;else return;o?o.prev=c:c&&(this._drawLast=c),s.prev=null,s.next=this._drawFirst,this._drawFirst.prev=s,this._drawFirst=s,this._requestRedraw(t)}}});function Eu(t){return Z.canvas?new Lu(t):null}var Ri=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Cm={_initContainer:function(){this._container=de("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Bt.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var s=t._container=Ri("shape");ne(s,"leaflet-vml-shape "+(this.options.className||"")),s.coordsize="1 1",t._path=Ri("path"),s.appendChild(t._path),this._updateStyle(t),this._layers[f(t)]=t},_addPath:function(t){var s=t._container;this._container.appendChild(s),t.options.interactive&&t.addInteractiveTarget(s)},_removePath:function(t){var s=t._container;Se(s),t.removeInteractiveTarget(s),delete this._layers[f(t)]},_updateStyle:function(t){var s=t._stroke,o=t._fill,c=t.options,d=t._container;d.stroked=!!c.stroke,d.filled=!!c.fill,c.stroke?(s||(s=t._stroke=Ri("stroke")),d.appendChild(s),s.weight=c.weight+"px",s.color=c.color,s.opacity=c.opacity,c.dashArray?s.dashStyle=T(c.dashArray)?c.dashArray.join(" "):c.dashArray.replace(/( *, *)/g," "):s.dashStyle="",s.endcap=c.lineCap.replace("butt","flat"),s.joinstyle=c.lineJoin):s&&(d.removeChild(s),t._stroke=null),c.fill?(o||(o=t._fill=Ri("fill")),d.appendChild(o),o.color=c.fillColor||c.color,o.opacity=c.fillOpacity):o&&(d.removeChild(o),t._fill=null)},_updateCircle:function(t){var s=t._point.round(),o=Math.round(t._radius),c=Math.round(t._radiusY||o);this._setPath(t,t._empty()?"M0 0":"AL "+s.x+","+s.y+" "+o+","+c+" 0,"+65535*360)},_setPath:function(t,s){t._path.v=s},_bringToFront:function(t){On(t._container)},_bringToBack:function(t){$n(t._container)}},Ur=Z.vml?Ri:pi,qi=Bt.extend({_initContainer:function(){this._container=Ur("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ur("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Se(this._container),we(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Bt.prototype._update.call(this);var t=this._bounds,s=t.getSize(),o=this._container;(!this._svgSize||!this._svgSize.equals(s))&&(this._svgSize=s,o.setAttribute("width",s.x),o.setAttribute("height",s.y)),Te(o,t.min),o.setAttribute("viewBox",[t.min.x,t.min.y,s.x,s.y].join(" ")),this.fire("update")}},_initPath:function(t){var s=t._path=Ur("path");t.options.className&&ne(s,t.options.className),t.options.interactive&&ne(s,"leaflet-interactive"),this._updateStyle(t),this._layers[f(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){Se(t._path),t.removeInteractiveTarget(t._path),delete this._layers[f(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var s=t._path,o=t.options;s&&(o.stroke?(s.setAttribute("stroke",o.color),s.setAttribute("stroke-opacity",o.opacity),s.setAttribute("stroke-width",o.weight),s.setAttribute("stroke-linecap",o.lineCap),s.setAttribute("stroke-linejoin",o.lineJoin),o.dashArray?s.setAttribute("stroke-dasharray",o.dashArray):s.removeAttribute("stroke-dasharray"),o.dashOffset?s.setAttribute("stroke-dashoffset",o.dashOffset):s.removeAttribute("stroke-dashoffset")):s.setAttribute("stroke","none"),o.fill?(s.setAttribute("fill",o.fillColor||o.color),s.setAttribute("fill-opacity",o.fillOpacity),s.setAttribute("fill-rule",o.fillRule||"evenodd")):s.setAttribute("fill","none"))},_updatePoly:function(t,s){this._setPath(t,gi(t._parts,s))},_updateCircle:function(t){var s=t._point,o=Math.max(Math.round(t._radius),1),c=Math.max(Math.round(t._radiusY),1)||o,d="a"+o+","+c+" 0 1,0 ",p=t._empty()?"M0 0":"M"+(s.x-o)+","+s.y+d+o*2+",0 "+d+-o*2+",0 ";this._setPath(t,p)},_setPath:function(t,s){t._path.setAttribute("d",s)},_bringToFront:function(t){On(t._path)},_bringToBack:function(t){$n(t._path)}});Z.vml&&qi.include(Cm);function Ou(t){return Z.svg||Z.vml?new qi(t):null}ce.include({getRenderer:function(t){var s=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return s||(s=this._renderer=this._createRenderer()),this.hasLayer(s)||this.addLayer(s),s},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var s=this._paneRenderers[t];return s===void 0&&(s=this._createRenderer({pane:t}),this._paneRenderers[t]=s),s},_createRenderer:function(t){return this.options.preferCanvas&&Eu(t)||Ou(t)}});var $u=Rn.extend({initialize:function(t,s){Rn.prototype.initialize.call(this,this._boundsToLatLngs(t),s)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=ve(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Tm(t,s){return new $u(t,s)}qi.create=Ur,qi.pointsToPath=gi,Dt.geometryToLayer=qr,Dt.coordsToLatLng=Ja,Dt.coordsToLatLngs=jr,Dt.latLngToCoords=Xa,Dt.latLngsToCoords=Dr,Dt.getFeature=qn,Dt.asFeature=Br,ce.mergeOptions({boxZoom:!0});var Mu=St.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Q(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){we(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Se(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ci(),Ma(),this._startPoint=this._map.mouseEventToContainerPoint(t),Q(document,{contextmenu:dn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=de("div","leaflet-zoom-box",this._container),ne(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var s=new se(this._point,this._startPoint),o=s.getSize();Te(this._box,s.min),this._box.style.width=o.x+"px",this._box.style.height=o.y+"px"},_finish:function(){this._moved&&(Se(this._box),Ce(this._container,"leaflet-crosshair")),Ti(),Ia(),we(document,{contextmenu:dn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var s=new Pe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(s).fire("boxzoomend",{boxZoomBounds:s})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ce.addInitHook("addHandler","boxZoom",Mu),ce.mergeOptions({doubleClickZoom:!0});var Iu=St.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var s=this._map,o=s.getZoom(),c=s.options.zoomDelta,d=t.originalEvent.shiftKey?o-c:o+c;s.options.doubleClickZoom==="center"?s.setZoom(d):s.setZoomAround(t.containerPoint,d)}});ce.addInitHook("addHandler","doubleClickZoom",Iu),ce.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ru=St.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Gt(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}ne(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ce(this._map._container,"leaflet-grab"),Ce(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var s=ve(this._map.options.maxBounds);this._offsetLimit=ye(this._map.latLngToContainerPoint(s.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(s.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var s=this._lastTime=+new Date,o=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(o),this._times.push(s),this._prunePositions(s)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),s=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=s.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,s){return t-(t-s)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),s=this._offsetLimit;t.x<s.min.x&&(t.x=this._viscousLimit(t.x,s.min.x)),t.y<s.min.y&&(t.y=this._viscousLimit(t.y,s.min.y)),t.x>s.max.x&&(t.x=this._viscousLimit(t.x,s.max.x)),t.y>s.max.y&&(t.y=this._viscousLimit(t.y,s.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,s=Math.round(t/2),o=this._initialWorldOffset,c=this._draggable._newPos.x,d=(c-s+o)%t+s-o,p=(c+s+o)%t-s-o,y=Math.abs(d+o)<Math.abs(p+o)?d:p;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=y},_onDragEnd:function(t){var s=this._map,o=s.options,c=!o.inertia||t.noInertia||this._times.length<2;if(s.fire("dragend",t),c)s.fire("moveend");else{this._prunePositions(+new Date);var d=this._lastPos.subtract(this._positions[0]),p=(this._lastTime-this._times[0])/1e3,y=o.easeLinearity,S=d.multiplyBy(y/p),C=S.distanceTo([0,0]),O=Math.min(o.inertiaMaxSpeed,C),q=S.multiplyBy(O/C),J=O/(o.inertiaDeceleration*y),re=q.multiplyBy(-J/2).round();!re.x&&!re.y?s.fire("moveend"):(re=s._limitOffset(re,s.options.maxBounds),F(function(){s.panBy(re,{duration:J,easeLinearity:y,noMoveStart:!0,animate:!0})}))}}});ce.addInitHook("addHandler","dragging",Ru),ce.mergeOptions({keyboard:!0,keyboardPanDelta:80});var qu=St.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Q(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),we(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,s=document.documentElement,o=t.scrollTop||s.scrollTop,c=t.scrollLeft||s.scrollLeft;this._map._container.focus(),window.scrollTo(c,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var s=this._panKeys={},o=this.keyCodes,c,d;for(c=0,d=o.left.length;c<d;c++)s[o.left[c]]=[-1*t,0];for(c=0,d=o.right.length;c<d;c++)s[o.right[c]]=[t,0];for(c=0,d=o.down.length;c<d;c++)s[o.down[c]]=[0,t];for(c=0,d=o.up.length;c<d;c++)s[o.up[c]]=[0,-1*t]},_setZoomDelta:function(t){var s=this._zoomKeys={},o=this.keyCodes,c,d;for(c=0,d=o.zoomIn.length;c<d;c++)s[o.zoomIn[c]]=t;for(c=0,d=o.zoomOut.length;c<d;c++)s[o.zoomOut[c]]=-t},_addHooks:function(){Q(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){we(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var s=t.keyCode,o=this._map,c;if(s in this._panKeys){if(!o._panAnim||!o._panAnim._inProgress)if(c=this._panKeys[s],t.shiftKey&&(c=U(c).multiplyBy(3)),o.options.maxBounds&&(c=o._limitOffset(U(c),o.options.maxBounds)),o.options.worldCopyJump){var d=o.wrapLatLng(o.unproject(o.project(o.getCenter()).add(c)));o.panTo(d)}else o.panBy(c)}else if(s in this._zoomKeys)o.setZoom(o.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[s]);else if(s===27&&o._popup&&o._popup.options.closeOnEscapeKey)o.closePopup();else return;dn(t)}}});ce.addInitHook("addHandler","keyboard",qu),ce.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ju=St.extend({addHooks:function(){Q(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){we(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var s=ou(t),o=this._map.options.wheelDebounceTime;this._delta+=s,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var c=Math.max(o-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),c),dn(t)},_performZoom:function(){var t=this._map,s=t.getZoom(),o=this._map.options.zoomSnap||0;t._stop();var c=this._delta/(this._map.options.wheelPxPerZoomLevel*4),d=4*Math.log(2/(1+Math.exp(-Math.abs(c))))/Math.LN2,p=o?Math.ceil(d/o)*o:d,y=t._limitZoom(s+(this._delta>0?p:-p))-s;this._delta=0,this._startTime=null,y&&(t.options.scrollWheelZoom==="center"?t.setZoom(s+y):t.setZoomAround(this._lastMousePos,s+y))}});ce.addInitHook("addHandler","scrollWheelZoom",ju);var Lm=600;ce.mergeOptions({tapHold:Z.touchNative&&Z.safari&&Z.mobile,tapTolerance:15});var Du=St.extend({addHooks:function(){Q(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){we(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var s=t.touches[0];this._startPos=this._newPos=new G(s.clientX,s.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(Q(document,"touchend",qe),Q(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",s))},this),Lm),Q(document,"touchend touchcancel contextmenu",this._cancel,this),Q(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){we(document,"touchend",qe),we(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),we(document,"touchend touchcancel contextmenu",this._cancel,this),we(document,"touchmove",this._onMove,this)},_onMove:function(t){var s=t.touches[0];this._newPos=new G(s.clientX,s.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,s){var o=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:s.screenX,screenY:s.screenY,clientX:s.clientX,clientY:s.clientY});o._simulated=!0,s.target.dispatchEvent(o)}});ce.addInitHook("addHandler","tapHold",Du),ce.mergeOptions({touchZoom:Z.touch,bounceAtZoomLimits:!0});var Bu=St.extend({addHooks:function(){ne(this._map._container,"leaflet-touch-zoom"),Q(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ce(this._map._container,"leaflet-touch-zoom"),we(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var s=this._map;if(!(!t.touches||t.touches.length!==2||s._animatingZoom||this._zooming)){var o=s.mouseEventToContainerPoint(t.touches[0]),c=s.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=s.getSize()._divideBy(2),this._startLatLng=s.containerPointToLatLng(this._centerPoint),s.options.touchZoom!=="center"&&(this._pinchStartLatLng=s.containerPointToLatLng(o.add(c)._divideBy(2))),this._startDist=o.distanceTo(c),this._startZoom=s.getZoom(),this._moved=!1,this._zooming=!0,s._stop(),Q(document,"touchmove",this._onTouchMove,this),Q(document,"touchend touchcancel",this._onTouchEnd,this),qe(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var s=this._map,o=s.mouseEventToContainerPoint(t.touches[0]),c=s.mouseEventToContainerPoint(t.touches[1]),d=o.distanceTo(c)/this._startDist;if(this._zoom=s.getScaleZoom(d,this._startZoom),!s.options.bounceAtZoomLimits&&(this._zoom<s.getMinZoom()&&d<1||this._zoom>s.getMaxZoom()&&d>1)&&(this._zoom=s._limitZoom(this._zoom)),s.options.touchZoom==="center"){if(this._center=this._startLatLng,d===1)return}else{var p=o._add(c)._divideBy(2)._subtract(this._centerPoint);if(d===1&&p.x===0&&p.y===0)return;this._center=s.unproject(s.project(this._pinchStartLatLng,this._zoom).subtract(p),this._zoom)}this._moved||(s._moveStart(!0,!1),this._moved=!0),he(this._animRequest);var y=u(s._move,s,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=F(y,this,!0),qe(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,he(this._animRequest),we(document,"touchmove",this._onTouchMove,this),we(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ce.addInitHook("addHandler","touchZoom",Bu),ce.BoxZoom=Mu,ce.DoubleClickZoom=Iu,ce.Drag=Ru,ce.Keyboard=qu,ce.ScrollWheelZoom=ju,ce.TapHold=Du,ce.TouchZoom=Bu,n.Bounds=se,n.Browser=Z,n.CRS=N,n.Canvas=Lu,n.Circle=Va,n.CircleMarker=Rr,n.Class=V,n.Control=mt,n.DivIcon=ku,n.DivOverlay=kt,n.DomEvent=Kf,n.DomUtil=Wf,n.Draggable=Gt,n.Evented=Ae,n.FeatureGroup=qt,n.GeoJSON=Dt,n.GridLayer=Ii,n.Handler=St,n.Icon=In,n.ImageOverlay=Nr,n.LatLng=oe,n.LatLngBounds=Pe,n.Layer=pt,n.LayerGroup=Mn,n.LineUtil=am,n.Map=ce,n.Marker=Ir,n.Mixin=em,n.Path=Vt,n.Point=G,n.PolyUtil=tm,n.Polygon=Rn,n.Polyline=jt,n.Popup=zr,n.PosAnimation=lu,n.Projection=om,n.Rectangle=$u,n.Renderer=Bt,n.SVG=qi,n.SVGOverlay=Su,n.TileLayer=jn,n.Tooltip=Fr,n.Transformation=Rt,n.Util=xe,n.VideoOverlay=Pu,n.bind=u,n.bounds=ye,n.canvas=Eu,n.circle=pm,n.circleMarker=mm,n.control=Oi,n.divIcon=Pm,n.extend=a,n.featureGroup=hm,n.geoJSON=Au,n.geoJson=vm,n.gridLayer=Sm,n.icon=dm,n.imageOverlay=ym,n.latLng=M,n.latLngBounds=ve,n.layerGroup=cm,n.map=Gf,n.marker=fm,n.point=U,n.polygon=_m,n.polyline=gm,n.popup=xm,n.rectangle=Tm,n.setOptions=b,n.stamp=f,n.svg=Ou,n.svgOverlay=bm,n.tileLayer=Cu,n.tooltip=Am,n.transformation=ft,n.version=r,n.videoOverlay=wm;var Em=window.L;n.noConflict=function(){return window.L=Em,this},window.L=n})})(sl,sl.exports);var o0=sl.exports;const Ki=og(o0);var l0=te('<div class="p-6 bg-gray-900 rounded-3xl"><h1 class="text-3xl font-bold text-center mb-6 text-white">PROGRAM</h1><div class=" bg-gray-800 border border-gray-700 rounded-lg shadow-lg p-6"><div class="flex justify-center items-center mb-4"><div id=map-container class="w-full h-96 bg-gray-700 rounded-lg overflow-hidden border-4 border-gray-500"></div></div><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class=" bg-gray-600 p-4 rounded-lg shadow-md transition-transform transform hover:scale-105"><h2 class="text-lg font-semibold mb-2 text-white">Podaci o avionu</h2><p class=" text-gray-300"><strong>Kut X do aviona: <!></strong></p><p class=text-gray-300><strong>Kut Y do aviona: <!></strong></p><p class=" text-gray-300"><strong>Koordinate aviona: <!>, <!></strong></p><p class=text-gray-300><strong>Zrana udaljenost: <!>m</strong></p><p class=text-gray-300><strong>Vaa Elevacija: <!>m</strong></p></div><div class=" bg-gray-600 p-4 rounded-lg shadow-md transition-transform transform hover:scale-105"><h2 class="text-lg font-semibold mb-2 text-white">Nagib ureaja</h2><p class=text-gray-300><strong>Alpha (Z os): <!></strong></p><p class=text-gray-300><strong>Beta (X os): <!></strong></p><p class=text-gray-300><strong>Gamma (Y os): <!></strong></p><p class=text-gray-300><strong>Kut gledanja: <!></strong></p></div></div><div class="flex justify-center mt-6"><audio id=audiosuccess></audio><audio id=audiofail></audio><button class="bg-blue-600 text-white font-semibold py-2 px-4 w-full rounded-lg shadow-md hover:bg-blue-700 transition duration-200">Skeniraj</button></div><div class="top-16 mt-2 col-span-1 md:col-span-2 flex justify-start w-full"><div class="space-y-2 w-full">'),u0=te('<div id=notifikacija><div class="whitespace-normal w-full">');const[c0,nh]=K([]),[os,h0]=K(null),[ls,d0]=K(null),[f0,m0]=K(0),[ih,p0]=K(0),[g0,_0]=K(0),[rh,v0]=K(null),[y0,w0]=K(null),[b0,x0]=K(null),[A0,P0]=K(null),[S0,k0]=K(null),[Lo,C0]=K(0),[Kn,T0]=K(0),[Gn,L0]=K(0),[Eo,sh]=K(0),[ah,E0]=K(0),[O0,$0]=K(0),[M0,I0]=K(0),[oh,Oo]=K(void 0),[R0,lh]=K(0),[q0,uh]=K(0),[j0,ch]=K(0),[D0,hh]=K(0),[B0,dh]=K(0),[fh,N0]=K(0);function Xn(i){const e=new Date(i);return new Intl.DateTimeFormat("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).format(e)}async function tn(i,e,n){const r={message:i,type:e};nh(a=>[...a,r]),setTimeout(()=>{nh(a=>a.filter(l=>l!==r))},n)}const mh=new Ki.Icon({iconUrl:s0,shadowUrl:a0,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});function z0(i){const[e,n]=K(null),r=x=>{const k=Ki.map(x,{zoomControl:!1,attributionControl:!1}).setView([51.505,-.09],13);Ki.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(k),navigator.geolocation?navigator.geolocation.getCurrentPosition(A=>{const{latitude:T,longitude:E}=A.coords;k.setView([T,E],13),Ki.marker([T,E],{icon:mh}).addTo(k).bindPopup("Vaa trenutna lokacija").openPopup()},A=>{console.error("Geolokacija nije dostupna: ",A)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):console.error("Geolokacija nije podrana u ovom pregledniku"),n(k)};Es(()=>{e()&&e().remove()});const a=()=>{window.DeviceOrientationEvent?window.addEventListener("deviceorientationabsolute",x=>{if(x.alpha!==null){let k=x.alpha,A=x.beta,T=x.gamma;k=(k+360)%360,k<0&&(k+=360),(k>0&&k<180||k>0&&k>180)&&(k=360-k),k=k.toFixed(2),Math.abs(A)<45&&Math.abs(T)<45&&v0(k)}else tn("Nismo u mogunosti pronai Vau orijentaciju.","error",5e3)}):tn("DeviceOrientation nije podran.","error",5e3)};async function l(x,k,A,T){let E=id.getGreatCircleBearing({latitude:x,longitude:k},{latitude:A,longitude:T});E=E-5.3,T0(E)}function u(){return new Promise((x,k)=>{"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(A=>{const T=A.coords.latitude,E=A.coords.longitude;h0(T),d0(E),x()},A=>{console.error("Error fetching geolocation:",A),k(A)})})}const h=x=>{m0(x.alpha),p0(x.beta),_0(x.gamma)},f=It();N0(f().user.id),console.log("SESSION::",fh),vh(()=>{let x=new Magnetometer;x.addEventListener("reading",A=>{C0(Math.sqrt(Math.pow(x.x,2)+Math.pow(x.y,2)+Math.pow(x.z,2))),(Lo()>65||Lo()<20)&&document.getElementById("notifikacija")===null&&tn(`Zbog snage magnetskog polja (${Lo().toFixed(2)}T), oitanja kuteva mogla bi biti neprecizna.`,"info",5e3)}),x.start(),tn("Kako bi ste koristili magnetometar, posjetite lokaciju chrome://flags ili edge://flags te dozvolite rad magnetometra!","info",1e4),a();const k=document.getElementById("map-container");return k&&r(k),window.addEventListener("deviceorientation",h),()=>{window.removeEventListener("deviceorientation",h),x.stop()}});async function m(x,k){w0(x+12/60),x0(x-12/60);const A=12/60/Math.cos(x*Math.PI/180);P0(k+A),k0(k-A)}async function g(x,k){try{const A=await eb(x,k);A!==null&&E0(A)}catch(A){console.error("Greka pri pokuaju dohvaanja elevacije: ",A)}}async function _(x,k,A,T,E,$,I,D,j,z,B){const he=A*(Math.PI/180),xe=T*(Math.PI/180),V=x*(Math.PI/180),X=k*(Math.PI/180),Y=V-he,Ae=X-xe,G=Math.sin(Y/2)**2+Math.cos(he)*Math.cos(V)*Math.sin(Ae/2)**2,U=6371e3*(2*Math.asin(Math.sqrt(G)));U!=0?sh(U):sh(E);const se=E-I,ye=Math.atan(se/Eo())*(180/Math.PI)+90;L0(ye),l(os(),ls(),M0(),O0());const Pe=Gn()+20,ve=Gn()-20,oe=Kn()+20,M=Kn()-20;if($>=ve&&$<=Pe&&D>=M&&D<=oe){var N=document.getElementById("audiosuccess");N.play(),H0(A,T,E,z,B,j,fh()),error?console.error("Greka pri spremanju podataka u bazu:",error.message):console.log("Podaci spremljeni u bazu")}else{var N=document.getElementById("audiofail");N.play();let Tn=Math.min(Math.abs(Gn()-$),360-Math.abs(Gn()-$)),sn=Math.min(Math.abs(Kn()-D),360-Math.abs(Kn()-D)),Rt=Tn+sn;console.log("PRIJE UDALJENOST KUTEVA",oh()),oh()?Oo(ft=>{if(Rt<ft)lh(Gn().toFixed(2)),uh(Kn().toFixed(2)),ch(A.toFixed(2)),hh(T.toFixed(2)),dh(Eo().toFixed(2));else return ft}):(Oo(Rt),tn("Niste usmjereni prema avionu!","error",5e3),lh(Gn().toFixed(2)),uh(Kn().toFixed(2)),ch(A.toFixed(2)),hh(T.toFixed(2)),dh(Eo().toFixed(2)))}}const[v,w]=K(!1),P=async()=>{w(!0);try{const x=`${y0()},${b0()},${S0()},${A0()}`,k=await Qw(x);k!==void 0?k.forEach(async A=>{const T=A.lat,E=A.lon,$=(A.alt/3.28).toFixed(2),I=Math.round(A.brz*1.852),D=A.modelA,j=A.call;I0(T),$0(E),Ki.marker([T,E],{icon:mh}).addTo(e()).bindPopup(`
            <div class="text-xs p-2 max-w-xs">
              <strong>Let:</strong> ${j}<br>
              <strong>Zrakoplov:</strong> ${D}<br>
              <strong>Altituda:</strong> ${$} m
            </div>  `).openPopup(),_(os(),ls(),T,E,$,ih(),ah(),rh(),D,I,j)}):tn("Nema aviona u zranom prostoru!","error",5e3)}catch(x){console.error("Failed to fetch flight data:",x)}finally{w(!1)}};async function b(){Oo(void 0),await u(),await m(os(),ls()),await g(os(),ls()),await P()}return(()=>{var x=l0(),k=x.firstChild,A=k.nextSibling,T=A.firstChild,E=T.nextSibling,$=E.firstChild,I=$.firstChild,D=I.nextSibling,j=D.firstChild,z=j.firstChild,B=z.nextSibling;B.nextSibling;var F=D.nextSibling,he=F.firstChild,xe=he.firstChild,V=xe.nextSibling;V.nextSibling;var X=F.nextSibling,Y=X.firstChild,Ae=Y.firstChild,G=Ae.nextSibling,Ue=G.nextSibling,U=Ue.nextSibling;U.nextSibling;var se=X.nextSibling,ye=se.firstChild,Pe=ye.firstChild,ve=Pe.nextSibling;ve.nextSibling;var oe=se.nextSibling,M=oe.firstChild,N=M.firstChild,rt=N.nextSibling;rt.nextSibling;var Tn=$.nextSibling,sn=Tn.firstChild,Rt=sn.nextSibling,ft=Rt.firstChild,mi=ft.firstChild,wr=mi.nextSibling;wr.nextSibling;var pi=Rt.nextSibling,gi=pi.firstChild,_i=gi.firstChild,an=_i.nextSibling;an.nextSibling;var br=pi.nextSibling,vi=br.firstChild,yi=vi.firstChild,wi=yi.nextSibling;wi.nextSibling;var xr=br.nextSibling,Ar=xr.firstChild,Pa=Ar.firstChild,Ln=Pa.nextSibling;Ln.nextSibling;var bi=E.nextSibling,xi=bi.firstChild,Pr=xi.nextSibling,Sr=Pr.nextSibling,kr=bi.nextSibling,Sa=kr.firstChild;return R(j,q0,B),R(he,R0,V),R(Y,j0,G),R(Y,D0,U),R(ye,B0,ve),R(M,ah,rt),R(ft,()=>g0().toFixed(2),wr),R(gi,()=>f0().toFixed(2),an),R(vi,()=>ih().toFixed(2),wi),R(Ar,rh,Ln),ct(xi,"src",i0),ct(Pr,"src",r0),Sr.$$click=b,R(Sa,()=>c0().map((on,Ai)=>(()=>{var ln=u0(),ka=ln.firstChild;return ct(ln,"key",Ai),R(ka,()=>on.message),Ee(()=>Is(ln,`p-4 rounded ${on.type==="error"?"bg-red-600":on.type==="success"?"bg-green-700":on.type==="info"?"bg-blue-400":""} text-white shadow-md`)),ln})())),x})()}ht(["click"]);const F0="https://jgzhrmujjmcuanvbufwh.supabase.co",U0="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpnemhybXVqam1jdWFudmJ1ZndoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzM3NjcyNDksImV4cCI6MjA0OTM0MzI0OX0.GX-LLe2w4zDA8_lHv8HVY15PikbGNo9Tnz-WzB-ZwvI",tt=ov(F0,U0),[Z0,W0]=K(null);async function H0(i,e,n,r,a,l,u){const{error:h}=await tt.from("avioninadjeno").insert([{latitude:i,longitude:e,altitude:n,speed:r,callsign:a,model:l,owner_id:u}]);h?console.error("Greka pri spremanju podataka u bazu:",h.message):(console.log("Podaci spremljeni u bazu"),tn("Podaci su spremljeni u bazu podataka.","success",5e3))}async function K0(i){const{data:e,error:n}=await tt.from("avioninadjeno").select("*").order("id",{ascending:!1}).limit(5).eq("owner_id",i);if(n)return console.error("Greka pri dohvaanju aviona:",n.message),[];console.log("Dohvaeni podaci:",e),W0(e)}async function G0(i,e,n){const{data:r,error:a}=await tt.from("avioninadjeno").update({description:e,modelnum:n}).eq("model",i);return a?(console.error("Greka pri ubacivanju opisa:",a.message),[]):r}async function V0(){let{data:i,error:e}=await tt.rpc("create_modeli_filtrirano");e&&console.error(e)}async function J0(i){await V0();const{data:e,error:n}=await tt.from("modelifiltrirano").select("*").eq("owner_id",i);return n?(console.error("Greka pri dohvaanju filtrirane tablice:",n.message),[]):e}const bf=ol();function It(){return Os(bf)}function X0(i){const[e,n]=K(null),[r,a]=K(!0);return tt.auth.onAuthStateChange((l,u)=>{l==="SIGNED_IN"||l==="USER_UPDATED"?(n(u),a(!1)):l==="SIGNED_OUT"?(n(null),a(!1)):l==="INITIAL_SESSION"&&a(!1)}),H(Ms,{get when(){return!r()},get children(){return H(bf.Provider,{value:e,get children(){return i.children}})}})}const Ts="/ZavrsniV2/assets/planefav-DkQTzJrY.png";var Y0=te('<nav class="border-gray-200 bg-gray-900"><div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4"><a href=/Pocetna class="flex items-center space-x-3 rtl:space-x-reverse"><img class=h-8 alt="Flowbite Logo"><span class="self-center text-2xl font-semibold whitespace-nowrap text-white">Plane Spotter</span></a><button class="md:hidden p-2 text-gray-500 hover:bg-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-200"aria-label="Open mobile menu"><svg class="w-6 h-6"fill=none stroke=currentColor viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 6h16M4 12h16M4 18h16"></path></svg></button><div><ul class="flex flex-col font-medium p-4 md:p-0 mt-4 border rounded-lg md:bg-gray-900 md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0 bg-gray-800 border-gray-700"><li><a href=/Pocetna class="block py-2 px-3 text-white rounded md:bg-transparent md:p-0 md:text-blue-500 hover:bg-gray-700 md:hover:bg-transparent">Pocetna</a></li><li class=relative><button id=dropdownNavbarLink class="flex items-center justify-between w-full py-2 px-3 text-white rounded hover:bg-gray-700 md:hover:bg-transparent md:border-0 md:hover:text-blue-500 md:p-0 md:w-auto focus:text-white border-gray-700">Izbornik<svg class="w-2.5 h-2.5 ms-2.5"aria-hidden=true xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 10 6"><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 d="m1 1 4 4 4-4"></path></svg></button></li><li><a href=/Onama class="block py-2 px-3 text-white rounded hover:bg-gray-600 md:hover:bg-transparent md:border-0 md:hover:text-blue-500 md:p-0 md:w-auto">O nama</a></li><li><a href=/Kontakt class="block py-2 px-3 text-white rounded hover:bg-gray-600 md:hover:bg-transparent md:border-0 md:hover:text-blue-500 md:p-0 md:w-auto">Kontakt</a></li><li><a href=/Racun class="block py-2 px-3 text-white rounded hover:bg-gray-600 md:hover:bg-transparent md:border-0 md:hover:text-blue-500 md:p-0 md:w-auto ">Raun'),Q0=te('<div class="bg-gray-800 text-gray-100 min-h-screen"><div class="mx-auto w-full max-w-screen-xl p-4 py-6 lg:py-8">'),ex=te('<footer footer class=bg-gray-900><div class="mx-auto w-full max-w-screen-xl p-4 py-6 lg:py-8"><div class="md:flex md:justify-between"><div class="mb-6 md:mb-0"><a href=https://flowbite.com/ class="flex items-center"><img class="h-8 me-3"alt="FlowBite Logo"><span class="self-center text-2xl font-semibold whitespace-nowrap text-white">Plane Spotter</span></a></div><div class="grid grid-cols-2 gap-8 sm:gap-6 sm:grid-cols-3"><div><h2 class="mb-6 text-sm font-semibold text-white uppercase ">Izvori</h2><ul class="text-gray-400 font-medium"><li class=mb-4><a href=https://flowbite.com/ class=hover:underline>Flowbite</a></li><li><a href=https://tailwindcss.com/ class=hover:underline>Tailwind CSS</a></li></ul></div><div><h2 class="mb-6 text-sm font-semibold text-white uppercase">Pratite nas</h2><ul class="text-gray-400 font-medium"><li class=mb-4><a href=https://github.com/themesberg/flowbite class="hover:underline ">Github</a></li><li><a href=https://discord.gg/4eeurUVvTy class=hover:underline>Discord</a></li></ul></div><div><h2 class="mb-6 text-sm font-semibold text-white uppercase">Prava</h2><ul class="text-gray-400 font-medium"><li class=mb-4><a href=# class=hover:underline>Privacy Policy</a></li><li><a href=# class=hover:underline>Terms &amp; Conditions</a></li></ul></div></div></div><hr class="my-6 border-gray-700 sm:mx-auto lg:my-8"><div class="sm:flex sm:items-center sm:justify-between"><span class="text-sm text-gray-400 sm:text-center"> <a href=https://ss-obrtnicka-koprivnica.skole.hr/ class=hover:underline> OBSCK</a> Sva prada podrana.</span><div class="flex mt-4 sm:justify-center sm:mt-0"><a href=# class="text-gray-500 hover:text-white ms-5"><svg class="w-4 h-4"aria-hidden=true xmlns=http://www.w3.org/2000/svg fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M10 .333A9.911 9.911 0 0 0 6.866 19.65c.5.092.678-.215.678-.477 0-.237-.01-1.017-.014-1.845-2.757.6-3.338-1.169-3.338-1.169a2.627 2.627 0 0 0-1.1-1.451c-.9-.615.07-.6.07-.6a2.084 2.084 0 0 1 1.518 1.021 2.11 2.11 0 0 0 2.884.823c.044-.503.268-.973.63-1.325-2.2-.25-4.516-1.1-4.516-4.9A3.832 3.832 0 0 1 4.7 7.068a3.56 3.56 0 0 1 .095-2.623s.832-.266 2.726 1.016a9.409 9.409 0 0 1 4.962 0c1.89-1.282 2.717-1.016 2.717-1.016.366.83.402 1.768.1 2.623a3.827 3.827 0 0 1 1.02 2.659c0 3.807-2.319 4.644-4.525 4.889a2.366 2.366 0 0 1 .673 1.834c0 1.326-.012 2.394-.012 2.72 0 .263.18.572.681.475A9.911 9.911 0 0 0 10 .333Z"clip-rule=evenodd></path></svg><span class=sr-only>GitHub account</span></a><a href=# class="text-gray-500 hover:text-white ms-5"><svg class="w-4 h-4"aria-hidden=true xmlns=http://www.w3.org/2000/svg fill=currentColor viewBox="0 0 8 19"><path fill-rule=evenodd d="M6.135 3H8V0H6.135a4.147 4.147 0 0 0-4.142 4.142V6H0v3h2v9.938h3V9h2.021l.592-3H5V3.591A.6.6 0 0 1 5.592 3h.543Z"clip-rule=evenodd></path></svg><span class=sr-only>Facebook page'),tx=te('<div id=dropdownNavbar class="absolute left-0 top-full mt-1 z-10 font-normal bg-gray-700 divide-y divide-gray-600 rounded-lg shadow w-44"><ul class="py-2 text-sm text-gray-400"aria-labelledby=dropdownNavbarLink><li><a href=/Program class="block px-4 py-2 hover:bg-gray-600">Program</a></li><li><a href=/Informacije class="block px-4 py-2 hover:bg-gray-600">Informacije</a></li><li><a href=/Upute class="block px-4 py-2 hover:bg-gray-600">Upute');function Xt(i){const[e,n]=K(!1),[r,a]=K(!1),[l,u]=K(!1),h=()=>{a(!r()),n(!1)},f=()=>{u(!l())};return[(()=>{var m=Y0(),g=m.firstChild,_=g.firstChild,v=_.firstChild,w=_.nextSibling,P=w.nextSibling,b=P.firstChild,x=b.firstChild,k=x.nextSibling,A=k.firstChild;return ct(v,"src",Ts),w.$$click=f,A.$$click=h,R(k,(()=>{var T=pe(()=>!!r());return()=>T()&&tx()})(),null),Ee(()=>Is(P,`md:flex ${l()?"block":"hidden"} w-full md:w-auto`)),m})(),(()=>{var m=Q0(),g=m.firstChild;return R(g,()=>i.children),m})(),(()=>{var m=ex(),g=m.firstChild,_=g.firstChild,v=_.firstChild,w=v.firstChild,P=w.firstChild,b=_.nextSibling,x=b.nextSibling,k=x.firstChild,A=k.firstChild,T=A.nextSibling;return ct(P,"src",Ts),R(k,()=>new Date().getFullYear(),T),m})()]}ht(["click"]);var nx=te('<div class="bg-gray-900 text-gray-100 min-h-screen"><div class="mx-auto w-full max-w-screen-xl p-4 py-6 lg:py-8"></div><footer class=bg-gray-900><div class="mx-auto w-full max-w-screen-xl p-4 py-6 lg:py-8">');function us(i){return It(),(()=>{var e=nx(),n=e.firstChild;return R(n,()=>i.children),e})()}var ix=te('<div class="flex items-center justify-center h-screen bg-gray-900 text-gray-100"><div class="text-center p-6 bg-gray-800 shadow-lg rounded-lg"><h1 class="text-3xl font-bold text-red-500">404 - Stranica nije pronaena</h1><p class="mt-4 text-gray-300">Ova stranica ne postoji. Provjerite URL ili se vratite na poetnu stranicu.</p><button class="mt-6 px-6 py-3 text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition duration-300 ease-in-out transform hover:scale-105">Vrati se na poetnu');function rx(){const i=()=>{window.location.href="/"};return(()=>{var e=ix(),n=e.firstChild,r=n.firstChild,a=r.nextSibling,l=a.nextSibling;return l.$$click=i,e})()}ht(["click"]);var sx=te('<div class="flex items-center justify-center h-screen bg-gray-900 text-gray-100"><div class="text-center p-6 bg-gray-800 shadow-lg rounded-lg"><h1 class="text-3xl font-bold text-red-500">Autentifikacija potrebna</h1><p class="mt-4 text-gray-300">Morate se prijaviti kako biste pristupili ovoj stranici.</p><button class="mt-6 px-6 py-3 text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition duration-300 ease-in-out transform hover:scale-105">Prijava');function ax(){const i=xt(),e=()=>{i("/Prijava")};return(()=>{var n=sx(),r=n.firstChild,a=r.firstChild,l=a.nextSibling,u=l.nextSibling;return u.$$click=e,n})()}ht(["click"]);var ox=te('<img class="w-8 h-8 mr-2"alt=logo>'),lx=te('<section class=" bg-gray-900"><div class="flex flex-col items-center justify-center px-6 py-8 mx-auto md:h-screen lg:py-0"><div class="w-full rounded-lg shadow border md:mt-0 sm:max-w-md xl:p-0 bg-gray-800 border-gray-700"><div class="p-6 space-y-4 md:space-y-6 sm:p-8"><h1 class="text-xl font-bold leading-tight tracking-tight md:text-2xl text-white">Registracija</h1><form class="space-y-4 md:space-y-6"><div><label for=email class="block mb-2 text-sm font-medium text-white">E-mail</label><input type=email name=email id=email class="border text-sm rounded-lg block w-full p-2.5 bg-gray-700 border-gray-600 placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500"placeholder=name@company.com required></div><div><label for=password class="block mb-2 text-sm font-medium text-white">Lozinka</label><input type=password name=password id=password placeholder= class="border text-sm rounded-lg block w-full p-2.5 bg-gray-700 border-gray-600 placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500"required></div><div><label for=confirm-password class="block mb-2 text-sm font-medium text-white">Potvrdite lozinku</label><input type=password name=confirm-password id=confirm-password placeholder= class="border text-sm rounded-lg block w-full p-2.5 bg-gray-700 border-gray-600 placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500"required></div><button type=submit class="w-full text-white focus:ring-4 focus:outline-none font-medium rounded-lg text-sm px-5 py-2.5 text-center bg-primary-600 hover:bg-primary-700 focus:ring-primary-800"></button><p class="text-sm font-light text-gray-400">Ve imate raun? '),ux=te('<div class="text-red-500 text-sm">'),cx=te('<div class="text-green-500 text-sm">Raun uspjeno registriran! Preusmjeravam na prijavu...');function hx(i){const e=xt(),[n,r]=K({email:"",password:"",confirmPassword:"",error:"",loading:!1,success:!1}),a=async l=>{if(l.preventDefault(),r({...n(),loading:!0,error:"",success:!1}),n().password!==n().confirmPassword){r({...n(),error:"Lozinke se ne poklapaju!",loading:!1});return}try{const{user:u,error:h}=await tt.auth.signUp({email:n().email,password:n().password});h?r({...n(),error:`Greka prilikom registracije: ${h.message}`,loading:!1}):(r({...n(),success:!0,loading:!1}),console.log("Korisnik uspjeno registriran:",u),e("/prijava"))}catch{r({...n(),error:"Dolo je do pogreke pri registraciji.",loading:!1})}};return(()=>{var l=lx(),u=l.firstChild,h=u.firstChild,f=h.firstChild,m=f.firstChild,g=m.nextSibling,_=g.firstChild,v=_.firstChild,w=v.nextSibling,P=_.nextSibling,b=P.firstChild,x=b.nextSibling,k=P.nextSibling,A=k.firstChild,T=A.nextSibling,E=k.nextSibling,$=E.nextSibling;return $.firstChild,R(u,H(Do,{href:"/",className:"flex items-center mb-6 text-2xl font-semibold  text-white",get children(){return[(()=>{var I=ox();return ct(I,"src",Ts),I})(),"Plane Spotter"]}}),h),g.addEventListener("submit",a),w.$$input=I=>r({...n(),email:I.target.value}),x.$$input=I=>r({...n(),password:I.target.value}),T.$$input=I=>r({...n(),confirmPassword:I.target.value}),R(g,(()=>{var I=pe(()=>!!n().error);return()=>I()&&(()=>{var D=ux();return R(D,()=>n().error),D})()})(),E),R(g,(()=>{var I=pe(()=>!!n().success);return()=>I()&&cx()})(),E),R(E,()=>n().loading?"Registracija...":"Registracija"),R($,H(Do,{href:"/prijava",className:"font-medium  hover:underline text-primary-500",children:"Prijavite se ovdje."}),null),Ee(()=>E.disabled=n().loading),Ee(()=>w.value=n().email),Ee(()=>x.value=n().password),Ee(()=>T.value=n().confirmPassword),l})()}ht(["input"]);var dx=te('<section class=bg-gray-900><div class="flex flex-col items-center justify-center px-6 py-8 mx-auto md:h-screen lg:py-0"><a href=# class="flex items-center mb-6 text-2xl font-semibold text-white"><img class="w-8 h-8 mr-2"alt=logo>Plane Spotter</a><div class="w-full bg-gray-800 rounded-lg shadow border md:mt-0 sm:max-w-md xl:p-0 border-gray-700"><div class="p-6 space-y-4 md:space-y-6 sm:p-8"><h1 class="text-xl font-bold leading-tight tracking-tight md:text-2xl text-white">Prijava</h1><form class="space-y-4 md:space-y-6"><div><label for=email class="block mb-2 text-sm font-medium text-white">E-mail</label><input type=email name=email id=email class="rounded-lg block w-full p-2.5 bg-gray-700 border-gray-600 placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500"placeholder=name@company.com required></div><div><label for=password class="block mb-2 text-sm font-medium text-white">Lozinka</label><input type=password name=password id=password placeholder= class="border rounded-lg block w-full p-2.5 bg-gray-700 border-gray-600 placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500"required></div><div class="flex items-center justify-between"><div class="flex items-start"><div class="flex items-center h-5"><input id=remember aria-describedby=remember type=checkbox class="w-4 h-4 border rounded focus:ring-3 bg-gray-700 border-gray-600 focus:ring-primary-600 ring-offset-gray-800"></div><div class="ml-3 text-sm"><label for=remember class=" text-gray-300">Zapamti podatke</label></div></div><a href=# class="text-sm font-medium hover:underline text-primary-500">Zaboravljena lozinka?</a></div><button type=submit class="w-full text-white focus:ring-4 focus:outline-none font-medium rounded-lg text-sm px-5 py-2.5 text-center bg-primary-600 hover:bg-primary-700 focus:ring-primary-800"></button><p class="text-sm font-light text-gray-400">Nemate raun? <a href=/ class="font-medium hover:underline text-primary-500">Registracija'),fx=te('<div class="text-red-500 text-sm">');function mx(i){const[e,n]=K(""),[r,a]=K(""),[l,u]=K(""),[h,f]=K(!1),[m,g]=K(!1),_=xt(),v=async w=>{w.preventDefault(),f(!0),u("");try{const{error:P}=await tt.auth.signInWithPassword({email:e(),password:r()});P?(u("Neispravni podaci za prijavu."),console.log(P.message)):_("/pocetna")}catch(P){u("Dolo je do pogreke pri prijavi."),console.error(P)}finally{f(!1)}};return(()=>{var w=dx(),P=w.firstChild,b=P.firstChild,x=b.firstChild,k=b.nextSibling,A=k.firstChild,T=A.firstChild,E=T.nextSibling,$=E.firstChild,I=$.firstChild,D=I.nextSibling,j=$.nextSibling,z=j.firstChild,B=z.nextSibling,F=j.nextSibling,he=F.firstChild,xe=he.firstChild,V=xe.firstChild,X=F.nextSibling;return ct(x,"src",Ts),E.addEventListener("submit",v),D.$$input=Y=>n(Y.target.value),B.$$input=Y=>a(Y.target.value),V.addEventListener("change",Y=>g(Y.target.checked)),R(E,(()=>{var Y=pe(()=>!!l());return()=>Y()&&(()=>{var Ae=fx();return R(Ae,l),Ae})()})(),X),R(X,()=>h()?"Prijava...":"Prijava"),Ee(()=>X.disabled=h()),Ee(()=>D.value=e()),Ee(()=>B.value=r()),Ee(()=>V.checked=m()),w})()}ht(["input"]);var px=te('<div class="min-h-screen bg-gradient-to-r from-blue-600 via-blue-500 to-blue-400 flex flex-col justify-center items-center text-white"><div class="text-center p-6"><h1 class="font-mono text-5xl font-bold mb-4">Dobrodoli na Planespotter</h1><p class="text-lg mb-8">Ova aplikacija omoguava skeniranje neba i praenje aviona u stvarnom vremenu. Saznajte vie o letovima u vaem podruju!');function gx(){const i=It(),e=xt();return Ht(()=>{i()===null&&e("/AuthError")}),px()}var _x=te('<div class="mt-5 flex flex-column sm:flex-row flex-wrap space-y-4 sm:space-y-0 items-center justify-between pb-4"><div><button id=dropdownRadioButton data-dropdown-toggle=dropdownRadio class="inline-flex items-center border focus:outline-none focus:ring-4 font-medium rounded-lg text-sm px-3 py-1.5 bg-gray-800 text-white border-gray-600 hover:bg-gray-700 hover:border-gray-600 focus:ring-gray-700"type=button><svg class="w-3 h-3 text-gray-400 me-3"aria-hidden=true xmlns=http://www.w3.org/2000/svg fill=currentColor viewBox="0 0 20 20"><path d="M10 0a10 10 0 1 0 10 10A10.011 10.011 0 0 0 10 0Zm3.982 13.982a1 1 0 0 1-1.414 0l-3.274-3.274A1.012 1.012 0 0 1 9 10V6a1 1 0 0 1 2 0v3.586l2.982 2.982a1 1 0 0 1 0 1.414Z"></path></svg>Last 30 days<svg class="w-2.5 h-2.5 ms-2.5"aria-hidden=true xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 10 6"><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 d="m1 1 4 4 4-4"></path></svg></button><div id=dropdownRadio class="z-10 hidden w-48 divide-y rounded-lg shadow bg-gray-700 divide-gray-600"data-popper-reference-hidden=""data-popper-escaped=""data-popper-placement=top style="position:absolute;inset:auto auto 0px 0px;margin:0px;transform:translate3d(522.5px, 3847.5px, 0px);"><ul class="p-3 space-y-1 text-sm text-gray-200"aria-labelledby=dropdownRadioButton><li><div class="flex items-center p-2 rounded hover:bg-gray-600"><input id=filter-radio-example-1 type=radio value=""name=filter-radio class="w-4 h-4 text-blue-600 focus:ring-blue-600 ring-offset-gray-800 focus:ring-offset-gray-800 focus:ring-2 bg-gray-700 border-gray-600"><label for=filter-radio-example-1 class="w-full ms-2 text-sm font-medium rounded text-gray-300">Last day</label></div></li><li><div class="flex items-center p-2 rounded hover:bg-gray-600"><input checked=""id=filter-radio-example-2 type=radio value=""name=filter-radio class="w-4 h-4 text-blue-600 focus:ring-blue-600 ring-offset-gray-800 focus:ring-offset-gray-800 focus:ring-2 bg-gray-700 border-gray-600"><label for=filter-radio-example-2 class="w-full ms-2 text-sm font-medium rounded text-gray-300">Last 7 days</label></div></li><li><div class="flex items-center p-2 rounded hover:bg-gray-600"><input id=filter-radio-example-3 type=radio value=""name=filter-radio class="w-4 h-4 text-blue-600 focus:ring-blue-600 ring-offset-gray-800 focus:ring-offset-gray-800 focus:ring-2 bg-gray-700 border-gray-600"><label for=filter-radio-example-3 class="w-full ms-2 text-sm font-medium rounded text-gray-300">Last 30 days</label></div></li><li><div class="flex items-center p-2 rounded hover:bg-gray-600"><input id=filter-radio-example-4 type=radio value=""name=filter-radio class="w-4 h-4 text-blue-600 focus:ring-blue-600 ring-offset-gray-800 focus:ring-offset-gray-800 focus:ring-2 bg-gray-700 border-gray-600"><label for=filter-radio-example-4 class="w-full ms-2 text-sm font-medium rounded text-gray-300">Last month</label></div></li><li><div class="flex items-center p-2 rounded hover:bg-gray-600"><input id=filter-radio-example-5 type=radio value=""name=filter-radio class="w-4 h-4 text-blue-600 focus:ring-blue-600 ring-offset-gray-800 focus:ring-offset-gray-800 focus:ring-2 bg-gray-700 border-gray-600"><label for=filter-radio-example-5 class="w-full ms-2 text-sm font-medium rounded text-gray-300">Last year</label></div></li></ul></div></div><label for=table-search class=sr-only>Search</label><div class=relative><div class="absolute inset-y-0 left-0 rtl:inset-r-0 rtl:right-0 flex items-center ps-3 pointer-events-none"><svg class="w-5 h-5 text-gray-400"aria-hidden=true fill=currentColor viewBox="0 0 20 20"xmlns=http://www.w3.org/2000/svg><path fill-rule=evenodd d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"clip-rule=evenodd></path></svg></div><input type=text id=table-search class="block p-2 ps-10 text-sm text-gray-900 border rounded-lg w-80 bg-gray-700 border-gray-600 placeholder-gray-400 :text-white focus:ring-blue-500 focus:border-blue-500"placeholder="Search for items">'),vx=te('<div class="relative overflow-x-auto shadow-md sm:rounded-lg mt-5 border-2 border-gray-600"><table class="w-full text-sm text-left rtl:text-right text-gray-400"><caption class="p-5 text-lg font-semibold text-left rtl:text-right text-white bg-gray-800">Prikaz pronaenih zrakoplova<p class="mt-1 text-sm font-normal text-gray-400">Ovdje moete detaljnije pregledati informacije o zrakoplovima koje ste pronali.</p></caption><thead class="text-xs uppercase bg-gray-700 text-gray-400"><tr><th scope=col class="px-6 py-3">ID</th><th scope=col class="px-6 py-3">Model</th><th scope=col class="px-6 py-3">Vrijeme</th><th scope=col class="px-6 py-3">Latituda</th><th scope=col class="px-6 py-3">Longituda</th><th scope=col class="px-6 py-3">Altituda (m)</th><th scope=col class="px-6 py-3">Brzina (km/h)</th><th scope=col class="px-6 py-3">Vie informacija</th></tr></thead><tbody>'),yx=te('<div class="pt-8 mt-10 font-semibold text-xl hover:text-yellow-500">'),wx=te('<tr><td colspan=7 class="text-center py-4">Trenutno nema aviona'),bx=te('<tr class=" odd:bg-gray-900 even:bg-gray-800 border-b border-gray-700"><td class="px-6 py-4 font-medium text-white"></td><td class="px-6 py-4"></td><td class="px-6 py-4"></td><td class="px-6 py-4"></td><td class="px-6 py-4"></td><td class="px-6 py-4"></td><td class="px-6 py-4">'),xx=te('<button class="bg-yellow-600 text-white font-semibold py-2 px-4 w-full rounded-lg shadow-md hover:bg-yellow-500 transition duration-200">Proui'),Ax=te('<td class="px-6 py-4">'),Px=te('<div class="flex justify-center items-center"> <a href=/MojHangar><svg class="w-6 h-6 text-yellow-400 dark:text-yellow-400 hover:text-yellow-300"aria-hidden=true xmlns=http://www.w3.org/2000/svg width=24 height=24 fill=currentColor viewBox="0 0 24 24"><path fill-rule=evenodd d="M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm13.707-1.293a1 1 0 0 0-1.414-1.414L11 12.586l-1.793-1.793a1 1 0 0 0-1.414 1.414l2.5 2.5a1 1 0 0 0 1.414 0l4-4Z"clip-rule=evenodd>');function Sx(i){const e=It(),n=xt(),[r,a]=K(window.innerWidth<1024);Ht(async()=>{e()===null&&n("/AuthError"),await K0(e().user.id);const u=()=>a(window.innerWidth<1024);return window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)});const l=async u=>{try{const h=await n0(u);h!==null?tn(`${h}`,"info",2e4):console.log("OPEN AI API vratio je null vrijednost")}catch(h){console.error("Greka pri pokuaju dohvaanja informacija: ",h)}};return[pe(()=>pe(()=>!!r())()&&H(z0,{})),_x(),(()=>{var u=vx(),h=u.firstChild,f=h.firstChild,m=f.nextSibling,g=m.nextSibling;return R(g,H(Sh,{get each(){return Z0()},get fallback(){return wx()},children:_=>(()=>{var v=bx(),w=v.firstChild,P=w.nextSibling,b=P.nextSibling,x=b.nextSibling,k=x.nextSibling,A=k.nextSibling,T=A.nextSibling;return R(w,()=>_.id),R(P,()=>_.model),R(b,()=>Xn(_.time)),R(x,()=>_.latitude),R(k,()=>_.longitude),R(A,()=>_.altitude),R(T,()=>_.speed),R(v,(()=>{var E=Ax();return R(E,H(Ms,{get when(){return _.description===null},get fallback(){return Px()},get children(){var $=xx();return $.$$click=()=>l(_.model),$}})),E})(),null),v})()})),u})(),(()=>{var u=yx();return R(u,H(Do,{href:"/mojHangar",children:"Kako bi vidjeli sve pronaene zrakoplove, posjetite Moj Hangar!"})),u})()]}ht(["click"]);var kx=te('<div class=p-8><h1 class="font-mono text-4xl mb-6">INFORMACIJE O APLIKACIJI</h1><div class=space-y-6><div><p>Ova aplikacija koristi <a href=https://www.flightradar24.com/ class="text-blue-500 hover:underline"target=_blank rel="noopener noreferrer">Flightradar24 API</a> za skeniranje neba i prikazivanje informacija o avionima u stvarnom vremenu. Koritenjem najnovijih podataka o letovima, omoguuje korisnicima praenje avionskih ruta, visine, brzine i ostalih vanih parametara. Aplikacija omoguuje jednostavno pretraivanje i filtriranje letova na temelju razliitih kriterija.</p></div><div><p><a href=https://solidjs.com/ class="text-blue-500 hover:underline"target=_blank rel="noopener noreferrer">SolidJS</a> je koriten za optimalne performanse aplikacije, dok su za dizajn koriteni <a href=https://tailwindcss.com/ class="text-blue-500 hover:underline"target=_blank rel="noopener noreferrer">TailwindCSS</a> i <a href=https://flowbite.com/ class="text-blue-500 hover:underline"target=_blank rel="noopener noreferrer">Flowbite</a>, to omoguava moderni izgled i jednostavno korisniko iskustvo.</p></div><div><p class="text-lg text-gray-300">Flightradar24 je jedan od najpoznatijih globalnih servisa za praenje letova, a kroz nau aplikaciju, korisnici mogu uivati u brzom pristupu podacima o avionima koji lete u njihovoj blizini. Informacije o svakom letu ukljuuju podatke o tipu aviona, visini, poziciji, brzini leta i drugim detaljima.</p></div><div><p class="text-lg text-gray-300">Aplikacija je dizajnirana uz pomo SolidJS-a za optimalne performanse, dok su za dizajn koriteni TailwindCSS i Flowbite, to omoguava moderni izgled i jednostavno korisniko iskustvo.');function Cx(i){const e=It(),n=xt();return Ht(()=>{e()===null&&n("/AuthError")}),kx()}const Tx="/ZavrsniV2/assets/logo-ChWoxeul.png";var Lx=te('<div class=p-8><h1 class="font-mono text-4xl mb-6">O NAMA</h1><div class=space-y-6><div class="flex justify-center mb-10"><a href=https://ss-obrtnicka-koprivnica.skole.hr/><img alt=Logo class="w-40 h-auto rounded-full shadow-md transform hover:scale-110 transition-transform duration-300"></a></div><div><h2 class="text-xl font-semibold">kola</h2><p>Obrtnika kola Koprivnica</p></div><div><h2 class="text-xl font-semibold">Mentor</h2><p>Tomislav Jakupi</p></div><div><h2 class="text-xl font-semibold">Uenici</h2><p class="text-lg text-gray-300">Valentin Funtak <br>Noa Golubi</p></div><div><p class="text-lg text-gray-300">');function Ex(i){const e=It(),n=xt();Ht(()=>{e()===null&&n("/AuthError")});const r=()=>{const{error:a}=tt.auth.signOut();n("/Prijava"),a&&alert("Naalost Vas nemoemo odjaviti:",a)};return(()=>{var a=Lx(),l=a.firstChild,u=l.nextSibling,h=u.firstChild,f=h.firstChild,m=f.firstChild;return f.$$click=r,ct(m,"src",Tx),a})()}ht(["click"]);var Ox=te('<div class=p-8><h1 class="font-mono text-4xl mb-6">KONTAKT</h1><div class=space-y-6><div><h2 class="text-xl font-semibold">Obrtnika kola Koprivnica</h2><p>Posjetite <a href=https://ss-obrtnicka-koprivnica.skole.hr/ class="text-blue-500 hover:underline"target=_blank rel="noopener noreferrer">slubenu stranicu kole</a> za vie informacija.</p></div><div><h2 class="text-xl font-semibold">GitHub rauni</h2><ul class=space-y-2><li class="flex items-center"><a href=https://github.com/valentinfuntak class="text-gray-500 hover:text-white flex items-center"target=_blank rel="noopener noreferrer"><svg class="w-4 h-4 mr-2"aria-hidden=true xmlns=http://www.w3.org/2000/svg fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M10 .333A9.911 9.911 0 0 0 6.866 19.65c.5.092.678-.215.678-.477 0-.237-.01-1.017-.014-1.845-2.757.6-3.338-1.169-3.338-1.169a2.627 2.627 0 0 0-1.1-1.451c-.9-.615.07-.6.07-.6a2.084 2.084 0 0 1 1.518 1.021 2.11 2.11 0 0 0 2.884.823c.044-.503.268-.973.63-1.325-2.2-.25-4.516-1.1-4.516-4.9A3.832 3.832 0 0 1 4.7 7.068a3.56 3.56 0 0 1 .095-2.623s.832-.266 2.726 1.016a9.409 9.409 0 0 1 4.962 0c1.89-1.282 2.717-1.016 2.717-1.016.366.83.402 1.768.1 2.623a3.827 3.827 0 0 1 1.02 2.659c0 3.807-2.319 4.644-4.525 4.889a2.366 2.366 0 0 1 .673 1.834c0 1.326-.012 2.394-.012 2.72 0 .263.18.572.681.475A9.911 9.911 0 0 0 10 .333Z"clip-rule=evenodd></path></svg>Valentin Funtak</a></li><li class="flex items-center"><a href=https://github.com/NoaGolubic class="text-gray-500 hover:text-white flex items-center"target=_blank rel="noopener noreferrer"><svg class="w-4 h-4 mr-2"aria-hidden=true xmlns=http://www.w3.org/2000/svg fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M10 .333A9.911 9.911 0 0 0 6.866 19.65c.5.092.678-.215.678-.477 0-.237-.01-1.017-.014-1.845-2.757.6-3.338-1.169-3.338-1.169a2.627 2.627 0 0 0-1.1-1.451c-.9-.615.07-.6.07-.6a2.084 2.084 0 0 1 1.518 1.021 2.11 2.11 0 0 0 2.884.823c.044-.503.268-.973.63-1.325-2.2-.25-4.516-1.1-4.516-4.9A3.832 3.832 0 0 1 4.7 7.068a3.56 3.56 0 0 1 .095-2.623s.832-.266 2.726 1.016a9.409 9.409 0 0 1 4.962 0c1.89-1.282 2.717-1.016 2.717-1.016.366.83.402 1.768.1 2.623a3.827 3.827 0 0 1 1.02 2.659c0 3.807-2.319 4.644-4.525 4.889a2.366 2.366 0 0 1 .673 1.834c0 1.326-.012 2.394-.012 2.72 0 .263.18.572.681.475A9.911 9.911 0 0 0 10 .333Z"clip-rule=evenodd></path></svg>Noa Golubi</a></li></ul></div><div><h2 class="text-xl font-semibold">Repozitorij zavrnog rada</h2><ul class=space-y-2><li class="flex items-center"><a href=https://github.com/valentinfuntak/ZavrsniV2 class="text-gray-500 hover:text-white flex items-center"target=_blank rel="noopener noreferrer"><svg class="w-4 h-4 mr-2"aria-hidden=true xmlns=http://www.w3.org/2000/svg fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M10 .333A9.911 9.911 0 0 0 6.866 19.65c.5.092.678-.215.678-.477 0-.237-.01-1.017-.014-1.845-2.757.6-3.338-1.169-3.338-1.169a2.627 2.627 0 0 0-1.1-1.451c-.9-.615.07-.6.07-.6a2.084 2.084 0 0 1 1.518 1.021 2.11 2.11 0 0 0 2.884.823c.044-.503.268-.973.63-1.325-2.2-.25-4.516-1.1-4.516-4.9A3.832 3.832 0 0 1 4.7 7.068a3.56 3.56 0 0 1 .095-2.623s.832-.266 2.726 1.016a9.409 9.409 0 0 1 4.962 0c1.89-1.282 2.717-1.016 2.717-1.016.366.83.402 1.768.1 2.623a3.827 3.827 0 0 1 1.02 2.659c0 3.807-2.319 4.644-4.525 4.889a2.366 2.366 0 0 1 .673 1.834c0 1.326-.012 2.394-.012 2.72 0 .263.18.572.681.475A9.911 9.911 0 0 0 10 .333Z"clip-rule=evenodd></path></svg>Zavrni rad</a></li></ul></div><div><h2 class="text-xl font-semibold">Kontakt e-mail</h2><ul class=space-y-2><li>Valentin Funtak: <a href=mailto:valentinfuntakk@gmail.com class="text-blue-500 hover:underline">valentinfuntakk@gmail.com</a></li><li>Noa Golubi: <a href=mailto:noagolubic030606@gmail.com class="text-blue-500 hover:underline">noagolubic030606@gmail.com');function $x(i){const e=It(),n=xt();Ht(()=>{e()===null&&n("/AuthError")});const r=()=>{const{error:a}=tt.auth.signOut();n("/Prijava"),a&&alert("Naalost Vas nemoemo odjaviti:",a)};return(()=>{var a=Ox(),l=a.firstChild,u=l.nextSibling,h=u.firstChild,f=h.firstChild,m=f.nextSibling,g=m.firstChild,_=g.nextSibling,v=h.nextSibling,w=v.firstChild,P=w.nextSibling,b=P.firstChild,x=b.firstChild,k=b.nextSibling,A=k.firstChild,T=v.nextSibling,E=T.firstChild,$=E.nextSibling,I=$.firstChild,D=I.firstChild;return _.$$click=r,x.$$click=r,A.$$click=r,D.$$click=r,a})()}ht(["click"]);var Mx=te('<div class="max-w-screen-lg mx-auto p-6 bg-gray-600 shadow-md rounded-lg"><div class="flex flex-col sm:flex-row justify-between items-start space-y-6 sm:space-y-0 sm:space-x-4 mb-0"><div class=flex-1><h1 class="font-sans text-3xl sm:text-4xl mb-3 text-yellow-400">Raun</h1><p class="text-lg font-semibold text-gray-300">Korisnik: </p></div></div><div class=" top-16 left-0 right-0 flex justify-start w-full"><div class="space-y-2 w-full">'),Ix=te('<p class="text-lg mt-2 text-gray-300"><strong>Email:</strong> '),Rx=te('<div class="flex flex-col items-start sm:items-end space-y-4 sm:space-y-4"><button class="w-full bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700 transition">Promjeni email</button><button class="w-full bg-yellow-600 text-white py-2 px-4 rounded hover:bg-yellow-700 transition">Promjeni lozinku</button><button class="w-full bg-red-600 text-white py-2 px-4 rounded hover:bg-red-700 transition">Odjava'),qx=te('<div class="mt-6 bg-white p-6 shadow-md rounded-lg"><h2 class="font-sans text-xl text-gray-800">Promjena e-maila</h2><div class=mt-4><input type=email class="border-2 border-gray-300 p-2 rounded-md w-full text-black"placeholder="Unesite novu e-mail adresu"><button class="mt-4 w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition">Potvrdi promjenu emaila'),jx=te('<div><div class="whitespace-normal w-full">');function Dx(i){const e=It(),n=xt();Ht(()=>{e()===null&&n("/AuthError")});const[r,a]=K(""),[l,u]=K(!1),[h,f]=K(!1),[m,g]=K([]),_=(b,x,k)=>{const A={message:b,type:x};g(T=>[...T,A]),setTimeout(()=>{g(T=>T.filter(E=>E!==A))},k)},v=()=>{const{error:b}=tt.auth.signOut();n("/Prijava"),b&&alert("Naalost Vas nemoemo odjaviti:",b)},w=async()=>{const b=e().user?.email;if(b){const{error:x}=await tt.auth.resetPasswordForEmail(b,{redirectTo:"https://yourapp.com/update-password"});x?_("Greka pri slanju e-maila za resetiranje lozinke: "+x.message,"error",5e3):_("E-mail za resetiranje lozinke poslan!","success",5e3)}},P=async()=>{const b=r();if(b){const{data:x,error:k}=await tt.auth.updateUser({email:b});k?_("Greka pri promjeni emaila: "+k.message,"error",5e3):(u(!0),_("E-mail uspjeno promijenjen. Potvrdite promjenu putem poslanog e-maila!","success",5e3))}};return(()=>{var b=Mx(),x=b.firstChild,k=x.firstChild,A=k.firstChild,T=A.nextSibling;T.firstChild;var E=x.nextSibling,$=E.firstChild;return R(T,()=>e()?"Prijavljen":"Nije prijavljen",null),R(k,(()=>{var I=pe(()=>!!e());return()=>I()&&(()=>{var D=Ix(),j=D.firstChild;return j.nextSibling,R(D,()=>e().user?.email||"Nema emaila",null),D})()})(),null),R(x,(()=>{var I=pe(()=>!!e());return()=>I()&&(()=>{var D=Rx(),j=D.firstChild,z=j.nextSibling,B=z.nextSibling;return j.$$click=()=>f(!0),z.$$click=w,B.$$click=v,D})()})(),null),R(b,(()=>{var I=pe(()=>!!h());return()=>I()&&(()=>{var D=qx(),j=D.firstChild,z=j.nextSibling,B=z.firstChild,F=B.nextSibling;return B.$$input=he=>a(he.target.value),F.$$click=P,Ee(()=>B.value=r()),D})()})(),E),R($,()=>m().map((I,D)=>(()=>{var j=jx(),z=j.firstChild;return ct(j,"key",D),R(z,()=>I.message),Ee(()=>Is(j,`p-4 mt-3 rounded ${I.type==="error"?"bg-red-600":I.type==="success"?"bg-green-700":I.type==="info"?"bg-blue-400":""} text-white shadow-md`)),j})())),b})()}ht(["click","input"]);var Bx=te('<div class=p-8><h1 class="font-mono text-4xl mb-12">Upute za koritenje</h1><div><h2 class="text-2xl text-yellow-600 font-semibold mb-8">Koritenje karte</h2><p class="font-semibold mb-10">Kartu moete koristiti kako bi se mogli to lake pozicionirali.<br>Karta e uvjek prikazati va trenutani poloaj.<br>Karta se moe poveati i smanjiti gestikuliranjem.<br>Nakon pritiska na gumb "Skeniraj", na karti e se prikazati svi avioni<br>u okrugu od 30km.<br></p></div><div><h2 class="text-2xl text-yellow-600 font-semibold mb-8">Alati za orijentaciju</h2><p class="font-semibold mb-10">U kuici pod nazivom "Nagib ureaja" moete vidjeti podatke o svojoj orijentaciji.<br>Ovi podaci mogu Vam biti od koristi prilikom ciljanja zrakoplova.<br>Postoje 3 osi, svaka od kojih ima svoj naziv te se njezin kut mjeri u stupnjevima.<br>Os Alpha mjeri pomak u dubinu, os Beta kruno horizontalno gibanje, a os Gamma vertikalno gibanje.<br>Kut gledanja oznauje va smjer promatranja s obzirom na magnetski sjever.<br>Kut gledanja takoer sadri dodatak, zbroj dodatka i smjera u stupnjevima udaljenost je od stvarnog sjevera.<br></p></div><div><h2 class="text-2xl text-yellow-600 font-semibold mb-8">Podaci o avionu</h2><p class="font-semibold mb-10">U kuici pod nazivom "Podaci o avionu" moete pronai podatke o najbliem zrakoplov.<br>Vrijednosti ovih polja popunjavaju se kada korisnik ne pronae zrakoplov<br>nakon pritiska na gumb "Skeniraj".<br>Ovdje moete pronai podatke koji e vam pomoi da pronaete najblii zrakoplov.<br>Podaci ukljuuju: koordinate zrakoplova, Vau elevaciju, zranu udaljenost te pogodbene kuteve.<br>Pogodbeni kutevi "Kut X do aviona" i "Kut Y do aviona" moraju biti identini<br>Vaem smjeru (zajedno sa dodatkom) te kutu Gamma.<br>Tolerancija oba kuta je +/- 5.<br></p></div><div><h2 class="text-2xl text-yellow-600 font-semibold mb-8">Tablini prikaz</h2><p class="font-semibold mb-10">U tablinom prikazu pojavit e se informacije o zadnjih 5 pronaenih zrakoplova.<br>Tablian prikaz nudi pregled dodatnih injenica o samom zrakoplovu.<br>Pritiskom na gumb "Proui" pokrenut ete AI asistenta koji e Vas<br>dodatno informirati o samom zrakoplovu.<br></p></div><div><h2 class="text-2xl text-yellow-600 font-semibold mb-8">Moj hangar</h2><p class="font-semibold mb-10">Pritiskom na "Kako bi vidjeli sve pronaene zrakoplove, posjetite Moj Hangar!"<br>otvorit ete svoju personaliziranu kolekciju svih pronaenih zrakoplova.<br>Svaki zrakoplov koji prouite pritiskom na gumb "proui"<br>biti e svrstan prema rijetkosti.<br></p></div><div><h2 class="text-2xl text-yellow-600 font-semibold mb-8">este notifikacije</h2><p class="font-semibold mb-10">1) "Nismo u mogunosti pronai Vau orijentaciju" ili "DeviceOrientation nije podran":<br>Va ureaj naalost nije u mogunosti prikupiti orijentaciju.<br>2) "Avion se ne nalazi u traenom zranom prostoru":<br>Ureaj nije pravilno usmjeren prema zrakoplovu.<br>3) "Greka pri slanju e-maila za resetiranje lozinke":<br>Naalost nismo u mogunosti proslijediti e-mail, pokuajte ponovo kasnije.<br></p></div><h2 class="text-xl text-yellow-600 font-semibold mb-5">elite nam postaviti pitanje?</h2><p class="font-semibold mb-10">Posjetite stranicu <a href=\\Kontakt class=hover:text-blue-400>"kontakt"</a> i kontaktirajte nas kako bi odgovorili na Vae pitanje!<br>Kontaktirati nas moete putem naih mail adresa.<br>Unaprijed zahvaljujemo na strpljenju!<br>');function Nx(i){const e=It(),n=xt();return Ht(()=>{e()===null&&n("/AuthError")}),Bx()}var zx=te('<div class="custom-card content-center pb-8 pt-9 flex items-center justify-center"><div class="bg-gradient-to-r from-slate-200 to-stone-400 block max-w-sm p-6 bg-white border border-white-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700"><h5 id=naslov class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">, ???</h5><p class="pt-5 font-bold text-black dark:text-black">Pronaen: <!>h</p><p class="pt-5 font-bold text-black dark:text-black">Brzina i visina: <!>km/h, <!>m</p><p class="pt-5 font-bold text-black dark:text-black">Opis: Nije istraeno!</p><p class="pt-7 font-bold text-black dark:text-black">Broj proizvedenih modela: Nije istraeno!'),Fx=te('<div class="custom-card content-center pb-8 pt-9 flex items-center justify-center"><div class="bg-gradient-to-r from-red-200 via-fushia-300 to-rose-500 block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700"><h5 id=naslov class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">, COMMON</h5><p class="pt-5 font-bold text-black dark:text-black">Pronaen: <!>h</p><p class="pt-5 font-bold text-black dark:text-black">Brzina i visina: <!>km/h, <!>m</p><p class="pt-5 font-bold text-black dark:text-black">Opis: </p><p class="pt-7 font-bold text-black dark:text-black">Broj proizvedenih modela: '),Ux=te('<div class="custom-card content-center pb-8 pt-9 flex items-center justify-center"><div class="bg-gradient-to-r from-indigo-300 via-sky-500 to-emerald-500 block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700"><h5 id=naslov class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">, RARE</h5><p class="pt-5 font-bold text-black dark:text-black">Pronaen: <!>h</p><p class="pt-5 font-bold text-black dark:text-black">Brzina i visina: <!>km/h, <!>m</p><p class="pt-5 font-bold text-black dark:text-black">Opis: </p><p class="pt-7 font-bold text-black dark:text-black">Broj proizvedenih modela: '),Zx=te('<div class="custom-card content-center pb-8 pt-9 flex items-center justify-center"><div class="bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700"><h5 id=naslov class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">, EPIC</h5><p class="pt-5 font-bold text-black dark:text-black">Pronaen: <!>h</p><p class="pt-5 font-bold text-black dark:text-black">Brzina i visina: <!>km/h, <!>m</p><p class="pt-5 font-bold text-black dark:text-black">Opis: </p><p class="pt-7 font-bold text-black dark:text-black">Broj proizvedenih modela: '),Wx=te('<div class="custom-card content-center pb-8 pt-9 flex items-center justify-center"><div class="bg-gradient-to-r from-orange-400 via-amber-500 to-yellow-400 block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700"><h5 id=naslov class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">, LEGENDARY</h5><p class="pt-5 font-bold text-black dark:text-black">Pronaen: <!>h</p><p class="pt-5 font-bold text-black dark:text-black">Brzina i visina: <!>km/h, <!>m</p><p class="pt-5 font-bold text-black dark:text-black">Opis: </p><p class="pt-7 font-bold text-black dark:text-black">Broj proizvedenih modela: '),Hx=te('<div class="flex flex-row justify-center items-center space-x-2 flex-col md:flex-row"><h1 class="font-mono text-4xl leading-tight flex items-center min-w-20">Moj hangar</h1><input type=text class="form-control mt-10 text-black bg-slate-200 rounded md:w-55 w-55 h-8 mt-3 pl-3"autocomplete=off id=search-input placeholder=Pretrai...>'),Kx=te('<tr class="flex flex-row text-3xl text-yellow-300 justify-center items-center space-x-8 flex-col md:flex-row pt-20"><td colspan=7 class="text-center py-4">Trenutno nema aviona...');function Gx(i){const e=It(),n=xt();Ht(()=>{e()===null&&n("/AuthError")}),vh(()=>{const u=document.querySelector("#search-input");u&&u.addEventListener("input",r)});function r(){const h=document.querySelector("#search-input").value.toLowerCase();document.querySelectorAll(".custom-card").forEach(m=>{m.querySelector("#naslov").textContent.toLowerCase().includes(h.toLowerCase())?m.style.display="":m.style.display="none"})}function a(u){if(u.modelnum===null)return(()=>{var h=zx(),f=h.firstChild,m=f.firstChild,g=m.firstChild,_=m.nextSibling,v=_.firstChild,w=v.nextSibling;w.nextSibling;var P=_.nextSibling,b=P.firstChild,x=b.nextSibling,k=x.nextSibling,A=k.nextSibling;return A.nextSibling,R(m,()=>u.model,g),R(_,()=>Xn(u.time),w),R(P,()=>u.speed,x),R(P,()=>u.altitude,A),h})();if(u.modelnum>9e3)return(()=>{var h=Fx(),f=h.firstChild,m=f.firstChild,g=m.firstChild,_=m.nextSibling,v=_.firstChild,w=v.nextSibling;w.nextSibling;var P=_.nextSibling,b=P.firstChild,x=b.nextSibling,k=x.nextSibling,A=k.nextSibling;A.nextSibling;var T=P.nextSibling;T.firstChild;var E=T.nextSibling;return E.firstChild,R(m,()=>u.model,g),R(_,()=>Xn(u.time),w),R(P,()=>u.speed,x),R(P,()=>u.altitude,A),R(T,()=>u.description,null),R(E,()=>u.modelnum,null),h})();if(u.modelnum>1e3&&u.modelnum<=9e3)return(()=>{var h=Ux(),f=h.firstChild,m=f.firstChild,g=m.firstChild,_=m.nextSibling,v=_.firstChild,w=v.nextSibling;w.nextSibling;var P=_.nextSibling,b=P.firstChild,x=b.nextSibling,k=x.nextSibling,A=k.nextSibling;A.nextSibling;var T=P.nextSibling;T.firstChild;var E=T.nextSibling;return E.firstChild,R(m,()=>u.model,g),R(_,()=>Xn(u.time),w),R(P,()=>u.speed,x),R(P,()=>u.altitude,A),R(T,()=>u.description,null),R(E,()=>u.modelnum,null),h})();if(u.modelnum<=1e3&&u.modelnum>100)return(()=>{var h=Zx(),f=h.firstChild,m=f.firstChild,g=m.firstChild,_=m.nextSibling,v=_.firstChild,w=v.nextSibling;w.nextSibling;var P=_.nextSibling,b=P.firstChild,x=b.nextSibling,k=x.nextSibling,A=k.nextSibling;A.nextSibling;var T=P.nextSibling;T.firstChild;var E=T.nextSibling;return E.firstChild,R(m,()=>u.model,g),R(_,()=>Xn(u.time),w),R(P,()=>u.speed,x),R(P,()=>u.altitude,A),R(T,()=>u.description,null),R(E,()=>u.modelnum,null),h})();if(u.modelnum<=100)return(()=>{var h=Wx(),f=h.firstChild,m=f.firstChild,g=m.firstChild,_=m.nextSibling,v=_.firstChild,w=v.nextSibling;w.nextSibling;var P=_.nextSibling,b=P.firstChild,x=b.nextSibling,k=x.nextSibling,A=k.nextSibling;A.nextSibling;var T=P.nextSibling;T.firstChild;var E=T.nextSibling;return E.firstChild,R(m,()=>u.model,g),R(_,()=>Xn(u.time),w),R(P,()=>u.speed,x),R(P,()=>u.altitude,A),R(T,()=>u.description,null),R(E,()=>u.modelnum,null),h})()}const[l]=Zm(e().user.id,J0);return[Hx(),H(Sh,{get each(){return l()},get fallback(){return Kx()},children:u=>a(u)})]}function Vx(){return H(X0,{get children(){return H(Xp,{get children(){return[H(lt,{path:"/",component:()=>H(us,{get children(){return H(hx,{})}})}),H(lt,{path:"/*",component:()=>H(us,{get children(){return H(rx,{})}})}),H(lt,{path:"/AuthError",component:()=>H(us,{get children(){return H(ax,{})}})}),H(lt,{path:"/Prijava",component:()=>H(us,{get children(){return H(mx,{})}})}),H(lt,{path:"/Pocetna",component:()=>H(Xt,{get children(){return H(gx,{})}})}),H(lt,{path:"/Program",component:()=>H(Xt,{get children(){return H(Sx,{})}})}),H(lt,{path:"/Informacije",component:()=>H(Xt,{get children(){return H(Cx,{})}})}),H(lt,{path:"/Onama",component:()=>H(Xt,{get children(){return H(Ex,{})}})}),H(lt,{path:"/Kontakt",component:()=>H(Xt,{get children(){return H($x,{})}})}),H(lt,{path:"/Racun",component:()=>H(Xt,{get children(){return H(Dx,{})}})}),H(lt,{path:"/Upute",component:()=>H(Xt,{get children(){return H(Nx,{})}})}),H(lt,{path:"/MojHangar",component:()=>H(Xt,{get children(){return H(Gx,{})}})})]}})}})}const Jx=document.getElementById("root");hp(()=>H(Vx,{}),Jx);export{og as g};
