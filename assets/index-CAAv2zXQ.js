(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();const Nm=(i,e)=>i===e,bs=Symbol("solid-proxy"),gh=typeof Proxy=="function",zm=Symbol("solid-track"),xs={equals:Nm};let _h=Ph;const Wt=1,As=2,vh={owned:null,cleanups:null,context:null,owner:null},no={};var me=null;let io=null,Fm=null,_e=null,ze=null,Zt=null,$s=0;function Yi(i,e){const n=_e,r=me,a=i.length===0,l=e===void 0?r:e,u=a?vh:{owned:null,cleanups:null,context:l?l.context:null,owner:l},h=a?i:()=>i(()=>Ye(()=>nr(u)));me=u,_e=null;try{return Mt(h,!0)}finally{_e=n,me=r}}function K(i,e){e=e?Object.assign({},xs,e):xs;const n={value:i,observers:null,observerSlots:null,comparator:e.equals||void 0},r=a=>(typeof a=="function"&&(a=a(n.value)),Ah(n,a));return[xh.bind(n),r]}function Um(i,e,n){const r=Is(i,e,!0,Wt);ui(r)}function xe(i,e,n){const r=Is(i,e,!1,Wt);ui(r)}function Ht(i,e,n){_h=Ym;const r=Is(i,e,!1,Wt);r.user=!0,Zt?Zt.push(r):ui(r)}function pe(i,e,n){n=n?Object.assign({},xs,n):xs;const r=Is(i,e,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,ui(r),xh.bind(r)}function Zm(i){return i&&typeof i=="object"&&"then"in i}function Wm(i,e,n){let r,a,l;typeof e=="function"?(r=i,a=e,l={}):(r=!0,a=i,l=e);let u=null,h=no,f=!1,m="initialValue"in l,g=typeof r=="function"&&pe(r);const _=new Set,[v,b]=(l.storage||K)(l.initialValue),[S,y]=K(void 0),[x,k]=K(void 0,{equals:!1}),[A,E]=K(m?"ready":"unresolved");function T(B,N,D,U){return u===B&&(u=null,U!==void 0&&(m=!0),(B===h||N===h)&&l.onHydrated&&queueMicrotask(()=>l.onHydrated(U,{value:N})),h=no,$(N,D)),N}function $(B,N){Mt(()=>{N===void 0&&b(()=>B),E(N!==void 0?"errored":m?"ready":"unresolved"),y(N);for(const D of _.keys())D.decrement();_.clear()},!1)}function I(){const B=Gm,N=v(),D=S();if(D!==void 0&&!u)throw D;return _e&&_e.user,N}function M(B=!0){if(B!==!1&&f)return;f=!1;const N=g?g():r;if(N==null||N===!1){T(u,Ye(v));return}const D=h!==no?h:Ye(()=>a(N,{value:v(),refetching:B}));return Zm(D)?(u=D,"value"in D?(D.status==="success"?T(u,D.value,void 0,N):T(u,void 0,Ro(D.value),N),D):(f=!0,queueMicrotask(()=>f=!1),Mt(()=>{E(m?"refreshing":"pending"),k()},!1),D.then(U=>T(D,U,void 0,N),U=>T(D,void 0,Ro(U),N)))):(T(u,D,void 0,N),D)}return Object.defineProperties(I,{state:{get:()=>A()},error:{get:()=>S()},loading:{get(){const B=A();return B==="pending"||B==="refreshing"}},latest:{get(){if(!m)return I();const B=S();if(B&&!u)throw B;return v()}}}),g?Um(()=>M(!1)):M(!1),[I,{refetch:M,mutate:b}]}function Hm(i){return Mt(i,!1)}function Ye(i){if(_e===null)return i();const e=_e;_e=null;try{return i()}finally{_e=e}}function ll(i,e,n){const r=Array.isArray(i);let a,l=n&&n.defer;return u=>{let h;if(r){h=Array(i.length);for(let m=0;m<i.length;m++)h[m]=i[m]()}else h=i();if(l)return l=!1,u;const f=Ye(()=>e(h,a,u));return a=h,f}}function yh(i){Ht(()=>Ye(i))}function Ms(i){return me===null||(me.cleanups===null?me.cleanups=[i]:me.cleanups.push(i)),i}function wh(){return me}function bh(i,e){const n=me,r=_e;me=i,_e=null;try{return Mt(e,!0)}catch(a){hl(a)}finally{me=n,_e=r}}function Km(i){const e=_e,n=me;return Promise.resolve().then(()=>{_e=e,me=n;let r;return Mt(i,!1),_e=me=null,r?r.done:void 0})}function ul(i,e){const n=Symbol("context");return{id:n,Provider:Xm(n),defaultValue:i}}function Rs(i){let e;return me&&me.context&&(e=me.context[i.id])!==void 0?e:i.defaultValue}function cl(i){const e=pe(i),n=pe(()=>Io(e()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}let Gm;function xh(){if(this.sources&&this.state)if(this.state===Wt)ui(this);else{const i=ze;ze=null,Mt(()=>Ss(this),!1),ze=i}if(_e){const i=this.observers?this.observers.length:0;_e.sources?(_e.sources.push(this),_e.sourceSlots.push(i)):(_e.sources=[this],_e.sourceSlots=[i]),this.observers?(this.observers.push(_e),this.observerSlots.push(_e.sources.length-1)):(this.observers=[_e],this.observerSlots=[_e.sources.length-1])}return this.value}function Ah(i,e,n){let r=i.value;return(!i.comparator||!i.comparator(r,e))&&(i.value=e,i.observers&&i.observers.length&&Mt(()=>{for(let a=0;a<i.observers.length;a+=1){const l=i.observers[a],u=io&&io.running;u&&io.disposed.has(l),(u?!l.tState:!l.state)&&(l.pure?ze.push(l):Zt.push(l),l.observers&&Sh(l)),u||(l.state=Wt)}if(ze.length>1e6)throw ze=[],new Error},!1)),e}function ui(i){if(!i.fn)return;nr(i);const e=$s;Vm(i,i.value,e)}function Vm(i,e,n){let r;const a=me,l=_e;_e=me=i;try{r=i.fn(e)}catch(u){return i.pure&&(i.state=Wt,i.owned&&i.owned.forEach(nr),i.owned=null),i.updatedAt=n+1,hl(u)}finally{_e=l,me=a}(!i.updatedAt||i.updatedAt<=n)&&(i.updatedAt!=null&&"observers"in i?Ah(i,r):i.value=r,i.updatedAt=n)}function Is(i,e,n,r=Wt,a){const l={fn:i,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:me,context:me?me.context:null,pure:n};return me===null||me!==vh&&(me.owned?me.owned.push(l):me.owned=[l]),l}function Ps(i){if(i.state===0)return;if(i.state===As)return Ss(i);if(i.suspense&&Ye(i.suspense.inFallback))return i.suspense.effects.push(i);const e=[i];for(;(i=i.owner)&&(!i.updatedAt||i.updatedAt<$s);)i.state&&e.push(i);for(let n=e.length-1;n>=0;n--)if(i=e[n],i.state===Wt)ui(i);else if(i.state===As){const r=ze;ze=null,Mt(()=>Ss(i,e[0]),!1),ze=r}}function Mt(i,e){if(ze)return i();let n=!1;e||(ze=[]),Zt?n=!0:Zt=[],$s++;try{const r=i();return Jm(n),r}catch(r){n||(Zt=null),ze=null,hl(r)}}function Jm(i){if(ze&&(Ph(ze),ze=null),i)return;const e=Zt;Zt=null,e.length&&Mt(()=>_h(e),!1)}function Ph(i){for(let e=0;e<i.length;e++)Ps(i[e])}function Ym(i){let e,n=0;for(e=0;e<i.length;e++){const r=i[e];r.user?i[n++]=r:Ps(r)}for(e=0;e<n;e++)Ps(i[e])}function Ss(i,e){i.state=0;for(let n=0;n<i.sources.length;n+=1){const r=i.sources[n];if(r.sources){const a=r.state;a===Wt?r!==e&&(!r.updatedAt||r.updatedAt<$s)&&Ps(r):a===As&&Ss(r,e)}}}function Sh(i){for(let e=0;e<i.observers.length;e+=1){const n=i.observers[e];n.state||(n.state=As,n.pure?ze.push(n):Zt.push(n),n.observers&&Sh(n))}}function nr(i){let e;if(i.sources)for(;i.sources.length;){const n=i.sources.pop(),r=i.sourceSlots.pop(),a=n.observers;if(a&&a.length){const l=a.pop(),u=n.observerSlots.pop();r<a.length&&(l.sourceSlots[u]=r,a[r]=l,n.observerSlots[r]=u)}}if(i.tOwned){for(e=i.tOwned.length-1;e>=0;e--)nr(i.tOwned[e]);delete i.tOwned}if(i.owned){for(e=i.owned.length-1;e>=0;e--)nr(i.owned[e]);i.owned=null}if(i.cleanups){for(e=i.cleanups.length-1;e>=0;e--)i.cleanups[e]();i.cleanups=null}i.state=0}function Ro(i){return i instanceof Error?i:new Error(typeof i=="string"?i:"Unknown error",{cause:i})}function hl(i,e=me){throw Ro(i)}function Io(i){if(typeof i=="function"&&!i.length)return Io(i());if(Array.isArray(i)){const e=[];for(let n=0;n<i.length;n++){const r=Io(i[n]);Array.isArray(r)?e.push.apply(e,r):e.push(r)}return e}return i}function Xm(i,e){return function(r){let a;return xe(()=>a=Ye(()=>(me.context={...me.context,[i]:r.value},cl(()=>r.children))),void 0),a}}const Qm=Symbol("fallback");function Wu(i){for(let e=0;e<i.length;e++)i[e]()}function ep(i,e,n={}){let r=[],a=[],l=[],u=0,h=e.length>1?[]:null;return Ms(()=>Wu(l)),()=>{let f=i()||[],m=f.length,g,_;return f[zm],Ye(()=>{let b,S,y,x,k,A,E,T,$;if(m===0)u!==0&&(Wu(l),l=[],r=[],a=[],u=0,h&&(h=[])),n.fallback&&(r=[Qm],a[0]=Yi(I=>(l[0]=I,n.fallback())),u=1);else if(u===0){for(a=new Array(m),_=0;_<m;_++)r[_]=f[_],a[_]=Yi(v);u=m}else{for(y=new Array(m),x=new Array(m),h&&(k=new Array(m)),A=0,E=Math.min(u,m);A<E&&r[A]===f[A];A++);for(E=u-1,T=m-1;E>=A&&T>=A&&r[E]===f[T];E--,T--)y[T]=a[E],x[T]=l[E],h&&(k[T]=h[E]);for(b=new Map,S=new Array(T+1),_=T;_>=A;_--)$=f[_],g=b.get($),S[_]=g===void 0?-1:g,b.set($,_);for(g=A;g<=E;g++)$=r[g],_=b.get($),_!==void 0&&_!==-1?(y[_]=a[g],x[_]=l[g],h&&(k[_]=h[g]),_=S[_],b.set($,_)):l[g]();for(_=A;_<m;_++)_ in y?(a[_]=y[_],l[_]=x[_],h&&(h[_]=k[_],h[_](_))):a[_]=Yi(v);a=a.slice(0,u=m),r=f.slice(0)}return a});function v(b){if(l[_]=b,h){const[S,y]=K(_);return h[_]=y,e(f[_],S)}return e(f[_])}}}function z(i,e){return Ye(()=>i(e||{}))}function Kr(){return!0}const qo={get(i,e,n){return e===bs?n:i.get(e)},has(i,e){return e===bs?!0:i.has(e)},set:Kr,deleteProperty:Kr,getOwnPropertyDescriptor(i,e){return{configurable:!0,enumerable:!0,get(){return i.get(e)},set:Kr,deleteProperty:Kr}},ownKeys(i){return i.keys()}};function ro(i){return(i=typeof i=="function"?i():i)?i:{}}function tp(){for(let i=0,e=this.length;i<e;++i){const n=this[i]();if(n!==void 0)return n}}function jo(...i){let e=!1;for(let u=0;u<i.length;u++){const h=i[u];e=e||!!h&&bs in h,i[u]=typeof h=="function"?(e=!0,pe(h)):h}if(gh&&e)return new Proxy({get(u){for(let h=i.length-1;h>=0;h--){const f=ro(i[h])[u];if(f!==void 0)return f}},has(u){for(let h=i.length-1;h>=0;h--)if(u in ro(i[h]))return!0;return!1},keys(){const u=[];for(let h=0;h<i.length;h++)u.push(...Object.keys(ro(i[h])));return[...new Set(u)]}},qo);const n={},r=Object.create(null);for(let u=i.length-1;u>=0;u--){const h=i[u];if(!h)continue;const f=Object.getOwnPropertyNames(h);for(let m=f.length-1;m>=0;m--){const g=f[m];if(g==="__proto__"||g==="constructor")continue;const _=Object.getOwnPropertyDescriptor(h,g);if(!r[g])r[g]=_.get?{enumerable:!0,configurable:!0,get:tp.bind(n[g]=[_.get.bind(h)])}:_.value!==void 0?_:void 0;else{const v=n[g];v&&(_.get?v.push(_.get.bind(h)):_.value!==void 0&&v.push(()=>_.value))}}}const a={},l=Object.keys(r);for(let u=l.length-1;u>=0;u--){const h=l[u],f=r[h];f&&f.get?Object.defineProperty(a,h,f):a[h]=f?f.value:void 0}return a}function np(i,...e){if(gh&&bs in i){const a=new Set(e.length>1?e.flat():e[0]),l=e.map(u=>new Proxy({get(h){return u.includes(h)?i[h]:void 0},has(h){return u.includes(h)&&h in i},keys(){return u.filter(h=>h in i)}},qo));return l.push(new Proxy({get(u){return a.has(u)?void 0:i[u]},has(u){return a.has(u)?!1:u in i},keys(){return Object.keys(i).filter(u=>!a.has(u))}},qo)),l}const n={},r=e.map(()=>({}));for(const a of Object.getOwnPropertyNames(i)){const l=Object.getOwnPropertyDescriptor(i,a),u=!l.get&&!l.set&&l.enumerable&&l.writable&&l.configurable;let h=!1,f=0;for(const m of e)m.includes(a)&&(h=!0,u?r[f][a]=l.value:Object.defineProperty(r[f],a,l)),++f;h||(u?n[a]=l.value:Object.defineProperty(n,a,l))}return[...r,n]}const ip=i=>`Stale read from <${i}>.`;function kh(i){const e="fallback"in i&&{fallback:()=>i.fallback};return pe(ep(()=>i.each,i.children,e||void 0))}function rt(i){const e=i.keyed,n=pe(()=>i.when,void 0,{equals:(r,a)=>e?r===a:!r==!a});return pe(()=>{const r=n();if(r){const a=i.children;return typeof a=="function"&&a.length>0?Ye(()=>a(e?r:()=>{if(!Ye(n))throw ip("Show");return i.when})):a}return i.fallback},void 0,void 0)}const rp=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],sp=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...rp]),ap=new Set(["innerHTML","textContent","innerText","children"]),op=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),lp=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function up(i,e){const n=lp[i];return typeof n=="object"?n[e]?n.$:void 0:n}const cp=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]);function hp(i,e,n){let r=n.length,a=e.length,l=r,u=0,h=0,f=e[a-1].nextSibling,m=null;for(;u<a||h<l;){if(e[u]===n[h]){u++,h++;continue}for(;e[a-1]===n[l-1];)a--,l--;if(a===u){const g=l<r?h?n[h-1].nextSibling:n[l-h]:f;for(;h<l;)i.insertBefore(n[h++],g)}else if(l===h)for(;u<a;)(!m||!m.has(e[u]))&&e[u].remove(),u++;else if(e[u]===n[l-1]&&n[h]===e[a-1]){const g=e[--a].nextSibling;i.insertBefore(n[h++],e[u++].nextSibling),i.insertBefore(n[--l],g),e[a]=n[l]}else{if(!m){m=new Map;let _=h;for(;_<l;)m.set(n[_],_++)}const g=m.get(e[u]);if(g!=null)if(h<g&&g<l){let _=u,v=1,b;for(;++_<a&&_<l&&!((b=m.get(e[_]))==null||b!==g+v);)v++;if(v>g-h){const S=e[u];for(;h<g;)i.insertBefore(n[h++],S)}else i.replaceChild(n[h++],e[u++])}else u++;else e[u++].remove()}}}const Hu="_$DX_DELEGATE";function dp(i,e,n,r={}){let a;return Yi(l=>{a=l,e===document?i():R(e,i(),e.firstChild?null:void 0,n)},r.owner),()=>{a(),e.textContent=""}}function Q(i,e,n){let r;const a=()=>{const u=document.createElement("template");return u.innerHTML=i,u.content.firstChild},l=()=>(r||(r=a())).cloneNode(!0);return l.cloneNode=l,l}function dt(i,e=window.document){const n=e[Hu]||(e[Hu]=new Set);for(let r=0,a=i.length;r<a;r++){const l=i[r];n.has(l)||(n.add(l),e.addEventListener(l,bp))}}function Ne(i,e,n){n==null?i.removeAttribute(e):i.setAttribute(e,n)}function fp(i,e,n){n?i.setAttribute(e,""):i.removeAttribute(e)}function qs(i,e){e==null?i.removeAttribute("class"):i.className=e}function mp(i,e,n,r){if(r)Array.isArray(n)?(i[`$$${e}`]=n[0],i[`$$${e}Data`]=n[1]):i[`$$${e}`]=n;else if(Array.isArray(n)){const a=n[0];i.addEventListener(e,n[0]=l=>a.call(i,n[1],l))}else i.addEventListener(e,n,typeof n!="function"&&n)}function pp(i,e,n={}){const r=Object.keys(e||{}),a=Object.keys(n);let l,u;for(l=0,u=a.length;l<u;l++){const h=a[l];!h||h==="undefined"||e[h]||(Ku(i,h,!1),delete n[h])}for(l=0,u=r.length;l<u;l++){const h=r[l],f=!!e[h];!h||h==="undefined"||n[h]===f||!f||(Ku(i,h,!0),n[h]=f)}return n}function gp(i,e,n){if(!e)return n?Ne(i,"style"):e;const r=i.style;if(typeof e=="string")return r.cssText=e;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),e||(e={});let a,l;for(l in n)e[l]==null&&r.removeProperty(l),delete n[l];for(l in e)a=e[l],a!==n[l]&&(r.setProperty(l,a),n[l]=a);return n}function _p(i,e={},n,r){const a={};return xe(()=>a.children=ir(i,e.children,a.children)),xe(()=>typeof e.ref=="function"&&vp(e.ref,i)),xe(()=>yp(i,e,n,!0,a,!0)),a}function vp(i,e,n){return Ye(()=>i(e,n))}function R(i,e,n,r){if(n!==void 0&&!r&&(r=[]),typeof e!="function")return ir(i,e,r,n);xe(a=>ir(i,e(),a,n),r)}function yp(i,e,n,r,a={},l=!1){e||(e={});for(const u in a)if(!(u in e)){if(u==="children")continue;a[u]=Gu(i,u,null,a[u],n,l,e)}for(const u in e){if(u==="children")continue;const h=e[u];a[u]=Gu(i,u,h,a[u],n,l,e)}}function wp(i){return i.toLowerCase().replace(/-([a-z])/g,(e,n)=>n.toUpperCase())}function Ku(i,e,n){const r=e.trim().split(/\s+/);for(let a=0,l=r.length;a<l;a++)i.classList.toggle(r[a],n)}function Gu(i,e,n,r,a,l,u){let h,f,m,g,_;if(e==="style")return gp(i,n,r);if(e==="classList")return pp(i,n,r);if(n===r)return r;if(e==="ref")l||n(i);else if(e.slice(0,3)==="on:"){const v=e.slice(3);r&&i.removeEventListener(v,r,typeof r!="function"&&r),n&&i.addEventListener(v,n,typeof n!="function"&&n)}else if(e.slice(0,10)==="oncapture:"){const v=e.slice(10);r&&i.removeEventListener(v,r,!0),n&&i.addEventListener(v,n,!0)}else if(e.slice(0,2)==="on"){const v=e.slice(2).toLowerCase(),b=cp.has(v);if(!b&&r){const S=Array.isArray(r)?r[0]:r;i.removeEventListener(v,S)}(b||n)&&(mp(i,v,n,b),b&&dt([v]))}else e.slice(0,5)==="attr:"?Ne(i,e.slice(5),n):e.slice(0,5)==="bool:"?fp(i,e.slice(5),n):(_=e.slice(0,5)==="prop:")||(m=ap.has(e))||(g=up(e,i.tagName))||(f=sp.has(e))||(h=i.nodeName.includes("-")||"is"in u)?(_&&(e=e.slice(5),f=!0),e==="class"||e==="className"?qs(i,n):h&&!f&&!m?i[wp(e)]=n:i[g||e]=n):Ne(i,op[e]||e,n);return n}function bp(i){let e=i.target;const n=`$$${i.type}`,r=i.target,a=i.currentTarget,l=f=>Object.defineProperty(i,"target",{configurable:!0,value:f}),u=()=>{const f=e[n];if(f&&!e.disabled){const m=e[`${n}Data`];if(m!==void 0?f.call(e,m,i):f.call(e,i),i.cancelBubble)return}return e.host&&typeof e.host!="string"&&!e.host._$host&&e.contains(i.target)&&l(e.host),!0},h=()=>{for(;u()&&(e=e._$host||e.parentNode||e.host););};if(Object.defineProperty(i,"currentTarget",{configurable:!0,get(){return e||document}}),i.composedPath){const f=i.composedPath();l(f[0]);for(let m=0;m<f.length-2&&(e=f[m],!!u());m++){if(e._$host){e=e._$host,h();break}if(e.parentNode===a)break}}else h();l(r)}function ir(i,e,n,r,a){for(;typeof n=="function";)n=n();if(e===n)return n;const l=typeof e,u=r!==void 0;if(i=u&&n[0]&&n[0].parentNode||i,l==="string"||l==="number"){if(l==="number"&&(e=e.toString(),e===n))return n;if(u){let h=n[0];h&&h.nodeType===3?h.data!==e&&(h.data=e):h=document.createTextNode(e),n=Fn(i,n,r,h)}else n!==""&&typeof n=="string"?n=i.firstChild.data=e:n=i.textContent=e}else if(e==null||l==="boolean")n=Fn(i,n,r);else{if(l==="function")return xe(()=>{let h=e();for(;typeof h=="function";)h=h();n=ir(i,h,n,r)}),()=>n;if(Array.isArray(e)){const h=[],f=n&&Array.isArray(n);if(Do(h,e,n,a))return xe(()=>n=ir(i,h,n,r,!0)),()=>n;if(h.length===0){if(n=Fn(i,n,r),u)return n}else f?n.length===0?Vu(i,h,r):hp(i,n,h):(n&&Fn(i),Vu(i,h));n=h}else if(e.nodeType){if(Array.isArray(n)){if(u)return n=Fn(i,n,r,e);Fn(i,n,null,e)}else n==null||n===""||!i.firstChild?i.appendChild(e):i.replaceChild(e,i.firstChild);n=e}}return n}function Do(i,e,n,r){let a=!1;for(let l=0,u=e.length;l<u;l++){let h=e[l],f=n&&n[i.length],m;if(!(h==null||h===!0||h===!1))if((m=typeof h)=="object"&&h.nodeType)i.push(h);else if(Array.isArray(h))a=Do(i,h,f)||a;else if(m==="function")if(r){for(;typeof h=="function";)h=h();a=Do(i,Array.isArray(h)?h:[h],Array.isArray(f)?f:[f])||a}else i.push(h),a=!0;else{const g=String(h);f&&f.nodeType===3&&f.data===g?i.push(f):i.push(document.createTextNode(g))}}return a}function Vu(i,e,n=null){for(let r=0,a=e.length;r<a;r++)i.insertBefore(e[r],n)}function Fn(i,e,n,r){if(n===void 0)return i.textContent="";const a=r||document.createTextNode("");if(e.length){let l=!1;for(let u=e.length-1;u>=0;u--){const h=e[u];if(a!==h){const f=h.parentNode===i;!l&&!u?f?i.replaceChild(a,h):i.insertBefore(a,n):f&&h.remove()}else l=!0}}else i.insertBefore(a,n);return[a]}const xp=!1;function Ch(){let i=new Set;function e(a){return i.add(a),()=>i.delete(a)}let n=!1;function r(a,l){if(n)return!(n=!1);const u={to:a,options:l,defaultPrevented:!1,preventDefault:()=>u.defaultPrevented=!0};for(const h of i)h.listener({...u,from:h.location,retry:f=>{f&&(n=!0),h.navigate(a,{...l,resolve:!1})}});return!u.defaultPrevented}return{subscribe:e,confirm:r}}let Bo;function dl(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),Bo=window.history.state._depth}dl();function Ap(i){return{...i,_depth:window.history.state&&window.history.state._depth}}function Pp(i,e){let n=!1;return()=>{const r=Bo;dl();const a=r==null?null:Bo-r;if(n){n=!1;return}a&&e(a)?(n=!0,window.history.go(-a)):i()}}const Sp=/^(?:[a-z0-9]+:)?\/\//i,kp=/^\/+|(\/)\/+$/g,Th="http://sr";function Pn(i,e=!1){const n=i.replace(kp,"$1");return n?e||/^[?#]/.test(n)?n:"/"+n:""}function fs(i,e,n){if(Sp.test(e))return;const r=Pn(i),a=n&&Pn(n);let l="";return!a||e.startsWith("/")?l=r:a.toLowerCase().indexOf(r.toLowerCase())!==0?l=r+a:l=a,(l||"/")+Pn(e,!l)}function Cp(i,e){if(i==null)throw new Error(e);return i}function Tp(i,e){return Pn(i).replace(/\/*(\*.*)?$/g,"")+Pn(e)}function Lh(i){const e={};return i.searchParams.forEach((n,r)=>{r in e?Array.isArray(e[r])?e[r].push(n):e[r]=[e[r],n]:e[r]=n}),e}function Lp(i,e,n){const[r,a]=i.split("/*",2),l=r.split("/").filter(Boolean),u=l.length;return h=>{const f=h.split("/").filter(Boolean),m=f.length-u;if(m<0||m>0&&a===void 0&&!e)return null;const g={path:u?"":"/",params:{}},_=v=>n===void 0?void 0:n[v];for(let v=0;v<u;v++){const b=l[v],S=b[0]===":",y=S?f[v]:f[v].toLowerCase(),x=S?b.slice(1):b.toLowerCase();if(S&&so(y,_(x)))g.params[x]=y;else if(S||!so(y,x))return null;g.path+=`/${y}`}if(a){const v=m?f.slice(-m).join("/"):"";if(so(v,_(a)))g.params[a]=v;else return null}return g}}function so(i,e){const n=r=>r===i;return e===void 0?!0:typeof e=="string"?n(e):typeof e=="function"?e(i):Array.isArray(e)?e.some(n):e instanceof RegExp?e.test(i):!1}function Ep(i){const[e,n]=i.pattern.split("/*",2),r=e.split("/").filter(Boolean);return r.reduce((a,l)=>a+(l.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function Eh(i){const e=new Map,n=wh();return new Proxy({},{get(r,a){return e.has(a)||bh(n,()=>e.set(a,pe(()=>i()[a]))),e.get(a)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(i())}})}function Oh(i){let e=/(\/?\:[^\/]+)\?/.exec(i);if(!e)return[i];let n=i.slice(0,e.index),r=i.slice(e.index+e[0].length);const a=[n,n+=e[1]];for(;e=/^(\/\:[^\/]+)\?/.exec(r);)a.push(n+=e[1]),r=r.slice(e[0].length);return Oh(r).reduce((l,u)=>[...l,...a.map(h=>h+u)],[])}const Op=100,$h=ul(),fl=ul(),js=()=>Cp(Rs($h),"<A> and 'use' router primitives can be only used inside a Route."),$p=()=>Rs(fl)||js().base,Mp=i=>{const e=$p();return pe(()=>e.resolvePath(i()))},Rp=i=>{const e=js();return pe(()=>{const n=i();return n!==void 0?e.renderPath(n):n})},xt=()=>js().navigatorFactory(),Ip=()=>js().location;function qp(i,e=""){const{component:n,preload:r,load:a,children:l,info:u}=i,h=!l||Array.isArray(l)&&!l.length,f={key:i,component:n,preload:r||a,info:u};return Mh(i.path).reduce((m,g)=>{for(const _ of Oh(g)){const v=Tp(e,_);let b=h?v:v.split("/*",1)[0];b=b.split("/").map(S=>S.startsWith(":")||S.startsWith("*")?S:encodeURIComponent(S)).join("/"),m.push({...f,originalPath:g,pattern:b,matcher:Lp(b,!h,i.matchFilters)})}return m},[])}function jp(i,e=0){return{routes:i,score:Ep(i[i.length-1])*1e4-e,matcher(n){const r=[];for(let a=i.length-1;a>=0;a--){const l=i[a],u=l.matcher(n);if(!u)return null;r.unshift({...u,route:l})}return r}}}function Mh(i){return Array.isArray(i)?i:[i]}function Rh(i,e="",n=[],r=[]){const a=Mh(i);for(let l=0,u=a.length;l<u;l++){const h=a[l];if(h&&typeof h=="object"){h.hasOwnProperty("path")||(h.path="");const f=qp(h,e);for(const m of f){n.push(m);const g=Array.isArray(h.children)&&h.children.length===0;if(h.children&&!g)Rh(h.children,m.pattern,n,r);else{const _=jp([...n],r.length);r.push(_)}n.pop()}}}return n.length?r:r.sort((l,u)=>u.score-l.score)}function ao(i,e){for(let n=0,r=i.length;n<r;n++){const a=i[n].matcher(e);if(a)return a}return[]}function Dp(i,e,n){const r=new URL(Th),a=pe(g=>{const _=i();try{return new URL(_,r)}catch{return console.error(`Invalid path ${_}`),g}},r,{equals:(g,_)=>g.href===_.href}),l=pe(()=>a().pathname),u=pe(()=>a().search,!0),h=pe(()=>a().hash),f=()=>"",m=ll(u,()=>Lh(a()));return{get pathname(){return l()},get search(){return u()},get hash(){return h()},get state(){return e()},get key(){return f()},query:n?n(m):Eh(m)}}let wn;function Bp(){return wn}function Np(i,e,n,r={}){const{signal:[a,l],utils:u={}}=i,h=u.parsePath||(V=>V),f=u.renderPath||(V=>V),m=u.beforeLeave||Ch(),g=fs("",r.base||"");if(g===void 0)throw new Error(`${g} is not a valid base path`);g&&!a().value&&l({value:g,replace:!0,scroll:!1});const[_,v]=K(!1);let b;const S=(V,X)=>{X.value===y()&&X.state===k()||(b===void 0&&v(!0),wn=V,b=X,Km(()=>{b===X&&(x(b.value),A(b.state),$[1](Y=>Y.filter(Pe=>Pe.pending)))}).finally(()=>{b===X&&Hm(()=>{wn=void 0,V==="navigate"&&he(b),v(!1),b=void 0})}))},[y,x]=K(a().value),[k,A]=K(a().state),E=Dp(y,k,u.queryWrapper),T=[],$=K([]),I=pe(()=>typeof r.transformUrl=="function"?ao(e(),r.transformUrl(E.pathname)):ao(e(),E.pathname)),M=()=>{const V=I(),X={};for(let Y=0;Y<V.length;Y++)Object.assign(X,V[Y].params);return X},B=u.paramsWrapper?u.paramsWrapper(M,e):Eh(M),N={pattern:g,path:()=>g,outlet:()=>null,resolvePath(V){return fs(g,V)}};return xe(ll(a,V=>S("native",V),{defer:!0})),{base:N,location:E,params:B,isRouting:_,renderPath:f,parsePath:h,navigatorFactory:U,matches:I,beforeLeave:m,preloadRoute:Ae,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:$};function D(V,X,Y){Ye(()=>{if(typeof X=="number"){X&&(u.go?u.go(X):console.warn("Router integration does not support relative routing"));return}const Pe=!X||X[0]==="?",{replace:G,resolve:Ue,scroll:H,state:ue}={replace:!1,resolve:!Pe,scroll:!0,...Y},ve=Ue?V.resolvePath(X):fs(Pe&&E.pathname||"",X);if(ve===void 0)throw new Error(`Path '${X}' is not a routable path`);if(T.length>=Op)throw new Error("Too many redirects");const Se=y();(ve!==Se||ue!==k())&&(xp||m.confirm(ve,Y)&&(T.push({value:Se,replace:G,scroll:H,state:k()}),S("navigate",{value:ve,state:ue})))})}function U(V){return V=V||Rs(fl)||N,(X,Y)=>D(V,X,Y)}function he(V){const X=T[0];X&&(l({...V,replace:X.replace,scroll:X.scroll}),T.length=0)}function Ae(V,X){const Y=ao(e(),V.pathname),Pe=wn;wn="preload";for(let G in Y){const{route:Ue,params:H}=Y[G];Ue.component&&Ue.component.preload&&Ue.component.preload();const{preload:ue}=Ue;X&&ue&&bh(n(),()=>ue({params:H,location:{pathname:V.pathname,search:V.search,hash:V.hash,query:Lh(V),state:null,key:""},intent:"preload"}))}wn=Pe}}function zp(i,e,n,r){const{base:a,location:l,params:u}=i,{pattern:h,component:f,preload:m}=r().route,g=pe(()=>r().path);f&&f.preload&&f.preload();const _=m?m({params:u,location:l,intent:wn||"initial"}):void 0;return{parent:e,pattern:h,path:g,outlet:()=>f?z(f,{params:u,location:l,data:_,get children(){return n()}}):n(),resolvePath(b){return fs(a.path(),b,g())}}}const Fp=i=>e=>{const{base:n}=e,r=cl(()=>e.children),a=pe(()=>Rh(r(),e.base||""));let l;const u=Np(i,a,()=>l,{base:n,singleFlight:e.singleFlight,transformUrl:e.transformUrl});return i.create&&i.create(u),z($h.Provider,{value:u,get children(){return z(Up,{routerState:u,get root(){return e.root},get preload(){return e.rootPreload||e.rootLoad},get children(){return[pe(()=>(l=wh())&&null),z(Zp,{routerState:u,get branches(){return a()}})]}})}})};function Up(i){const e=i.routerState.location,n=i.routerState.params,r=pe(()=>i.preload&&Ye(()=>{i.preload({params:n,location:e,intent:Bp()||"initial"})}));return z(rt,{get when(){return i.root},keyed:!0,get fallback(){return i.children},children:a=>z(a,{params:n,location:e,get data(){return r()},get children(){return i.children}})})}function Zp(i){const e=[];let n;const r=pe(ll(i.routerState.matches,(a,l,u)=>{let h=l&&a.length===l.length;const f=[];for(let m=0,g=a.length;m<g;m++){const _=l&&l[m],v=a[m];u&&_&&v.route.key===_.route.key?f[m]=u[m]:(h=!1,e[m]&&e[m](),Yi(b=>{e[m]=b,f[m]=zp(i.routerState,f[m-1]||i.routerState.base,Ju(()=>r()[m+1]),()=>i.routerState.matches()[m])}))}return e.splice(a.length).forEach(m=>m()),u&&h?u:(n=f[0],f)}));return Ju(()=>r()&&n)()}const Ju=i=>()=>z(rt,{get when(){return i()},keyed:!0,children:e=>z(fl.Provider,{value:e,get children(){return e.outlet()}})}),ct=i=>{const e=cl(()=>i.children);return jo(i,{get children(){return e()}})};function Wp([i,e],n,r){return[i,a=>e(r(a))]}function Hp(i){let e=!1;const n=a=>typeof a=="string"?{value:a}:a,r=Wp(K(n(i.get()),{equals:(a,l)=>a.value===l.value&&a.state===l.state}),void 0,a=>(!e&&i.set(a),a));return i.init&&Ms(i.init((a=i.get())=>{e=!0,r[1](n(a)),e=!1})),Fp({signal:r,create:i.create,utils:i.utils})}function Kp(i,e,n){return i.addEventListener(e,n),()=>i.removeEventListener(e,n)}function Gp(i,e){const n=i&&document.getElementById(i);n?n.scrollIntoView():e&&window.scrollTo(0,0)}const Vp=new Map;function Jp(i=!0,e=!1,n="/_server",r){return a=>{const l=a.base.path(),u=a.navigatorFactory(a.base);let h,f;function m(y){return y.namespaceURI==="http://www.w3.org/2000/svg"}function g(y){if(y.defaultPrevented||y.button!==0||y.metaKey||y.altKey||y.ctrlKey||y.shiftKey)return;const x=y.composedPath().find(I=>I instanceof Node&&I.nodeName.toUpperCase()==="A");if(!x||e&&!x.hasAttribute("link"))return;const k=m(x),A=k?x.href.baseVal:x.href;if((k?x.target.baseVal:x.target)||!A&&!x.hasAttribute("state"))return;const T=(x.getAttribute("rel")||"").split(/\s+/);if(x.hasAttribute("download")||T&&T.includes("external"))return;const $=k?new URL(A,document.baseURI):new URL(A);if(!($.origin!==window.location.origin||l&&$.pathname&&!$.pathname.toLowerCase().startsWith(l.toLowerCase())))return[x,$]}function _(y){const x=g(y);if(!x)return;const[k,A]=x,E=a.parsePath(A.pathname+A.search+A.hash),T=k.getAttribute("state");y.preventDefault(),u(E,{resolve:!1,replace:k.hasAttribute("replace"),scroll:!k.hasAttribute("noscroll"),state:T?JSON.parse(T):void 0})}function v(y){const x=g(y);if(!x)return;const[k,A]=x;a.preloadRoute(A,k.getAttribute("preload")!=="false")}function b(y){clearTimeout(h);const x=g(y);if(!x)return f=null;const[k,A]=x;f!==k&&(h=setTimeout(()=>{a.preloadRoute(A,k.getAttribute("preload")!=="false"),f=k},20))}function S(y){if(y.defaultPrevented)return;let x=y.submitter&&y.submitter.hasAttribute("formaction")?y.submitter.getAttribute("formaction"):y.target.getAttribute("action");if(!x)return;if(!x.startsWith("https://action/")){const A=new URL(x,Th);if(x=a.parsePath(A.pathname+A.search),!x.startsWith(n))return}if(y.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const k=Vp.get(x);if(k){y.preventDefault();const A=new FormData(y.target,y.submitter);k.call({r:a,f:y.target},y.target.enctype==="multipart/form-data"?A:new URLSearchParams(A))}}dt(["click","submit"]),document.addEventListener("click",_),i&&(document.addEventListener("mousemove",b,{passive:!0}),document.addEventListener("focusin",v,{passive:!0}),document.addEventListener("touchstart",v,{passive:!0})),document.addEventListener("submit",S),Ms(()=>{document.removeEventListener("click",_),i&&(document.removeEventListener("mousemove",b),document.removeEventListener("focusin",v),document.removeEventListener("touchstart",v)),document.removeEventListener("submit",S)})}}function Yp(i){const e=i.replace(/^.*?#/,"");if(!e.startsWith("/")){const[,n="/"]=window.location.hash.split("#",2);return`${n}#${e}`}return e}function Xp(i){const e=()=>window.location.hash.slice(1),n=Ch();return Hp({get:e,set({value:r,replace:a,scroll:l,state:u}){a?window.history.replaceState(Ap(u),"","#"+r):window.history.pushState(u,"","#"+r);const h=r.indexOf("#"),f=h>=0?r.slice(h+1):"";Gp(f,l),dl()},init:r=>Kp(window,"hashchange",Pp(r,a=>!n.confirm(a&&a<0?a:e()))),create:Jp(i.preload,i.explicitLinks,i.actionBase),utils:{go:r=>window.history.go(r),renderPath:r=>`#${r}`,parsePath:Yp,beforeLeave:n}})(i)}var Qp=Q("<a>");function No(i){i=jo({inactiveClass:"inactive",activeClass:"active"},i);const[,e]=np(i,["href","state","class","activeClass","inactiveClass","end"]),n=Mp(()=>i.href),r=Rp(n),a=Ip(),l=pe(()=>{const u=n();if(u===void 0)return[!1,!1];const h=Pn(u.split(/[?#]/,1)[0]).toLowerCase(),f=decodeURI(Pn(a.pathname).toLowerCase());return[i.end?h===f:f.startsWith(h+"/")||f===h,h===f]});return(()=>{var u=Qp();return _p(u,jo(e,{get href(){return r()||i.href},get state(){return JSON.stringify(i.state)},get classList(){return{...i.class&&{[i.class]:!0},[i.inactiveClass]:!l()[0],[i.activeClass]:l()[0],...e.classList}},link:"",get"aria-current"(){return l()[1]?"page":void 0}}),!1),u})()}const eg="modulepreload",tg=function(i){return"/ZavrsniV2/"+i},Yu={},ai=function(e,n,r){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=u?.nonce||u?.getAttribute("nonce");a=Promise.allSettled(n.map(f=>{if(f=tg(f),f in Yu)return;Yu[f]=!0;const m=f.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const _=document.createElement("link");if(_.rel=m?"stylesheet":eg,m||(_.as="script"),_.crossOrigin="",_.href=f,h&&_.setAttribute("nonce",h),document.head.appendChild(_),m)return new Promise((v,b)=>{_.addEventListener("load",v),_.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${f}`)))})}))}function l(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return a.then(u=>{for(const h of u||[])h.status==="rejected"&&l(h.reason);return e().catch(l)})},ng=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...n)=>ai(async()=>{const{default:r}=await Promise.resolve().then(()=>ci);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class ml extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class ig extends ml{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class rg extends ml{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class sg extends ml{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var zo;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(zo||(zo={}));var ag=function(i,e,n,r){function a(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function h(g){try{m(r.next(g))}catch(_){u(_)}}function f(g){try{m(r.throw(g))}catch(_){u(_)}}function m(g){g.done?l(g.value):a(g.value).then(h,f)}m((r=r.apply(i,e||[])).next())})};class og{constructor(e,{headers:n={},customFetch:r,region:a=zo.Any}={}){this.url=e,this.headers=n,this.region=a,this.fetch=ng(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return ag(this,void 0,void 0,function*(){try{const{headers:a,method:l,body:u}=n;let h={},{region:f}=n;f||(f=this.region),f&&f!=="any"&&(h["x-region"]=f);let m;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",m=u):typeof u=="string"?(h["Content-Type"]="text/plain",m=u):typeof FormData<"u"&&u instanceof FormData?m=u:(h["Content-Type"]="application/json",m=JSON.stringify(u)));const g=yield this.fetch(`${this.url}/${e}`,{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),a),body:m}).catch(S=>{throw new ig(S)}),_=g.headers.get("x-relay-error");if(_&&_==="true")throw new rg(g);if(!g.ok)throw new sg(g);let v=((r=g.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),b;return v==="application/json"?b=yield g.json():v==="application/octet-stream"?b=yield g.blob():v==="text/event-stream"?b=g:v==="multipart/form-data"?b=yield g.formData():b=yield g.text(),{data:b,error:null}}catch(a){return{data:null,error:a}}})}}var st=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lg(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function ug(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(i).forEach(function(r){var a=Object.getOwnPropertyDescriptor(i,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return i[r]}})}),n}var Je={},pl={},Ds={},or={},Bs={},Ns={},cg=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},oi=cg();const hg=oi.fetch,Ih=oi.fetch.bind(oi),qh=oi.Headers,dg=oi.Request,fg=oi.Response,ci=Object.freeze(Object.defineProperty({__proto__:null,Headers:qh,Request:dg,Response:fg,default:Ih,fetch:hg},Symbol.toStringTag,{value:"Module"})),mg=ug(ci);var zs={};Object.defineProperty(zs,"__esModule",{value:!0});let pg=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};zs.default=pg;var jh=st&&st.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ns,"__esModule",{value:!0});const gg=jh(mg),_g=jh(zs);let vg=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=gg.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let a=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var u,h,f;let m=null,g=null,_=null,v=l.status,b=l.statusText;if(l.ok){if(this.method!=="HEAD"){const k=await l.text();k===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?g=k:g=JSON.parse(k))}const y=(u=this.headers.Prefer)===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),x=(h=l.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");y&&x&&x.length>1&&(_=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(m={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,_=null,v=406,b="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const y=await l.text();try{m=JSON.parse(y),Array.isArray(m)&&l.status===404&&(g=[],m=null,v=200,b="OK")}catch{l.status===404&&y===""?(v=204,b="No Content"):m={message:y}}if(m&&this.isMaybeSingle&&(!((f=m?.details)===null||f===void 0)&&f.includes("0 rows"))&&(m=null,v=200,b="OK"),m&&this.shouldThrowOnError)throw new _g.default(m)}return{error:m,data:g,count:_,status:v,statusText:b}});return this.shouldThrowOnError||(a=a.catch(l=>{var u,h,f;return{error:{message:`${(u=l?.name)!==null&&u!==void 0?u:"FetchError"}: ${l?.message}`,details:`${(h=l?.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(f=l?.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),a.then(e,n)}};Ns.default=vg;var yg=st&&st.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Bs,"__esModule",{value:!0});const wg=yg(Ns);let bg=class extends wg.default{select(e){let n=!1;const r=(e??"*").split("").map(a=>/\s/.test(a)&&!n?"":(a==='"'&&(n=!n),a)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.order`:"order",h=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${h?`${h},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:a=r}={}){const l=typeof a>"u"?"offset":`${a}.offset`,u=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${e}`),this.url.searchParams.set(u,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:a=!1,wal:l=!1,format:u="text"}={}){var h;const f=[e?"analyze":null,n?"verbose":null,r?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),m=(h=this.headers.Accept)!==null&&h!==void 0?h:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${m}"; options=${f};`,u==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Bs.default=bg;var xg=st&&st.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(or,"__esModule",{value:!0});const Ag=xg(Bs);let Pg=class extends Ag.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const u=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${l}fts${u}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const a=r?`${r}.or`:"or";return this.url.searchParams.append(a,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};or.default=Pg;var Sg=st&&st.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ds,"__esModule",{value:!0});const Bi=Sg(or);let kg=class{constructor(e,{headers:n={},schema:r,fetch:a}){this.url=e,this.headers=n,this.schema=r,this.fetch=a}select(e,{head:n=!1,count:r}={}){const a=n?"HEAD":"GET";let l=!1;const u=(e??"*").split("").map(h=>/\s/.test(h)&&!l?"":(h==='"'&&(l=!l),h)).join("");return this.url.searchParams.set("select",u),r&&(this.headers.Prefer=`count=${r}`),new Bi.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const a="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),r||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const u=e.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(u.length>0){const h=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new Bi.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:a,defaultToNull:l=!0}={}){const u="POST",h=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&h.push(this.headers.Prefer),a&&h.push(`count=${a}`),l||h.push("missing=default"),this.headers.Prefer=h.join(","),Array.isArray(e)){const f=e.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(f.length>0){const m=[...new Set(f)].map(g=>`"${g}"`);this.url.searchParams.set("columns",m.join(","))}}return new Bi.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),this.headers.Prefer=a.join(","),new Bi.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Bi.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Ds.default=kg;var Fs={},Us={};Object.defineProperty(Us,"__esModule",{value:!0});Us.version=void 0;Us.version="0.0.0-automated";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.DEFAULT_HEADERS=void 0;const Cg=Us;Fs.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Cg.version}`};var Dh=st&&st.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(pl,"__esModule",{value:!0});const Tg=Dh(Ds),Lg=Dh(or),Eg=Fs;let Og=class Bh{constructor(e,{headers:n={},schema:r,fetch:a}={}){this.url=e,this.headers=Object.assign(Object.assign({},Eg.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=a}from(e){const n=new URL(`${this.url}/${e}`);return new Tg.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Bh(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:a=!1,count:l}={}){let u;const h=new URL(`${this.url}/rpc/${e}`);let f;r||a?(u=r?"HEAD":"GET",Object.entries(n).filter(([g,_])=>_!==void 0).map(([g,_])=>[g,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([g,_])=>{h.searchParams.append(g,_)})):(u="POST",f=n);const m=Object.assign({},this.headers);return l&&(m.Prefer=`count=${l}`),new Lg.default({method:u,url:h,headers:m,schema:this.schemaName,body:f,fetch:this.fetch,allowEmpty:!1})}};pl.default=Og;var hi=st&&st.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Je,"__esModule",{value:!0});Je.PostgrestError=Je.PostgrestBuilder=Je.PostgrestTransformBuilder=Je.PostgrestFilterBuilder=Je.PostgrestQueryBuilder=Je.PostgrestClient=void 0;const Nh=hi(pl);Je.PostgrestClient=Nh.default;const zh=hi(Ds);Je.PostgrestQueryBuilder=zh.default;const Fh=hi(or);Je.PostgrestFilterBuilder=Fh.default;const Uh=hi(Bs);Je.PostgrestTransformBuilder=Uh.default;const Zh=hi(Ns);Je.PostgrestBuilder=Zh.default;const Wh=hi(zs);Je.PostgrestError=Wh.default;var $g=Je.default={PostgrestClient:Nh.default,PostgrestQueryBuilder:zh.default,PostgrestFilterBuilder:Fh.default,PostgrestTransformBuilder:Uh.default,PostgrestBuilder:Zh.default,PostgrestError:Wh.default};const{PostgrestClient:Mg,PostgrestQueryBuilder:aA,PostgrestFilterBuilder:oA,PostgrestTransformBuilder:lA,PostgrestBuilder:uA,PostgrestError:cA}=$g,Rg="2.11.2",Ig={"X-Client-Info":`realtime-js/${Rg}`},qg="1.0.0",Hh=1e4,jg=1e3;var ni;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(ni||(ni={}));var nt;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(nt||(nt={}));var vt;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(vt||(vt={}));var Fo;(function(i){i.websocket="websocket"})(Fo||(Fo={}));var bn;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(bn||(bn={}));class Dg{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const a=n.getUint8(1),l=n.getUint8(2);let u=this.HEADER_LENGTH+2;const h=r.decode(e.slice(u,u+a));u=u+a;const f=r.decode(e.slice(u,u+l));u=u+l;const m=JSON.parse(r.decode(e.slice(u,e.byteLength)));return{ref:null,topic:h,event:f,payload:m}}}class Kh{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var be;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(be||(be={}));const Xu=(i,e,n={})=>{var r;const a=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((l,u)=>(l[u]=Bg(u,i,e,a),l),{})},Bg=(i,e,n,r)=>{const a=e.find(h=>h.name===i),l=a?.type,u=n[i];return l&&!r.includes(l)?Gh(l,u):Uo(u)},Gh=(i,e)=>{if(i.charAt(0)==="_"){const n=i.slice(1,i.length);return Ug(e,n)}switch(i){case be.bool:return Ng(e);case be.float4:case be.float8:case be.int2:case be.int4:case be.int8:case be.numeric:case be.oid:return zg(e);case be.json:case be.jsonb:return Fg(e);case be.timestamp:return Zg(e);case be.abstime:case be.date:case be.daterange:case be.int4range:case be.int8range:case be.money:case be.reltime:case be.text:case be.time:case be.timestamptz:case be.timetz:case be.tsrange:case be.tstzrange:return Uo(e);default:return Uo(e)}},Uo=i=>i,Ng=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},zg=i=>{if(typeof i=="string"){const e=parseFloat(i);if(!Number.isNaN(e))return e}return i},Fg=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(e){return console.log(`JSON parse error: ${e}`),i}return i},Ug=(i,e)=>{if(typeof i!="string")return i;const n=i.length-1,r=i[n];if(i[0]==="{"&&r==="}"){let l;const u=i.slice(1,n);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(h=>Gh(e,h))}return i},Zg=i=>typeof i=="string"?i.replace(" ","T"):i,Vh=i=>{let e=i;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class oo{constructor(e,n,r={},a=Hh){this.channel=e,this.event=n,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Qu;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(Qu||(Qu={}));class Xi{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:l,onLeave:u,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Xi.syncState(this.state,a,l,u),this.pendingDiffs.forEach(f=>{this.state=Xi.syncDiff(this.state,f,l,u)}),this.pendingDiffs=[],h()}),this.channel._on(r.diff,{},a=>{const{onJoin:l,onLeave:u,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Xi.syncDiff(this.state,a,l,u),h())}),this.onJoin((a,l,u)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:u})}),this.onLeave((a,l,u)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,a){const l=this.cloneDeep(e),u=this.transformState(n),h={},f={};return this.map(l,(m,g)=>{u[m]||(f[m]=g)}),this.map(u,(m,g)=>{const _=l[m];if(_){const v=g.map(x=>x.presence_ref),b=_.map(x=>x.presence_ref),S=g.filter(x=>b.indexOf(x.presence_ref)<0),y=_.filter(x=>v.indexOf(x.presence_ref)<0);S.length>0&&(h[m]=S),y.length>0&&(f[m]=y)}else h[m]=g}),this.syncDiff(l,{joins:h,leaves:f},r,a)}static syncDiff(e,n,r,a){const{joins:l,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(l,(h,f)=>{var m;const g=(m=e[h])!==null&&m!==void 0?m:[];if(e[h]=this.cloneDeep(f),g.length>0){const _=e[h].map(b=>b.presence_ref),v=g.filter(b=>_.indexOf(b.presence_ref)<0);e[h].unshift(...v)}r(h,g,f)}),this.map(u,(h,f)=>{let m=e[h];if(!m)return;const g=f.map(_=>_.presence_ref);m=m.filter(_=>g.indexOf(_.presence_ref)<0),e[h]=m,a(h,m,f),m.length===0&&delete e[h]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const a=e[r];return"metas"in a?n[r]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[r]=a,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ec;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(ec||(ec={}));var tc;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(tc||(tc={}));var Ut;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(Ut||(Ut={}));class gl{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=nt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new oo(this,vt.join,this.params,this.timeout),this.rejoinTimer=new Kh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=nt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=nt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(vt.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new Xi(this),this.broadcastEndpointURL=Vh(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,a;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:l,presence:u,private:h}}=this.params;this._onError(g=>e?.(Ut.CHANNEL_ERROR,g)),this._onClose(()=>e?.(Ut.CLOSED));const f={},m={broadcast:l,presence:u,postgres_changes:(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&a!==void 0?a:[],private:h};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:m},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var _;if(this.socket.setAuth(),g===void 0){e?.(Ut.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,b=(_=v?.length)!==null&&_!==void 0?_:0,S=[];for(let y=0;y<b;y++){const x=v[y],{filter:{event:k,schema:A,table:E,filter:T}}=x,$=g&&g[y];if($&&$.event===k&&$.schema===A&&$.table===E&&$.filter===T)S.push(Object.assign(Object.assign({},x),{id:$.id}));else{this.unsubscribe(),e?.(Ut.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,e&&e(Ut.SUBSCRIBED);return}}).receive("error",g=>{e?.(Ut.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e?.(Ut.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,a;if(!this._canPush()&&e.type==="broadcast"){const{event:l,payload:u}=e,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=m.body)===null||a===void 0?void 0:a.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,h,f;const m=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(h=(u=this.params)===null||u===void 0?void 0:u.config)===null||h===void 0?void 0:h.broadcast)===null||f===void 0)&&f.ack)&&l("ok"),m.receive("ok",()=>l("ok")),m.receive("error",()=>l("error")),m.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=nt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(vt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const a=new oo(this,vt.leave,{},e);a.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),a.send(),this._canPush()||a.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const a=new AbortController,l=setTimeout(()=>a.abort(),r),u=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(l),u}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new oo(this,e,n,r);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var a,l;const u=e.toLocaleLowerCase(),{close:h,error:f,leave:m,join:g}=vt;if(r&&[h,f,m,g].indexOf(u)>=0&&r!==this._joinRef())return;let v=this._onMessage(u,n,r);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(b=>{var S,y,x;return((S=b.filter)===null||S===void 0?void 0:S.event)==="*"||((x=(y=b.filter)===null||y===void 0?void 0:y.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===u}).map(b=>b.callback(v,r)):(l=this.bindings[u])===null||l===void 0||l.filter(b=>{var S,y,x,k,A,E;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in b){const T=b.id,$=(S=b.filter)===null||S===void 0?void 0:S.event;return T&&((y=n.ids)===null||y===void 0?void 0:y.includes(T))&&($==="*"||$?.toLocaleLowerCase()===((x=n.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const T=(A=(k=b?.filter)===null||k===void 0?void 0:k.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return T==="*"||T===((E=n?.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===u}).map(b=>{if(typeof v=="object"&&"ids"in v){const S=v.data,{schema:y,table:x,commit_timestamp:k,type:A,errors:E}=S;v=Object.assign(Object.assign({},{schema:y,table:x,commit_timestamp:k,eventType:A,new:{},old:{},errors:E}),this._getPayloadRecords(S))}b.callback(v,r)})}_isClosed(){return this.state===nt.closed}_isJoined(){return this.state===nt.joined}_isJoining(){return this.state===nt.joining}_isLeaving(){return this.state===nt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const a=e.toLocaleLowerCase(),l={type:a,filter:n,callback:r};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===r&&gl.isEqual(a.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(vt.close,{},e)}_onError(e){this._on(vt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=nt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Xu(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Xu(e.columns,e.old_record)),n}}const Wg=()=>{},Hg=typeof WebSocket<"u",Kg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Gg{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Ig,this.params={},this.timeout=Hh,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Wg,this.conn=null,this.sendBuffer=[],this.serializer=new Dg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=l=>{let u;return l?u=l:typeof fetch>"u"?u=(...h)=>ai(async()=>{const{default:f}=await Promise.resolve().then(()=>ci);return{default:f}},void 0).then(({default:f})=>f(...h)):u=fetch,(...h)=>u(...h)},this.endPoint=`${e}/${Fo.websocket}`,this.httpEndpoint=Vh(e),n?.transport?this.transport=n.transport:this.transport=null,n?.params&&(this.params=n.params),n?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n?.timeout&&(this.timeout=n.timeout),n?.logger&&(this.logger=n.logger),n?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const a=(r=n?.params)===null||r===void 0?void 0:r.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=n?.reconnectAfterMs?n.reconnectAfterMs:l=>[1e3,2e3,5e3,1e4][l-1]||1e4,this.encode=n?.encode?n.encode:(l,u)=>u(JSON.stringify(l)),this.decode=n?.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Kh(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n?.fetch),n?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=n?.worker||!1,this.workerUrl=n?.workerUrl}this.accessToken=n?.accessToken||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(Hg){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new Vg(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),ai(async()=>{const{default:e}=await import("./browser-DkhDcWoL.js").then(n=>n.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:qg}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ni.connecting:return bn.Connecting;case ni.open:return bn.Open;case ni.closing:return bn.Closing;default:return bn.Closed}}isConnected(){return this.connectionState()===bn.Open}channel(e,n={config:{}}){const r=new gl(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:a,ref:l}=e,u=()=>{this.encode(e,h=>{var f;(f=this.conn)===null||f===void 0||f.send(h)})};this.log("push",`${n} ${r} (${l})`,a),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(a=>{n&&a.updateJoinPayload({access_token:n}),a.joinedOnce&&a._isJoined()&&a._push(vt.access_token,{access_token:n})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(jg,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:a,payload:l,ref:u}=n;u&&u===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${l.status||""} ${r} ${a} ${u&&"("+u+")"||""}`,l),this.channels.filter(h=>h._isMember(r)).forEach(h=>h._trigger(a,l,u)),this.stateChangeCallbacks.message.forEach(h=>h(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(vt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${e}${r}${a}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([Kg],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class Vg{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ni.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class _l extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ie(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class Jg extends _l{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Zo extends _l{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Yg=function(i,e,n,r){function a(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function h(g){try{m(r.next(g))}catch(_){u(_)}}function f(g){try{m(r.throw(g))}catch(_){u(_)}}function m(g){g.done?l(g.value):a(g.value).then(h,f)}m((r=r.apply(i,e||[])).next())})};const Jh=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...n)=>ai(async()=>{const{default:r}=await Promise.resolve().then(()=>ci);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Xg=()=>Yg(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ai(()=>Promise.resolve().then(()=>ci),void 0)).Response:Response}),Wo=i=>{if(Array.isArray(i))return i.map(n=>Wo(n));if(typeof i=="function"||i!==Object(i))return i;const e={};return Object.entries(i).forEach(([n,r])=>{const a=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=Wo(r)}),e};var Sn=function(i,e,n,r){function a(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function h(g){try{m(r.next(g))}catch(_){u(_)}}function f(g){try{m(r.throw(g))}catch(_){u(_)}}function m(g){g.done?l(g.value):a(g.value).then(h,f)}m((r=r.apply(i,e||[])).next())})};const lo=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Qg=(i,e,n)=>Sn(void 0,void 0,void 0,function*(){const r=yield Xg();i instanceof r&&!n?.noResolveJson?i.json().then(a=>{e(new Jg(lo(a),i.status||500))}).catch(a=>{e(new Zo(lo(a),a))}):e(new Zo(lo(i),i))}),e_=(i,e,n,r)=>{const a={method:i,headers:e?.headers||{}};return i==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),r&&(a.body=JSON.stringify(r)),Object.assign(Object.assign({},a),n))};function lr(i,e,n,r,a,l){return Sn(this,void 0,void 0,function*(){return new Promise((u,h)=>{i(n,e_(e,r,a,l)).then(f=>{if(!f.ok)throw f;return r?.noResolveJson?f:f.json()}).then(f=>u(f)).catch(f=>Qg(f,h,r))})})}function ks(i,e,n,r){return Sn(this,void 0,void 0,function*(){return lr(i,"GET",e,n,r)})}function rn(i,e,n,r,a){return Sn(this,void 0,void 0,function*(){return lr(i,"POST",e,r,a,n)})}function t_(i,e,n,r,a){return Sn(this,void 0,void 0,function*(){return lr(i,"PUT",e,r,a,n)})}function n_(i,e,n,r){return Sn(this,void 0,void 0,function*(){return lr(i,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Yh(i,e,n,r,a){return Sn(this,void 0,void 0,function*(){return lr(i,"DELETE",e,r,a,n)})}var Ge=function(i,e,n,r){function a(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function h(g){try{m(r.next(g))}catch(_){u(_)}}function f(g){try{m(r.throw(g))}catch(_){u(_)}}function m(g){g.done?l(g.value):a(g.value).then(h,f)}m((r=r.apply(i,e||[])).next())})};const i_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},nc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class r_{constructor(e,n={},r,a){this.url=e,this.headers=n,this.bucketId=r,this.fetch=Jh(a)}uploadOrUpdate(e,n,r,a){return Ge(this,void 0,void 0,function*(){try{let l;const u=Object.assign(Object.assign({},nc),a);let h=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const f=u.metadata;typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),f&&l.append("metadata",this.encodeMetadata(f)),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl),f&&l.append("metadata",this.encodeMetadata(f))):(l=r,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType,f&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),a?.headers&&(h=Object.assign(Object.assign({},h),a.headers));const m=this._removeEmptyFolders(n),g=this._getFinalPath(m),_=yield this.fetch(`${this.url}/object/${g}`,Object.assign({method:e,body:l,headers:h},u?.duplex?{duplex:u.duplex}:{})),v=yield _.json();return _.ok?{data:{path:m,id:v.Id,fullPath:v.Key},error:null}:{data:null,error:v}}catch(l){if(Ie(l))return{data:null,error:l};throw l}})}upload(e,n,r){return Ge(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,a){return Ge(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),u=this._getFinalPath(l),h=new URL(this.url+`/object/upload/sign/${u}`);h.searchParams.set("token",n);try{let f;const m=Object.assign({upsert:nc.upsert},a),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&r instanceof Blob?(f=new FormData,f.append("cacheControl",m.cacheControl),f.append("",r)):typeof FormData<"u"&&r instanceof FormData?(f=r,f.append("cacheControl",m.cacheControl)):(f=r,g["cache-control"]=`max-age=${m.cacheControl}`,g["content-type"]=m.contentType);const _=yield this.fetch(h.toString(),{method:"PUT",body:f,headers:g}),v=yield _.json();return _.ok?{data:{path:l,fullPath:v.Key},error:null}:{data:null,error:v}}catch(f){if(Ie(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(e,n){return Ge(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const a=Object.assign({},this.headers);n?.upsert&&(a["x-upsert"]="true");const l=yield rn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),u=new URL(this.url+l.url),h=u.searchParams.get("token");if(!h)throw new _l("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:h},error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}})}update(e,n,r){return Ge(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Ge(this,void 0,void 0,function*(){try{return{data:yield rn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(Ie(a))return{data:null,error:a};throw a}})}copy(e,n,r){return Ge(this,void 0,void 0,function*(){try{return{data:{path:(yield rn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(Ie(a))return{data:null,error:a};throw a}})}createSignedUrl(e,n,r){return Ge(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),l=yield rn(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const u=r?.download?`&download=${r.download===!0?"":r.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${u}`)},{data:l,error:null}}catch(a){if(Ie(a))return{data:null,error:a};throw a}})}createSignedUrls(e,n,r){return Ge(this,void 0,void 0,function*(){try{const a=yield rn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),l=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${l}`):null})),error:null}}catch(a){if(Ie(a))return{data:null,error:a};throw a}})}download(e,n){return Ge(this,void 0,void 0,function*(){const a=typeof n?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(n?.transform||{}),u=l?`?${l}`:"";try{const h=this._getFinalPath(e);return{data:yield(yield ks(this.fetch,`${this.url}/${a}/${h}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(h){if(Ie(h))return{data:null,error:h};throw h}})}info(e){return Ge(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield ks(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Wo(r),error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}})}exists(e){return Ge(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield n_(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Ie(r)&&r instanceof Zo){const a=r.originalError;if([400,404].includes(a?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),a=[],l=n?.download?`download=${n.download===!0?"":n.download}`:"";l!==""&&a.push(l);const h=typeof n?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(n?.transform||{});f!==""&&a.push(f);let m=a.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${r}${m}`)}}}remove(e){return Ge(this,void 0,void 0,function*(){try{return{data:yield Yh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}list(e,n,r){return Ge(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},i_),n),{prefix:e||""});return{data:yield rn(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(Ie(a))return{data:null,error:a};throw a}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const s_="2.7.1",a_={"X-Client-Info":`storage-js/${s_}`};var Un=function(i,e,n,r){function a(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function h(g){try{m(r.next(g))}catch(_){u(_)}}function f(g){try{m(r.throw(g))}catch(_){u(_)}}function m(g){g.done?l(g.value):a(g.value).then(h,f)}m((r=r.apply(i,e||[])).next())})};class o_{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},a_),n),this.fetch=Jh(r)}listBuckets(){return Un(this,void 0,void 0,function*(){try{return{data:yield ks(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ie(e))return{data:null,error:e};throw e}})}getBucket(e){return Un(this,void 0,void 0,function*(){try{return{data:yield ks(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Un(this,void 0,void 0,function*(){try{return{data:yield rn(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Un(this,void 0,void 0,function*(){try{return{data:yield t_(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Un(this,void 0,void 0,function*(){try{return{data:yield rn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Un(this,void 0,void 0,function*(){try{return{data:yield Yh(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}}class l_ extends o_{constructor(e,n={},r){super(e,n,r)}from(e){return new r_(this.url,this.headers,e,this.fetch)}}const u_="2.47.14";let Ui="";typeof Deno<"u"?Ui="deno":typeof document<"u"?Ui="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ui="react-native":Ui="node";const c_={"X-Client-Info":`supabase-js-${Ui}/${u_}`},h_={headers:c_},d_={schema:"public"},f_={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},m_={};var p_=function(i,e,n,r){function a(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function h(g){try{m(r.next(g))}catch(_){u(_)}}function f(g){try{m(r.throw(g))}catch(_){u(_)}}function m(g){g.done?l(g.value):a(g.value).then(h,f)}m((r=r.apply(i,e||[])).next())})};const g_=i=>{let e;return i?e=i:typeof fetch>"u"?e=Ih:e=fetch,(...n)=>e(...n)},__=()=>typeof Headers>"u"?qh:Headers,v_=(i,e,n)=>{const r=g_(n),a=__();return(l,u)=>p_(void 0,void 0,void 0,function*(){var h;const f=(h=yield e())!==null&&h!==void 0?h:i;let m=new a(u?.headers);return m.has("apikey")||m.set("apikey",i),m.has("Authorization")||m.set("Authorization",`Bearer ${f}`),r(l,Object.assign(Object.assign({},u),{headers:m}))})};var y_=function(i,e,n,r){function a(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function h(g){try{m(r.next(g))}catch(_){u(_)}}function f(g){try{m(r.throw(g))}catch(_){u(_)}}function m(g){g.done?l(g.value):a(g.value).then(h,f)}m((r=r.apply(i,e||[])).next())})};function w_(i){return i.replace(/\/$/,"")}function b_(i,e){const{db:n,auth:r,realtime:a,global:l}=i,{db:u,auth:h,realtime:f,global:m}=e,g={db:Object.assign(Object.assign({},u),n),auth:Object.assign(Object.assign({},h),r),realtime:Object.assign(Object.assign({},f),a),global:Object.assign(Object.assign({},m),l),accessToken:()=>y_(this,void 0,void 0,function*(){return""})};return i.accessToken?g.accessToken=i.accessToken:delete g.accessToken,g}const Xh="2.67.3",x_="http://localhost:9999",A_="supabase.auth.token",P_={"X-Client-Info":`gotrue-js/${Xh}`},ic=10,Ho="X-Supabase-Api-Version",Qh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function S_(i){return Math.round(Date.now()/1e3)+i}function k_(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){const e=Math.random()*16|0;return(i=="x"?e:e&3|8).toString(16)})}const Lt=()=>typeof window<"u"&&typeof document<"u",_n={tested:!1,writable:!1},Qi=()=>{if(!Lt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(_n.tested)return _n.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),_n.tested=!0,_n.writable=!0}catch{_n.tested=!0,_n.writable=!1}return _n.writable};function C_(i){const e={},n=new URL(i);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return n.searchParams.forEach((r,a)=>{e[a]=r}),e}const ed=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...n)=>ai(async()=>{const{default:r}=await Promise.resolve().then(()=>ci);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},T_=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",td=async(i,e,n)=>{await i.setItem(e,JSON.stringify(n))},Gr=async(i,e)=>{const n=await i.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Vr=async(i,e)=>{await i.removeItem(e)};function L_(i){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,a,l,u,h,f,m,g=0;for(i=i.replace("-","+").replace("_","/");g<i.length;)u=e.indexOf(i.charAt(g++)),h=e.indexOf(i.charAt(g++)),f=e.indexOf(i.charAt(g++)),m=e.indexOf(i.charAt(g++)),r=u<<2|h>>4,a=(h&15)<<4|f>>2,l=(f&3)<<6|m,n=n+String.fromCharCode(r),f!=64&&a!=0&&(n=n+String.fromCharCode(a)),m!=64&&l!=0&&(n=n+String.fromCharCode(l));return n}class Zs{constructor(){this.promise=new Zs.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Zs.promiseConstructor=Promise;function rc(i){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=i.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(L_(r))}async function E_(i){return await new Promise(e=>{setTimeout(()=>e(null),i)})}function O_(i,e){return new Promise((r,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await i(l);if(!e(l,null,u)){r(u);return}}catch(u){if(!e(l,u)){a(u);return}}})()})}function $_(i){return("0"+i.toString(16)).substr(-2)}function M_(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let a="";for(let l=0;l<56;l++)a+=n.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(e),Array.from(e,$_).join("")}async function R_(i){const n=new TextEncoder().encode(i),r=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(r);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}function I_(i){return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function q_(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const n=await R_(i);return I_(n)}async function Zn(i,e,n=!1){const r=M_();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await td(i,`${e}-code-verifier`,a);const l=await q_(r);return[l,r===l?"plain":"s256"]}const j_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function D_(i){const e=i.headers.get(Ho);if(!e||!e.match(j_))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}let vl=class extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}};function ie(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class B_ extends vl{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function N_(i){return ie(i)&&i.name==="AuthApiError"}class nd extends vl{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class kn extends vl{constructor(e,n,r,a){super(e,r,a),this.name=n,this.status=r}}class tn extends kn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function z_(i){return ie(i)&&i.name==="AuthSessionMissingError"}class uo extends kn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Jr extends kn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Yr extends kn{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function F_(i){return ie(i)&&i.name==="AuthImplicitGrantRedirectError"}class sc extends kn{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ko extends kn{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function co(i){return ie(i)&&i.name==="AuthRetryableFetchError"}class ac extends kn{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var U_=function(i,e){var n={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(n[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(i);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(i,r[a])&&(n[r[a]]=i[r[a]]);return n};const yn=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Z_=[502,503,504];async function oc(i){var e;if(!T_(i))throw new Ko(yn(i),0);if(Z_.includes(i.status))throw new Ko(yn(i),i.status);let n;try{n=await i.json()}catch(l){throw new nd(yn(l),l)}let r;const a=D_(i);if(a&&a.getTime()>=Qh["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new ac(yn(n),i.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new tn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new ac(yn(n),i.status,n.weak_password.reasons);throw new B_(yn(n),i.status||500,r)}const W_=(i,e,n,r)=>{const a={method:i,headers:e?.headers||{}};return i==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))};async function oe(i,e,n,r){var a;const l=Object.assign({},r?.headers);l[Ho]||(l[Ho]=Qh["2024-01-01"].name),r?.jwt&&(l.Authorization=`Bearer ${r.jwt}`);const u=(a=r?.query)!==null&&a!==void 0?a:{};r?.redirectTo&&(u.redirect_to=r.redirectTo);const h=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",f=await H_(i,e,n+h,{headers:l,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(f):{data:Object.assign({},f),error:null}}async function H_(i,e,n,r,a,l){const u=W_(e,r,a,l);let h;try{h=await i(n,Object.assign({},u))}catch(f){throw console.error(f),new Ko(yn(f),0)}if(h.ok||await oc(h),r?.noResolveJson)return h;try{return await h.json()}catch(f){await oc(f)}}function nn(i){var e;let n=null;J_(i)&&(n=Object.assign({},i),i.expires_at||(n.expires_at=S_(i.expires_in)));const r=(e=i.user)!==null&&e!==void 0?e:i;return{data:{session:n,user:r},error:null}}function lc(i){const e=nn(i);return!e.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=i.weak_password),e}function an(i){var e;return{data:{user:(e=i.user)!==null&&e!==void 0?e:i},error:null}}function K_(i){return{data:i,error:null}}function G_(i){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:a,verification_type:l}=i,u=U_(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:n,hashed_token:r,redirect_to:a,verification_type:l},f=Object.assign({},u);return{data:{properties:h,user:f},error:null}}function V_(i){return i}function J_(i){return i.access_token&&i.refresh_token&&i.expires_in}var Y_=function(i,e){var n={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(n[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(i);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(i,r[a])&&(n[r[a]]=i[r[a]]);return n};class X_{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=ed(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await oe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ie(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await oe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:an})}catch(r){if(ie(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Y_(e,["options"]),a=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(a.new_email=r?.newEmail,delete a.newEmail),await oe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:G_,redirectTo:n?.redirectTo})}catch(n){if(ie(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await oe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:an})}catch(n){if(ie(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,a,l,u,h,f;try{const m={nextPage:null,lastPage:0,total:0},g=await oe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(l=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:V_});if(g.error)throw g.error;const _=await g.json(),v=(u=g.headers.get("x-total-count"))!==null&&u!==void 0?u:0,b=(f=(h=g.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&f!==void 0?f:[];return b.length>0&&(b.forEach(S=>{const y=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(S.split(";")[1].split("=")[1]);m[`${x}Page`]=y}),m.total=parseInt(v)),{data:Object.assign(Object.assign({},_),m),error:null}}catch(m){if(ie(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){try{return await oe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:an})}catch(n){if(ie(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await oe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:an})}catch(r){if(ie(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await oe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:an})}catch(r){if(ie(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await oe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:r}}catch(n){if(ie(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await oe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ie(n))return{data:null,error:n};throw n}}}const Q_={getItem:i=>Qi()?globalThis.localStorage.getItem(i):null,setItem:(i,e)=>{Qi()&&globalThis.localStorage.setItem(i,e)},removeItem:i=>{Qi()&&globalThis.localStorage.removeItem(i)}};function uc(i={}){return{getItem:e=>i[e]||null,setItem:(e,n)=>{i[e]=n},removeItem:e=>{delete i[e]}}}function ev(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Wn={debug:!!(globalThis&&Qi()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class id extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class tv extends id{}async function nv(i,e,n){Wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Wn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){Wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,a.name);try{return await n()}finally{Wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,a.name)}}else{if(e===0)throw Wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new tv(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(Wn.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}ev();const iv={url:x_,storageKey:A_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:P_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Ni=30*1e3,cc=3;async function hc(i,e,n){return await n()}class rr{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=rr.nextInstanceID,rr.nextInstanceID+=1,this.instanceID>0&&Lt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},iv),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new X_({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=ed(a.fetch),this.lock=a.lock||hc,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Lt()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=nv:this.lock=hc,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:Qi()?this.storage=Q_:(this.memoryStorage={},this.storage=uc(this.memoryStorage)):(this.memoryStorage={},this.storage=uc(this.memoryStorage)),Lt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Xh}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=C_(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Lt()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:l}=await this._getSessionFromURL(n,r);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),F_(l)){const f=(e=l.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:u,redirectType:h}=a;return this._debug("#_initialize()","detected session in URL",u,"redirect type",h),await this._saveSession(u),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ie(n)?{error:n}:{error:new nd("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,a;try{const l=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=e?.options)===null||a===void 0?void 0:a.captchaToken}},xform:nn}),{data:u,error:h}=l;if(h||!u)return{data:{user:null,session:null},error:h};const f=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:m,session:f},error:null}}catch(l){if(ie(l))return{data:{user:null,session:null},error:l};throw l}}async signUp(e){var n,r,a;try{let l;if("email"in e){const{email:g,password:_,options:v}=e;let b=null,S=null;this.flowType==="pkce"&&([b,S]=await Zn(this.storage,this.storageKey)),l=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:g,password:_,data:(n=v?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:b,code_challenge_method:S},xform:nn})}else if("phone"in e){const{phone:g,password:_,options:v}=e;l=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:_,data:(r=v?.data)!==null&&r!==void 0?r:{},channel:(a=v?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:nn})}else throw new Jr("You must provide either an email or phone number and a password");const{data:u,error:h}=l;if(h||!u)return{data:{user:null,session:null},error:h};const f=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:m,session:f},error:null}}catch(l){if(ie(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithPassword(e){try{let n;if("email"in e){const{email:l,password:u,options:h}=e;n=await oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:lc})}else if("phone"in e){const{phone:l,password:u,options:h}=e;n=await oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:lc})}else throw new Jr("You must provide either an email or phone number and a password");const{data:r,error:a}=n;return a?{data:{user:null,session:null},error:a}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new uo}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(n){if(ie(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await Gr(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(n??"").split("/");try{const{data:l,error:u}=await oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:nn});if(await Vr(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!l||!l.session||!l.user?{data:{user:null,session:null,redirectType:null},error:new uo}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:u})}catch(l){if(ie(l))return{data:{user:null,session:null,redirectType:null},error:l};throw l}}async signInWithIdToken(e){try{const{options:n,provider:r,token:a,access_token:l,nonce:u}=e,h=await oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:nn}),{data:f,error:m}=h;return m?{data:{user:null,session:null},error:m}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new uo}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:m})}catch(n){if(ie(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,a,l,u;try{if("email"in e){const{email:h,options:f}=e;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await Zn(this.storage,this.storageKey));const{error:_}=await oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(n=f?.data)!==null&&n!==void 0?n:{},create_user:(r=f?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:m,code_challenge_method:g},redirectTo:f?.emailRedirectTo});return{data:{user:null,session:null},error:_}}if("phone"in e){const{phone:h,options:f}=e,{data:m,error:g}=await oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(a=f?.data)!==null&&a!==void 0?a:{},create_user:(l=f?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},channel:(u=f?.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:m?.message_id},error:g}}throw new Jr("You must provide either an email or phone number.")}catch(h){if(ie(h))return{data:{user:null,session:null},error:h};throw h}}async verifyOtp(e){var n,r;try{let a,l;"options"in e&&(a=(n=e.options)===null||n===void 0?void 0:n.redirectTo,l=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:u,error:h}=await oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:nn});if(h)throw h;if(!u)throw new Error("An error occurred on token verification.");const f=u.session,m=u.user;return f?.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:m,session:f},error:null}}catch(a){if(ie(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var n,r,a;try{let l=null,u=null;return this.flowType==="pkce"&&([l,u]=await Zn(this.storage,this.storageKey)),await oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=e?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:u}),headers:this.headers,xform:K_})}catch(l){if(ie(l))return{data:null,error:l};throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new tn;const{error:a}=await oe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(ie(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:a,options:l}=e,{error:u}=await oe(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in e){const{phone:r,type:a,options:l}=e,{data:u,error:h}=await oe(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return{data:{user:null,session:null,messageId:u?.message_id},error:h}}throw new Jr("You must provide either an email or phone number and a type")}catch(n){if(ie(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Gr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let u=this.suppressGetSessionWarning;e=new Proxy(e,{get:(f,m,g)=>(!u&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,m,g))})}return{data:{session:e},error:null}}const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{session:null},error:l}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:an}):await this._useSession(async n=>{var r,a,l;const{data:u,error:h}=n;if(h)throw h;return!(!((r=u.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new tn}:await oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=u.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:an})})}catch(n){if(ie(n))return z_(n)&&(await this._removeSession(),await Vr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:a,error:l}=r;if(l)throw l;if(!a.session)throw new tn;const u=a.session;let h=null,f=null;this.flowType==="pkce"&&e.email!=null&&([h,f]=await Zn(this.storage,this.storageKey));const{data:m,error:g}=await oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:f}),jwt:u.access_token,xform:an});if(g)throw g;return u.user=m.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(r){if(ie(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return rc(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new tn;const n=Date.now()/1e3;let r=n,a=!0,l=null;const u=rc(e.access_token);if(u.exp&&(r=u.exp,a=r<=n),a){const{session:h,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!h)return{data:{user:null,session:null},error:null};l=h}else{const{data:h,error:f}=await this._getUser(e.access_token);if(f)throw f;l={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return{data:{user:l.user,session:l},error:null}}catch(n){if(ie(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:u,error:h}=n;if(h)throw h;e=(r=u.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new tn;const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{user:null,session:null},error:l}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ie(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Lt())throw new Yr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Yr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new sc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Yr("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new sc("No code detected.");const{data:A,error:E}=await this._exchangeCodeForSession(e.code);if(E)throw E;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:A.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:l,refresh_token:u,expires_in:h,expires_at:f,token_type:m}=e;if(!l||!h||!u||!m)throw new Yr("No session defined in URL");const g=Math.round(Date.now()/1e3),_=parseInt(h);let v=g+_;f&&(v=parseInt(f));const b=v-g;b*1e3<=Ni&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${_}s`);const S=v-_;g-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,v,g):g-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,v,g);const{data:y,error:x}=await this._getUser(l);if(x)throw x;const k={provider_token:r,provider_refresh_token:a,access_token:l,expires_in:_,expires_at:v,refresh_token:u,token_type:m,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:k,redirectType:e.type},error:null}}catch(r){if(ie(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Gr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:a,error:l}=n;if(l)return{error:l};const u=(r=a.session)===null||r===void 0?void 0:r.access_token;if(u){const{error:h}=await this.admin.signOut(u,e);if(h&&!(N_(h)&&(h.status===404||h.status===401||h.status===403)))return{error:h}}return e!=="others"&&(await this._removeSession(),await Vr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=k_(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,a;try{const{data:{session:l},error:u}=n;if(u)throw u;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,n={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await Zn(this.storage,this.storageKey,!0));try{return await oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if(ie(l))return{data:null,error:l};throw l}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(ie(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:a}=await this._useSession(async l=>{var u,h,f,m,g;const{data:_,error:v}=l;if(v)throw v;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await oe(this.fetch,"GET",b,{headers:this.headers,jwt:(g=(m=_.session)===null||m===void 0?void 0:m.access_token)!==null&&g!==void 0?g:void 0})});if(a)throw a;return Lt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:e.provider,url:r?.url},error:null}}catch(r){if(ie(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,a;const{data:l,error:u}=n;if(u)throw u;return await oe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(r=l.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(ie(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await O_(async a=>(a>0&&await E_(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:nn})),(a,l)=>{const u=200*Math.pow(2,a);return l&&co(l)&&Date.now()+u-r<Ni})}catch(r){if(this._debug(n,"error",r),ie(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Lt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Gr(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const a=Math.round(Date.now()/1e3),l=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<a+ic;if(this._debug(n,`session has${l?"":" not"} expired with margin of ${ic}s`),l){if(this.autoRefreshToken&&r.refresh_token){const{error:u}=await this._callRefreshToken(r.refresh_token);u&&(console.error(u),co(u)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new tn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Zs;const{data:l,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!l.session)throw new tn;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const h={session:l.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(l){if(this._debug(a,"error",l),ie(l)){const u={session:null,error:l};return co(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,n,r=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,n)}catch(f){l.push(f)}});if(await Promise.all(u),l.length>0){for(let h=0;h<l.length;h+=1)console.error(l[h]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await td(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Vr(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Lt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ni);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-e)/Ni);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Ni}ms, refresh threshold is ${cc} ticks`),a<=cc&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof id)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Lt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const a=[`provider=${encodeURIComponent(n)}`];if(r?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[l,u]=await Zn(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});a.push(h.toString())}if(r?.queryParams){const l=new URLSearchParams(r.queryParams);a.push(l.toString())}return r?.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:a,error:l}=n;return l?{data:null,error:l}:await oe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ie(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,a;const{data:l,error:u}=n;if(u)return{data:null,error:u};const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:f,error:m}=await oe(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(r=l?.session)===null||r===void 0?void 0:r.access_token});return m?{data:null,error:m}:(e.factorType==="totp"&&(!((a=f?.totp)===null||a===void 0)&&a.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(n){if(ie(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:l}=n;if(l)return{data:null,error:l};const{data:u,error:h}=await oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:h})})}catch(n){if(ie(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:l}=n;return l?{data:null,error:l}:await oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ie(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=e?.factors||[],a=r.filter(u=>u.factor_type==="totp"&&u.status==="verified"),l=r.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:r,totp:a,phone:l},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:a},error:l}=e;if(l)return{data:null,error:l};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const u=this._decodeJWT(a.access_token);let h=null;u.aal&&(h=u.aal);let f=h;((r=(n=a.user.factors)===null||n===void 0?void 0:n.filter(_=>_.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(f="aal2");const g=u.amr||[];return{data:{currentLevel:h,nextLevel:f,currentAuthenticationMethods:g},error:null}}))}}rr.nextInstanceID=0;const rv=rr;class sv extends rv{constructor(e){super(e)}}var av=function(i,e,n,r){function a(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function h(g){try{m(r.next(g))}catch(_){u(_)}}function f(g){try{m(r.throw(g))}catch(_){u(_)}}function m(g){g.done?l(g.value):a(g.value).then(h,f)}m((r=r.apply(i,e||[])).next())})};class ov{constructor(e,n,r){var a,l,u;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const h=w_(e);this.realtimeUrl=`${h}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${h}/auth/v1`,this.storageUrl=`${h}/storage/v1`,this.functionsUrl=`${h}/functions/v1`;const f=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,m={db:d_,realtime:m_,auth:Object.assign(Object.assign({},f_),{storageKey:f}),global:h_},g=b_(r??{},m);this.storageKey=(a=g.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=g.global.headers)!==null&&l!==void 0?l:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(_,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=g.auth)!==null&&u!==void 0?u:{},this.headers,g.global.fetch),this.fetch=v_(n,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new Mg(`${h}/rest/v1`,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),g.accessToken||this._listenForAuthEvents()}get functions(){return new og(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new l_(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return av(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:a,storageKey:l,flowType:u,lock:h,debug:f},m,g){var _;const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new sv({url:this.authUrl,headers:Object.assign(Object.assign({},v),m),storageKey:l,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:a,flowType:u,lock:h,debug:f,fetch:g,hasCustomAuthorizationHeader:(_="Authorization"in this.headers)!==null&&_!==void 0?_:!1})}_initRealtimeClient(e){return new Gg(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r?.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const lv=(i,e,n)=>new ov(i,e,n);var rd={},Ws={},Xe={},te={};Object.defineProperty(te,"__esModule",{value:!0});te.areaConversion=te.timeConversion=te.distanceConversion=te.altitudeKeys=te.latitudeKeys=te.longitudeKeys=te.MAXLON=te.MINLON=te.MAXLAT=te.MINLAT=te.earthRadius=te.sexagesimalPattern=void 0;var uv=/^([0-9]{1,3})°\s*([0-9]{1,3}(?:\.(?:[0-9]{1,}))?)['′]\s*(([0-9]{1,3}(\.([0-9]{1,}))?)["″]\s*)?([NEOSW]?)$/;te.sexagesimalPattern=uv;var cv=6378137;te.earthRadius=cv;var hv=-90;te.MINLAT=hv;var dv=90;te.MAXLAT=dv;var fv=-180;te.MINLON=fv;var mv=180;te.MAXLON=mv;var pv=["lng","lon","longitude",0];te.longitudeKeys=pv;var gv=["lat","latitude",1];te.latitudeKeys=gv;var _v=["alt","altitude","elevation","elev",2];te.altitudeKeys=_v;var vv={m:1,km:.001,cm:100,mm:1e3,mi:1/1609.344,sm:1/1852.216,ft:100/30.48,in:100/2.54,yd:1/.9144};te.distanceConversion=vv;var yv={m:60,h:3600,d:86400};te.timeConversion=yv;var bt={m2:1,km2:1e-6,ha:1e-4,a:.01,ft2:10.763911,yd2:1.19599,in2:1550.0031};te.areaConversion=bt;bt.sqm=bt.m2;bt.sqkm=bt.km2;bt.sqft=bt.ft2;bt.sqyd=bt.yd2;bt.sqin=bt.in2;var Cn={};Object.defineProperty(Cn,"__esModule",{value:!0});Cn.default=void 0;var wv=function(e,n){return n.reduce(function(r,a){if(typeof e>"u"||e===null)throw new Error("'".concat(e,"' is no valid coordinate."));return Object.prototype.hasOwnProperty.call(e,a)&&typeof a<"u"&&typeof r>"u"?(r=a,a):r},void 0)},bv=wv;Cn.default=bv;var di={},Tn={};Object.defineProperty(Tn,"__esModule",{value:!0});Tn.default=void 0;var xv=function(e){var n=e.toString().trim();return isNaN(parseFloat(n))?!1:parseFloat(n)===Number(n)},Av=xv;Tn.default=Av;var Ln={};Object.defineProperty(Ln,"__esModule",{value:!0});Ln.default=void 0;var Pv=te,Sv=function(e){return Pv.sexagesimalPattern.test(e.toString().trim())},kv=Sv;Ln.default=kv;var En={};Object.defineProperty(En,"__esModule",{value:!0});En.default=void 0;var Cv=te,Tv=function(e){var n=new RegExp(Cv.sexagesimalPattern).exec(e.toString().trim());if(typeof n>"u"||n===null)throw new Error("Given value is not in sexagesimal format");var r=Number(n[2])/60||0,a=Number(n[4])/3600||0,l=parseFloat(n[1])+r+a;return["S","W"].includes(n[7])?-l:l},Lv=Tv;En.default=Lv;var ur={},fi={};Object.defineProperty(fi,"__esModule",{value:!0});fi.default=void 0;var ho=te,fo=Ev(Cn);function Ev(i){return i.__esModule?i:{default:i}}function dc(i,e){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(i,a).enumerable})),n.push.apply(n,r)}return n}function Ov(i){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dc(Object(n),!0).forEach(function(r){$v(i,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):dc(Object(n)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(n,r))})}return i}function $v(i,e,n){return e in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}var Mv=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{longitude:ho.longitudeKeys,latitude:ho.latitudeKeys,altitude:ho.altitudeKeys},r=(0,fo.default)(e,n.longitude),a=(0,fo.default)(e,n.latitude),l=(0,fo.default)(e,n.altitude);return Ov({latitude:a,longitude:r},l?{altitude:l}:{})},Rv=Mv;fi.default=Rv;var cr={};Object.defineProperty(cr,"__esModule",{value:!0});cr.default=void 0;var Iv=yl(Tn),qv=yl(Ln),jv=yl(En),fc=te;function yl(i){return i&&i.__esModule?i:{default:i}}var Dv=function i(e){return(0,Iv.default)(e)?!(parseFloat(e)>fc.MAXLAT||e<fc.MINLAT):(0,qv.default)(e)?i((0,jv.default)(e)):!1},Bv=Dv;cr.default=Bv;var hr={};Object.defineProperty(hr,"__esModule",{value:!0});hr.default=void 0;var Nv=wl(Tn),zv=wl(Ln),Fv=wl(En),mc=te;function wl(i){return i&&i.__esModule?i:{default:i}}var Uv=function i(e){return(0,Nv.default)(e)?!(parseFloat(e)>mc.MAXLON||e<mc.MINLON):(0,zv.default)(e)?i((0,Fv.default)(e)):!1},Zv=Uv;hr.default=Zv;Object.defineProperty(ur,"__esModule",{value:!0});ur.default=void 0;var Wv=bl(fi),pc=bl(cr),gc=bl(hr);function bl(i){return i&&i.__esModule?i:{default:i}}var Hv=function(e){var n=(0,Wv.default)(e),r=n.latitude,a=n.longitude;if(Array.isArray(e)&&e.length>=2)return(0,gc.default)(e[0])&&(0,pc.default)(e[1]);if(typeof r>"u"||typeof a>"u")return!1;var l=e[a],u=e[r];return!(typeof u>"u"||typeof l>"u"||(0,pc.default)(u)===!1||(0,gc.default)(l)===!1)},Kv=Hv;ur.default=Kv;Object.defineProperty(di,"__esModule",{value:!0});di.default=void 0;var Gv=dr(Tn),Vv=dr(Ln),Jv=dr(En),_c=dr(ur),Yv=dr(fi);function dr(i){return i&&i.__esModule?i:{default:i}}function vc(i,e){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(i,a).enumerable})),n.push.apply(n,r)}return n}function mo(i){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vc(Object(n),!0).forEach(function(r){Go(i,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):vc(Object(n)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(n,r))})}return i}function Go(i,e,n){return e in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}var Xv=function i(e){if((0,Gv.default)(e))return Number(e);if((0,Vv.default)(e))return(0,Jv.default)(e);if((0,_c.default)(e)){var n=(0,Yv.default)(e);return Array.isArray(e)?e.map(function(r,a){return[0,1].includes(a)?i(r):r}):mo(mo(mo({},e),n.latitude&&Go({},n.latitude,i(e[n.latitude]))),n.longitude&&Go({},n.longitude,i(e[n.longitude])))}return Array.isArray(e)?e.map(function(r){return(0,_c.default)(r)?i(r):r}):e},Qv=Xv;di.default=Qv;Object.defineProperty(Xe,"__esModule",{value:!0});Xe.default=void 0;var ey=te,ty=sd(Cn),ny=sd(di);function sd(i){return i&&i.__esModule?i:{default:i}}var iy=function(e,n){var r=(0,ty.default)(e,ey.latitudeKeys);if(!(typeof r>"u"||r===null)){var a=e[r];return n===!0?a:(0,ny.default)(a)}},ry=iy;Xe.default=ry;var Qe={};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.default=void 0;var sy=te,ay=ad(Cn),oy=ad(di);function ad(i){return i&&i.__esModule?i:{default:i}}var ly=function(e,n){var r=(0,ay.default)(e,sy.longitudeKeys);if(!(typeof r>"u"||r===null)){var a=e[r];return n===!0?a:(0,oy.default)(a)}},uy=ly;Qe.default=uy;var ft={};Object.defineProperty(ft,"__esModule",{value:!0});ft.default=void 0;var cy=function(e){return e*Math.PI/180},hy=cy;ft.default=hy;var Kt={};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.default=void 0;var dy=function(e){return e*180/Math.PI},fy=dy;Kt.default=fy;Object.defineProperty(Ws,"__esModule",{value:!0});Ws.default=void 0;var my=Hs(Xe),py=Hs(Qe),po=Hs(ft),go=Hs(Kt),yc=te;function Hs(i){return i&&i.__esModule?i:{default:i}}var gy=function(e,n,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:6371e3,l=(0,my.default)(e),u=(0,py.default)(e),h=n/a,f=(0,po.default)(r),m=(0,po.default)(l),g=(0,po.default)(u),_=Math.asin(Math.sin(m)*Math.cos(h)+Math.cos(m)*Math.sin(h)*Math.cos(f)),v=g+Math.atan2(Math.sin(f)*Math.sin(h)*Math.cos(m),Math.cos(h)-Math.sin(m)*Math.sin(_)),b=(0,go.default)(v);return(b<yc.MINLON||b>yc.MAXLON)&&(v=(v+3*Math.PI)%(2*Math.PI)-Math.PI,b=(0,go.default)(v)),{latitude:(0,go.default)(_),longitude:b}},_y=gy;Ws.default=_y;var Ks={};Object.defineProperty(Ks,"__esModule",{value:!0});Ks.default=void 0;var vy=te,yy=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"m",r=vy.areaConversion[n];if(r)return e*r;throw new Error("Invalid unit used for area conversion.")},wy=yy;Ks.default=wy;var Gs={};Object.defineProperty(Gs,"__esModule",{value:!0});Gs.default=void 0;var by=te,xy=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"m",r=by.distanceConversion[n];if(r)return e*r;throw new Error("Invalid unit used for distance conversion.")},Ay=xy;Gs.default=Ay;var Vs={};Object.defineProperty(Vs,"__esModule",{value:!0});Vs.default=void 0;var Xr=te,Py=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"kmh";switch(n){case"kmh":return e*Xr.timeConversion.h*Xr.distanceConversion.km;case"mph":return e*Xr.timeConversion.h*Xr.distanceConversion.mi;default:return e}},Sy=Py;Vs.default=Sy;var Js={};Object.defineProperty(Js,"__esModule",{value:!0});Js.default=void 0;function wc(i,e){return Ly(i)||Ty(i,e)||Cy(i,e)||ky()}function ky(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cy(i,e){if(i){if(typeof i=="string")return bc(i,e);var n=Object.prototype.toString.call(i).slice(8,-1);if(n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set")return Array.from(i);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bc(i,e)}}function bc(i,e){(e==null||e>i.length)&&(e=i.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=i[n];return r}function Ty(i,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(i)))){var n=[],r=!0,a=!1,l=void 0;try{for(var u=i[Symbol.iterator](),h;!(r=(h=u.next()).done)&&(n.push(h.value),!(e&&n.length===e));r=!0);}catch(f){a=!0,l=f}finally{try{!r&&u.return!=null&&u.return()}finally{if(a)throw l}}return n}}function Ly(i){if(Array.isArray(i))return i}var Ey=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4,r=Math.pow(10,n);return Math.round(e*r)/r},Oy=function(e){var n=e.toString().split("."),r=wc(n,2),a=r[0],l=r[1],u=Math.abs(Number(a)),h=+("0."+(l||0))*60,f=h.toString().split("."),m=Math.floor(h),g=Ey(+("0."+(f[1]||0))*60).toString(),_=g.split("."),v=wc(_,2),b=v[0],S=v[1],y=S===void 0?"0":S;return u+"° "+m.toString().padStart(2,"0")+"' "+b.padStart(2,"0")+"."+y.padEnd(1,"0")+'"'},$y=Oy;Js.default=$y;var Ys={},fr={},Rt={},mr={};Object.defineProperty(mr,"__esModule",{value:!0});mr.default=void 0;var My=function(e){return e>1?1:e<-1?-1:e},Ry=My;mr.default=Ry;Object.defineProperty(Rt,"__esModule",{value:!0});Rt.default=void 0;var xc=Xs(Xe),Ac=Xs(Qe),Hn=Xs(ft),Iy=Xs(mr),qy=te;function Xs(i){return i&&i.__esModule?i:{default:i}}var jy=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;r=typeof r<"u"&&!isNaN(r)?r:1;var a=(0,xc.default)(e),l=(0,Ac.default)(e),u=(0,xc.default)(n),h=(0,Ac.default)(n),f=Math.acos((0,Iy.default)(Math.sin((0,Hn.default)(u))*Math.sin((0,Hn.default)(a))+Math.cos((0,Hn.default)(u))*Math.cos((0,Hn.default)(a))*Math.cos((0,Hn.default)(l)-(0,Hn.default)(h))))*qy.earthRadius;return Math.round(f/r)*r},Dy=jy;Rt.default=Dy;Object.defineProperty(fr,"__esModule",{value:!0});fr.default=void 0;var Pc=By(Rt);function By(i){return i.__esModule?i:{default:i}}var Ny=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Pc.default;return r=typeof r=="function"?r:Pc.default,n.slice().sort(function(a,l){return r(e,a)-r(e,l)})},zy=Ny;fr.default=zy;Object.defineProperty(Ys,"__esModule",{value:!0});Ys.default=void 0;var Fy=Uy(fr);function Uy(i){return i.__esModule?i:{default:i}}var Zy=function(e,n){return(0,Fy.default)(e,n)[0]},Wy=Zy;Ys.default=Wy;var Qs={};Object.defineProperty(Qs,"__esModule",{value:!0});Qs.default=void 0;var _o=xl(ft),Hy=xl(Xe),Sc=xl(Qe),kc=te;function xl(i){return i&&i.__esModule?i:{default:i}}var Ky=function(e){var n=0;if(e.length>2){for(var r,a,l,u=0;u<e.length;u++){u===e.length-2?(r=e.length-2,a=e.length-1,l=0):u===e.length-1?(r=e.length-1,a=0,l=1):(r=u,a=u+1,l=u+2);var h=(0,Sc.default)(e[r]),f=(0,Hy.default)(e[a]),m=(0,Sc.default)(e[l]);n+=((0,_o.default)(m)-(0,_o.default)(h))*Math.sin((0,_o.default)(f))}n=n*kc.earthRadius*kc.earthRadius/2}return Math.abs(n)},Gy=Ky;Qs.default=Gy;var pr={};Object.defineProperty(pr,"__esModule",{value:!0});pr.default=void 0;var Vy=od(Xe),Jy=od(Qe);function od(i){return i&&i.__esModule?i:{default:i}}var Yy=function(e){if(Array.isArray(e)===!1||e.length===0)throw new Error("No points were given.");return e.reduce(function(n,r){var a=(0,Vy.default)(r),l=(0,Jy.default)(r);return{maxLat:Math.max(a,n.maxLat),minLat:Math.min(a,n.minLat),maxLng:Math.max(l,n.maxLng),minLng:Math.min(l,n.minLng)}},{maxLat:-1/0,minLat:1/0,maxLng:-1/0,minLng:1/0})},Xy=Yy;pr.default=Xy;var ea={};Object.defineProperty(ea,"__esModule",{value:!0});ea.default=void 0;var Qy=ta(Xe),ew=ta(Qe),Kn=ta(ft),Qr=ta(Kt),zi=te;function ta(i){return i&&i.__esModule?i:{default:i}}var tw=function(e,n){var r=(0,Qy.default)(e),a=(0,ew.default)(e),l=(0,Kn.default)(r),u=(0,Kn.default)(a),h=n/zi.earthRadius,f=l-h,m=l+h,g=(0,Kn.default)(zi.MAXLAT),_=(0,Kn.default)(zi.MINLAT),v=(0,Kn.default)(zi.MAXLON),b=(0,Kn.default)(zi.MINLON),S,y;if(f>_&&m<g){var x=Math.asin(Math.sin(h)/Math.cos(l));S=u-x,S<b&&(S+=Math.PI*2),y=u+x,y>v&&(y-=Math.PI*2)}else f=Math.max(f,_),m=Math.min(m,g),S=b,y=v;return[{latitude:(0,Qr.default)(f),longitude:(0,Qr.default)(S)},{latitude:(0,Qr.default)(m),longitude:(0,Qr.default)(y)}]},nw=tw;ea.default=nw;var na={};Object.defineProperty(na,"__esModule",{value:!0});na.default=void 0;var iw=ia(Xe),rw=ia(Qe),Cc=ia(ft),Tc=ia(Kt);function ia(i){return i&&i.__esModule?i:{default:i}}var sw=function(e){if(Array.isArray(e)===!1||e.length===0)return!1;var n=e.length,r=e.reduce(function(h,f){var m=(0,Cc.default)((0,iw.default)(f)),g=(0,Cc.default)((0,rw.default)(f));return{X:h.X+Math.cos(m)*Math.cos(g),Y:h.Y+Math.cos(m)*Math.sin(g),Z:h.Z+Math.sin(m)}},{X:0,Y:0,Z:0}),a=r.X/n,l=r.Y/n,u=r.Z/n;return{longitude:(0,Tc.default)(Math.atan2(l,a)),latitude:(0,Tc.default)(Math.atan2(u,Math.sqrt(a*a+l*l)))}},aw=sw;na.default=aw;var ra={};Object.defineProperty(ra,"__esModule",{value:!0});ra.default=void 0;var ow=lw(pr);function lw(i){return i.__esModule?i:{default:i}}var uw=function(e){var n=(0,ow.default)(e),r=n.minLat+(n.maxLat-n.minLat)/2,a=n.minLng+(n.maxLng-n.minLng)/2;return{latitude:parseFloat(r.toFixed(6)),longitude:parseFloat(a.toFixed(6))}},cw=uw;ra.default=cw;var sa={},gr={};Object.defineProperty(gr,"__esModule",{value:!0});gr.default=void 0;var Lc=aa(Xe),Ec=aa(Qe),es=aa(ft),hw=aa(Kt);function aa(i){return i&&i.__esModule?i:{default:i}}var dw=function(e,n){var r=(0,es.default)((0,Ec.default)(n))-(0,es.default)((0,Ec.default)(e)),a=Math.log(Math.tan((0,es.default)((0,Lc.default)(n))/2+Math.PI/4)/Math.tan((0,es.default)((0,Lc.default)(e))/2+Math.PI/4));return Math.abs(r)>Math.PI&&(r>0?r=(Math.PI*2-r)*-1:r=Math.PI*2+r),((0,hw.default)(Math.atan2(r,a))+360)%360},fw=dw;gr.default=fw;Object.defineProperty(sa,"__esModule",{value:!0});sa.default=void 0;var Oc=mw(gr);function mw(i){return i.__esModule?i:{default:i}}var pw=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Oc.default,a=typeof r=="function"?r(e,n):(0,Oc.default)(e,n);if(isNaN(a))throw new Error("Could not calculate bearing for given points. Check your bearing function");switch(Math.round(a/22.5)){case 1:return"NNE";case 2:return"NE";case 3:return"ENE";case 4:return"E";case 5:return"ESE";case 6:return"SE";case 7:return"SSE";case 8:return"S";case 9:return"SSW";case 10:return"SW";case 11:return"WSW";case 12:return"W";case 13:return"WNW";case 14:return"NW";case 15:return"NNW";default:return"N"}},gw=pw;sa.default=gw;var _r={};Object.defineProperty(_r,"__esModule",{value:!0});_r.default=void 0;var vo=ld(Rt),$c=ld(mr);function ld(i){return i&&i.__esModule?i:{default:i}}var _w=function(e,n,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,l=(0,vo.default)(n,e,a),u=(0,vo.default)(e,r,a),h=(0,vo.default)(n,r,a),f=Math.acos((0,$c.default)((l*l+h*h-u*u)/(2*l*h))),m=Math.acos((0,$c.default)((u*u+h*h-l*l)/(2*u*h)));return f>Math.PI/2?l:m>Math.PI/2?u:Math.sin(f)*l},vw=_w;_r.default=vw;var oa={};Object.defineProperty(oa,"__esModule",{value:!0});oa.default=void 0;var Mc=la(Xe),Rc=la(Qe),Nt=la(ft),yw=la(Kt);function la(i){return i&&i.__esModule?i:{default:i}}var ww=function(e,n){var r=(0,Mc.default)(n),a=(0,Rc.default)(n),l=(0,Mc.default)(e),u=(0,Rc.default)(e),h=((0,yw.default)(Math.atan2(Math.sin((0,Nt.default)(a)-(0,Nt.default)(u))*Math.cos((0,Nt.default)(r)),Math.cos((0,Nt.default)(l))*Math.sin((0,Nt.default)(r))-Math.sin((0,Nt.default)(l))*Math.cos((0,Nt.default)(r))*Math.cos((0,Nt.default)(a)-(0,Nt.default)(u))))+360)%360;return h},bw=ww;oa.default=bw;var ua={};Object.defineProperty(ua,"__esModule",{value:!0});ua.default=void 0;var xw=Aw(Rt);function Aw(i){return i.__esModule?i:{default:i}}function ms(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ms=function(n){return typeof n}:ms=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ms(i)}var Pw=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xw.default;return e.reduce(function(r,a){return ms(r)==="object"&&r.last!==null&&(r.distance+=n(a,r.last)),r.last=a,r},{last:null,distance:0}).distance},Sw=Pw;ua.default=Sw;var ca={};Object.defineProperty(ca,"__esModule",{value:!0});ca.default=void 0;var Ic=Al(Xe),qc=Al(Qe),yo=Al(ft),jc=te;function Al(i){return i&&i.__esModule?i:{default:i}}var kw=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;r=typeof r<"u"&&!isNaN(r)?r:1;var a=(0,Ic.default)(e),l=(0,qc.default)(e),u=(0,Ic.default)(n),h=(0,qc.default)(n),f=6356752314245e-6,m=1/298.257223563,g=(0,yo.default)(h-l),_,v,b,S,y,x,k=Math.atan((1-m)*Math.tan((0,yo.default)(parseFloat(a)))),A=Math.atan((1-m)*Math.tan((0,yo.default)(parseFloat(u)))),E=Math.sin(k),T=Math.cos(k),$=Math.sin(A),I=Math.cos(A),M=g,B,N=100;do{var D=Math.sin(M),U=Math.cos(M);if(x=Math.sqrt(I*D*(I*D)+(T*$-E*I*U)*(T*$-E*I*U)),x===0)return 0;_=E*$+T*I*U,v=Math.atan2(x,_),b=T*I*D/x,S=1-b*b,y=_-2*E*$/S,isNaN(y)&&(y=0);var he=m/16*S*(4+m*(4-3*S));B=M,M=g+(1-he)*m*b*(v+he*x*(y+he*_*(-1+2*y*y)))}while(Math.abs(M-B)>1e-12&&--N>0);if(N===0)return NaN;var Ae=S*(jc.earthRadius*jc.earthRadius-f*f)/(f*f),V=1+Ae/16384*(4096+Ae*(-768+Ae*(320-175*Ae))),X=Ae/1024*(256+Ae*(-128+Ae*(74-47*Ae))),Y=X*x*(y+X/4*(_*(-1+2*y*y)-X/6*y*(-3+4*x*x)*(-3+4*y*y))),Pe=f*V*(v-Y);return Math.round(Pe/r)*r},Cw=kw;ca.default=Cw;var ha={};Object.defineProperty(ha,"__esModule",{value:!0});ha.default=void 0;var Tw=function(e){if(/^(NNE|NE|NNW|N)$/.test(e))return"N";if(/^(ENE|E|ESE|SE)$/.test(e))return"E";if(/^(SSE|S|SSW|SW)$/.test(e))return"S";if(/^(WSW|W|WNW|NW)$/.test(e))return"W"},Lw=Tw;ha.default=Lw;var da={};Object.defineProperty(da,"__esModule",{value:!0});da.default=void 0;var Ew=Ow(Rt);function Ow(i){return i.__esModule?i:{default:i}}var $w=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ew.default,a=r(e,n),l=Number(n.time)-Number(e.time),u=a/l*1e3;return u},Mw=$w;da.default=Mw;var fa={};Object.defineProperty(fa,"__esModule",{value:!0});fa.default=void 0;var wo=Rw(Rt);function Rw(i){return i.__esModule?i:{default:i}}var Iw=function(e,n,r){return(0,wo.default)(n,e)+(0,wo.default)(e,r)===(0,wo.default)(n,r)},qw=Iw;fa.default=qw;var ma={};Object.defineProperty(ma,"__esModule",{value:!0});ma.default=void 0;var ts=ud(Xe),ht=ud(Qe);function ud(i){return i&&i.__esModule?i:{default:i}}var jw=function(e,n){for(var r=!1,a=n.length,l=-1,u=a-1;++l<a;u=l)((0,ht.default)(n[l])<=(0,ht.default)(e)&&(0,ht.default)(e)<(0,ht.default)(n[u])||(0,ht.default)(n[u])<=(0,ht.default)(e)&&(0,ht.default)(e)<(0,ht.default)(n[l]))&&(0,ts.default)(e)<((0,ts.default)(n[u])-(0,ts.default)(n[l]))*((0,ht.default)(e)-(0,ht.default)(n[l]))/((0,ht.default)(n[u])-(0,ht.default)(n[l]))+(0,ts.default)(n[l])&&(r=!r);return r},Dw=jw;ma.default=Dw;var pa={};Object.defineProperty(pa,"__esModule",{value:!0});pa.default=void 0;var Bw=Nw(_r);function Nw(i){return i.__esModule?i:{default:i}}var zw=function(e,n,r,a){return(0,Bw.default)(e,n,r)<a},Fw=zw;pa.default=Fw;var ga={};Object.defineProperty(ga,"__esModule",{value:!0});ga.default=void 0;var Uw=Zw(Rt);function Zw(i){return i.__esModule?i:{default:i}}var Ww=function(e,n,r){var a=.01;return(0,Uw.default)(e,n,a)<r},Hw=Ww;ga.default=Hw;var _a={};Object.defineProperty(_a,"__esModule",{value:!0});_a.default=void 0;function Kw(i,e){return Yw(i)||Jw(i,e)||Vw(i,e)||Gw()}function Gw(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vw(i,e){if(i){if(typeof i=="string")return Dc(i,e);var n=Object.prototype.toString.call(i).slice(8,-1);if(n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set")return Array.from(i);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dc(i,e)}}function Dc(i,e){(e==null||e>i.length)&&(e=i.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=i[n];return r}function Jw(i,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(i)))){var n=[],r=!0,a=!1,l=void 0;try{for(var u=i[Symbol.iterator](),h;!(r=(h=u.next()).done)&&(n.push(h.value),!(e&&n.length===e));r=!0);}catch(f){a=!0,l=f}finally{try{!r&&u.return!=null&&u.return()}finally{if(a)throw l}}return n}}function Yw(i){if(Array.isArray(i))return i}var Xw=function(e){if(!e.startsWith("POLYGON"))throw new Error("Invalid wkt.");var n=e.slice(e.indexOf("(")+2,e.indexOf(")")).split(", "),r=n.map(function(a){var l=a.split(" "),u=Kw(l,2),h=u[0],f=u[1];return{longitude:parseFloat(h),latitude:parseFloat(f)}});return r},Qw=Xw;_a.default=Qw;(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e={computeDestinationPoint:!0,convertArea:!0,convertDistance:!0,convertSpeed:!0,decimalToSexagesimal:!0,findNearest:!0,getAreaOfPolygon:!0,getBounds:!0,getBoundsOfDistance:!0,getCenter:!0,getCenterOfBounds:!0,getCompassDirection:!0,getCoordinateKey:!0,getCoordinateKeys:!0,getDistance:!0,getDistanceFromLine:!0,getGreatCircleBearing:!0,getLatitude:!0,getLongitude:!0,getPathLength:!0,getPreciseDistance:!0,getRhumbLineBearing:!0,getRoughCompassDirection:!0,getSpeed:!0,isDecimal:!0,isPointInLine:!0,isPointInPolygon:!0,isPointNearLine:!0,isPointWithinRadius:!0,isSexagesimal:!0,isValidCoordinate:!0,isValidLatitude:!0,isValidLongitude:!0,orderByDistance:!0,sexagesimalToDecimal:!0,toDecimal:!0,toRad:!0,toDeg:!0,wktToPolygon:!0};Object.defineProperty(i,"computeDestinationPoint",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(i,"convertArea",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(i,"convertDistance",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(i,"convertSpeed",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(i,"decimalToSexagesimal",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(i,"findNearest",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(i,"getAreaOfPolygon",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(i,"getBounds",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(i,"getBoundsOfDistance",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(i,"getCenter",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(i,"getCenterOfBounds",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(i,"getCompassDirection",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(i,"getCoordinateKey",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(i,"getCoordinateKeys",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(i,"getDistance",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(i,"getDistanceFromLine",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(i,"getGreatCircleBearing",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(i,"getLatitude",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(i,"getLongitude",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(i,"getPathLength",{enumerable:!0,get:function(){return $.default}}),Object.defineProperty(i,"getPreciseDistance",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(i,"getRhumbLineBearing",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(i,"getRoughCompassDirection",{enumerable:!0,get:function(){return B.default}}),Object.defineProperty(i,"getSpeed",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(i,"isDecimal",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(i,"isPointInLine",{enumerable:!0,get:function(){return U.default}}),Object.defineProperty(i,"isPointInPolygon",{enumerable:!0,get:function(){return he.default}}),Object.defineProperty(i,"isPointNearLine",{enumerable:!0,get:function(){return Ae.default}}),Object.defineProperty(i,"isPointWithinRadius",{enumerable:!0,get:function(){return V.default}}),Object.defineProperty(i,"isSexagesimal",{enumerable:!0,get:function(){return X.default}}),Object.defineProperty(i,"isValidCoordinate",{enumerable:!0,get:function(){return Y.default}}),Object.defineProperty(i,"isValidLatitude",{enumerable:!0,get:function(){return Pe.default}}),Object.defineProperty(i,"isValidLongitude",{enumerable:!0,get:function(){return G.default}}),Object.defineProperty(i,"orderByDistance",{enumerable:!0,get:function(){return Ue.default}}),Object.defineProperty(i,"sexagesimalToDecimal",{enumerable:!0,get:function(){return H.default}}),Object.defineProperty(i,"toDecimal",{enumerable:!0,get:function(){return ue.default}}),Object.defineProperty(i,"toRad",{enumerable:!0,get:function(){return ve.default}}),Object.defineProperty(i,"toDeg",{enumerable:!0,get:function(){return Se.default}}),Object.defineProperty(i,"wktToPolygon",{enumerable:!0,get:function(){return ye.default}});var n=q(Ws),r=q(Ks),a=q(Gs),l=q(Vs),u=q(Js),h=q(Ys),f=q(Qs),m=q(pr),g=q(ea),_=q(na),v=q(ra),b=q(sa),S=q(Cn),y=q(fi),x=q(Rt),k=q(_r),A=q(oa),E=q(Xe),T=q(Qe),$=q(ua),I=q(ca),M=q(gr),B=q(ha),N=q(da),D=q(Tn),U=q(fa),he=q(ma),Ae=q(pa),V=q(ga),X=q(Ln),Y=q(ur),Pe=q(cr),G=q(hr),Ue=q(fr),H=q(En),ue=q(di),ve=q(ft),Se=q(Kt),ye=q(_a),ae=te;Object.keys(ae).forEach(function(F){F==="default"||F==="__esModule"||Object.prototype.hasOwnProperty.call(e,F)||Object.defineProperty(i,F,{enumerable:!0,get:function(){return ae[F]}})});function q(F){return F&&F.__esModule?F:{default:F}}})(rd);async function eb(i){const r="https://fr24api.flightradar24.com/api/live/flight-positions/full",l={Accept:"application/json",Authorization:"Bearer undefined","Accept-Version":"v1"};try{if(i===null)console.log("API nije pronašao granice zračnog prostora");else{const u=await fetch(`${r}?bounds=${i}`,{method:"GET",headers:l});if(!u.ok){const f=await u.text();throw new Error(`Error ${u.status}: ${f}`)}const h=await u.json();if(h.length!==0)return h.data.map(m=>({lat:m.lat,lon:m.lon,alt:m.alt,call:m.callsign,brz:m.gspeed,modelA:m.type,livery:m.painted_as,registration:m.reg}))}}catch(u){throw console.error("Greška pri dohvaćanju podataka o letovima:",u),u}}async function tb(i,e){const n=`https://api.open-meteo.com/v1/elevation?latitude=${i}&longitude=${e}`;try{if(i===null||e===null)return console.log("API nije uspio dohvatiti latitudu ili longitudu"),null;const r=await fetch(n);if(!r.ok){const l=await r.text();throw new Error(`Error ${r.status}: ${l}`)}const a=await r.json();return a!==null?a.elevation:(console.log("API nije pronašao podatke za elevaciju."),null)}catch(r){throw console.error("Greška pri dohvaćanju podataka o elevaciji:",r),r}}const Vo="RFC3986",Jo={RFC1738:i=>String(i).replace(/%20/g,"+"),RFC3986:i=>String(i)},nb="RFC1738",ib=Array.isArray,Tt=(()=>{const i=[];for(let e=0;e<256;++e)i.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return i})(),bo=1024,rb=(i,e,n,r,a)=>{if(i.length===0)return i;let l=i;if(typeof i=="symbol"?l=Symbol.prototype.toString.call(i):typeof i!="string"&&(l=String(i)),n==="iso-8859-1")return escape(l).replace(/%u[0-9a-f]{4}/gi,function(h){return"%26%23"+parseInt(h.slice(2),16)+"%3B"});let u="";for(let h=0;h<l.length;h+=bo){const f=l.length>=bo?l.slice(h,h+bo):l,m=[];for(let g=0;g<f.length;++g){let _=f.charCodeAt(g);if(_===45||_===46||_===95||_===126||_>=48&&_<=57||_>=65&&_<=90||_>=97&&_<=122||a===nb&&(_===40||_===41)){m[m.length]=f.charAt(g);continue}if(_<128){m[m.length]=Tt[_];continue}if(_<2048){m[m.length]=Tt[192|_>>6]+Tt[128|_&63];continue}if(_<55296||_>=57344){m[m.length]=Tt[224|_>>12]+Tt[128|_>>6&63]+Tt[128|_&63];continue}g+=1,_=65536+((_&1023)<<10|f.charCodeAt(g)&1023),m[m.length]=Tt[240|_>>18]+Tt[128|_>>12&63]+Tt[128|_>>6&63]+Tt[128|_&63]}u+=m.join("")}return u};function sb(i){return!i||typeof i!="object"?!1:!!(i.constructor&&i.constructor.isBuffer&&i.constructor.isBuffer(i))}function Bc(i,e){if(ib(i)){const n=[];for(let r=0;r<i.length;r+=1)n.push(e(i[r]));return n}return e(i)}const ab=Object.prototype.hasOwnProperty,cd={brackets(i){return String(i)+"[]"},comma:"comma",indices(i,e){return String(i)+"["+e+"]"},repeat(i){return String(i)}},Et=Array.isArray,ob=Array.prototype.push,hd=function(i,e){ob.apply(i,Et(e)?e:[e])},lb=Date.prototype.toISOString,$e={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:rb,encodeValuesOnly:!1,format:Vo,formatter:Jo[Vo],indices:!1,serializeDate(i){return lb.call(i)},skipNulls:!1,strictNullHandling:!1};function ub(i){return typeof i=="string"||typeof i=="number"||typeof i=="boolean"||typeof i=="symbol"||typeof i=="bigint"}const xo={};function dd(i,e,n,r,a,l,u,h,f,m,g,_,v,b,S,y,x,k){let A=i,E=k,T=0,$=!1;for(;(E=E.get(xo))!==void 0&&!$;){const D=E.get(i);if(T+=1,typeof D<"u"){if(D===T)throw new RangeError("Cyclic object value");$=!0}typeof E.get(xo)>"u"&&(T=0)}if(typeof m=="function"?A=m(e,A):A instanceof Date?A=v?.(A):n==="comma"&&Et(A)&&(A=Bc(A,function(D){return D instanceof Date?v?.(D):D})),A===null){if(l)return f&&!y?f(e,$e.encoder,x,"key",b):e;A=""}if(ub(A)||sb(A)){if(f){const D=y?e:f(e,$e.encoder,x,"key",b);return[S?.(D)+"="+S?.(f(A,$e.encoder,x,"value",b))]}return[S?.(e)+"="+S?.(String(A))]}const I=[];if(typeof A>"u")return I;let M;if(n==="comma"&&Et(A))y&&f&&(A=Bc(A,f)),M=[{value:A.length>0?A.join(",")||null:void 0}];else if(Et(m))M=m;else{const D=Object.keys(A);M=g?D.sort(g):D}const B=h?String(e).replace(/\./g,"%2E"):String(e),N=r&&Et(A)&&A.length===1?B+"[]":B;if(a&&Et(A)&&A.length===0)return N+"[]";for(let D=0;D<M.length;++D){const U=M[D],he=typeof U=="object"&&typeof U.value<"u"?U.value:A[U];if(u&&he===null)continue;const Ae=_&&h?U.replace(/\./g,"%2E"):U,V=Et(A)?typeof n=="function"?n(N,Ae):N:N+(_?"."+Ae:"["+Ae+"]");k.set(i,T);const X=new WeakMap;X.set(xo,k),hd(I,dd(he,V,n,r,a,l,u,h,n==="comma"&&y&&Et(A)?null:f,m,g,_,v,b,S,y,x,X))}return I}function cb(i=$e){if(typeof i.allowEmptyArrays<"u"&&typeof i.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof i.encodeDotInKeys<"u"&&typeof i.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(i.encoder!==null&&typeof i.encoder<"u"&&typeof i.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=i.charset||$e.charset;if(typeof i.charset<"u"&&i.charset!=="utf-8"&&i.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=Vo;if(typeof i.format<"u"){if(!ab.call(Jo,i.format))throw new TypeError("Unknown format option provided.");n=i.format}const r=Jo[n];let a=$e.filter;(typeof i.filter=="function"||Et(i.filter))&&(a=i.filter);let l;if(i.arrayFormat&&i.arrayFormat in cd?l=i.arrayFormat:"indices"in i?l=i.indices?"indices":"repeat":l=$e.arrayFormat,"commaRoundTrip"in i&&typeof i.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const u=typeof i.allowDots>"u"?i.encodeDotInKeys?!0:$e.allowDots:!!i.allowDots;return{addQueryPrefix:typeof i.addQueryPrefix=="boolean"?i.addQueryPrefix:$e.addQueryPrefix,allowDots:u,allowEmptyArrays:typeof i.allowEmptyArrays=="boolean"?!!i.allowEmptyArrays:$e.allowEmptyArrays,arrayFormat:l,charset:e,charsetSentinel:typeof i.charsetSentinel=="boolean"?i.charsetSentinel:$e.charsetSentinel,commaRoundTrip:!!i.commaRoundTrip,delimiter:typeof i.delimiter>"u"?$e.delimiter:i.delimiter,encode:typeof i.encode=="boolean"?i.encode:$e.encode,encodeDotInKeys:typeof i.encodeDotInKeys=="boolean"?i.encodeDotInKeys:$e.encodeDotInKeys,encoder:typeof i.encoder=="function"?i.encoder:$e.encoder,encodeValuesOnly:typeof i.encodeValuesOnly=="boolean"?i.encodeValuesOnly:$e.encodeValuesOnly,filter:a,format:n,formatter:r,serializeDate:typeof i.serializeDate=="function"?i.serializeDate:$e.serializeDate,skipNulls:typeof i.skipNulls=="boolean"?i.skipNulls:$e.skipNulls,sort:typeof i.sort=="function"?i.sort:null,strictNullHandling:typeof i.strictNullHandling=="boolean"?i.strictNullHandling:$e.strictNullHandling}}function hb(i,e={}){let n=i;const r=cb(e);let a,l;typeof r.filter=="function"?(l=r.filter,n=l("",n)):Et(r.filter)&&(l=r.filter,a=l);const u=[];if(typeof n!="object"||n===null)return"";const h=cd[r.arrayFormat],f=h==="comma"&&r.commaRoundTrip;a||(a=Object.keys(n)),r.sort&&a.sort(r.sort);const m=new WeakMap;for(let v=0;v<a.length;++v){const b=a[v];r.skipNulls&&n[b]===null||hd(u,dd(n[b],b,h,f,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,m))}const g=u.join(r.delimiter);let _=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?_+="utf8=%26%2310003%3B&":_+="utf8=%E2%9C%93&"),g.length>0?_+g:""}const Xn="4.85.3";let Nc=!1,er,fd,md,Yo,pd,gd,_d,vd,yd;function db(i,e={auto:!1}){if(Nc)throw new Error(`you must \`import 'openai/shims/${i.kind}'\` before importing anything else from openai`);if(er)throw new Error(`can't \`import 'openai/shims/${i.kind}'\` after \`import 'openai/shims/${er}'\``);Nc=e.auto,er=i.kind,fd=i.fetch,md=i.FormData,Yo=i.File,pd=i.ReadableStream,gd=i.getMultipartRequestOptions,_d=i.getDefaultAgent,vd=i.fileFromPath,yd=i.isFsReadStream}class fb{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function mb({manuallyImported:i}={}){const e=i?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,a,l;try{n=fetch,r=Request,a=Response,l=Headers}catch(u){throw new Error(`this environment is missing the following Web Fetch API type: ${u.message}. ${e}`)}return{kind:"web",fetch:n,Request:r,Response:a,Headers:l,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(u,h)=>({...h,body:new fb(u)}),getDefaultAgent:u=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:u=>!1}}er||db(mb(),{auto:!0});class se extends Error{}class De extends se{constructor(e,n,r,a){super(`${De.makeMessage(e,n,r)}`),this.status=e,this.headers=a,this.request_id=a?.["x-request-id"],this.error=n;const l=n;this.code=l?.code,this.param=l?.param,this.type=l?.type}static makeMessage(e,n,r){const a=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,n,r,a){if(!e||!a)return new va({message:r,cause:Qo(n)});const l=n?.error;return e===400?new wd(e,l,r,a):e===401?new bd(e,l,r,a):e===403?new xd(e,l,r,a):e===404?new Ad(e,l,r,a):e===409?new Pd(e,l,r,a):e===422?new Sd(e,l,r,a):e===429?new kd(e,l,r,a):e>=500?new Cd(e,l,r,a):new De(e,l,r,a)}}class yt extends De{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class va extends De{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Pl extends va{constructor({message:e}={}){super({message:e??"Request timed out."})}}class wd extends De{}class bd extends De{}class xd extends De{}class Ad extends De{}class Pd extends De{}class Sd extends De{}class kd extends De{}class Cd extends De{}class Td extends se{constructor(){super("Could not parse response content as the length limit was reached")}}class Ld extends se{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var ns=function(i,e,n,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!a:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(i,n):a?a.value=n:e.set(i,n),n},vn=function(i,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(i):r?r.value:e.get(i)},tt;class ya{constructor(){tt.set(this,void 0),this.buffer=new Uint8Array,ns(this,tt,null,"f")}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e;let r=new Uint8Array(this.buffer.length+n.length);r.set(this.buffer),r.set(n,this.buffer.length),this.buffer=r;const a=[];let l;for(;(l=pb(this.buffer,vn(this,tt,"f")))!=null;){if(l.carriage&&vn(this,tt,"f")==null){ns(this,tt,l.index,"f");continue}if(vn(this,tt,"f")!=null&&(l.index!==vn(this,tt,"f")+1||l.carriage)){a.push(this.decodeText(this.buffer.slice(0,vn(this,tt,"f")-1))),this.buffer=this.buffer.slice(vn(this,tt,"f")),ns(this,tt,null,"f");continue}const u=vn(this,tt,"f")!==null?l.preceding-1:l.preceding,h=this.decodeText(this.buffer.slice(0,u));a.push(h),this.buffer=this.buffer.slice(l.index),ns(this,tt,null,"f")}return a}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new se(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new se(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new se("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}tt=new WeakMap;ya.NEWLINE_CHARS=new Set([`
`,"\r"]);ya.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function pb(i,e){for(let a=e??0;a<i.length;a++){if(i[a]===10)return{preceding:a,index:a+1,carriage:!1};if(i[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function gb(i){for(let r=0;r<i.length-1;r++){if(i[r]===10&&i[r+1]===10||i[r]===13&&i[r+1]===13)return r+2;if(i[r]===13&&i[r+1]===10&&r+3<i.length&&i[r+2]===13&&i[r+3]===10)return r+4}return-1}function Ed(i){if(i[Symbol.asyncIterator])return i;const e=i.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class $t{constructor(e,n){this.iterator=e,this.controller=n}static fromSSEResponse(e,n){let r=!1;async function*a(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let l=!1;try{for await(const u of _b(e,n))if(!l){if(u.data.startsWith("[DONE]")){l=!0;continue}if(u.event===null){let h;try{h=JSON.parse(u.data)}catch(f){throw console.error("Could not parse message into JSON:",u.data),console.error("From chunk:",u.raw),f}if(h&&h.error)throw new De(void 0,h.error,void 0,void 0);yield h}else{let h;try{h=JSON.parse(u.data)}catch(f){throw console.error("Could not parse message into JSON:",u.data),console.error("From chunk:",u.raw),f}if(u.event=="error")throw new De(void 0,h.error,h.message,void 0);yield{event:u.event,data:h}}}l=!0}catch(u){if(u instanceof Error&&u.name==="AbortError")return;throw u}finally{l||n.abort()}}return new $t(a,n)}static fromReadableStream(e,n){let r=!1;async function*a(){const u=new ya,h=Ed(e);for await(const f of h)for(const m of u.decode(f))yield m;for(const f of u.flush())yield f}async function*l(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let u=!1;try{for await(const h of a())u||h&&(yield JSON.parse(h));u=!0}catch(h){if(h instanceof Error&&h.name==="AbortError")return;throw h}finally{u||n.abort()}}return new $t(l,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),a=l=>({next:()=>{if(l.length===0){const u=r.next();e.push(u),n.push(u)}return l.shift()}});return[new $t(()=>a(e),this.controller),new $t(()=>a(n),this.controller)]}toReadableStream(){const e=this;let n;const r=new TextEncoder;return new pd({async start(){n=e[Symbol.asyncIterator]()},async pull(a){try{const{value:l,done:u}=await n.next();if(u)return a.close();const h=r.encode(JSON.stringify(l)+`
`);a.enqueue(h)}catch(l){a.error(l)}},async cancel(){await n.return?.()}})}}async function*_b(i,e){if(!i.body)throw e.abort(),new se("Attempted to iterate over a response with no body");const n=new yb,r=new ya,a=Ed(i.body);for await(const l of vb(a))for(const u of r.decode(l)){const h=n.decode(u);h&&(yield h)}for(const l of r.flush()){const u=n.decode(l);u&&(yield u)}}async function*vb(i){let e=new Uint8Array;for await(const n of i){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?new TextEncoder().encode(n):n;let a=new Uint8Array(e.length+r.length);a.set(e),a.set(r,e.length),e=a;let l;for(;(l=gb(e))!==-1;)yield e.slice(0,l),e=e.slice(l)}e.length>0&&(yield e)}class yb{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,a]=wb(e,":");return a.startsWith(" ")&&(a=a.substring(1)),n==="event"?this.event=a:n==="data"&&this.data.push(a),null}}function wb(i,e){const n=i.indexOf(e);return n!==-1?[i.substring(0,n),e,i.substring(n+e.length)]:[i,"",""]}const Od=i=>i!=null&&typeof i=="object"&&typeof i.url=="string"&&typeof i.blob=="function",$d=i=>i!=null&&typeof i=="object"&&typeof i.name=="string"&&typeof i.lastModified=="number"&&wa(i),wa=i=>i!=null&&typeof i=="object"&&typeof i.size=="number"&&typeof i.type=="string"&&typeof i.text=="function"&&typeof i.slice=="function"&&typeof i.arrayBuffer=="function",bb=i=>$d(i)||Od(i)||yd(i);async function Md(i,e,n){if(i=await i,$d(i))return i;if(Od(i)){const a=await i.blob();e||(e=new URL(i.url).pathname.split(/[\\/]/).pop()??"unknown_file");const l=wa(a)?[await a.arrayBuffer()]:[a];return new Yo(l,e,n)}const r=await xb(i);if(e||(e=Pb(i)??"unknown_file"),!n?.type){const a=r[0]?.type;typeof a=="string"&&(n={...n,type:a})}return new Yo(r,e,n)}async function xb(i){let e=[];if(typeof i=="string"||ArrayBuffer.isView(i)||i instanceof ArrayBuffer)e.push(i);else if(wa(i))e.push(await i.arrayBuffer());else if(Sb(i))for await(const n of i)e.push(n);else throw new Error(`Unexpected data type: ${typeof i}; constructor: ${i?.constructor?.name}; props: ${Ab(i)}`);return e}function Ab(i){return`[${Object.getOwnPropertyNames(i).map(n=>`"${n}"`).join(", ")}]`}function Pb(i){return Ao(i.name)||Ao(i.filename)||Ao(i.path)?.split(/[\\/]/).pop()}const Ao=i=>{if(typeof i=="string")return i;if(typeof Buffer<"u"&&i instanceof Buffer)return String(i)},Sb=i=>i!=null&&typeof i=="object"&&typeof i[Symbol.asyncIterator]=="function",zc=i=>i&&typeof i=="object"&&i.body&&i[Symbol.toStringTag]==="MultipartBody",li=async i=>{const e=await kb(i.body);return gd(e,i)},kb=async i=>{const e=new md;return await Promise.all(Object.entries(i||{}).map(([n,r])=>Xo(e,n,r))),e},Xo=async(i,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")i.append(e,String(n));else if(bb(n)){const r=await Md(n);i.append(e,r)}else if(Array.isArray(n))await Promise.all(n.map(r=>Xo(i,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,a])=>Xo(i,`${e}[${r}]`,a)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var Rd={},Cb=function(i,e,n,r,a){if(typeof e=="function"?i!==e||!0:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(i,n),n},Tb=function(i,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(i):r?r.value:e.get(i)},is;async function Id(i){const{response:e}=i;if(i.options.stream)return ii("response",e.status,e.url,e.headers,e.body),i.options.__streamClass?i.options.__streamClass.fromSSEResponse(e,i.controller):$t.fromSSEResponse(e,i.controller);if(e.status===204)return null;if(i.options.__binaryResponse)return e;const n=e.headers.get("content-type");if(n?.includes("application/json")||n?.includes("application/vnd.api+json")){const l=await e.json();return ii("response",e.status,e.url,e.headers,l),qd(l,e)}const a=await e.text();return ii("response",e.status,e.url,e.headers,a),a}function qd(i,e){return!i||typeof i!="object"||Array.isArray(i)?i:Object.defineProperty(i,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class ba extends Promise{constructor(e,n=Id){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=n}_thenUnwrap(e){return new ba(this.responsePromise,async n=>qd(e(await this.parseResponse(n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class Lb{constructor({baseURL:e,maxRetries:n=2,timeout:r=6e5,httpAgent:a,fetch:l}){this.baseURL=e,this.maxRetries=Po("maxRetries",n),this.timeout=Po("timeout",r),this.httpAgent=a,this.fetch=l??fd}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...Ib(),...this.authHeaders(e)}}validateHeaders(e,n){}defaultIdempotencyKey(){return`stainless-node-retry-${Bb()}`}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(async a=>{const l=a&&wa(a?.body)?new DataView(await a.body.arrayBuffer()):a?.body instanceof DataView?a.body:a?.body instanceof ArrayBuffer?new DataView(a.body):a&&ArrayBuffer.isView(a?.body)?new DataView(a.body.buffer):a?.body;return{method:e,path:n,...a,body:l}}))}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:n=0}={}){e={...e};const{method:r,path:a,query:l,headers:u={}}=e,h=ArrayBuffer.isView(e.body)||e.__binaryRequest&&typeof e.body=="string"?e.body:zc(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,f=this.calculateContentLength(h),m=this.buildURL(a,l);"timeout"in e&&Po("timeout",e.timeout),e.timeout=e.timeout??this.timeout;const g=e.httpAgent??this.httpAgent??_d(m),_=e.timeout+1e3;typeof g?.options?.timeout=="number"&&_>(g.options.timeout??0)&&(g.options.timeout=_),this.idempotencyHeader&&r!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),u[this.idempotencyHeader]=e.idempotencyKey);const v=this.buildHeaders({options:e,headers:u,contentLength:f,retryCount:n});return{req:{method:r,...h&&{body:h},headers:v,...g&&{agent:g},signal:e.signal??null},url:m,timeout:e.timeout}}buildHeaders({options:e,headers:n,contentLength:r,retryCount:a}){const l={};r&&(l["content-length"]=r);const u=this.defaultHeaders(e);return Wc(l,u),Wc(l,n),zc(e.body)&&er!=="node"&&delete l["content-type"],ss(u,"x-stainless-retry-count")===void 0&&ss(n,"x-stainless-retry-count")===void 0&&(l["x-stainless-retry-count"]=String(a)),ss(u,"x-stainless-timeout")===void 0&&ss(n,"x-stainless-timeout")===void 0&&e.timeout&&(l["x-stainless-timeout"]=String(e.timeout)),this.validateHeaders(l,n),l}async prepareOptions(e){}async prepareRequest(e,{url:n,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(n=>[...n])):{...e}:{}}makeStatusError(e,n,r,a){return De.generate(e,n,r,a)}request(e,n=null){return new ba(this.makeRequest(e,n))}async makeRequest(e,n){const r=await e,a=r.maxRetries??this.maxRetries;n==null&&(n=a),await this.prepareOptions(r);const{req:l,url:u,timeout:h}=this.buildRequest(r,{retryCount:a-n});if(await this.prepareRequest(l,{url:u,options:r}),ii("request",u,r,l.headers),r.signal?.aborted)throw new yt;const f=new AbortController,m=await this.fetchWithTimeout(u,l,h,f).catch(Qo);if(m instanceof Error){if(r.signal?.aborted)throw new yt;if(n)return this.retryRequest(r,n);throw m.name==="AbortError"?new Pl:new va({cause:m})}const g=Ob(m.headers);if(!m.ok){if(n&&this.shouldRetry(m)){const x=`retrying, ${n} attempts remaining`;return ii(`response (error; ${x})`,m.status,u,g),this.retryRequest(r,n,g)}const _=await m.text().catch(x=>Qo(x).message),v=qb(_),b=v?void 0:_;throw ii(`response (error; ${n?"(error; no more retries left)":"(error; not retryable)"})`,m.status,u,g,b),this.makeStatusError(m.status,v,b,g)}return{response:m,options:r,controller:f}}requestAPIList(e,n){const r=this.makeRequest(n,null);return new Eb(this,r,e)}buildURL(e,n){const r=Db(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return Dd(a)||(n={...a,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new se(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,n,r,a){const{signal:l,...u}=n||{};l&&l.addEventListener("abort",()=>a.abort());const h=setTimeout(()=>a.abort(),r),f={signal:a.signal,...u};return f.method&&(f.method=f.method.toUpperCase()),this.fetch.call(void 0,e,f).finally(()=>{clearTimeout(h)})}shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r){let a;const l=r?.["retry-after-ms"];if(l){const h=parseFloat(l);Number.isNaN(h)||(a=h)}const u=r?.["retry-after"];if(u&&!a){const h=parseFloat(u);Number.isNaN(h)?a=Date.parse(u)-Date.now():a=h*1e3}if(!(a&&0<=a&&a<60*1e3)){const h=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,h)}return await vr(a),this.makeRequest(e,n-1)}calculateDefaultRetryTimeoutMillis(e,n){const l=n-e,u=Math.min(.5*Math.pow(2,l),8),h=1-Math.random()*.25;return u*h*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Xn}`}}class jd{constructor(e,n,r,a){is.set(this,void 0),Cb(this,is,e),this.options=a,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new se("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const n={...this.options};if("params"in e&&typeof n.query=="object")n.query={...n.query,...e.params};else if("url"in e){const r=[...Object.entries(n.query||{}),...e.url.searchParams.entries()];for(const[a,l]of r)e.url.searchParams.set(a,l);n.query=void 0,n.path=e.url.toString()}return await Tb(this,is,"f").requestAPIList(this.constructor,n)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(is=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class Eb extends ba{constructor(e,n,r){super(n,async a=>new r(e,a.response,await Id(a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}const Ob=i=>new Proxy(Object.fromEntries(i.entries()),{get(e,n){const r=n.toString();return e[r.toLowerCase()]||e[r]}}),$b={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},Fe=i=>typeof i=="object"&&i!==null&&!Dd(i)&&Object.keys(i).every(e=>Bd($b,e)),Mb=()=>{if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xn,"X-Stainless-OS":Uc(Deno.build.os),"X-Stainless-Arch":Fc(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xn,"X-Stainless-OS":Uc(process.platform),"X-Stainless-Arch":Fc(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const i=Rb();return i?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${i.browser}`,"X-Stainless-Runtime-Version":i.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Rb(){if(typeof navigator>"u"||!navigator)return null;const i=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of i){const r=n.exec(navigator.userAgent);if(r){const a=r[1]||0,l=r[2]||0,u=r[3]||0;return{browser:e,version:`${a}.${l}.${u}`}}}return null}const Fc=i=>i==="x32"?"x32":i==="x86_64"||i==="x64"?"x64":i==="arm"?"arm":i==="aarch64"||i==="arm64"?"arm64":i?`other:${i}`:"unknown",Uc=i=>(i=i.toLowerCase(),i.includes("ios")?"iOS":i==="android"?"Android":i==="darwin"?"MacOS":i==="win32"?"Windows":i==="freebsd"?"FreeBSD":i==="openbsd"?"OpenBSD":i==="linux"?"Linux":i?`Other:${i}`:"Unknown");let Zc;const Ib=()=>Zc??(Zc=Mb()),qb=i=>{try{return JSON.parse(i)}catch{return}},jb=/^[a-z][a-z0-9+.-]*:/i,Db=i=>jb.test(i),vr=i=>new Promise(e=>setTimeout(e,i)),Po=(i,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new se(`${i} must be an integer`);if(e<0)throw new se(`${i} must be a positive integer`);return e},Qo=i=>{if(i instanceof Error)return i;if(typeof i=="object"&&i!==null)try{return new Error(JSON.stringify(i))}catch{}return new Error(i)},rs=i=>{if(typeof process<"u")return Rd?.[i]?.trim()??void 0;if(typeof Deno<"u")return Deno.env?.get?.(i)?.trim()};function Dd(i){if(!i)return!0;for(const e in i)return!1;return!0}function Bd(i,e){return Object.prototype.hasOwnProperty.call(i,e)}function Wc(i,e){for(const n in e){if(!Bd(e,n))continue;const r=n.toLowerCase();if(!r)continue;const a=e[n];a===null?delete i[r]:a!==void 0&&(i[r]=a)}}const Hc=new Set(["authorization","api-key"]);function ii(i,...e){if(typeof process<"u"&&Rd?.DEBUG==="true"){const n=e.map(r=>{if(!r)return r;if(r.headers){const l={...r,headers:{...r.headers}};for(const u in r.headers)Hc.has(u.toLowerCase())&&(l.headers[u]="REDACTED");return l}let a=null;for(const l in r)Hc.has(l.toLowerCase())&&(a??(a={...r}),a[l]="REDACTED");return a??r});console.log(`OpenAI:DEBUG:${i}`,...n)}}const Bb=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const e=Math.random()*16|0;return(i==="x"?e:e&3|8).toString(16)}),Nb=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",zb=i=>typeof i?.get=="function",ss=(i,e)=>{const n=e.toLowerCase();if(zb(i)){const r=e[0]?.toUpperCase()+e.substring(1).replace(/([^\w])(\w)/g,(a,l,u)=>l+u.toUpperCase());for(const a of[e,n,e.toUpperCase(),r]){const l=i.get(a);if(l)return l}}for(const[r,a]of Object.entries(i))if(r.toLowerCase()===n)return Array.isArray(a)?(a.length<=1||console.warn(`Received ${a.length} entries for the ${e} header, using the first entry.`),a[0]):a};function So(i){return i!=null&&typeof i=="object"&&!Array.isArray(i)}class Fb extends jd{constructor(e,n,r,a){super(e,n,r,a),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class at extends jd{constructor(e,n,r,a){super(e,n,r,a),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const n=Object.fromEntries(e.url.searchParams);return Object.keys(n).length?n:null}nextPageInfo(){const e=this.getPaginatedItems();if(!e.length)return null;const n=e[e.length-1]?.id;return n?{params:{after:n}}:null}}class fe{constructor(e){this._client=e}}let Nd=class extends fe{list(e,n={},r){return Fe(n)?this.list(e,{},n):this._client.getAPIList(`/chat/completions/${e}/messages`,Ub,{query:n,...r})}},xa=class extends fe{constructor(){super(...arguments),this.messages=new Nd(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return Fe(e)?this.list({},e):this._client.getAPIList("/chat/completions",Aa,{query:e,...n})}del(e,n){return this._client.delete(`/chat/completions/${e}`,n)}};class Aa extends at{}class Ub extends at{}xa.ChatCompletionsPage=Aa;xa.Messages=Nd;let Pa=class extends fe{constructor(){super(...arguments),this.completions=new xa(this._client)}};Pa.Completions=xa;Pa.ChatCompletionsPage=Aa;class zd extends fe{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:{Accept:"application/octet-stream",...n?.headers},__binaryResponse:!0})}}class Fd extends fe{create(e,n){return this._client.post("/audio/transcriptions",li({body:e,...n,__metadata:{model:e.model}}))}}class Ud extends fe{create(e,n){return this._client.post("/audio/translations",li({body:e,...n,__metadata:{model:e.model}}))}}class yr extends fe{constructor(){super(...arguments),this.transcriptions=new Fd(this._client),this.translations=new Ud(this._client),this.speech=new zd(this._client)}}yr.Transcriptions=Fd;yr.Translations=Ud;yr.Speech=zd;class Sl extends fe{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(`/batches/${e}`,n)}list(e={},n){return Fe(e)?this.list({},e):this._client.getAPIList("/batches",kl,{query:e,...n})}cancel(e,n){return this._client.post(`/batches/${e}/cancel`,n)}}class kl extends at{}Sl.BatchesPage=kl;class Cl extends fe{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,n){return this._client.get(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,n,r){return this._client.post(`/assistants/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e={},n){return Fe(e)?this.list({},e):this._client.getAPIList("/assistants",Tl,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,n){return this._client.delete(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class Tl extends at{}Cl.AssistantsPage=Tl;function Kc(i){return typeof i.parse=="function"}const ri=i=>i?.role==="assistant",Zd=i=>i?.role==="function",Wd=i=>i?.role==="tool";var gt=function(i,e,n,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!a:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(i,n):a?a.value=n:e.set(i,n),n},Ce=function(i,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(i):r?r.value:e.get(i)},el,ps,gs,Zi,Wi,_s,Hi,Ft,Ki,Cs,Ts,Qn,Hd;class Kd{constructor(){el.add(this),this.controller=new AbortController,ps.set(this,void 0),gs.set(this,()=>{}),Zi.set(this,()=>{}),Wi.set(this,void 0),_s.set(this,()=>{}),Hi.set(this,()=>{}),Ft.set(this,{}),Ki.set(this,!1),Cs.set(this,!1),Ts.set(this,!1),Qn.set(this,!1),gt(this,ps,new Promise((e,n)=>{gt(this,gs,e,"f"),gt(this,Zi,n,"f")}),"f"),gt(this,Wi,new Promise((e,n)=>{gt(this,_s,e,"f"),gt(this,Hi,n,"f")}),"f"),Ce(this,ps,"f").catch(()=>{}),Ce(this,Wi,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},Ce(this,el,"m",Hd).bind(this))},0)}_connected(){this.ended||(Ce(this,gs,"f").call(this),this._emit("connect"))}get ended(){return Ce(this,Ki,"f")}get errored(){return Ce(this,Cs,"f")}get aborted(){return Ce(this,Ts,"f")}abort(){this.controller.abort()}on(e,n){return(Ce(this,Ft,"f")[e]||(Ce(this,Ft,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=Ce(this,Ft,"f")[e];if(!r)return this;const a=r.findIndex(l=>l.listener===n);return a>=0&&r.splice(a,1),this}once(e,n){return(Ce(this,Ft,"f")[e]||(Ce(this,Ft,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{gt(this,Qn,!0,"f"),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){gt(this,Qn,!0,"f"),await Ce(this,Wi,"f")}_emit(e,...n){if(Ce(this,Ki,"f"))return;e==="end"&&(gt(this,Ki,!0,"f"),Ce(this,_s,"f").call(this));const r=Ce(this,Ft,"f")[e];if(r&&(Ce(this,Ft,"f")[e]=r.filter(a=>!a.once),r.forEach(({listener:a})=>a(...n))),e==="abort"){const a=n[0];!Ce(this,Qn,"f")&&!r?.length&&Promise.reject(a),Ce(this,Zi,"f").call(this,a),Ce(this,Hi,"f").call(this,a),this._emit("end");return}if(e==="error"){const a=n[0];!Ce(this,Qn,"f")&&!r?.length&&Promise.reject(a),Ce(this,Zi,"f").call(this,a),Ce(this,Hi,"f").call(this,a),this._emit("end")}}_emitFinal(){}}ps=new WeakMap,gs=new WeakMap,Zi=new WeakMap,Wi=new WeakMap,_s=new WeakMap,Hi=new WeakMap,Ft=new WeakMap,Ki=new WeakMap,Cs=new WeakMap,Ts=new WeakMap,Qn=new WeakMap,el=new WeakSet,Hd=function(e){if(gt(this,Cs,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new yt),e instanceof yt)return gt(this,Ts,!0,"f"),this._emit("abort",e);if(e instanceof se)return this._emit("error",e);if(e instanceof Error){const n=new se(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new se(String(e)))};function Gd(i){return i?.$brand==="auto-parseable-response-format"}function wr(i){return i?.$brand==="auto-parseable-tool"}function Zb(i,e){return!e||!Vd(e)?{...i,choices:i.choices.map(n=>({...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:Ll(i,e)}function Ll(i,e){const n=i.choices.map(r=>{if(r.finish_reason==="length")throw new Td;if(r.finish_reason==="content_filter")throw new Ld;return{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:r.message.tool_calls?.map(a=>Hb(e,a))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?Wb(e,r.message.content):null}}});return{...i,choices:n}}function Wb(i,e){return i.response_format?.type!=="json_schema"?null:i.response_format?.type==="json_schema"?"$parseRaw"in i.response_format?i.response_format.$parseRaw(e):JSON.parse(e):null}function Hb(i,e){const n=i.tools?.find(r=>r.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:wr(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function Kb(i,e){if(!i)return!1;const n=i.tools?.find(r=>r.function?.name===e.function.name);return wr(n)||n?.function.strict||!1}function Vd(i){return Gd(i.response_format)?!0:i.tools?.some(e=>wr(e)||e.type==="function"&&e.function.strict===!0)??!1}function Gb(i){for(const e of i??[]){if(e.type!=="function")throw new se(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new se(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var Ve=function(i,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(i):r?r.value:e.get(i)},Be,tl,Ls,nl,il,rl,Jd,sl;const Gc=10;class Yd extends Kd{constructor(){super(...arguments),Be.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),(Zd(e)||Wd(e))&&e.content)this._emit("functionCallResult",e.content);else if(ri(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(ri(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new se("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),Ve(this,Be,"m",tl).call(this)}async finalMessage(){return await this.done(),Ve(this,Be,"m",Ls).call(this)}async finalFunctionCall(){return await this.done(),Ve(this,Be,"m",nl).call(this)}async finalFunctionCallResult(){return await this.done(),Ve(this,Be,"m",il).call(this)}async totalUsage(){return await this.done(),Ve(this,Be,"m",rl).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=Ve(this,Be,"m",Ls).call(this);n&&this._emit("finalMessage",n);const r=Ve(this,Be,"m",tl).call(this);r&&this._emit("finalContent",r);const a=Ve(this,Be,"m",nl).call(this);a&&this._emit("finalFunctionCall",a);const l=Ve(this,Be,"m",il).call(this);l!=null&&this._emit("finalFunctionCallResult",l),this._chatCompletions.some(u=>u.usage)&&this._emit("totalUsage",Ve(this,Be,"m",rl).call(this))}async _createChatCompletion(e,n,r){const a=r?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),Ve(this,Be,"m",Jd).call(this,n);const l=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Ll(l,n))}async _runChatCompletion(e,n,r){for(const a of n.messages)this._addMessage(a,!1);return await this._createChatCompletion(e,n,r)}async _runFunctions(e,n,r){const a="function",{function_call:l="auto",stream:u,...h}=n,f=typeof l!="string"&&l?.name,{maxChatCompletions:m=Gc}=r||{},g={};for(const v of n.functions)g[v.name||v.function.name]=v;const _=n.functions.map(v=>({name:v.name||v.function.name,parameters:v.parameters,description:v.description}));for(const v of n.messages)this._addMessage(v,!1);for(let v=0;v<m;++v){const S=(await this._createChatCompletion(e,{...h,function_call:l,functions:_,messages:[...this.messages]},r)).choices[0]?.message;if(!S)throw new se("missing message in ChatCompletion response");if(!S.function_call)return;const{name:y,arguments:x}=S.function_call,k=g[y];if(k){if(f&&f!==y){const $=`Invalid function_call: ${JSON.stringify(y)}. ${JSON.stringify(f)} requested. Please try again`;this._addMessage({role:a,name:y,content:$});continue}}else{const $=`Invalid function_call: ${JSON.stringify(y)}. Available options are: ${_.map(I=>JSON.stringify(I.name)).join(", ")}. Please try again`;this._addMessage({role:a,name:y,content:$});continue}let A;try{A=Kc(k)?await k.parse(x):x}catch($){this._addMessage({role:a,name:y,content:$ instanceof Error?$.message:String($)});continue}const E=await k.function(A,this),T=Ve(this,Be,"m",sl).call(this,E);if(this._addMessage({role:a,name:y,content:T}),f)return}}async _runTools(e,n,r){const a="tool",{tool_choice:l="auto",stream:u,...h}=n,f=typeof l!="string"&&l?.function?.name,{maxChatCompletions:m=Gc}=r||{},g=n.tools.map(b=>{if(wr(b)){if(!b.$callback)throw new se("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:b.$callback,name:b.function.name,description:b.function.description||"",parameters:b.function.parameters,parse:b.$parseRaw,strict:!0}}}return b}),_={};for(const b of g)b.type==="function"&&(_[b.function.name||b.function.function.name]=b.function);const v="tools"in n?g.map(b=>b.type==="function"?{type:"function",function:{name:b.function.name||b.function.function.name,parameters:b.function.parameters,description:b.function.description,strict:b.function.strict}}:b):void 0;for(const b of n.messages)this._addMessage(b,!1);for(let b=0;b<m;++b){const y=(await this._createChatCompletion(e,{...h,tool_choice:l,tools:v,messages:[...this.messages]},r)).choices[0]?.message;if(!y)throw new se("missing message in ChatCompletion response");if(!y.tool_calls?.length)return;for(const x of y.tool_calls){if(x.type!=="function")continue;const k=x.id,{name:A,arguments:E}=x.function,T=_[A];if(T){if(f&&f!==A){const B=`Invalid tool_call: ${JSON.stringify(A)}. ${JSON.stringify(f)} requested. Please try again`;this._addMessage({role:a,tool_call_id:k,content:B});continue}}else{const B=`Invalid tool_call: ${JSON.stringify(A)}. Available options are: ${Object.keys(_).map(N=>JSON.stringify(N)).join(", ")}. Please try again`;this._addMessage({role:a,tool_call_id:k,content:B});continue}let $;try{$=Kc(T)?await T.parse(E):E}catch(B){const N=B instanceof Error?B.message:String(B);this._addMessage({role:a,tool_call_id:k,content:N});continue}const I=await T.function($,this),M=Ve(this,Be,"m",sl).call(this,I);if(this._addMessage({role:a,tool_call_id:k,content:M}),f)return}}}}Be=new WeakSet,tl=function(){return Ve(this,Be,"m",Ls).call(this).content??null},Ls=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(ri(n)){const{function_call:r,...a}=n,l={...a,content:n.content??null,refusal:n.refusal??null};return r&&(l.function_call=r),l}}throw new se("stream ended without producing a ChatCompletionMessage with role=assistant")},nl=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(ri(n)&&n?.function_call)return n.function_call;if(ri(n)&&n?.tool_calls?.length)return n.tool_calls.at(-1)?.function}},il=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(Zd(n)&&n.content!=null||Wd(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>r.role==="assistant"&&r.tool_calls?.some(a=>a.type==="function"&&a.id===n.tool_call_id)))return n.content}},rl=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},Jd=function(e){if(e.n!=null&&e.n>1)throw new se("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},sl=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class sr extends Yd{static runFunctions(e,n,r){const a=new sr,l={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return a._run(()=>a._runFunctions(e,n,l)),a}static runTools(e,n,r){const a=new sr,l={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return a._run(()=>a._runTools(e,n,l)),a}_addMessage(e,n=!0){super._addMessage(e,n),ri(e)&&e.content&&this._emit("content",e.content)}}const Xd=1,Qd=2,ef=4,tf=8,nf=16,rf=32,sf=64,af=128,of=256,lf=af|of,uf=nf|rf|lf|sf,cf=Xd|Qd|uf,hf=ef|tf,Vb=cf|hf,Re={STR:Xd,NUM:Qd,ARR:ef,OBJ:tf,NULL:nf,BOOL:rf,NAN:sf,INFINITY:af,MINUS_INFINITY:of,INF:lf,SPECIAL:uf,ATOM:cf,COLLECTION:hf,ALL:Vb};class Jb extends Error{}class Yb extends Error{}function Xb(i,e=Re.ALL){if(typeof i!="string")throw new TypeError(`expecting str, got ${typeof i}`);if(!i.trim())throw new Error(`${i} is empty`);return Qb(i.trim(),e)}const Qb=(i,e)=>{const n=i.length;let r=0;const a=v=>{throw new Jb(`${v} at position ${r}`)},l=v=>{throw new Yb(`${v} at position ${r}`)},u=()=>(_(),r>=n&&a("Unexpected end of input"),i[r]==='"'?h():i[r]==="{"?f():i[r]==="["?m():i.substring(r,r+4)==="null"||Re.NULL&e&&n-r<4&&"null".startsWith(i.substring(r))?(r+=4,null):i.substring(r,r+4)==="true"||Re.BOOL&e&&n-r<4&&"true".startsWith(i.substring(r))?(r+=4,!0):i.substring(r,r+5)==="false"||Re.BOOL&e&&n-r<5&&"false".startsWith(i.substring(r))?(r+=5,!1):i.substring(r,r+8)==="Infinity"||Re.INFINITY&e&&n-r<8&&"Infinity".startsWith(i.substring(r))?(r+=8,1/0):i.substring(r,r+9)==="-Infinity"||Re.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(i.substring(r))?(r+=9,-1/0):i.substring(r,r+3)==="NaN"||Re.NAN&e&&n-r<3&&"NaN".startsWith(i.substring(r))?(r+=3,NaN):g()),h=()=>{const v=r;let b=!1;for(r++;r<n&&(i[r]!=='"'||b&&i[r-1]==="\\");)b=i[r]==="\\"?!b:!1,r++;if(i.charAt(r)=='"')try{return JSON.parse(i.substring(v,++r-Number(b)))}catch(S){l(String(S))}else if(Re.STR&e)try{return JSON.parse(i.substring(v,r-Number(b))+'"')}catch{return JSON.parse(i.substring(v,i.lastIndexOf("\\"))+'"')}a("Unterminated string literal")},f=()=>{r++,_();const v={};try{for(;i[r]!=="}";){if(_(),r>=n&&Re.OBJ&e)return v;const b=h();_(),r++;try{const S=u();Object.defineProperty(v,b,{value:S,writable:!0,enumerable:!0,configurable:!0})}catch(S){if(Re.OBJ&e)return v;throw S}_(),i[r]===","&&r++}}catch{if(Re.OBJ&e)return v;a("Expected '}' at end of object")}return r++,v},m=()=>{r++;const v=[];try{for(;i[r]!=="]";)v.push(u()),_(),i[r]===","&&r++}catch{if(Re.ARR&e)return v;a("Expected ']' at end of array")}return r++,v},g=()=>{if(r===0){i==="-"&&Re.NUM&e&&a("Not sure what '-' is");try{return JSON.parse(i)}catch(b){if(Re.NUM&e)try{return i[i.length-1]==="."?JSON.parse(i.substring(0,i.lastIndexOf("."))):JSON.parse(i.substring(0,i.lastIndexOf("e")))}catch{}l(String(b))}}const v=r;for(i[r]==="-"&&r++;i[r]&&!",]}".includes(i[r]);)r++;r==n&&!(Re.NUM&e)&&a("Unterminated number literal");try{return JSON.parse(i.substring(v,r))}catch{i.substring(v,r)==="-"&&Re.NUM&e&&a("Not sure what '-' is");try{return JSON.parse(i.substring(v,i.lastIndexOf("e")))}catch(S){l(String(S))}}},_=()=>{for(;r<n&&` 
\r	`.includes(i[r]);)r++};return u()},Vc=i=>Xb(i,Re.ALL^Re.NUM);var Gn=function(i,e,n,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!a:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(i,n):a?a.value=n:e.set(i,n),n},ge=function(i,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(i):r?r.value:e.get(i)},Oe,zt,Vn,Qt,ko,as,Co,To,Lo,os,Eo,Jc;class ar extends Yd{constructor(e){super(),Oe.add(this),zt.set(this,void 0),Vn.set(this,void 0),Qt.set(this,void 0),Gn(this,zt,e,"f"),Gn(this,Vn,[],"f")}get currentChatCompletionSnapshot(){return ge(this,Qt,"f")}static fromReadableStream(e){const n=new ar(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const a=new ar(n);return a._run(()=>a._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createChatCompletion(e,n,r){super._createChatCompletion;const a=r?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),ge(this,Oe,"m",ko).call(this);const l=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const u of l)ge(this,Oe,"m",Co).call(this,u);if(l.controller.signal?.aborted)throw new yt;return this._addChatCompletion(ge(this,Oe,"m",os).call(this))}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),ge(this,Oe,"m",ko).call(this),this._connected();const a=$t.fromReadableStream(e,this.controller);let l;for await(const u of a)l&&l!==u.id&&this._addChatCompletion(ge(this,Oe,"m",os).call(this)),ge(this,Oe,"m",Co).call(this,u),l=u.id;if(a.controller.signal?.aborted)throw new yt;return this._addChatCompletion(ge(this,Oe,"m",os).call(this))}[(zt=new WeakMap,Vn=new WeakMap,Qt=new WeakMap,Oe=new WeakSet,ko=function(){this.ended||Gn(this,Qt,void 0,"f")},as=function(n){let r=ge(this,Vn,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},ge(this,Vn,"f")[n.index]=r,r)},Co=function(n){if(this.ended)return;const r=ge(this,Oe,"m",Jc).call(this,n);this._emit("chunk",n,r);for(const a of n.choices){const l=r.choices[a.index];a.delta.content!=null&&l.message?.role==="assistant"&&l.message?.content&&(this._emit("content",a.delta.content,l.message.content),this._emit("content.delta",{delta:a.delta.content,snapshot:l.message.content,parsed:l.message.parsed})),a.delta.refusal!=null&&l.message?.role==="assistant"&&l.message?.refusal&&this._emit("refusal.delta",{delta:a.delta.refusal,snapshot:l.message.refusal}),a.logprobs?.content!=null&&l.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:a.logprobs?.content,snapshot:l.logprobs?.content??[]}),a.logprobs?.refusal!=null&&l.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:a.logprobs?.refusal,snapshot:l.logprobs?.refusal??[]});const u=ge(this,Oe,"m",as).call(this,l);l.finish_reason&&(ge(this,Oe,"m",Lo).call(this,l),u.current_tool_call_index!=null&&ge(this,Oe,"m",To).call(this,l,u.current_tool_call_index));for(const h of a.delta.tool_calls??[])u.current_tool_call_index!==h.index&&(ge(this,Oe,"m",Lo).call(this,l),u.current_tool_call_index!=null&&ge(this,Oe,"m",To).call(this,l,u.current_tool_call_index)),u.current_tool_call_index=h.index;for(const h of a.delta.tool_calls??[]){const f=l.message.tool_calls?.[h.index];f?.type&&(f?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:f.function?.name,index:h.index,arguments:f.function.arguments,parsed_arguments:f.function.parsed_arguments,arguments_delta:h.function?.arguments??""}):(f?.type,void 0))}}},To=function(n,r){if(ge(this,Oe,"m",as).call(this,n).done_tool_calls.has(r))return;const l=n.message.tool_calls?.[r];if(!l)throw new Error("no tool call snapshot");if(!l.type)throw new Error("tool call snapshot missing `type`");if(l.type==="function"){const u=ge(this,zt,"f")?.tools?.find(h=>h.type==="function"&&h.function.name===l.function.name);this._emit("tool_calls.function.arguments.done",{name:l.function.name,index:r,arguments:l.function.arguments,parsed_arguments:wr(u)?u.$parseRaw(l.function.arguments):u?.function.strict?JSON.parse(l.function.arguments):null})}else l.type},Lo=function(n){const r=ge(this,Oe,"m",as).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const a=ge(this,Oe,"m",Eo).call(this);this._emit("content.done",{content:n.message.content,parsed:a?a.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},os=function(){if(this.ended)throw new se("stream has ended, this shouldn't happen");const n=ge(this,Qt,"f");if(!n)throw new se("request ended without sending any chunks");return Gn(this,Qt,void 0,"f"),Gn(this,Vn,[],"f"),e0(n,ge(this,zt,"f"))},Eo=function(){const n=ge(this,zt,"f")?.response_format;return Gd(n)?n:null},Jc=function(n){var r,a,l,u;let h=ge(this,Qt,"f");const{choices:f,...m}=n;h?Object.assign(h,m):h=Gn(this,Qt,{...m,choices:[]},"f");for(const{delta:g,finish_reason:_,index:v,logprobs:b=null,...S}of n.choices){let y=h.choices[v];if(y||(y=h.choices[v]={finish_reason:_,index:v,message:{},logprobs:b,...S}),b)if(!y.logprobs)y.logprobs=Object.assign({},b);else{const{content:I,refusal:M,...B}=b;Object.assign(y.logprobs,B),I&&((r=y.logprobs).content??(r.content=[]),y.logprobs.content.push(...I)),M&&((a=y.logprobs).refusal??(a.refusal=[]),y.logprobs.refusal.push(...M))}if(_&&(y.finish_reason=_,ge(this,zt,"f")&&Vd(ge(this,zt,"f")))){if(_==="length")throw new Td;if(_==="content_filter")throw new Ld}if(Object.assign(y,S),!g)continue;const{content:x,refusal:k,function_call:A,role:E,tool_calls:T,...$}=g;if(Object.assign(y.message,$),k&&(y.message.refusal=(y.message.refusal||"")+k),E&&(y.message.role=E),A&&(y.message.function_call?(A.name&&(y.message.function_call.name=A.name),A.arguments&&((l=y.message.function_call).arguments??(l.arguments=""),y.message.function_call.arguments+=A.arguments)):y.message.function_call=A),x&&(y.message.content=(y.message.content||"")+x,!y.message.refusal&&ge(this,Oe,"m",Eo).call(this)&&(y.message.parsed=Vc(y.message.content))),T){y.message.tool_calls||(y.message.tool_calls=[]);for(const{index:I,id:M,type:B,function:N,...D}of T){const U=(u=y.message.tool_calls)[I]??(u[I]={});Object.assign(U,D),M&&(U.id=M),B&&(U.type=B),N&&(U.function??(U.function={name:N.name??"",arguments:""})),N?.name&&(U.function.name=N.name),N?.arguments&&(U.function.arguments+=N.arguments,Kb(ge(this,zt,"f"),U)&&(U.function.parsed_arguments=Vc(U.function.arguments)))}}}return h},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",a=>{const l=n.shift();l?l.resolve(a):e.push(a)}),this.on("end",()=>{r=!0;for(const a of n)a.resolve(void 0);n.length=0}),this.on("abort",a=>{r=!0;for(const l of n)l.reject(a);n.length=0}),this.on("error",a=>{r=!0;for(const l of n)l.reject(a);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((l,u)=>n.push({resolve:l,reject:u})).then(l=>l?{value:l,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new $t(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function e0(i,e){const{id:n,choices:r,created:a,model:l,system_fingerprint:u,...h}=i,f={...h,id:n,choices:r.map(({message:m,finish_reason:g,index:_,logprobs:v,...b})=>{if(!g)throw new se(`missing finish_reason for choice ${_}`);const{content:S=null,function_call:y,tool_calls:x,...k}=m,A=m.role;if(!A)throw new se(`missing role for choice ${_}`);if(y){const{arguments:E,name:T}=y;if(E==null)throw new se(`missing function_call.arguments for choice ${_}`);if(!T)throw new se(`missing function_call.name for choice ${_}`);return{...b,message:{content:S,function_call:{arguments:E,name:T},role:A,refusal:m.refusal??null},finish_reason:g,index:_,logprobs:v}}return x?{...b,index:_,finish_reason:g,logprobs:v,message:{...k,role:A,content:S,refusal:m.refusal??null,tool_calls:x.map((E,T)=>{const{function:$,type:I,id:M,...B}=E,{arguments:N,name:D,...U}=$||{};if(M==null)throw new se(`missing choices[${_}].tool_calls[${T}].id
${ls(i)}`);if(I==null)throw new se(`missing choices[${_}].tool_calls[${T}].type
${ls(i)}`);if(D==null)throw new se(`missing choices[${_}].tool_calls[${T}].function.name
${ls(i)}`);if(N==null)throw new se(`missing choices[${_}].tool_calls[${T}].function.arguments
${ls(i)}`);return{...B,id:M,type:I,function:{...U,name:D,arguments:N}}})}}:{...b,message:{...k,content:S,role:A,refusal:m.refusal??null},finish_reason:g,index:_,logprobs:v}}),created:a,model:l,object:"chat.completion",...u?{system_fingerprint:u}:{}};return Zb(f,e)}function ls(i){return JSON.stringify(i)}class si extends ar{static fromReadableStream(e){const n=new si(null);return n._run(()=>n._fromReadableStream(e)),n}static runFunctions(e,n,r){const a=new si(null),l={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return a._run(()=>a._runFunctions(e,n,l)),a}static runTools(e,n,r){const a=new si(n),l={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return a._run(()=>a._runTools(e,n,l)),a}}let df=class extends fe{parse(e,n){return Gb(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(r=>Ll(r,e))}runFunctions(e,n){return e.stream?si.runFunctions(this._client,e,n):sr.runFunctions(this._client,e,n)}runTools(e,n){return e.stream?si.runTools(this._client,e,n):sr.runTools(this._client,e,n)}stream(e,n){return ar.createChatCompletion(this._client,e,n)}};class ff extends fe{constructor(){super(...arguments),this.completions=new df(this._client)}}(function(i){i.Completions=df})(ff);class mf extends fe{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class El extends fe{constructor(){super(...arguments),this.sessions=new mf(this._client)}}El.Sessions=mf;var W=function(i,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(i):r?r.value:e.get(i)},et=function(i,e,n,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!a:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(i,n):a?a.value=n:e.set(i,n),n},je,al,Ot,vs,_t,An,ti,xn,Es,it,ys,ws,tr,Gi,Vi,Yc,Xc,Qc,eh,th,nh,ih;class wt extends Kd{constructor(){super(...arguments),je.add(this),al.set(this,[]),Ot.set(this,{}),vs.set(this,{}),_t.set(this,void 0),An.set(this,void 0),ti.set(this,void 0),xn.set(this,void 0),Es.set(this,void 0),it.set(this,void 0),ys.set(this,void 0),ws.set(this,void 0),tr.set(this,void 0)}[(al=new WeakMap,Ot=new WeakMap,vs=new WeakMap,_t=new WeakMap,An=new WeakMap,ti=new WeakMap,xn=new WeakMap,Es=new WeakMap,it=new WeakMap,ys=new WeakMap,ws=new WeakMap,tr=new WeakMap,je=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",a=>{const l=n.shift();l?l.resolve(a):e.push(a)}),this.on("end",()=>{r=!0;for(const a of n)a.resolve(void 0);n.length=0}),this.on("abort",a=>{r=!0;for(const l of n)l.reject(a);n.length=0}),this.on("error",a=>{r=!0;for(const l of n)l.reject(a);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((l,u)=>n.push({resolve:l,reject:u})).then(l=>l?{value:l,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new wt;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const a=$t.fromReadableStream(e,this.controller);for await(const l of a)W(this,je,"m",Gi).call(this,l);if(a.controller.signal?.aborted)throw new yt;return this._addRun(W(this,je,"m",Vi).call(this))}toReadableStream(){return new $t(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,a,l){const u=new wt;return u._run(()=>u._runToolAssistantStream(e,n,r,a,{...l,headers:{...l?.headers,"X-Stainless-Helper-Method":"stream"}})),u}async _createToolAssistantStream(e,n,r,a,l){const u=l?.signal;u&&(u.aborted&&this.controller.abort(),u.addEventListener("abort",()=>this.controller.abort()));const h={...a,stream:!0},f=await e.submitToolOutputs(n,r,h,{...l,signal:this.controller.signal});this._connected();for await(const m of f)W(this,je,"m",Gi).call(this,m);if(f.controller.signal?.aborted)throw new yt;return this._addRun(W(this,je,"m",Vi).call(this))}static createThreadAssistantStream(e,n,r){const a=new wt;return a._run(()=>a._threadAssistantStream(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),a}static createAssistantStream(e,n,r,a){const l=new wt;return l._run(()=>l._runAssistantStream(e,n,r,{...a,headers:{...a?.headers,"X-Stainless-Helper-Method":"stream"}})),l}currentEvent(){return W(this,ys,"f")}currentRun(){return W(this,ws,"f")}currentMessageSnapshot(){return W(this,_t,"f")}currentRunStepSnapshot(){return W(this,tr,"f")}async finalRunSteps(){return await this.done(),Object.values(W(this,Ot,"f"))}async finalMessages(){return await this.done(),Object.values(W(this,vs,"f"))}async finalRun(){if(await this.done(),!W(this,An,"f"))throw Error("Final run was not received.");return W(this,An,"f")}async _createThreadAssistantStream(e,n,r){const a=r?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...n,stream:!0},u=await e.createAndRun(l,{...r,signal:this.controller.signal});this._connected();for await(const h of u)W(this,je,"m",Gi).call(this,h);if(u.controller.signal?.aborted)throw new yt;return this._addRun(W(this,je,"m",Vi).call(this))}async _createAssistantStream(e,n,r,a){const l=a?.signal;l&&(l.aborted&&this.controller.abort(),l.addEventListener("abort",()=>this.controller.abort()));const u={...r,stream:!0},h=await e.create(n,u,{...a,signal:this.controller.signal});this._connected();for await(const f of h)W(this,je,"m",Gi).call(this,f);if(h.controller.signal?.aborted)throw new yt;return this._addRun(W(this,je,"m",Vi).call(this))}static accumulateDelta(e,n){for(const[r,a]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=a;continue}let l=e[r];if(l==null){e[r]=a;continue}if(r==="index"||r==="type"){e[r]=a;continue}if(typeof l=="string"&&typeof a=="string")l+=a;else if(typeof l=="number"&&typeof a=="number")l+=a;else if(So(l)&&So(a))l=this.accumulateDelta(l,a);else if(Array.isArray(l)&&Array.isArray(a)){if(l.every(u=>typeof u=="string"||typeof u=="number")){l.push(...a);continue}for(const u of a){if(!So(u))throw new Error(`Expected array delta entry to be an object but got: ${u}`);const h=u.index;if(h==null)throw console.error(u),new Error("Expected array delta entry to have an `index` property");if(typeof h!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${h}`);const f=l[h];f==null?l.push(u):l[h]=this.accumulateDelta(f,u)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${a}, accValue: ${l}`);e[r]=l}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,a){return await this._createAssistantStream(n,e,r,a)}async _runToolAssistantStream(e,n,r,a,l){return await this._createToolAssistantStream(r,e,n,a,l)}}Gi=function(e){if(!this.ended)switch(et(this,ys,e,"f"),W(this,je,"m",Qc).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":W(this,je,"m",ih).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":W(this,je,"m",Xc).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":W(this,je,"m",Yc).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Vi=function(){if(this.ended)throw new se("stream has ended, this shouldn't happen");if(!W(this,An,"f"))throw Error("Final run has not been received");return W(this,An,"f")},Yc=function(e){const[n,r]=W(this,je,"m",th).call(this,e,W(this,_t,"f"));et(this,_t,n,"f"),W(this,vs,"f")[n.id]=n;for(const a of r){const l=n.content[a.index];l?.type=="text"&&this._emit("textCreated",l.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const a of e.data.delta.content){if(a.type=="text"&&a.text){let l=a.text,u=n.content[a.index];if(u&&u.type=="text")this._emit("textDelta",l,u.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(a.index!=W(this,ti,"f")){if(W(this,xn,"f"))switch(W(this,xn,"f").type){case"text":this._emit("textDone",W(this,xn,"f").text,W(this,_t,"f"));break;case"image_file":this._emit("imageFileDone",W(this,xn,"f").image_file,W(this,_t,"f"));break}et(this,ti,a.index,"f")}et(this,xn,n.content[a.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(W(this,ti,"f")!==void 0){const a=e.data.content[W(this,ti,"f")];if(a)switch(a.type){case"image_file":this._emit("imageFileDone",a.image_file,W(this,_t,"f"));break;case"text":this._emit("textDone",a.text,W(this,_t,"f"));break}}W(this,_t,"f")&&this._emit("messageDone",e.data),et(this,_t,void 0,"f")}},Xc=function(e){const n=W(this,je,"m",eh).call(this,e);switch(et(this,tr,n,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const l of r.step_details.tool_calls)l.index==W(this,Es,"f")?this._emit("toolCallDelta",l,n.step_details.tool_calls[l.index]):(W(this,it,"f")&&this._emit("toolCallDone",W(this,it,"f")),et(this,Es,l.index,"f"),et(this,it,n.step_details.tool_calls[l.index],"f"),W(this,it,"f")&&this._emit("toolCallCreated",W(this,it,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":et(this,tr,void 0,"f"),e.data.step_details.type=="tool_calls"&&W(this,it,"f")&&(this._emit("toolCallDone",W(this,it,"f")),et(this,it,void 0,"f")),this._emit("runStepDone",e.data,n);break}},Qc=function(e){W(this,al,"f").push(e),this._emit("event",e)},eh=function(e){switch(e.event){case"thread.run.step.created":return W(this,Ot,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=W(this,Ot,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const a=wt.accumulateDelta(n,r.delta);W(this,Ot,"f")[e.data.id]=a}return W(this,Ot,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":W(this,Ot,"f")[e.data.id]=e.data;break}if(W(this,Ot,"f")[e.data.id])return W(this,Ot,"f")[e.data.id];throw new Error("No snapshot available")},th=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let a=e.data;if(a.delta.content)for(const l of a.delta.content)if(l.index in n.content){let u=n.content[l.index];n.content[l.index]=W(this,je,"m",nh).call(this,l,u)}else n.content[l.index]=l,r.push(l);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},nh=function(e,n){return wt.accumulateDelta(n,e)},ih=function(e){switch(et(this,ws,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":et(this,An,e.data,"f"),W(this,it,"f")&&(this._emit("toolCallDone",W(this,it,"f")),et(this,it,void 0,"f"));break}};class Ol extends fe{create(e,n,r){return this._client.post(`/threads/${e}/messages`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,n,r){return this._client.get(`/threads/${e}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(e,n,r,a){return this._client.post(`/threads/${e}/messages/${n}`,{body:r,...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers}})}list(e,n={},r){return Fe(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/messages`,$l,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(e,n,r){return this._client.delete(`/threads/${e}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}}class $l extends at{}Ol.MessagesPage=$l;class Ml extends fe{retrieve(e,n,r,a={},l){return Fe(a)?this.retrieve(e,n,r,{},a):this._client.get(`/threads/${e}/runs/${n}/steps/${r}`,{query:a,...l,headers:{"OpenAI-Beta":"assistants=v2",...l?.headers}})}list(e,n,r={},a){return Fe(r)?this.list(e,n,{},r):this._client.getAPIList(`/threads/${e}/runs/${n}/steps`,Rl,{query:r,...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers}})}}class Rl extends at{}Ml.RunStepsPage=Rl;class br extends fe{constructor(){super(...arguments),this.steps=new Ml(this._client)}create(e,n,r){const{include:a,...l}=n;return this._client.post(`/threads/${e}/runs`,{query:{include:a},body:l,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers},stream:n.stream??!1})}retrieve(e,n,r){return this._client.get(`/threads/${e}/runs/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(e,n,r,a){return this._client.post(`/threads/${e}/runs/${n}`,{body:r,...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers}})}list(e,n={},r){return Fe(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/runs`,Il,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}cancel(e,n,r){return this._client.post(`/threads/${e}/runs/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async createAndPoll(e,n,r){const a=await this.create(e,n,r);return await this.poll(e,a.id,r)}createAndStream(e,n,r){return wt.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){const a={...r?.headers,"X-Stainless-Poll-Helper":"true"};for(r?.pollIntervalMs&&(a["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:l,response:u}=await this.retrieve(e,n,{...r,headers:{...r?.headers,...a}}).withResponse();switch(l.status){case"queued":case"in_progress":case"cancelling":let h=5e3;if(r?.pollIntervalMs)h=r.pollIntervalMs;else{const f=u.headers.get("openai-poll-after-ms");if(f){const m=parseInt(f);isNaN(m)||(h=m)}}await vr(h);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return l}}}stream(e,n,r){return wt.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r,a){return this._client.post(`/threads/${e}/runs/${n}/submit_tool_outputs`,{body:r,...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(e,n,r,a){const l=await this.submitToolOutputs(e,n,r,a);return await this.poll(e,l.id,a)}submitToolOutputsStream(e,n,r,a){return wt.createToolAssistantStream(e,n,this._client.beta.threads.runs,r,a)}}class Il extends at{}br.RunsPage=Il;br.Steps=Ml;br.RunStepsPage=Rl;class mi extends fe{constructor(){super(...arguments),this.runs=new br(this._client),this.messages=new Ol(this._client)}create(e={},n){return Fe(e)?this.create({},e):this._client.post("/threads",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,n){return this._client.get(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,n,r){return this._client.post(`/threads/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(e,n){return this._client.delete(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers},stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.thread_id,r.id,n)}createAndRunStream(e,n){return wt.createThreadAssistantStream(e,this._client.beta.threads,n)}}mi.Runs=br;mi.RunsPage=Il;mi.Messages=Ol;mi.MessagesPage=$l;const t0=async i=>{const e=await Promise.allSettled(i),n=e.filter(a=>a.status==="rejected");if(n.length){for(const a of n)console.error(a.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const a of e)a.status==="fulfilled"&&r.push(a.value);return r};let ql=class extends fe{create(e,n,r){return this._client.post(`/vector_stores/${e}/files`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,n,r){return this._client.get(`/vector_stores/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e,n={},r){return Fe(n)?this.list(e,{},n):this._client.getAPIList(`/vector_stores/${e}/files`,Sa,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(e,n,r){return this._client.delete(`/vector_stores/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async createAndPoll(e,n,r){const a=await this.create(e,n,r);return await this.poll(e,a.id,r)}async poll(e,n,r){const a={...r?.headers,"X-Stainless-Poll-Helper":"true"};for(r?.pollIntervalMs&&(a["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const l=await this.retrieve(e,n,{...r,headers:a}).withResponse(),u=l.data;switch(u.status){case"in_progress":let h=5e3;if(r?.pollIntervalMs)h=r.pollIntervalMs;else{const f=l.response.headers.get("openai-poll-after-ms");if(f){const m=parseInt(f);isNaN(m)||(h=m)}}await vr(h);break;case"failed":case"completed":return u}}}async upload(e,n,r){const a=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:a.id},r)}async uploadAndPoll(e,n,r){const a=await this.upload(e,n,r);return await this.poll(e,a.id,r)}};class Sa extends at{}ql.VectorStoreFilesPage=Sa;class pf extends fe{create(e,n,r){return this._client.post(`/vector_stores/${e}/file_batches`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,n,r){return this._client.get(`/vector_stores/${e}/file_batches/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}cancel(e,n,r){return this._client.post(`/vector_stores/${e}/file_batches/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async createAndPoll(e,n,r){const a=await this.create(e,n);return await this.poll(e,a.id,r)}listFiles(e,n,r={},a){return Fe(r)?this.listFiles(e,n,{},r):this._client.getAPIList(`/vector_stores/${e}/file_batches/${n}/files`,Sa,{query:r,...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers}})}async poll(e,n,r){const a={...r?.headers,"X-Stainless-Poll-Helper":"true"};for(r?.pollIntervalMs&&(a["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:l,response:u}=await this.retrieve(e,n,{...r,headers:a}).withResponse();switch(l.status){case"in_progress":let h=5e3;if(r?.pollIntervalMs)h=r.pollIntervalMs;else{const f=u.headers.get("openai-poll-after-ms");if(f){const m=parseInt(f);isNaN(m)||(h=m)}}await vr(h);break;case"failed":case"cancelled":case"completed":return l}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},a){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const l=a?.maxConcurrency??5,u=Math.min(l,n.length),h=this._client,f=n.values(),m=[...r];async function g(v){for(let b of v){const S=await h.files.create({file:b,purpose:"assistants"},a);m.push(S.id)}}const _=Array(u).fill(f).map(g);return await t0(_),await this.createAndPoll(e,{file_ids:m})}}class pi extends fe{constructor(){super(...arguments),this.files=new ql(this._client),this.fileBatches=new pf(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,n){return this._client.get(`/vector_stores/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,n,r){return this._client.post(`/vector_stores/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e={},n){return Fe(e)?this.list({},e):this._client.getAPIList("/vector_stores",jl,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,n){return this._client.delete(`/vector_stores/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class jl extends at{}pi.VectorStoresPage=jl;pi.Files=ql;pi.VectorStoreFilesPage=Sa;pi.FileBatches=pf;class on extends fe{constructor(){super(...arguments),this.realtime=new El(this._client),this.vectorStores=new pi(this._client),this.chat=new ff(this._client),this.assistants=new Cl(this._client),this.threads=new mi(this._client)}}on.Realtime=El;on.VectorStores=pi;on.VectorStoresPage=jl;on.Assistants=Cl;on.AssistantsPage=Tl;on.Threads=mi;class gf extends fe{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class _f extends fe{create(e,n){return this._client.post("/embeddings",{body:e,...n})}}class Dl extends fe{create(e,n){return this._client.post("/files",li({body:e,...n}))}retrieve(e,n){return this._client.get(`/files/${e}`,n)}list(e={},n){return Fe(e)?this.list({},e):this._client.getAPIList("/files",Bl,{query:e,...n})}del(e,n){return this._client.delete(`/files/${e}`,n)}content(e,n){return this._client.get(`/files/${e}/content`,{...n,headers:{Accept:"application/binary",...n?.headers},__binaryResponse:!0})}retrieveContent(e,n){return this._client.get(`/files/${e}/content`,n)}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const a=new Set(["processed","error","deleted"]),l=Date.now();let u=await this.retrieve(e);for(;!u.status||!a.has(u.status);)if(await vr(n),u=await this.retrieve(e),Date.now()-l>r)throw new Pl({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return u}}class Bl extends at{}Dl.FileObjectsPage=Bl;class Nl extends fe{list(e,n={},r){return Fe(n)?this.list(e,{},n):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,zl,{query:n,...r})}}class zl extends at{}Nl.FineTuningJobCheckpointsPage=zl;class gi extends fe{constructor(){super(...arguments),this.checkpoints=new Nl(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(`/fine_tuning/jobs/${e}`,n)}list(e={},n){return Fe(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",Fl,{query:e,...n})}cancel(e,n){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return Fe(n)?this.listEvents(e,{},n):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,Ul,{query:n,...r})}}class Fl extends at{}class Ul extends at{}gi.FineTuningJobsPage=Fl;gi.FineTuningJobEventsPage=Ul;gi.Checkpoints=Nl;gi.FineTuningJobCheckpointsPage=zl;class xr extends fe{constructor(){super(...arguments),this.jobs=new gi(this._client)}}xr.Jobs=gi;xr.FineTuningJobsPage=Fl;xr.FineTuningJobEventsPage=Ul;class vf extends fe{createVariation(e,n){return this._client.post("/images/variations",li({body:e,...n}))}edit(e,n){return this._client.post("/images/edits",li({body:e,...n}))}generate(e,n){return this._client.post("/images/generations",{body:e,...n})}}class Zl extends fe{retrieve(e,n){return this._client.get(`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",Wl,e)}del(e,n){return this._client.delete(`/models/${e}`,n)}}class Wl extends Fb{}Zl.ModelsPage=Wl;class yf extends fe{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class wf extends fe{create(e,n,r){return this._client.post(`/uploads/${e}/parts`,li({body:n,...r}))}}class Hl extends fe{constructor(){super(...arguments),this.parts=new wf(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(`/uploads/${e}/complete`,{body:n,...r})}}Hl.Parts=wf;var bf;class le extends Lb{constructor({baseURL:e=rs("OPENAI_BASE_URL"),apiKey:n=rs("OPENAI_API_KEY"),organization:r=rs("OPENAI_ORG_ID")??null,project:a=rs("OPENAI_PROJECT_ID")??null,...l}={}){if(n===void 0)throw new se("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const u={apiKey:n,organization:r,project:a,...l,baseURL:e||"https://api.openai.com/v1"};if(!u.dangerouslyAllowBrowser&&Nb())throw new se(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:u.baseURL,timeout:u.timeout??6e5,httpAgent:u.httpAgent,maxRetries:u.maxRetries,fetch:u.fetch}),this.completions=new gf(this),this.chat=new Pa(this),this.embeddings=new _f(this),this.files=new Dl(this),this.images=new vf(this),this.audio=new yr(this),this.moderations=new yf(this),this.models=new Zl(this),this.fineTuning=new xr(this),this.beta=new on(this),this.batches=new Sl(this),this.uploads=new Hl(this),this._options=u,this.apiKey=n,this.organization=r,this.project=a}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return hb(e,{arrayFormat:"brackets"})}}bf=le;le.OpenAI=bf;le.DEFAULT_TIMEOUT=6e5;le.OpenAIError=se;le.APIError=De;le.APIConnectionError=va;le.APIConnectionTimeoutError=Pl;le.APIUserAbortError=yt;le.NotFoundError=Ad;le.ConflictError=Pd;le.RateLimitError=kd;le.BadRequestError=wd;le.AuthenticationError=bd;le.InternalServerError=Cd;le.PermissionDeniedError=xd;le.UnprocessableEntityError=Sd;le.toFile=Md;le.fileFromPath=vd;le.Completions=gf;le.Chat=Pa;le.ChatCompletionsPage=Aa;le.Embeddings=_f;le.Files=Dl;le.FileObjectsPage=Bl;le.Images=vf;le.Audio=yr;le.Moderations=yf;le.Models=Zl;le.ModelsPage=Wl;le.FineTuning=xr;le.Beta=on;le.Batches=Sl;le.BatchesPage=kl;le.Uploads=Hl;const n0=new le({apiKey:void 0,dangerouslyAllowBrowser:!0});async function i0(i){try{if(i===null)return console.log("API nije uspio dohvatiti model aviona"),null;const n=(await n0.chat.completions.create({model:"gpt-3.5-turbo",messages:[{role:"developer",content:"Ti si asistent koji piše 4 rečenice o navedenom zrakoplovu. Neka informacije budu kratke i točne, a zadnja rečenica neka bude: 'Ukupna peoizvodnja modela je (točan broj proizvedenih modela, brojeve ne razdvajaj s . ili ,)'."},{role:"user",content:`Napiši mi neke važne informacije o zrakoplovu: ${i}.`}]})).choices[0].message.content;let r=[];r=n.split(" ");let a=r.length,l=r[a-1];l=l.replace(".",""),l=l.replace(",","");let u=parseInt(l,10);return await J0(i,n,u),n}catch(e){throw console.error("Greška pri dohvaćanju podataka o modelu aviona:",e),e}}const r0="/ZavrsniV2/assets/bingo-By8HdSJr.mp3",s0="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAAJAAAPfAA8PDw8PDw8PDw8PFJSUlJSUlJSUlJSXFxcXFxcXFxcXFyBgYGBgYGBgYGBgba2tra2tra2tra20NDQ0NDQ0NDQ0NDj4+Pj4+Pj4+Pj4/Dw8PDw8PDw8PDw//////////////8AAABQTEFNRTMuMTAwBLkAAAAAAAAAABUgJAN7QQAB4AAAD3wjY5PZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//vQxAAACYwDcfQQACTDw2m3PbBRREZwAEl/LLJPhg+D7ww0HwfD6z+fDHKawfBAEHKAfgh/B8EHf/Lg+D4Pg+CAIO/iAEAxWD4Pg+CAIAgCAJg+D4Pg/1AmD4Pg/9IPg+dmgABQICBfQAgCCUAgmkCQAG9XqMgKmBcBwYEoHhgRAYygwFwPEQDAaCvMLAJgwBQEjHrI7EgQzRodMMAYD5kKgpiQE/JUJ2SqliTjUbDEcUkGcuC1puxhQK/MfXMauII90gWHz5BwOCVbi7yAZfKKo6TBcCUechmJiAe9rguurmGZpSyVQTQ5pTCALiEtvvqx46UOSbuYuTLa1Z2YRL71zN9oDjdjCtTZKUmTAE7q1LodlFeafLGta7lWf6DF65f//+AgGGb0m943J59ZLR65+X61v0C6n6//7v8iQLIgzm////fdbuS7LH68q//+lbWl3ld3zNO2W4YTMbZWteR9rcwz6slrlrd6vWyy3jjrLL//////////HWW98z5n3///////////+pr//7ySjFi/Ff2HYAAmnmCPkRNFql1Bp/gqAIbQzkqVdzDjEUoAW5iwSGAtiNCFGQXxMLR90MZTLnOlCIBYB0WTdv//1IQWQAQtP///5EA+Ck3Rf/9DjigilIm////NN////Ix4Kx3///yE4Nf/kd+WVAAqinhBgKPvwWxEgLkKcjS0TEyQYBLvGDgJGDoknNLFGGYAoKLXfhwH/pLcDRCcwkYx5DXZTBzQqgCx9erqsCzM0f+PCUBEMnI///9jhSD1t5z5rehzqaaaOjURQcllN//+j1YeGzt///XHSOr/g0JQ0t6AABddwAABj3U3BAiHY0qinMW6NgU9UDC4DnOdQQExKAEQcEMPAUF+2tvpBttgVbdmWo3KrTiQKGAScJGiRqJpYhAAFI4AH7tNcrl6mUl6kHQUCCRjE5MEMXw1lzXTCPBGOCS50Zfp7YepHLv55WE4UAMrVZmFIAABj7QAAAzi45D46Go7j4EDQx4BRJhAA8HApYy4sKTDA9IdMQJu4wDQgzAyC6pZxLzrLH0bd22tv2j+kuX7QFsnfhgD+R+flUgjksyr18sK8/tYoIGe3KgACsqoYP/7cMTYAAzBk039tQAB0qunvdQeXEATRiABfGAkBCYZIephHgaGGQGMGBEmBsAwYFQJhg+gjmCYAAYTYDhjTDIHPZQGYhwARg9hRmBmCAAgMSgEEwKQVTBNASMLwRYw0gMDCjFhMhsfEwujWjNCBBNBo1owMSSTH9E3MM8HMzRFjhiYBRRMXkkaLRkcwmSQeYKFBiYPGFAIKg0wuCWRO6yQvuYDAKXYUBRhYLBwURvV+tNZxgQMGJBIYYAifqWZgILGHAkHB8LAYwUAi5BgIOGNiQZQIxi4DAEMmNhMJBUaCZiYpGYjgZwAxq+DmTZQd6OxyyUGGkOZvGoKFRkw9GeC0Y0AwJBaZwKAYgDBjIgGPhgDhYlWxIwECA4IX0AQBWCAAQKMscMwOSYUzQUaYtACAC3kCsPf5QD/+yDE/IBIAFcprPjK6NCG5X2fYUVS+JLCPyxN6EhEwGyoKMJLbuMFAQOMGRXmNSHCJGgWA4CYMKHAxAAAwhrqRcDKBtnR4R8jLW4spg3jDH4pWBtsCACtKEtrRaNryKjkoru8iYgEZorYnQwstmgu0YtggAXQqdTduwAFGQBBUmYE//ugxPiACzRhI+17Ki+SPeMl7mqoMaAcIwpjASsKl60EiHkht/6affRnDiTMvgBrkyxCKw/HHcsVL1fHOYjFivflEOVoYnJXL4Aa5JnbeRlbL1GjCABGTKE5jiQ0AXwmpd6qKoWBBxGMxemQQEGJ5XAJmwcOLXQEDJgQA5fUwME0yDnY/d2gaxIIEUIA0VBYxtAEzgCMyzFA0xQY0MT00iQUwfXg5VtoyElElMtOBzzCvgGUwNAGSMC1AmDNcYDIZNTLITDCwWzEkmjGAMTCUNjCsEgIBBgCC5g0BpVAZm4WAVDrUehQ4MAJKcwKAFNUKgApaIQEMEQSDAKW2W9fCGwACpgqCQGBZJ8mAEEgAYIgIIgJMGgbMHABMDAFMBgBMGw2MTxEDBfMQh3MlihCt3GMfSmZCWmLQqg4IDEUSjD0DRQHzEoJS6gVAIwMAgwpAowdCgLgWpqEASGAECgFBgTgYMi/wWANpEFJ5FkS4KsDNdhUAlJRtMGo1xA8MApkiUZfFlS5pE9KVq2VMXqLjJFCIATBINSobhigMJhyDZgYDKFgNAAvktEuy4Cw0Oq3LWbq4vGlPel6807H2WoTlGSzq7EFmyIrPOoC1hFKD8k9UflDS7L2ICjAMAFRMpgWGlpGAYDA4BioBJhIEZgWMxiWXqMZgkAoFAFMJdTd0iX5pH6ZU/VqAWuw//vAxNOAPHXvHg7/sgK0vSh9wdbRY6zortjbEYIa9BMJpojORmJQ9nS0tBFo65U9DMCvs5UfYbBytrNWVFsiz5ggF5hcYwsPoQLAiBBJYiBS+9POTCAYCeiR2NGAwGZ0DQQWWW+gBiiKSVTd1esSaTRPrGHKpZqNV3dRFHQAY7F5uAEHABat5H1gz+yqljW8gMHBVLwzyGpNz/+Ic573agmTgmYGhQ0A0NAvkQ0NmFGTPIl44mytFS1tb7pvutzNkNRgggrUVyfIuRgNwCAwhISRumpAwMEHrTL5ubp2QQQQb6f//VzMuCbwMhhoPXKo7DT///////VmgyxkVzNS7rvL2DAAewCCGdF5VYGDcu8uynV2O2WfOhZycXGCnWXZH3YEIAhQVDADxjFEazCUDERU1l0vdKZ/7RifTbzxPoom55B6X6CdetqVZifWZEeJYCRtA10Wg1WBYiMkVSseVfWj61KSSSS60UW/0UUUazImiBEGIsTwiQGTSAW+h3hPQyRPJJJF4vGqPWyNaKKPWiklqSdJX/11mQSDgaYCMiYnS0rXr+v///9etqnRMisJQGmRQuGaF1VVmwAAKAFW7SquoC9oVAAsDbUFqZfYht/GdqAAEBmJhQeTfB9MdGEgCoM5MNR2f3hYKDJIrqTIrNk7ra36S+r+mgbkwLnBs6B+N4WyJUwWy2//T9VmQVRczpJp/1IMy3G6AmqDIwjodx4413XuvUyr7OilutSbVO6KVS1HUDybFc1KwYpBsHiyiHFYyOsmyVnRSW1S7f////TSEFhFzRAso5kJiZoAAL0BgjP95//c/7vm6isjEGqNy7XjDpugnOKAFDIN5gdp/mE+EsYIgDoCAeQApnOy16K37I/FcoZDt1m1pMeTVdSZdKuio2LqjoJgA66DQBBxqmeLy27r9BFST1OiilrRRpJIo1JPopJHSdKJUHsAhYGwonIipxMumrVIosr/+4DE7gCW7e077taW4oo9pzw+UWxJJKtJLRRapFHUklXvWi2iiipIhwfEPYrUtkVNUW6X/////9H5dLo1nZgWFAAA4EZCGRHvNP+j3LLbSbUFwwpmgALJmDAUGNo/nnnQnrArmFYFBQBVTLRXk/salFGAN+ccKzqIfNV3dmeGIAA/AAApC8uLi3ME1mlrllscWJLbC8X0iLAEnQaCsYAafBjzA6mCuAwBgNRIApNVUzu0dS4AIu3xqBEYIoOgj0iQtT2YmXiUAAD/A3yHkEG4GAjSfi5qPSvVahNJESLKIp7rvxB50AhgMGmEAMc5yQcv4PbZ+6COSjG7LKmfcqljfc6enldykqY/hdp+6wxr09jX////hhWUeWeUdAcAlhfywhAAAAAABJWPmqWmHaRKjUAMAKNfxOSufWImGAmNQGmemIYTkNBMBBogNAIAUQiwLiAIMoCiKFKgZaaoGLx8BgMCgCBMAwEheQIgWP/7YMTtAFU55zPvDnao9g1lPB6JbQoKBAcT+A0MQMFBcG2gKAYXMTRWJkNjFwDwTIfOBhMRABAMCQMAwIDwsYWySnK5fMEDRYnIQmIUgpDSR/d7Nl4yNi6Ymht//SsTRfLRASYK5AimTn/R/8gJYJ8ixRLhdMjNIu////5wRAqZBsAiMGf//+osLgIiARGqTEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqv/7QMTxAEkAaynjeKtpTRBlPp/ABKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//tQxPOAGeVfLfmqggAAAD/DgAAEqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==",a0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",o0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";var ol={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(i,e){(function(n,r){r(e)})(st,function(n){var r="1.9.4";function a(t){var s,o,c,d;for(o=1,c=arguments.length;o<c;o++){d=arguments[o];for(s in d)t[s]=d[s]}return t}var l=Object.create||function(){function t(){}return function(s){return t.prototype=s,new t}}();function u(t,s){var o=Array.prototype.slice;if(t.bind)return t.bind.apply(t,o.call(arguments,1));var c=o.call(arguments,2);return function(){return t.apply(s,c.length?c.concat(o.call(arguments)):arguments)}}var h=0;function f(t){return"_leaflet_id"in t||(t._leaflet_id=++h),t._leaflet_id}function m(t,s,o){var c,d,p,w;return w=function(){c=!1,d&&(p.apply(o,d),d=!1)},p=function(){c?d=arguments:(t.apply(o,arguments),setTimeout(w,s),c=!0)},p}function g(t,s,o){var c=s[1],d=s[0],p=c-d;return t===c&&o?t:((t-d)%p+p)%p+d}function _(){return!1}function v(t,s){if(s===!1)return t;var o=Math.pow(10,s===void 0?6:s);return Math.round(t*o)/o}function b(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function S(t){return b(t).split(/\s+/)}function y(t,s){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?l(t.options):{});for(var o in s)t.options[o]=s[o];return t.options}function x(t,s,o){var c=[];for(var d in t)c.push(encodeURIComponent(o?d.toUpperCase():d)+"="+encodeURIComponent(t[d]));return(!s||s.indexOf("?")===-1?"?":"&")+c.join("&")}var k=/\{ *([\w_ -]+) *\}/g;function A(t,s){return t.replace(k,function(o,c){var d=s[c];if(d===void 0)throw new Error("No value provided for variable "+o);return typeof d=="function"&&(d=d(s)),d})}var E=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function T(t,s){for(var o=0;o<t.length;o++)if(t[o]===s)return o;return-1}var $="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function I(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var M=0;function B(t){var s=+new Date,o=Math.max(0,16-(s-M));return M=s+o,window.setTimeout(t,o)}var N=window.requestAnimationFrame||I("RequestAnimationFrame")||B,D=window.cancelAnimationFrame||I("CancelAnimationFrame")||I("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function U(t,s,o){if(o&&N===B)t.call(s);else return N.call(window,u(t,s))}function he(t){t&&D.call(window,t)}var Ae={__proto__:null,extend:a,create:l,bind:u,get lastId(){return h},stamp:f,throttle:m,wrapNum:g,falseFn:_,formatNum:v,trim:b,splitWords:S,setOptions:y,getParamString:x,template:A,isArray:E,indexOf:T,emptyImageUrl:$,requestFn:N,cancelFn:D,requestAnimFrame:U,cancelAnimFrame:he};function V(){}V.extend=function(t){var s=function(){y(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=s.__super__=this.prototype,c=l(o);c.constructor=s,s.prototype=c;for(var d in this)Object.prototype.hasOwnProperty.call(this,d)&&d!=="prototype"&&d!=="__super__"&&(s[d]=this[d]);return t.statics&&a(s,t.statics),t.includes&&(X(t.includes),a.apply(null,[c].concat(t.includes))),a(c,t),delete c.statics,delete c.includes,c.options&&(c.options=o.options?l(o.options):{},a(c.options,t.options)),c._initHooks=[],c.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var p=0,w=c._initHooks.length;p<w;p++)c._initHooks[p].call(this)}},s},V.include=function(t){var s=this.prototype.options;return a(this.prototype,t),t.options&&(this.prototype.options=s,this.mergeOptions(t.options)),this},V.mergeOptions=function(t){return a(this.prototype.options,t),this},V.addInitHook=function(t){var s=Array.prototype.slice.call(arguments,1),o=typeof t=="function"?t:function(){this[t].apply(this,s)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(o),this};function X(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=E(t)?t:[t];for(var s=0;s<t.length;s++)t[s]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Y={on:function(t,s,o){if(typeof t=="object")for(var c in t)this._on(c,t[c],s);else{t=S(t);for(var d=0,p=t.length;d<p;d++)this._on(t[d],s,o)}return this},off:function(t,s,o){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var c in t)this._off(c,t[c],s);else{t=S(t);for(var d=arguments.length===1,p=0,w=t.length;p<w;p++)d?this._off(t[p]):this._off(t[p],s,o)}return this},_on:function(t,s,o,c){if(typeof s!="function"){console.warn("wrong listener type: "+typeof s);return}if(this._listens(t,s,o)===!1){o===this&&(o=void 0);var d={fn:s,ctx:o};c&&(d.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(d)}},_off:function(t,s,o){var c,d,p;if(this._events&&(c=this._events[t],!!c)){if(arguments.length===1){if(this._firingCount)for(d=0,p=c.length;d<p;d++)c[d].fn=_;delete this._events[t];return}if(typeof s!="function"){console.warn("wrong listener type: "+typeof s);return}var w=this._listens(t,s,o);if(w!==!1){var P=c[w];this._firingCount&&(P.fn=_,this._events[t]=c=c.slice()),c.splice(w,1)}}},fire:function(t,s,o){if(!this.listens(t,o))return this;var c=a({},s,{type:t,target:this,sourceTarget:s&&s.sourceTarget||this});if(this._events){var d=this._events[t];if(d){this._firingCount=this._firingCount+1||1;for(var p=0,w=d.length;p<w;p++){var P=d[p],C=P.fn;P.once&&this.off(t,C,P.ctx),C.call(P.ctx||this,c)}this._firingCount--}}return o&&this._propagateEvent(c),this},listens:function(t,s,o,c){typeof t!="string"&&console.warn('"string" type argument expected');var d=s;typeof s!="function"&&(c=!!s,d=void 0,o=void 0);var p=this._events&&this._events[t];if(p&&p.length&&this._listens(t,d,o)!==!1)return!0;if(c){for(var w in this._eventParents)if(this._eventParents[w].listens(t,s,o,c))return!0}return!1},_listens:function(t,s,o){if(!this._events)return!1;var c=this._events[t]||[];if(!s)return!!c.length;o===this&&(o=void 0);for(var d=0,p=c.length;d<p;d++)if(c[d].fn===s&&c[d].ctx===o)return d;return!1},once:function(t,s,o){if(typeof t=="object")for(var c in t)this._on(c,t[c],s,!0);else{t=S(t);for(var d=0,p=t.length;d<p;d++)this._on(t[d],s,o,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[f(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[f(t)],this},_propagateEvent:function(t){for(var s in this._eventParents)this._eventParents[s].fire(t.type,a({layer:t.target,propagatedFrom:t.target},t),!0)}};Y.addEventListener=Y.on,Y.removeEventListener=Y.clearAllEventListeners=Y.off,Y.addOneTimeEventListener=Y.once,Y.fireEvent=Y.fire,Y.hasEventListeners=Y.listens;var Pe=V.extend(Y);function G(t,s,o){this.x=o?Math.round(t):t,this.y=o?Math.round(s):s}var Ue=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};G.prototype={clone:function(){return new G(this.x,this.y)},add:function(t){return this.clone()._add(H(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(H(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new G(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new G(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ue(this.x),this.y=Ue(this.y),this},distanceTo:function(t){t=H(t);var s=t.x-this.x,o=t.y-this.y;return Math.sqrt(s*s+o*o)},equals:function(t){return t=H(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=H(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function H(t,s,o){return t instanceof G?t:E(t)?new G(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new G(t.x,t.y):new G(t,s,o)}function ue(t,s){if(t)for(var o=s?[t,s]:t,c=0,d=o.length;c<d;c++)this.extend(o[c])}ue.prototype={extend:function(t){var s,o;if(!t)return this;if(t instanceof G||typeof t[0]=="number"||"x"in t)s=o=H(t);else if(t=ve(t),s=t.min,o=t.max,!s||!o)return this;return!this.min&&!this.max?(this.min=s.clone(),this.max=o.clone()):(this.min.x=Math.min(s.x,this.min.x),this.max.x=Math.max(o.x,this.max.x),this.min.y=Math.min(s.y,this.min.y),this.max.y=Math.max(o.y,this.max.y)),this},getCenter:function(t){return H((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return H(this.min.x,this.max.y)},getTopRight:function(){return H(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var s,o;return typeof t[0]=="number"||t instanceof G?t=H(t):t=ve(t),t instanceof ue?(s=t.min,o=t.max):s=o=t,s.x>=this.min.x&&o.x<=this.max.x&&s.y>=this.min.y&&o.y<=this.max.y},intersects:function(t){t=ve(t);var s=this.min,o=this.max,c=t.min,d=t.max,p=d.x>=s.x&&c.x<=o.x,w=d.y>=s.y&&c.y<=o.y;return p&&w},overlaps:function(t){t=ve(t);var s=this.min,o=this.max,c=t.min,d=t.max,p=d.x>s.x&&c.x<o.x,w=d.y>s.y&&c.y<o.y;return p&&w},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var s=this.min,o=this.max,c=Math.abs(s.x-o.x)*t,d=Math.abs(s.y-o.y)*t;return ve(H(s.x-c,s.y-d),H(o.x+c,o.y+d))},equals:function(t){return t?(t=ve(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function ve(t,s){return!t||t instanceof ue?t:new ue(t,s)}function Se(t,s){if(t)for(var o=s?[t,s]:t,c=0,d=o.length;c<d;c++)this.extend(o[c])}Se.prototype={extend:function(t){var s=this._southWest,o=this._northEast,c,d;if(t instanceof ae)c=t,d=t;else if(t instanceof Se){if(c=t._southWest,d=t._northEast,!c||!d)return this}else return t?this.extend(q(t)||ye(t)):this;return!s&&!o?(this._southWest=new ae(c.lat,c.lng),this._northEast=new ae(d.lat,d.lng)):(s.lat=Math.min(c.lat,s.lat),s.lng=Math.min(c.lng,s.lng),o.lat=Math.max(d.lat,o.lat),o.lng=Math.max(d.lng,o.lng)),this},pad:function(t){var s=this._southWest,o=this._northEast,c=Math.abs(s.lat-o.lat)*t,d=Math.abs(s.lng-o.lng)*t;return new Se(new ae(s.lat-c,s.lng-d),new ae(o.lat+c,o.lng+d))},getCenter:function(){return new ae((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ae(this.getNorth(),this.getWest())},getSouthEast:function(){return new ae(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof ae||"lat"in t?t=q(t):t=ye(t);var s=this._southWest,o=this._northEast,c,d;return t instanceof Se?(c=t.getSouthWest(),d=t.getNorthEast()):c=d=t,c.lat>=s.lat&&d.lat<=o.lat&&c.lng>=s.lng&&d.lng<=o.lng},intersects:function(t){t=ye(t);var s=this._southWest,o=this._northEast,c=t.getSouthWest(),d=t.getNorthEast(),p=d.lat>=s.lat&&c.lat<=o.lat,w=d.lng>=s.lng&&c.lng<=o.lng;return p&&w},overlaps:function(t){t=ye(t);var s=this._southWest,o=this._northEast,c=t.getSouthWest(),d=t.getNorthEast(),p=d.lat>s.lat&&c.lat<o.lat,w=d.lng>s.lng&&c.lng<o.lng;return p&&w},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,s){return t?(t=ye(t),this._southWest.equals(t.getSouthWest(),s)&&this._northEast.equals(t.getNorthEast(),s)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ye(t,s){return t instanceof Se?t:new Se(t,s)}function ae(t,s,o){if(isNaN(t)||isNaN(s))throw new Error("Invalid LatLng object: ("+t+", "+s+")");this.lat=+t,this.lng=+s,o!==void 0&&(this.alt=+o)}ae.prototype={equals:function(t,s){if(!t)return!1;t=q(t);var o=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return o<=(s===void 0?1e-9:s)},toString:function(t){return"LatLng("+v(this.lat,t)+", "+v(this.lng,t)+")"},distanceTo:function(t){return He.distance(this,q(t))},wrap:function(){return He.wrapLatLng(this)},toBounds:function(t){var s=180*t/40075017,o=s/Math.cos(Math.PI/180*this.lat);return ye([this.lat-s,this.lng-o],[this.lat+s,this.lng+o])},clone:function(){return new ae(this.lat,this.lng,this.alt)}};function q(t,s,o){return t instanceof ae?t:E(t)&&typeof t[0]!="object"?t.length===3?new ae(t[0],t[1],t[2]):t.length===2?new ae(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new ae(t.lat,"lng"in t?t.lng:t.lon,t.alt):s===void 0?null:new ae(t,s,o)}var F={latLngToPoint:function(t,s){var o=this.projection.project(t),c=this.scale(s);return this.transformation._transform(o,c)},pointToLatLng:function(t,s){var o=this.scale(s),c=this.transformation.untransform(t,o);return this.projection.unproject(c)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var s=this.projection.bounds,o=this.scale(t),c=this.transformation.transform(s.min,o),d=this.transformation.transform(s.max,o);return new ue(c,d)},infinite:!1,wrapLatLng:function(t){var s=this.wrapLng?g(t.lng,this.wrapLng,!0):t.lng,o=this.wrapLat?g(t.lat,this.wrapLat,!0):t.lat,c=t.alt;return new ae(o,s,c)},wrapLatLngBounds:function(t){var s=t.getCenter(),o=this.wrapLatLng(s),c=s.lat-o.lat,d=s.lng-o.lng;if(c===0&&d===0)return t;var p=t.getSouthWest(),w=t.getNorthEast(),P=new ae(p.lat-c,p.lng-d),C=new ae(w.lat-c,w.lng-d);return new Se(P,C)}},He=a({},F,{wrapLng:[-180,180],R:6371e3,distance:function(t,s){var o=Math.PI/180,c=t.lat*o,d=s.lat*o,p=Math.sin((s.lat-t.lat)*o/2),w=Math.sin((s.lng-t.lng)*o/2),P=p*p+Math.cos(c)*Math.cos(d)*w*w,C=2*Math.atan2(Math.sqrt(P),Math.sqrt(1-P));return this.R*C}}),Gt=6378137,On={R:Gt,MAX_LATITUDE:85.0511287798,project:function(t){var s=Math.PI/180,o=this.MAX_LATITUDE,c=Math.max(Math.min(o,t.lat),-o),d=Math.sin(c*s);return new G(this.R*t.lng*s,this.R*Math.log((1+d)/(1-d))/2)},unproject:function(t){var s=180/Math.PI;return new ae((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*s,t.x*s/this.R)},bounds:function(){var t=Gt*Math.PI;return new ue([-t,-t],[t,t])}()};function Vt(t,s,o,c){if(E(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=s,this._c=o,this._d=c}Vt.prototype={transform:function(t,s){return this._transform(t.clone(),s)},_transform:function(t,s){return s=s||1,t.x=s*(this._a*t.x+this._b),t.y=s*(this._c*t.y+this._d),t},untransform:function(t,s){return s=s||1,new G((t.x/s-this._b)/this._a,(t.y/s-this._d)/this._c)}};function At(t,s,o,c){return new Vt(t,s,o,c)}var Jt=a({},He,{code:"EPSG:3857",projection:On,transformation:function(){var t=.5/(Math.PI*On.R);return At(t,.5,-t,.5)}()}),ln=a({},Jt,{code:"EPSG:900913"});function _i(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function vi(t,s){var o="",c,d,p,w,P,C;for(c=0,p=t.length;c<p;c++){for(P=t[c],d=0,w=P.length;d<w;d++)C=P[d],o+=(d?"L":"M")+C.x+" "+C.y;o+=s?Z.svg?"z":"x":""}return o||"M0 0"}var yi=document.documentElement.style,un="ActiveXObject"in window,Ar=un&&!document.addEventListener,wi="msLaunchUri"in navigator&&!("documentMode"in document),bi=Pt("webkit"),xi=Pt("android"),Pr=Pt("android 2")||Pt("android 3"),Sr=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ka=xi&&Pt("Google")&&Sr<537&&!("AudioNode"in window),$n=!!window.opera,Ai=!wi&&Pt("chrome"),Pi=Pt("gecko")&&!bi&&!$n&&!un,kr=!Ai&&Pt("safari"),Cr=Pt("phantom"),Tr="OTransition"in yi,Ca=navigator.platform.indexOf("Win")===0,cn=un&&"transition"in yi,Si="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Pr,hn="MozPerspective"in yi,Ta=!window.L_DISABLE_3D&&(cn||Si||hn)&&!Tr&&!Cr,ki=typeof orientation<"u"||Pt("mobile"),Af=ki&&bi,Pf=ki&&Si,Kl=!window.PointerEvent&&window.MSPointerEvent,Gl=!!(window.PointerEvent||Kl),Vl="ontouchstart"in window||!!window.TouchEvent,Sf=!window.L_NO_TOUCH&&(Vl||Gl),kf=ki&&$n,Cf=ki&&Pi,Tf=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Lf=function(){var t=!1;try{var s=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",_,s),window.removeEventListener("testPassiveEventSupport",_,s)}catch{}return t}(),Ef=function(){return!!document.createElement("canvas").getContext}(),La=!!(document.createElementNS&&_i("svg").createSVGRect),Of=!!La&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),$f=!La&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var s=t.firstChild;return s.style.behavior="url(#default#VML)",s&&typeof s.adj=="object"}catch{return!1}}(),Mf=navigator.platform.indexOf("Mac")===0,Rf=navigator.platform.indexOf("Linux")===0;function Pt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Z={ie:un,ielt9:Ar,edge:wi,webkit:bi,android:xi,android23:Pr,androidStock:ka,opera:$n,chrome:Ai,gecko:Pi,safari:kr,phantom:Cr,opera12:Tr,win:Ca,ie3d:cn,webkit3d:Si,gecko3d:hn,any3d:Ta,mobile:ki,mobileWebkit:Af,mobileWebkit3d:Pf,msPointer:Kl,pointer:Gl,touch:Sf,touchNative:Vl,mobileOpera:kf,mobileGecko:Cf,retina:Tf,passiveEvents:Lf,canvas:Ef,svg:La,vml:$f,inlineSvg:Of,mac:Mf,linux:Rf},Jl=Z.msPointer?"MSPointerDown":"pointerdown",Yl=Z.msPointer?"MSPointerMove":"pointermove",Xl=Z.msPointer?"MSPointerUp":"pointerup",Ql=Z.msPointer?"MSPointerCancel":"pointercancel",Ea={touchstart:Jl,touchmove:Yl,touchend:Xl,touchcancel:Ql},eu={touchstart:Nf,touchmove:Lr,touchend:Lr,touchcancel:Lr},Mn={},tu=!1;function If(t,s,o){return s==="touchstart"&&Bf(),eu[s]?(o=eu[s].bind(this,o),t.addEventListener(Ea[s],o,!1),o):(console.warn("wrong event specified:",s),_)}function qf(t,s,o){if(!Ea[s]){console.warn("wrong event specified:",s);return}t.removeEventListener(Ea[s],o,!1)}function jf(t){Mn[t.pointerId]=t}function Df(t){Mn[t.pointerId]&&(Mn[t.pointerId]=t)}function nu(t){delete Mn[t.pointerId]}function Bf(){tu||(document.addEventListener(Jl,jf,!0),document.addEventListener(Yl,Df,!0),document.addEventListener(Xl,nu,!0),document.addEventListener(Ql,nu,!0),tu=!0)}function Lr(t,s){if(s.pointerType!==(s.MSPOINTER_TYPE_MOUSE||"mouse")){s.touches=[];for(var o in Mn)s.touches.push(Mn[o]);s.changedTouches=[s],t(s)}}function Nf(t,s){s.MSPOINTER_TYPE_TOUCH&&s.pointerType===s.MSPOINTER_TYPE_TOUCH&&qe(s),Lr(t,s)}function zf(t){var s={},o,c;for(c in t)o=t[c],s[c]=o&&o.bind?o.bind(t):o;return t=s,s.type="dblclick",s.detail=2,s.isTrusted=!1,s._simulated=!0,s}var Ff=200;function Uf(t,s){t.addEventListener("dblclick",s);var o=0,c;function d(p){if(p.detail!==1){c=p.detail;return}if(!(p.pointerType==="mouse"||p.sourceCapabilities&&!p.sourceCapabilities.firesTouchEvents)){var w=ou(p);if(!(w.some(function(C){return C instanceof HTMLLabelElement&&C.attributes.for})&&!w.some(function(C){return C instanceof HTMLInputElement||C instanceof HTMLSelectElement}))){var P=Date.now();P-o<=Ff?(c++,c===2&&s(zf(p))):c=1,o=P}}}return t.addEventListener("click",d),{dblclick:s,simDblclick:d}}function Zf(t,s){t.removeEventListener("dblclick",s.dblclick),t.removeEventListener("click",s.simDblclick)}var Oa=$r(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ci=$r(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),iu=Ci==="webkitTransition"||Ci==="OTransition"?Ci+"End":"transitionend";function ru(t){return typeof t=="string"?document.getElementById(t):t}function Ti(t,s){var o=t.style[s]||t.currentStyle&&t.currentStyle[s];if((!o||o==="auto")&&document.defaultView){var c=document.defaultView.getComputedStyle(t,null);o=c?c[s]:null}return o==="auto"?null:o}function de(t,s,o){var c=document.createElement(t);return c.className=s||"",o&&o.appendChild(c),c}function ke(t){var s=t.parentNode;s&&s.removeChild(t)}function Er(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Rn(t){var s=t.parentNode;s&&s.lastChild!==t&&s.appendChild(t)}function In(t){var s=t.parentNode;s&&s.firstChild!==t&&s.insertBefore(t,s.firstChild)}function $a(t,s){if(t.classList!==void 0)return t.classList.contains(s);var o=Or(t);return o.length>0&&new RegExp("(^|\\s)"+s+"(\\s|$)").test(o)}function ne(t,s){if(t.classList!==void 0)for(var o=S(s),c=0,d=o.length;c<d;c++)t.classList.add(o[c]);else if(!$a(t,s)){var p=Or(t);Ma(t,(p?p+" ":"")+s)}}function Te(t,s){t.classList!==void 0?t.classList.remove(s):Ma(t,b((" "+Or(t)+" ").replace(" "+s+" "," ")))}function Ma(t,s){t.className.baseVal===void 0?t.className=s:t.className.baseVal=s}function Or(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function ot(t,s){"opacity"in t.style?t.style.opacity=s:"filter"in t.style&&Wf(t,s)}function Wf(t,s){var o=!1,c="DXImageTransform.Microsoft.Alpha";try{o=t.filters.item(c)}catch{if(s===1)return}s=Math.round(s*100),o?(o.Enabled=s!==100,o.Opacity=s):t.style.filter+=" progid:"+c+"(opacity="+s+")"}function $r(t){for(var s=document.documentElement.style,o=0;o<t.length;o++)if(t[o]in s)return t[o];return!1}function dn(t,s,o){var c=s||new G(0,0);t.style[Oa]=(Z.ie3d?"translate("+c.x+"px,"+c.y+"px)":"translate3d("+c.x+"px,"+c.y+"px,0)")+(o?" scale("+o+")":"")}function Le(t,s){t._leaflet_pos=s,Z.any3d?dn(t,s):(t.style.left=s.x+"px",t.style.top=s.y+"px")}function fn(t){return t._leaflet_pos||new G(0,0)}var Li,Ei,Ra;if("onselectstart"in document)Li=function(){ee(window,"selectstart",qe)},Ei=function(){we(window,"selectstart",qe)};else{var Oi=$r(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Li=function(){if(Oi){var t=document.documentElement.style;Ra=t[Oi],t[Oi]="none"}},Ei=function(){Oi&&(document.documentElement.style[Oi]=Ra,Ra=void 0)}}function Ia(){ee(window,"dragstart",qe)}function qa(){we(window,"dragstart",qe)}var Mr,ja;function Da(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(Rr(),Mr=t,ja=t.style.outlineStyle,t.style.outlineStyle="none",ee(window,"keydown",Rr))}function Rr(){Mr&&(Mr.style.outlineStyle=ja,Mr=void 0,ja=void 0,we(window,"keydown",Rr))}function su(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function Ba(t){var s=t.getBoundingClientRect();return{x:s.width/t.offsetWidth||1,y:s.height/t.offsetHeight||1,boundingClientRect:s}}var Hf={__proto__:null,TRANSFORM:Oa,TRANSITION:Ci,TRANSITION_END:iu,get:ru,getStyle:Ti,create:de,remove:ke,empty:Er,toFront:Rn,toBack:In,hasClass:$a,addClass:ne,removeClass:Te,setClass:Ma,getClass:Or,setOpacity:ot,testProp:$r,setTransform:dn,setPosition:Le,getPosition:fn,get disableTextSelection(){return Li},get enableTextSelection(){return Ei},disableImageDrag:Ia,enableImageDrag:qa,preventOutline:Da,restoreOutline:Rr,getSizedParentNode:su,getScale:Ba};function ee(t,s,o,c){if(s&&typeof s=="object")for(var d in s)za(t,d,s[d],o);else{s=S(s);for(var p=0,w=s.length;p<w;p++)za(t,s[p],o,c)}return this}var St="_leaflet_events";function we(t,s,o,c){if(arguments.length===1)au(t),delete t[St];else if(s&&typeof s=="object")for(var d in s)Fa(t,d,s[d],o);else if(s=S(s),arguments.length===2)au(t,function(P){return T(s,P)!==-1});else for(var p=0,w=s.length;p<w;p++)Fa(t,s[p],o,c);return this}function au(t,s){for(var o in t[St]){var c=o.split(/\d/)[0];(!s||s(c))&&Fa(t,c,null,null,o)}}var Na={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function za(t,s,o,c){var d=s+f(o)+(c?"_"+f(c):"");if(t[St]&&t[St][d])return this;var p=function(P){return o.call(c||t,P||window.event)},w=p;!Z.touchNative&&Z.pointer&&s.indexOf("touch")===0?p=If(t,s,p):Z.touch&&s==="dblclick"?p=Uf(t,p):"addEventListener"in t?s==="touchstart"||s==="touchmove"||s==="wheel"||s==="mousewheel"?t.addEventListener(Na[s]||s,p,Z.passiveEvents?{passive:!1}:!1):s==="mouseenter"||s==="mouseleave"?(p=function(P){P=P||window.event,Za(t,P)&&w(P)},t.addEventListener(Na[s],p,!1)):t.addEventListener(s,w,!1):t.attachEvent("on"+s,p),t[St]=t[St]||{},t[St][d]=p}function Fa(t,s,o,c,d){d=d||s+f(o)+(c?"_"+f(c):"");var p=t[St]&&t[St][d];if(!p)return this;!Z.touchNative&&Z.pointer&&s.indexOf("touch")===0?qf(t,s,p):Z.touch&&s==="dblclick"?Zf(t,p):"removeEventListener"in t?t.removeEventListener(Na[s]||s,p,!1):t.detachEvent("on"+s,p),t[St][d]=null}function mn(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function Ua(t){return za(t,"wheel",mn),this}function $i(t){return ee(t,"mousedown touchstart dblclick contextmenu",mn),t._leaflet_disable_click=!0,this}function qe(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function pn(t){return qe(t),mn(t),this}function ou(t){if(t.composedPath)return t.composedPath();for(var s=[],o=t.target;o;)s.push(o),o=o.parentNode;return s}function lu(t,s){if(!s)return new G(t.clientX,t.clientY);var o=Ba(s),c=o.boundingClientRect;return new G((t.clientX-c.left)/o.x-s.clientLeft,(t.clientY-c.top)/o.y-s.clientTop)}var Kf=Z.linux&&Z.chrome?window.devicePixelRatio:Z.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function uu(t){return Z.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Kf:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function Za(t,s){var o=s.relatedTarget;if(!o)return!0;try{for(;o&&o!==t;)o=o.parentNode}catch{return!1}return o!==t}var Gf={__proto__:null,on:ee,off:we,stopPropagation:mn,disableScrollPropagation:Ua,disableClickPropagation:$i,preventDefault:qe,stop:pn,getPropagationPath:ou,getMousePosition:lu,getWheelDelta:uu,isExternalTarget:Za,addListener:ee,removeListener:we},cu=Pe.extend({run:function(t,s,o,c){this.stop(),this._el=t,this._inProgress=!0,this._duration=o||.25,this._easeOutPower=1/Math.max(c||.5,.2),this._startPos=fn(t),this._offset=s.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=U(this._animate,this),this._step()},_step:function(t){var s=+new Date-this._startTime,o=this._duration*1e3;s<o?this._runFrame(this._easeOut(s/o),t):(this._runFrame(1),this._complete())},_runFrame:function(t,s){var o=this._startPos.add(this._offset.multiplyBy(t));s&&o._round(),Le(this._el,o),this.fire("step")},_complete:function(){he(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),ce=Pe.extend({options:{crs:Jt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,s){s=y(this,s),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),s.maxBounds&&this.setMaxBounds(s.maxBounds),s.zoom!==void 0&&(this._zoom=this._limitZoom(s.zoom)),s.center&&s.zoom!==void 0&&this.setView(q(s.center),s.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ci&&Z.any3d&&!Z.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ee(this._proxy,iu,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,s,o){if(s=s===void 0?this._zoom:this._limitZoom(s),t=this._limitCenter(q(t),s,this.options.maxBounds),o=o||{},this._stop(),this._loaded&&!o.reset&&o!==!0){o.animate!==void 0&&(o.zoom=a({animate:o.animate},o.zoom),o.pan=a({animate:o.animate,duration:o.duration},o.pan));var c=this._zoom!==s?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,s,o.zoom):this._tryAnimatedPan(t,o.pan);if(c)return clearTimeout(this._sizeTimer),this}return this._resetView(t,s,o.pan&&o.pan.noMoveStart),this},setZoom:function(t,s){return this._loaded?this.setView(this.getCenter(),t,{zoom:s}):(this._zoom=t,this)},zoomIn:function(t,s){return t=t||(Z.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,s)},zoomOut:function(t,s){return t=t||(Z.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,s)},setZoomAround:function(t,s,o){var c=this.getZoomScale(s),d=this.getSize().divideBy(2),p=t instanceof G?t:this.latLngToContainerPoint(t),w=p.subtract(d).multiplyBy(1-1/c),P=this.containerPointToLatLng(d.add(w));return this.setView(P,s,{zoom:o})},_getBoundsCenterZoom:function(t,s){s=s||{},t=t.getBounds?t.getBounds():ye(t);var o=H(s.paddingTopLeft||s.padding||[0,0]),c=H(s.paddingBottomRight||s.padding||[0,0]),d=this.getBoundsZoom(t,!1,o.add(c));if(d=typeof s.maxZoom=="number"?Math.min(s.maxZoom,d):d,d===1/0)return{center:t.getCenter(),zoom:d};var p=c.subtract(o).divideBy(2),w=this.project(t.getSouthWest(),d),P=this.project(t.getNorthEast(),d),C=this.unproject(w.add(P).divideBy(2).add(p),d);return{center:C,zoom:d}},fitBounds:function(t,s){if(t=ye(t),!t.isValid())throw new Error("Bounds are not valid.");var o=this._getBoundsCenterZoom(t,s);return this.setView(o.center,o.zoom,s)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,s){return this.setView(t,this._zoom,{pan:s})},panBy:function(t,s){if(t=H(t).round(),s=s||{},!t.x&&!t.y)return this.fire("moveend");if(s.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new cu,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),s.noMoveStart||this.fire("movestart"),s.animate!==!1){ne(this._mapPane,"leaflet-pan-anim");var o=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,o,s.duration||.25,s.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,s,o){if(o=o||{},o.animate===!1||!Z.any3d)return this.setView(t,s,o);this._stop();var c=this.project(this.getCenter()),d=this.project(t),p=this.getSize(),w=this._zoom;t=q(t),s=s===void 0?w:s;var P=Math.max(p.x,p.y),C=P*this.getZoomScale(w,s),O=d.distanceTo(c)||1,j=1.42,J=j*j;function re(Ee){var Hr=Ee?-1:1,qm=Ee?C:P,jm=C*C-P*P+Hr*J*J*O*O,Dm=2*qm*J*O,to=jm/Dm,Zu=Math.sqrt(to*to+1)-to,Bm=Zu<1e-9?-18:Math.log(Zu);return Bm}function Ze(Ee){return(Math.exp(Ee)-Math.exp(-Ee))/2}function Me(Ee){return(Math.exp(Ee)+Math.exp(-Ee))/2}function ut(Ee){return Ze(Ee)/Me(Ee)}var Ke=re(0);function zn(Ee){return P*(Me(Ke)/Me(Ke+j*Ee))}function $m(Ee){return P*(Me(Ke)*ut(Ke+j*Ee)-Ze(Ke))/J}function Mm(Ee){return 1-Math.pow(1-Ee,1.5)}var Rm=Date.now(),Fu=(re(1)-Ke)/j,Im=o.duration?1e3*o.duration:1e3*Fu*.8;function Uu(){var Ee=(Date.now()-Rm)/Im,Hr=Mm(Ee)*Fu;Ee<=1?(this._flyToFrame=U(Uu,this),this._move(this.unproject(c.add(d.subtract(c).multiplyBy($m(Hr)/O)),w),this.getScaleZoom(P/zn(Hr),w),{flyTo:!0})):this._move(t,s)._moveEnd(!0)}return this._moveStart(!0,o.noMoveStart),Uu.call(this),this},flyToBounds:function(t,s){var o=this._getBoundsCenterZoom(t,s);return this.flyTo(o.center,o.zoom,s)},setMaxBounds:function(t){return t=ye(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var s=this.options.minZoom;return this.options.minZoom=t,this._loaded&&s!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var s=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&s!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,s){this._enforcingBounds=!0;var o=this.getCenter(),c=this._limitCenter(o,this._zoom,ye(t));return o.equals(c)||this.panTo(c,s),this._enforcingBounds=!1,this},panInside:function(t,s){s=s||{};var o=H(s.paddingTopLeft||s.padding||[0,0]),c=H(s.paddingBottomRight||s.padding||[0,0]),d=this.project(this.getCenter()),p=this.project(t),w=this.getPixelBounds(),P=ve([w.min.add(o),w.max.subtract(c)]),C=P.getSize();if(!P.contains(p)){this._enforcingBounds=!0;var O=p.subtract(P.getCenter()),j=P.extend(p).getSize().subtract(C);d.x+=O.x<0?-j.x:j.x,d.y+=O.y<0?-j.y:j.y,this.panTo(this.unproject(d),s),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=a({animate:!1,pan:!0},t===!0?{animate:!0}:t);var s=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),c=s.divideBy(2).round(),d=o.divideBy(2).round(),p=c.subtract(d);return!p.x&&!p.y?this:(t.animate&&t.pan?this.panBy(p):(t.pan&&this._rawPanBy(p),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:s,newSize:o}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=a({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var s=u(this._handleGeolocationResponse,this),o=u(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(s,o,t):navigator.geolocation.getCurrentPosition(s,o,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var s=t.code,o=t.message||(s===1?"permission denied":s===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:s,message:"Geolocation error: "+o+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var s=t.coords.latitude,o=t.coords.longitude,c=new ae(s,o),d=c.toBounds(t.coords.accuracy*2),p=this._locateOptions;if(p.setView){var w=this.getBoundsZoom(d);this.setView(c,p.maxZoom?Math.min(w,p.maxZoom):w)}var P={latlng:c,bounds:d,timestamp:t.timestamp};for(var C in t.coords)typeof t.coords[C]=="number"&&(P[C]=t.coords[C]);this.fire("locationfound",P)}},addHandler:function(t,s){if(!s)return this;var o=this[t]=new s(this);return this._handlers.push(o),this.options[t]&&o.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ke(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(he(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)ke(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,s){var o="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),c=de("div",o,s||this._mapPane);return t&&(this._panes[t]=c),c},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),s=this.unproject(t.getBottomLeft()),o=this.unproject(t.getTopRight());return new Se(s,o)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,s,o){t=ye(t),o=H(o||[0,0]);var c=this.getZoom()||0,d=this.getMinZoom(),p=this.getMaxZoom(),w=t.getNorthWest(),P=t.getSouthEast(),C=this.getSize().subtract(o),O=ve(this.project(P,c),this.project(w,c)).getSize(),j=Z.any3d?this.options.zoomSnap:1,J=C.x/O.x,re=C.y/O.y,Ze=s?Math.max(J,re):Math.min(J,re);return c=this.getScaleZoom(Ze,c),j&&(c=Math.round(c/(j/100))*(j/100),c=s?Math.ceil(c/j)*j:Math.floor(c/j)*j),Math.max(d,Math.min(p,c))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new G(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,s){var o=this._getTopLeftPoint(t,s);return new ue(o,o.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,s){var o=this.options.crs;return s=s===void 0?this._zoom:s,o.scale(t)/o.scale(s)},getScaleZoom:function(t,s){var o=this.options.crs;s=s===void 0?this._zoom:s;var c=o.zoom(t*o.scale(s));return isNaN(c)?1/0:c},project:function(t,s){return s=s===void 0?this._zoom:s,this.options.crs.latLngToPoint(q(t),s)},unproject:function(t,s){return s=s===void 0?this._zoom:s,this.options.crs.pointToLatLng(H(t),s)},layerPointToLatLng:function(t){var s=H(t).add(this.getPixelOrigin());return this.unproject(s)},latLngToLayerPoint:function(t){var s=this.project(q(t))._round();return s._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(q(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(ye(t))},distance:function(t,s){return this.options.crs.distance(q(t),q(s))},containerPointToLayerPoint:function(t){return H(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return H(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var s=this.containerPointToLayerPoint(H(t));return this.layerPointToLatLng(s)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(q(t)))},mouseEventToContainerPoint:function(t){return lu(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var s=this._container=ru(t);if(s){if(s._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ee(s,"scroll",this._onScroll,this),this._containerId=f(s)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&Z.any3d,ne(t,"leaflet-container"+(Z.touch?" leaflet-touch":"")+(Z.retina?" leaflet-retina":"")+(Z.ielt9?" leaflet-oldie":"")+(Z.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var s=Ti(t,"position");s!=="absolute"&&s!=="relative"&&s!=="fixed"&&s!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Le(this._mapPane,new G(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ne(t.markerPane,"leaflet-zoom-hide"),ne(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,s,o){Le(this._mapPane,new G(0,0));var c=!this._loaded;this._loaded=!0,s=this._limitZoom(s),this.fire("viewprereset");var d=this._zoom!==s;this._moveStart(d,o)._move(t,s)._moveEnd(d),this.fire("viewreset"),c&&this.fire("load")},_moveStart:function(t,s){return t&&this.fire("zoomstart"),s||this.fire("movestart"),this},_move:function(t,s,o,c){s===void 0&&(s=this._zoom);var d=this._zoom!==s;return this._zoom=s,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),c?o&&o.pinch&&this.fire("zoom",o):((d||o&&o.pinch)&&this.fire("zoom",o),this.fire("move",o)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return he(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Le(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[f(this._container)]=this;var s=t?we:ee;s(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&s(window,"resize",this._onResize,this),Z.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){he(this._resizeRequest),this._resizeRequest=U(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,s){for(var o=[],c,d=s==="mouseout"||s==="mouseover",p=t.target||t.srcElement,w=!1;p;){if(c=this._targets[f(p)],c&&(s==="click"||s==="preclick")&&this._draggableMoved(c)){w=!0;break}if(c&&c.listens(s,!0)&&(d&&!Za(p,t)||(o.push(c),d))||p===this._container)break;p=p.parentNode}return!o.length&&!w&&!d&&this.listens(s,!0)&&(o=[this]),o},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var s=t.target||t.srcElement;if(!(!this._loaded||s._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(s))){var o=t.type;o==="mousedown"&&Da(s),this._fireDOMEvent(t,o)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,s,o){if(t.type==="click"){var c=a({},t);c.type="preclick",this._fireDOMEvent(c,c.type,o)}var d=this._findEventTargets(t,s);if(o){for(var p=[],w=0;w<o.length;w++)o[w].listens(s,!0)&&p.push(o[w]);d=p.concat(d)}if(d.length){s==="contextmenu"&&qe(t);var P=d[0],C={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var O=P.getLatLng&&(!P._radius||P._radius<=10);C.containerPoint=O?this.latLngToContainerPoint(P.getLatLng()):this.mouseEventToContainerPoint(t),C.layerPoint=this.containerPointToLayerPoint(C.containerPoint),C.latlng=O?P.getLatLng():this.layerPointToLatLng(C.layerPoint)}for(w=0;w<d.length;w++)if(d[w].fire(s,C,!0),C.originalEvent._stopped||d[w].options.bubblingMouseEvents===!1&&T(this._mouseEvents,s)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,s=this._handlers.length;t<s;t++)this._handlers[t].disable()},whenReady:function(t,s){return this._loaded?t.call(s||this,{target:this}):this.on("load",t,s),this},_getMapPanePos:function(){return fn(this._mapPane)||new G(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,s){var o=t&&s!==void 0?this._getNewPixelOrigin(t,s):this.getPixelOrigin();return o.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,s){var o=this.getSize()._divideBy(2);return this.project(t,s)._subtract(o)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,s,o){var c=this._getNewPixelOrigin(o,s);return this.project(t,s)._subtract(c)},_latLngBoundsToNewLayerBounds:function(t,s,o){var c=this._getNewPixelOrigin(o,s);return ve([this.project(t.getSouthWest(),s)._subtract(c),this.project(t.getNorthWest(),s)._subtract(c),this.project(t.getSouthEast(),s)._subtract(c),this.project(t.getNorthEast(),s)._subtract(c)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,s,o){if(!o)return t;var c=this.project(t,s),d=this.getSize().divideBy(2),p=new ue(c.subtract(d),c.add(d)),w=this._getBoundsOffset(p,o,s);return Math.abs(w.x)<=1&&Math.abs(w.y)<=1?t:this.unproject(c.add(w),s)},_limitOffset:function(t,s){if(!s)return t;var o=this.getPixelBounds(),c=new ue(o.min.add(t),o.max.add(t));return t.add(this._getBoundsOffset(c,s))},_getBoundsOffset:function(t,s,o){var c=ve(this.project(s.getNorthEast(),o),this.project(s.getSouthWest(),o)),d=c.min.subtract(t.min),p=c.max.subtract(t.max),w=this._rebound(d.x,-p.x),P=this._rebound(d.y,-p.y);return new G(w,P)},_rebound:function(t,s){return t+s>0?Math.round(t-s)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(s))},_limitZoom:function(t){var s=this.getMinZoom(),o=this.getMaxZoom(),c=Z.any3d?this.options.zoomSnap:1;return c&&(t=Math.round(t/c)*c),Math.max(s,Math.min(o,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Te(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,s){var o=this._getCenterOffset(t)._trunc();return(s&&s.animate)!==!0&&!this.getSize().contains(o)?!1:(this.panBy(o,s),!0)},_createAnimProxy:function(){var t=this._proxy=de("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(s){var o=Oa,c=this._proxy.style[o];dn(this._proxy,this.project(s.center,s.zoom),this.getZoomScale(s.zoom,1)),c===this._proxy.style[o]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ke(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),s=this.getZoom();dn(this._proxy,this.project(t,s),this.getZoomScale(s,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,s,o){if(this._animatingZoom)return!0;if(o=o||{},!this._zoomAnimated||o.animate===!1||this._nothingToAnimate()||Math.abs(s-this._zoom)>this.options.zoomAnimationThreshold)return!1;var c=this.getZoomScale(s),d=this._getCenterOffset(t)._divideBy(1-1/c);return o.animate!==!0&&!this.getSize().contains(d)?!1:(U(function(){this._moveStart(!0,o.noMoveStart||!1)._animateZoom(t,s,!0)},this),!0)},_animateZoom:function(t,s,o,c){this._mapPane&&(o&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=s,ne(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:s,noUpdate:c}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Te(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Vf(t,s){return new ce(t,s)}var mt=V.extend({options:{position:"topright"},initialize:function(t){y(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var s=this._map;return s&&s.removeControl(this),this.options.position=t,s&&s.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var s=this._container=this.onAdd(t),o=this.getPosition(),c=t._controlCorners[o];return ne(s,"leaflet-control"),o.indexOf("bottom")!==-1?c.insertBefore(s,c.firstChild):c.appendChild(s),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ke(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Mi=function(t){return new mt(t)};ce.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},s="leaflet-",o=this._controlContainer=de("div",s+"control-container",this._container);function c(d,p){var w=s+d+" "+s+p;t[d+p]=de("div",w,o)}c("top","left"),c("top","right"),c("bottom","left"),c("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ke(this._controlCorners[t]);ke(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var hu=mt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,s,o,c){return o<c?-1:c<o?1:0}},initialize:function(t,s,o){y(this,o),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var c in t)this._addLayer(t[c],c);for(c in s)this._addLayer(s[c],c,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return mt.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,s){return this._addLayer(t,s),this._map?this._update():this},addOverlay:function(t,s){return this._addLayer(t,s,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var s=this._getLayer(f(t));return s&&this._layers.splice(this._layers.indexOf(s),1),this._map?this._update():this},expand:function(){ne(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(ne(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):Te(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Te(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",s=this._container=de("div",t),o=this.options.collapsed;s.setAttribute("aria-haspopup",!0),$i(s),Ua(s);var c=this._section=de("section",t+"-list");o&&(this._map.on("click",this.collapse,this),ee(s,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var d=this._layersLink=de("a",t+"-toggle",s);d.href="#",d.title="Layers",d.setAttribute("role","button"),ee(d,{keydown:function(p){p.keyCode===13&&this._expandSafely()},click:function(p){qe(p),this._expandSafely()}},this),o||this.expand(),this._baseLayersList=de("div",t+"-base",c),this._separator=de("div",t+"-separator",c),this._overlaysList=de("div",t+"-overlays",c),s.appendChild(c)},_getLayer:function(t){for(var s=0;s<this._layers.length;s++)if(this._layers[s]&&f(this._layers[s].layer)===t)return this._layers[s]},_addLayer:function(t,s,o){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:s,overlay:o}),this.options.sortLayers&&this._layers.sort(u(function(c,d){return this.options.sortFunction(c.layer,d.layer,c.name,d.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Er(this._baseLayersList),Er(this._overlaysList),this._layerControlInputs=[];var t,s,o,c,d=0;for(o=0;o<this._layers.length;o++)c=this._layers[o],this._addItem(c),s=s||c.overlay,t=t||!c.overlay,d+=c.overlay?0:1;return this.options.hideSingleBase&&(t=t&&d>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=s&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var s=this._getLayer(f(t.target)),o=s.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;o&&this._map.fire(o,s)},_createRadioElement:function(t,s){var o='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(s?' checked="checked"':"")+"/>",c=document.createElement("div");return c.innerHTML=o,c.firstChild},_addItem:function(t){var s=document.createElement("label"),o=this._map.hasLayer(t.layer),c;t.overlay?(c=document.createElement("input"),c.type="checkbox",c.className="leaflet-control-layers-selector",c.defaultChecked=o):c=this._createRadioElement("leaflet-base-layers_"+f(this),o),this._layerControlInputs.push(c),c.layerId=f(t.layer),ee(c,"click",this._onInputClick,this);var d=document.createElement("span");d.innerHTML=" "+t.name;var p=document.createElement("span");s.appendChild(p),p.appendChild(c),p.appendChild(d);var w=t.overlay?this._overlaysList:this._baseLayersList;return w.appendChild(s),this._checkDisabledLayers(),s},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,s,o,c=[],d=[];this._handlingClick=!0;for(var p=t.length-1;p>=0;p--)s=t[p],o=this._getLayer(s.layerId).layer,s.checked?c.push(o):s.checked||d.push(o);for(p=0;p<d.length;p++)this._map.hasLayer(d[p])&&this._map.removeLayer(d[p]);for(p=0;p<c.length;p++)this._map.hasLayer(c[p])||this._map.addLayer(c[p]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,s,o,c=this._map.getZoom(),d=t.length-1;d>=0;d--)s=t[d],o=this._getLayer(s.layerId).layer,s.disabled=o.options.minZoom!==void 0&&c<o.options.minZoom||o.options.maxZoom!==void 0&&c>o.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,ee(t,"click",qe),this.expand();var s=this;setTimeout(function(){we(t,"click",qe),s._preventClick=!1})}}),Jf=function(t,s,o){return new hu(t,s,o)},Wa=mt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var s="leaflet-control-zoom",o=de("div",s+" leaflet-bar"),c=this.options;return this._zoomInButton=this._createButton(c.zoomInText,c.zoomInTitle,s+"-in",o,this._zoomIn),this._zoomOutButton=this._createButton(c.zoomOutText,c.zoomOutTitle,s+"-out",o,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),o},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,s,o,c,d){var p=de("a",o,c);return p.innerHTML=t,p.href="#",p.title=s,p.setAttribute("role","button"),p.setAttribute("aria-label",s),$i(p),ee(p,"click",pn),ee(p,"click",d,this),ee(p,"click",this._refocusOnMap,this),p},_updateDisabled:function(){var t=this._map,s="leaflet-disabled";Te(this._zoomInButton,s),Te(this._zoomOutButton,s),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(ne(this._zoomOutButton,s),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(ne(this._zoomInButton,s),this._zoomInButton.setAttribute("aria-disabled","true"))}});ce.mergeOptions({zoomControl:!0}),ce.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Wa,this.addControl(this.zoomControl))});var Yf=function(t){return new Wa(t)},du=mt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var s="leaflet-control-scale",o=de("div",s),c=this.options;return this._addScales(c,s+"-line",o),t.on(c.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),o},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,s,o){t.metric&&(this._mScale=de("div",s,o)),t.imperial&&(this._iScale=de("div",s,o))},_update:function(){var t=this._map,s=t.getSize().y/2,o=t.distance(t.containerPointToLatLng([0,s]),t.containerPointToLatLng([this.options.maxWidth,s]));this._updateScales(o)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var s=this._getRoundNum(t),o=s<1e3?s+" m":s/1e3+" km";this._updateScale(this._mScale,o,s/t)},_updateImperial:function(t){var s=t*3.2808399,o,c,d;s>5280?(o=s/5280,c=this._getRoundNum(o),this._updateScale(this._iScale,c+" mi",c/o)):(d=this._getRoundNum(s),this._updateScale(this._iScale,d+" ft",d/s))},_updateScale:function(t,s,o){t.style.width=Math.round(this.options.maxWidth*o)+"px",t.innerHTML=s},_getRoundNum:function(t){var s=Math.pow(10,(Math.floor(t)+"").length-1),o=t/s;return o=o>=10?10:o>=5?5:o>=3?3:o>=2?2:1,s*o}}),Xf=function(t){return new du(t)},Qf='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ha=mt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Z.inlineSvg?Qf+" ":"")+"Leaflet</a>"},initialize:function(t){y(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=de("div","leaflet-control-attribution"),$i(this._container);for(var s in t._layers)t._layers[s].getAttribution&&this.addAttribution(t._layers[s].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var s in this._attributions)this._attributions[s]&&t.push(s);var o=[];this.options.prefix&&o.push(this.options.prefix),t.length&&o.push(t.join(", ")),this._container.innerHTML=o.join(' <span aria-hidden="true">|</span> ')}}});ce.mergeOptions({attributionControl:!0}),ce.addInitHook(function(){this.options.attributionControl&&new Ha().addTo(this)});var em=function(t){return new Ha(t)};mt.Layers=hu,mt.Zoom=Wa,mt.Scale=du,mt.Attribution=Ha,Mi.layers=Jf,Mi.zoom=Yf,Mi.scale=Xf,Mi.attribution=em;var kt=V.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});kt.addTo=function(t,s){return t.addHandler(s,this),this};var tm={Events:Y},fu=Z.touch?"touchstart mousedown":"mousedown",Yt=Pe.extend({options:{clickTolerance:3},initialize:function(t,s,o,c){y(this,c),this._element=t,this._dragStartTarget=s||t,this._preventOutline=o},enable:function(){this._enabled||(ee(this._dragStartTarget,fu,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Yt._dragging===this&&this.finishDrag(!0),we(this._dragStartTarget,fu,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!$a(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){Yt._dragging===this&&this.finishDrag();return}if(!(Yt._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(Yt._dragging=this,this._preventOutline&&Da(this._element),Ia(),Li(),!this._moving)){this.fire("down");var s=t.touches?t.touches[0]:t,o=su(this._element);this._startPoint=new G(s.clientX,s.clientY),this._startPos=fn(this._element),this._parentScale=Ba(o);var c=t.type==="mousedown";ee(document,c?"mousemove":"touchmove",this._onMove,this),ee(document,c?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var s=t.touches&&t.touches.length===1?t.touches[0]:t,o=new G(s.clientX,s.clientY)._subtract(this._startPoint);!o.x&&!o.y||Math.abs(o.x)+Math.abs(o.y)<this.options.clickTolerance||(o.x/=this._parentScale.x,o.y/=this._parentScale.y,qe(t),this._moved||(this.fire("dragstart"),this._moved=!0,ne(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ne(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(o),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Le(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){Te(document.body,"leaflet-dragging"),this._lastTarget&&(Te(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),we(document,"mousemove touchmove",this._onMove,this),we(document,"mouseup touchend touchcancel",this._onUp,this),qa(),Ei();var s=this._moved&&this._moving;this._moving=!1,Yt._dragging=!1,s&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function mu(t,s,o){var c,d=[1,4,2,8],p,w,P,C,O,j,J,re;for(p=0,j=t.length;p<j;p++)t[p]._code=gn(t[p],s);for(P=0;P<4;P++){for(J=d[P],c=[],p=0,j=t.length,w=j-1;p<j;w=p++)C=t[p],O=t[w],C._code&J?O._code&J||(re=Ir(O,C,J,s,o),re._code=gn(re,s),c.push(re)):(O._code&J&&(re=Ir(O,C,J,s,o),re._code=gn(re,s),c.push(re)),c.push(C));t=c}return t}function pu(t,s){var o,c,d,p,w,P,C,O,j;if(!t||t.length===0)throw new Error("latlngs not passed");lt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var J=q([0,0]),re=ye(t),Ze=re.getNorthWest().distanceTo(re.getSouthWest())*re.getNorthEast().distanceTo(re.getNorthWest());Ze<1700&&(J=Ka(t));var Me=t.length,ut=[];for(o=0;o<Me;o++){var Ke=q(t[o]);ut.push(s.project(q([Ke.lat-J.lat,Ke.lng-J.lng])))}for(P=C=O=0,o=0,c=Me-1;o<Me;c=o++)d=ut[o],p=ut[c],w=d.y*p.x-p.y*d.x,C+=(d.x+p.x)*w,O+=(d.y+p.y)*w,P+=w*3;P===0?j=ut[0]:j=[C/P,O/P];var zn=s.unproject(H(j));return q([zn.lat+J.lat,zn.lng+J.lng])}function Ka(t){for(var s=0,o=0,c=0,d=0;d<t.length;d++){var p=q(t[d]);s+=p.lat,o+=p.lng,c++}return q([s/c,o/c])}var nm={__proto__:null,clipPolygon:mu,polygonCenter:pu,centroid:Ka};function gu(t,s){if(!s||!t.length)return t.slice();var o=s*s;return t=sm(t,o),t=rm(t,o),t}function _u(t,s,o){return Math.sqrt(Ri(t,s,o,!0))}function im(t,s,o){return Ri(t,s,o)}function rm(t,s){var o=t.length,c=typeof Uint8Array<"u"?Uint8Array:Array,d=new c(o);d[0]=d[o-1]=1,Ga(t,d,s,0,o-1);var p,w=[];for(p=0;p<o;p++)d[p]&&w.push(t[p]);return w}function Ga(t,s,o,c,d){var p=0,w,P,C;for(P=c+1;P<=d-1;P++)C=Ri(t[P],t[c],t[d],!0),C>p&&(w=P,p=C);p>o&&(s[w]=1,Ga(t,s,o,c,w),Ga(t,s,o,w,d))}function sm(t,s){for(var o=[t[0]],c=1,d=0,p=t.length;c<p;c++)am(t[c],t[d])>s&&(o.push(t[c]),d=c);return d<p-1&&o.push(t[p-1]),o}var vu;function yu(t,s,o,c,d){var p=c?vu:gn(t,o),w=gn(s,o),P,C,O;for(vu=w;;){if(!(p|w))return[t,s];if(p&w)return!1;P=p||w,C=Ir(t,s,P,o,d),O=gn(C,o),P===p?(t=C,p=O):(s=C,w=O)}}function Ir(t,s,o,c,d){var p=s.x-t.x,w=s.y-t.y,P=c.min,C=c.max,O,j;return o&8?(O=t.x+p*(C.y-t.y)/w,j=C.y):o&4?(O=t.x+p*(P.y-t.y)/w,j=P.y):o&2?(O=C.x,j=t.y+w*(C.x-t.x)/p):o&1&&(O=P.x,j=t.y+w*(P.x-t.x)/p),new G(O,j,d)}function gn(t,s){var o=0;return t.x<s.min.x?o|=1:t.x>s.max.x&&(o|=2),t.y<s.min.y?o|=4:t.y>s.max.y&&(o|=8),o}function am(t,s){var o=s.x-t.x,c=s.y-t.y;return o*o+c*c}function Ri(t,s,o,c){var d=s.x,p=s.y,w=o.x-d,P=o.y-p,C=w*w+P*P,O;return C>0&&(O=((t.x-d)*w+(t.y-p)*P)/C,O>1?(d=o.x,p=o.y):O>0&&(d+=w*O,p+=P*O)),w=t.x-d,P=t.y-p,c?w*w+P*P:new G(d,p)}function lt(t){return!E(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function wu(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),lt(t)}function bu(t,s){var o,c,d,p,w,P,C,O;if(!t||t.length===0)throw new Error("latlngs not passed");lt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var j=q([0,0]),J=ye(t),re=J.getNorthWest().distanceTo(J.getSouthWest())*J.getNorthEast().distanceTo(J.getNorthWest());re<1700&&(j=Ka(t));var Ze=t.length,Me=[];for(o=0;o<Ze;o++){var ut=q(t[o]);Me.push(s.project(q([ut.lat-j.lat,ut.lng-j.lng])))}for(o=0,c=0;o<Ze-1;o++)c+=Me[o].distanceTo(Me[o+1])/2;if(c===0)O=Me[0];else for(o=0,p=0;o<Ze-1;o++)if(w=Me[o],P=Me[o+1],d=w.distanceTo(P),p+=d,p>c){C=(p-c)/d,O=[P.x-C*(P.x-w.x),P.y-C*(P.y-w.y)];break}var Ke=s.unproject(H(O));return q([Ke.lat+j.lat,Ke.lng+j.lng])}var om={__proto__:null,simplify:gu,pointToSegmentDistance:_u,closestPointOnSegment:im,clipSegment:yu,_getEdgeIntersection:Ir,_getBitCode:gn,_sqClosestPointOnSegment:Ri,isFlat:lt,_flat:wu,polylineCenter:bu},Va={project:function(t){return new G(t.lng,t.lat)},unproject:function(t){return new ae(t.y,t.x)},bounds:new ue([-180,-90],[180,90])},Ja={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ue([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var s=Math.PI/180,o=this.R,c=t.lat*s,d=this.R_MINOR/o,p=Math.sqrt(1-d*d),w=p*Math.sin(c),P=Math.tan(Math.PI/4-c/2)/Math.pow((1-w)/(1+w),p/2);return c=-o*Math.log(Math.max(P,1e-10)),new G(t.lng*s*o,c)},unproject:function(t){for(var s=180/Math.PI,o=this.R,c=this.R_MINOR/o,d=Math.sqrt(1-c*c),p=Math.exp(-t.y/o),w=Math.PI/2-2*Math.atan(p),P=0,C=.1,O;P<15&&Math.abs(C)>1e-7;P++)O=d*Math.sin(w),O=Math.pow((1-O)/(1+O),d/2),C=Math.PI/2-2*Math.atan(p*O)-w,w+=C;return new ae(w*s,t.x*s/o)}},lm={__proto__:null,LonLat:Va,Mercator:Ja,SphericalMercator:On},um=a({},He,{code:"EPSG:3395",projection:Ja,transformation:function(){var t=.5/(Math.PI*Ja.R);return At(t,.5,-t,.5)}()}),xu=a({},He,{code:"EPSG:4326",projection:Va,transformation:At(1/180,1,-1/180,.5)}),cm=a({},F,{projection:Va,transformation:At(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,s){var o=s.lng-t.lng,c=s.lat-t.lat;return Math.sqrt(o*o+c*c)},infinite:!0});F.Earth=He,F.EPSG3395=um,F.EPSG3857=Jt,F.EPSG900913=ln,F.EPSG4326=xu,F.Simple=cm;var pt=Pe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[f(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[f(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var s=t.target;if(s.hasLayer(this)){if(this._map=s,this._zoomAnimated=s._zoomAnimated,this.getEvents){var o=this.getEvents();s.on(o,this),this.once("remove",function(){s.off(o,this)},this)}this.onAdd(s),this.fire("add"),s.fire("layeradd",{layer:this})}}});ce.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var s=f(t);return this._layers[s]?this:(this._layers[s]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var s=f(t);return this._layers[s]?(this._loaded&&t.onRemove(this),delete this._layers[s],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return f(t)in this._layers},eachLayer:function(t,s){for(var o in this._layers)t.call(s,this._layers[o]);return this},_addLayers:function(t){t=t?E(t)?t:[t]:[];for(var s=0,o=t.length;s<o;s++)this.addLayer(t[s])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[f(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var s=f(t);this._zoomBoundLayers[s]&&(delete this._zoomBoundLayers[s],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,s=-1/0,o=this._getZoomSpan();for(var c in this._zoomBoundLayers){var d=this._zoomBoundLayers[c].options;t=d.minZoom===void 0?t:Math.min(t,d.minZoom),s=d.maxZoom===void 0?s:Math.max(s,d.maxZoom)}this._layersMaxZoom=s===-1/0?void 0:s,this._layersMinZoom=t===1/0?void 0:t,o!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var qn=pt.extend({initialize:function(t,s){y(this,s),this._layers={};var o,c;if(t)for(o=0,c=t.length;o<c;o++)this.addLayer(t[o])},addLayer:function(t){var s=this.getLayerId(t);return this._layers[s]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var s=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[s]&&this._map.removeLayer(this._layers[s]),delete this._layers[s],this},hasLayer:function(t){var s=typeof t=="number"?t:this.getLayerId(t);return s in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var s=Array.prototype.slice.call(arguments,1),o,c;for(o in this._layers)c=this._layers[o],c[t]&&c[t].apply(c,s);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,s){for(var o in this._layers)t.call(s,this._layers[o]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return f(t)}}),hm=function(t,s){return new qn(t,s)},qt=qn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),qn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),qn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new Se;for(var s in this._layers){var o=this._layers[s];t.extend(o.getBounds?o.getBounds():o.getLatLng())}return t}}),dm=function(t,s){return new qt(t,s)},jn=V.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){y(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,s){var o=this._getIconUrl(t);if(!o){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var c=this._createImg(o,s&&s.tagName==="IMG"?s:null);return this._setIconStyles(c,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),c},_setIconStyles:function(t,s){var o=this.options,c=o[s+"Size"];typeof c=="number"&&(c=[c,c]);var d=H(c),p=H(s==="shadow"&&o.shadowAnchor||o.iconAnchor||d&&d.divideBy(2,!0));t.className="leaflet-marker-"+s+" "+(o.className||""),p&&(t.style.marginLeft=-p.x+"px",t.style.marginTop=-p.y+"px"),d&&(t.style.width=d.x+"px",t.style.height=d.y+"px")},_createImg:function(t,s){return s=s||document.createElement("img"),s.src=t,s},_getIconUrl:function(t){return Z.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function fm(t){return new jn(t)}var Ii=jn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Ii.imagePath!="string"&&(Ii.imagePath=this._detectIconPath()),(this.options.imagePath||Ii.imagePath)+jn.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var s=function(o,c,d){var p=c.exec(o);return p&&p[d]};return t=s(t,/^url\((['"])?(.+)\1\)$/,2),t&&s(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=de("div","leaflet-default-icon-path",document.body),s=Ti(t,"background-image")||Ti(t,"backgroundImage");if(document.body.removeChild(t),s=this._stripUrl(s),s)return s;var o=document.querySelector('link[href$="leaflet.css"]');return o?o.href.substring(0,o.href.length-11-1):""}}),Au=kt.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Yt(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ne(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Te(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var s=this._marker,o=s._map,c=this._marker.options.autoPanSpeed,d=this._marker.options.autoPanPadding,p=fn(s._icon),w=o.getPixelBounds(),P=o.getPixelOrigin(),C=ve(w.min._subtract(P).add(d),w.max._subtract(P).subtract(d));if(!C.contains(p)){var O=H((Math.max(C.max.x,p.x)-C.max.x)/(w.max.x-C.max.x)-(Math.min(C.min.x,p.x)-C.min.x)/(w.min.x-C.min.x),(Math.max(C.max.y,p.y)-C.max.y)/(w.max.y-C.max.y)-(Math.min(C.min.y,p.y)-C.min.y)/(w.min.y-C.min.y)).multiplyBy(c);o.panBy(O,{animate:!1}),this._draggable._newPos._add(O),this._draggable._startPos._add(O),Le(s._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=U(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(he(this._panRequest),this._panRequest=U(this._adjustPan.bind(this,t)))},_onDrag:function(t){var s=this._marker,o=s._shadow,c=fn(s._icon),d=s._map.layerPointToLatLng(c);o&&Le(o,c),s._latlng=d,t.latlng=d,t.oldLatLng=this._oldLatLng,s.fire("move",t).fire("drag",t)},_onDragEnd:function(t){he(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),qr=pt.extend({options:{icon:new Ii,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,s){y(this,s),this._latlng=q(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var s=this._latlng;return this._latlng=q(t),this.update(),this.fire("move",{oldLatLng:s,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,s="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),o=t.icon.createIcon(this._icon),c=!1;o!==this._icon&&(this._icon&&this._removeIcon(),c=!0,t.title&&(o.title=t.title),o.tagName==="IMG"&&(o.alt=t.alt||"")),ne(o,s),t.keyboard&&(o.tabIndex="0",o.setAttribute("role","button")),this._icon=o,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ee(o,"focus",this._panOnFocus,this);var d=t.icon.createShadow(this._shadow),p=!1;d!==this._shadow&&(this._removeShadow(),p=!0),d&&(ne(d,s),d.alt=""),this._shadow=d,t.opacity<1&&this._updateOpacity(),c&&this.getPane().appendChild(this._icon),this._initInteraction(),d&&p&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&we(this._icon,"focus",this._panOnFocus,this),ke(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ke(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&Le(this._icon,t),this._shadow&&Le(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var s=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(s)},_initInteraction:function(){if(this.options.interactive&&(ne(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Au)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Au(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&ot(this._icon,t),this._shadow&&ot(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var s=this.options.icon.options,o=s.iconSize?H(s.iconSize):H(0,0),c=s.iconAnchor?H(s.iconAnchor):H(0,0);t.panInside(this._latlng,{paddingTopLeft:c,paddingBottomRight:o.subtract(c)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function mm(t,s){return new qr(t,s)}var Xt=pt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return y(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),jr=Xt.extend({options:{fill:!0,radius:10},initialize:function(t,s){y(this,s),this._latlng=q(t),this._radius=this.options.radius},setLatLng:function(t){var s=this._latlng;return this._latlng=q(t),this.redraw(),this.fire("move",{oldLatLng:s,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var s=t&&t.radius||this._radius;return Xt.prototype.setStyle.call(this,t),this.setRadius(s),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,s=this._radiusY||t,o=this._clickTolerance(),c=[t+o,s+o];this._pxBounds=new ue(this._point.subtract(c),this._point.add(c))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function pm(t,s){return new jr(t,s)}var Ya=jr.extend({initialize:function(t,s,o){if(typeof s=="number"&&(s=a({},o,{radius:s})),y(this,s),this._latlng=q(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new Se(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Xt.prototype.setStyle,_project:function(){var t=this._latlng.lng,s=this._latlng.lat,o=this._map,c=o.options.crs;if(c.distance===He.distance){var d=Math.PI/180,p=this._mRadius/He.R/d,w=o.project([s+p,t]),P=o.project([s-p,t]),C=w.add(P).divideBy(2),O=o.unproject(C).lat,j=Math.acos((Math.cos(p*d)-Math.sin(s*d)*Math.sin(O*d))/(Math.cos(s*d)*Math.cos(O*d)))/d;(isNaN(j)||j===0)&&(j=p/Math.cos(Math.PI/180*s)),this._point=C.subtract(o.getPixelOrigin()),this._radius=isNaN(j)?0:C.x-o.project([O,t-j]).x,this._radiusY=C.y-w.y}else{var J=c.unproject(c.project(this._latlng).subtract([this._mRadius,0]));this._point=o.latLngToLayerPoint(this._latlng),this._radius=this._point.x-o.latLngToLayerPoint(J).x}this._updateBounds()}});function gm(t,s,o){return new Ya(t,s,o)}var jt=Xt.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,s){y(this,s),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var s=1/0,o=null,c=Ri,d,p,w=0,P=this._parts.length;w<P;w++)for(var C=this._parts[w],O=1,j=C.length;O<j;O++){d=C[O-1],p=C[O];var J=c(t,d,p,!0);J<s&&(s=J,o=c(t,d,p))}return o&&(o.distance=Math.sqrt(s)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return bu(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,s){return s=s||this._defaultShape(),t=q(t),s.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new Se,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return lt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var s=[],o=lt(t),c=0,d=t.length;c<d;c++)o?(s[c]=q(t[c]),this._bounds.extend(s[c])):s[c]=this._convertLatLngs(t[c]);return s},_project:function(){var t=new ue;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),s=new G(t,t);this._rawPxBounds&&(this._pxBounds=new ue([this._rawPxBounds.min.subtract(s),this._rawPxBounds.max.add(s)]))},_projectLatlngs:function(t,s,o){var c=t[0]instanceof ae,d=t.length,p,w;if(c){for(w=[],p=0;p<d;p++)w[p]=this._map.latLngToLayerPoint(t[p]),o.extend(w[p]);s.push(w)}else for(p=0;p<d;p++)this._projectLatlngs(t[p],s,o)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var s=this._parts,o,c,d,p,w,P,C;for(o=0,d=0,p=this._rings.length;o<p;o++)for(C=this._rings[o],c=0,w=C.length;c<w-1;c++)P=yu(C[c],C[c+1],t,c,!0),P&&(s[d]=s[d]||[],s[d].push(P[0]),(P[1]!==C[c+1]||c===w-2)&&(s[d].push(P[1]),d++))}},_simplifyPoints:function(){for(var t=this._parts,s=this.options.smoothFactor,o=0,c=t.length;o<c;o++)t[o]=gu(t[o],s)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,s){var o,c,d,p,w,P,C=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(o=0,p=this._parts.length;o<p;o++)for(P=this._parts[o],c=0,w=P.length,d=w-1;c<w;d=c++)if(!(!s&&c===0)&&_u(t,P[d],P[c])<=C)return!0;return!1}});function _m(t,s){return new jt(t,s)}jt._flat=wu;var Dn=jt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return pu(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var s=jt.prototype._convertLatLngs.call(this,t),o=s.length;return o>=2&&s[0]instanceof ae&&s[0].equals(s[o-1])&&s.pop(),s},_setLatLngs:function(t){jt.prototype._setLatLngs.call(this,t),lt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return lt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,s=this.options.weight,o=new G(s,s);if(t=new ue(t.min.subtract(o),t.max.add(o)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var c=0,d=this._rings.length,p;c<d;c++)p=mu(this._rings[c],t,!0),p.length&&this._parts.push(p)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var s=!1,o,c,d,p,w,P,C,O;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(p=0,C=this._parts.length;p<C;p++)for(o=this._parts[p],w=0,O=o.length,P=O-1;w<O;P=w++)c=o[w],d=o[P],c.y>t.y!=d.y>t.y&&t.x<(d.x-c.x)*(t.y-c.y)/(d.y-c.y)+c.x&&(s=!s);return s||jt.prototype._containsPoint.call(this,t,!0)}});function vm(t,s){return new Dn(t,s)}var Dt=qt.extend({initialize:function(t,s){y(this,s),this._layers={},t&&this.addData(t)},addData:function(t){var s=E(t)?t:t.features,o,c,d;if(s){for(o=0,c=s.length;o<c;o++)d=s[o],(d.geometries||d.geometry||d.features||d.coordinates)&&this.addData(d);return this}var p=this.options;if(p.filter&&!p.filter(t))return this;var w=Dr(t,p);return w?(w.feature=zr(t),w.defaultOptions=w.options,this.resetStyle(w),p.onEachFeature&&p.onEachFeature(t,w),this.addLayer(w)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=a({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(s){this._setLayerStyle(s,t)},this)},_setLayerStyle:function(t,s){t.setStyle&&(typeof s=="function"&&(s=s(t.feature)),t.setStyle(s))}});function Dr(t,s){var o=t.type==="Feature"?t.geometry:t,c=o?o.coordinates:null,d=[],p=s&&s.pointToLayer,w=s&&s.coordsToLatLng||Xa,P,C,O,j;if(!c&&!o)return null;switch(o.type){case"Point":return P=w(c),Pu(p,t,P,s);case"MultiPoint":for(O=0,j=c.length;O<j;O++)P=w(c[O]),d.push(Pu(p,t,P,s));return new qt(d);case"LineString":case"MultiLineString":return C=Br(c,o.type==="LineString"?0:1,w),new jt(C,s);case"Polygon":case"MultiPolygon":return C=Br(c,o.type==="Polygon"?1:2,w),new Dn(C,s);case"GeometryCollection":for(O=0,j=o.geometries.length;O<j;O++){var J=Dr({geometry:o.geometries[O],type:"Feature",properties:t.properties},s);J&&d.push(J)}return new qt(d);case"FeatureCollection":for(O=0,j=o.features.length;O<j;O++){var re=Dr(o.features[O],s);re&&d.push(re)}return new qt(d);default:throw new Error("Invalid GeoJSON object.")}}function Pu(t,s,o,c){return t?t(s,o):new qr(o,c&&c.markersInheritOptions&&c)}function Xa(t){return new ae(t[1],t[0],t[2])}function Br(t,s,o){for(var c=[],d=0,p=t.length,w;d<p;d++)w=s?Br(t[d],s-1,o):(o||Xa)(t[d]),c.push(w);return c}function Qa(t,s){return t=q(t),t.alt!==void 0?[v(t.lng,s),v(t.lat,s),v(t.alt,s)]:[v(t.lng,s),v(t.lat,s)]}function Nr(t,s,o,c){for(var d=[],p=0,w=t.length;p<w;p++)d.push(s?Nr(t[p],lt(t[p])?0:s-1,o,c):Qa(t[p],c));return!s&&o&&d.length>0&&d.push(d[0].slice()),d}function Bn(t,s){return t.feature?a({},t.feature,{geometry:s}):zr(s)}function zr(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var eo={toGeoJSON:function(t){return Bn(this,{type:"Point",coordinates:Qa(this.getLatLng(),t)})}};qr.include(eo),Ya.include(eo),jr.include(eo),jt.include({toGeoJSON:function(t){var s=!lt(this._latlngs),o=Nr(this._latlngs,s?1:0,!1,t);return Bn(this,{type:(s?"Multi":"")+"LineString",coordinates:o})}}),Dn.include({toGeoJSON:function(t){var s=!lt(this._latlngs),o=s&&!lt(this._latlngs[0]),c=Nr(this._latlngs,o?2:s?1:0,!0,t);return s||(c=[c]),Bn(this,{type:(o?"Multi":"")+"Polygon",coordinates:c})}}),qn.include({toMultiPoint:function(t){var s=[];return this.eachLayer(function(o){s.push(o.toGeoJSON(t).geometry.coordinates)}),Bn(this,{type:"MultiPoint",coordinates:s})},toGeoJSON:function(t){var s=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(s==="MultiPoint")return this.toMultiPoint(t);var o=s==="GeometryCollection",c=[];return this.eachLayer(function(d){if(d.toGeoJSON){var p=d.toGeoJSON(t);if(o)c.push(p.geometry);else{var w=zr(p);w.type==="FeatureCollection"?c.push.apply(c,w.features):c.push(w)}}}),o?Bn(this,{geometries:c,type:"GeometryCollection"}):{type:"FeatureCollection",features:c}}});function Su(t,s){return new Dt(t,s)}var ym=Su,Fr=pt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,s,o){this._url=t,this._bounds=ye(s),y(this,o)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ne(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ke(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Rn(this._image),this},bringToBack:function(){return this._map&&In(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=ye(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",s=this._image=t?this._url:de("img");if(ne(s,"leaflet-image-layer"),this._zoomAnimated&&ne(s,"leaflet-zoom-animated"),this.options.className&&ne(s,this.options.className),s.onselectstart=_,s.onmousemove=_,s.onload=u(this.fire,this,"load"),s.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(s.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=s.src;return}s.src=this._url,s.alt=this.options.alt},_animateZoom:function(t){var s=this._map.getZoomScale(t.zoom),o=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;dn(this._image,o,s)},_reset:function(){var t=this._image,s=new ue(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),o=s.getSize();Le(t,s.min),t.style.width=o.x+"px",t.style.height=o.y+"px"},_updateOpacity:function(){ot(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),wm=function(t,s,o){return new Fr(t,s,o)},ku=Fr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",s=this._image=t?this._url:de("video");if(ne(s,"leaflet-image-layer"),this._zoomAnimated&&ne(s,"leaflet-zoom-animated"),this.options.className&&ne(s,this.options.className),s.onselectstart=_,s.onmousemove=_,s.onloadeddata=u(this.fire,this,"load"),t){for(var o=s.getElementsByTagName("source"),c=[],d=0;d<o.length;d++)c.push(o[d].src);this._url=o.length>0?c:[s.src];return}E(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(s.style,"objectFit")&&(s.style.objectFit="fill"),s.autoplay=!!this.options.autoplay,s.loop=!!this.options.loop,s.muted=!!this.options.muted,s.playsInline=!!this.options.playsInline;for(var p=0;p<this._url.length;p++){var w=de("source");w.src=this._url[p],s.appendChild(w)}}});function bm(t,s,o){return new ku(t,s,o)}var Cu=Fr.extend({_initImage:function(){var t=this._image=this._url;ne(t,"leaflet-image-layer"),this._zoomAnimated&&ne(t,"leaflet-zoom-animated"),this.options.className&&ne(t,this.options.className),t.onselectstart=_,t.onmousemove=_}});function xm(t,s,o){return new Cu(t,s,o)}var Ct=pt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,s){t&&(t instanceof ae||E(t))?(this._latlng=q(t),y(this,s)):(y(this,t),this._source=s),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&ot(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&ot(this._container,1),this.bringToFront(),this.options.interactive&&(ne(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(ot(this._container,0),this._removeTimeout=setTimeout(u(ke,void 0,this._container),200)):ke(this._container),this.options.interactive&&(Te(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=q(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Rn(this._container),this},bringToBack:function(){return this._map&&In(this._container),this},_prepareOpen:function(t){var s=this._source;if(!s._map)return!1;if(s instanceof qt){s=null;var o=this._source._layers;for(var c in o)if(o[c]._map){s=o[c];break}if(!s)return!1;this._source=s}if(!t)if(s.getCenter)t=s.getCenter();else if(s.getLatLng)t=s.getLatLng();else if(s.getBounds)t=s.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,s=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof s=="string")t.innerHTML=s;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(s)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),s=H(this.options.offset),o=this._getAnchor();this._zoomAnimated?Le(this._container,t.add(o)):s=s.add(t).add(o);var c=this._containerBottom=-s.y,d=this._containerLeft=-Math.round(this._containerWidth/2)+s.x;this._container.style.bottom=c+"px",this._container.style.left=d+"px"}},_getAnchor:function(){return[0,0]}});ce.include({_initOverlay:function(t,s,o,c){var d=s;return d instanceof t||(d=new t(c).setContent(s)),o&&d.setLatLng(o),d}}),pt.include({_initOverlay:function(t,s,o,c){var d=o;return d instanceof t?(y(d,c),d._source=this):(d=s&&!c?s:new t(c,this),d.setContent(o)),d}});var Ur=Ct.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Ct.prototype.openOn.call(this,t)},onAdd:function(t){Ct.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Xt||this._source.on("preclick",mn))},onRemove:function(t){Ct.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Xt||this._source.off("preclick",mn))},getEvents:function(){var t=Ct.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",s=this._container=de("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),o=this._wrapper=de("div",t+"-content-wrapper",s);if(this._contentNode=de("div",t+"-content",o),$i(s),Ua(this._contentNode),ee(s,"contextmenu",mn),this._tipContainer=de("div",t+"-tip-container",s),this._tip=de("div",t+"-tip",this._tipContainer),this.options.closeButton){var c=this._closeButton=de("a",t+"-close-button",s);c.setAttribute("role","button"),c.setAttribute("aria-label","Close popup"),c.href="#close",c.innerHTML='<span aria-hidden="true">&#215;</span>',ee(c,"click",function(d){qe(d),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,s=t.style;s.width="",s.whiteSpace="nowrap";var o=t.offsetWidth;o=Math.min(o,this.options.maxWidth),o=Math.max(o,this.options.minWidth),s.width=o+1+"px",s.whiteSpace="",s.height="";var c=t.offsetHeight,d=this.options.maxHeight,p="leaflet-popup-scrolled";d&&c>d?(s.height=d+"px",ne(t,p)):Te(t,p),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var s=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),o=this._getAnchor();Le(this._container,s.add(o))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,s=parseInt(Ti(this._container,"marginBottom"),10)||0,o=this._container.offsetHeight+s,c=this._containerWidth,d=new G(this._containerLeft,-o-this._containerBottom);d._add(fn(this._container));var p=t.layerPointToContainerPoint(d),w=H(this.options.autoPanPadding),P=H(this.options.autoPanPaddingTopLeft||w),C=H(this.options.autoPanPaddingBottomRight||w),O=t.getSize(),j=0,J=0;p.x+c+C.x>O.x&&(j=p.x+c-O.x+C.x),p.x-j-P.x<0&&(j=p.x-P.x),p.y+o+C.y>O.y&&(J=p.y+o-O.y+C.y),p.y-J-P.y<0&&(J=p.y-P.y),(j||J)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([j,J]))}},_getAnchor:function(){return H(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Am=function(t,s){return new Ur(t,s)};ce.mergeOptions({closePopupOnClick:!0}),ce.include({openPopup:function(t,s,o){return this._initOverlay(Ur,t,s,o).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),pt.include({bindPopup:function(t,s){return this._popup=this._initOverlay(Ur,this._popup,t,s),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof qt||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){pn(t);var s=t.layer||t.target;if(this._popup._source===s&&!(s instanceof Xt)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=s,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Zr=Ct.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Ct.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Ct.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Ct.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",s=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=de("div",s),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var s,o,c=this._map,d=this._container,p=c.latLngToContainerPoint(c.getCenter()),w=c.layerPointToContainerPoint(t),P=this.options.direction,C=d.offsetWidth,O=d.offsetHeight,j=H(this.options.offset),J=this._getAnchor();P==="top"?(s=C/2,o=O):P==="bottom"?(s=C/2,o=0):P==="center"?(s=C/2,o=O/2):P==="right"?(s=0,o=O/2):P==="left"?(s=C,o=O/2):w.x<p.x?(P="right",s=0,o=O/2):(P="left",s=C+(j.x+J.x)*2,o=O/2),t=t.subtract(H(s,o,!0)).add(j).add(J),Te(d,"leaflet-tooltip-right"),Te(d,"leaflet-tooltip-left"),Te(d,"leaflet-tooltip-top"),Te(d,"leaflet-tooltip-bottom"),ne(d,"leaflet-tooltip-"+P),Le(d,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&ot(this._container,t)},_animateZoom:function(t){var s=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(s)},_getAnchor:function(){return H(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Pm=function(t,s){return new Zr(t,s)};ce.include({openTooltip:function(t,s,o){return this._initOverlay(Zr,t,s,o).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),pt.include({bindTooltip:function(t,s){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Zr,this._tooltip,t,s),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var s=t?"off":"on",o={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?o.add=this._openTooltip:(o.mouseover=this._openTooltip,o.mouseout=this.closeTooltip,o.click=this._openTooltip,this._map?this._addFocusListeners():o.add=this._addFocusListeners),this._tooltip.options.sticky&&(o.mousemove=this._moveTooltip),this[s](o),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof qt||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var s=typeof t.getElement=="function"&&t.getElement();s&&(ee(s,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),ee(s,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var s=typeof t.getElement=="function"&&t.getElement();s&&s.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var s=this;this._map.once("moveend",function(){s._openOnceFlag=!1,s._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var s=t.latlng,o,c;this._tooltip.options.sticky&&t.originalEvent&&(o=this._map.mouseEventToContainerPoint(t.originalEvent),c=this._map.containerPointToLayerPoint(o),s=this._map.layerPointToLatLng(c)),this._tooltip.setLatLng(s)}});var Tu=jn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var s=t&&t.tagName==="DIV"?t:document.createElement("div"),o=this.options;if(o.html instanceof Element?(Er(s),s.appendChild(o.html)):s.innerHTML=o.html!==!1?o.html:"",o.bgPos){var c=H(o.bgPos);s.style.backgroundPosition=-c.x+"px "+-c.y+"px"}return this._setIconStyles(s,"icon"),s},createShadow:function(){return null}});function Sm(t){return new Tu(t)}jn.Default=Ii;var qi=pt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Z.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){y(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ke(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Rn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(In(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof G?t:new G(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var s=this.getPane().children,o=-t(-1/0,1/0),c=0,d=s.length,p;c<d;c++)p=s[c].style.zIndex,s[c]!==this._container&&p&&(o=t(o,+p));isFinite(o)&&(this.options.zIndex=o+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Z.ielt9){ot(this._container,this.options.opacity);var t=+new Date,s=!1,o=!1;for(var c in this._tiles){var d=this._tiles[c];if(!(!d.current||!d.loaded)){var p=Math.min(1,(t-d.loaded)/200);ot(d.el,p),p<1?s=!0:(d.active?o=!0:this._onOpaqueTile(d),d.active=!0)}}o&&!this._noPrune&&this._pruneTiles(),s&&(he(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=de("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,s=this.options.maxZoom;if(t!==void 0){for(var o in this._levels)o=Number(o),this._levels[o].el.children.length||o===t?(this._levels[o].el.style.zIndex=s-Math.abs(t-o),this._onUpdateLevel(o)):(ke(this._levels[o].el),this._removeTilesAtZoom(o),this._onRemoveLevel(o),delete this._levels[o]);var c=this._levels[t],d=this._map;return c||(c=this._levels[t]={},c.el=de("div","leaflet-tile-container leaflet-zoom-animated",this._container),c.el.style.zIndex=s,c.origin=d.project(d.unproject(d.getPixelOrigin()),t).round(),c.zoom=t,this._setZoomTransform(c,d.getCenter(),d.getZoom()),_(c.el.offsetWidth),this._onCreateLevel(c)),this._level=c,c}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var t,s,o=this._map.getZoom();if(o>this.options.maxZoom||o<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)s=this._tiles[t],s.retain=s.current;for(t in this._tiles)if(s=this._tiles[t],s.current&&!s.active){var c=s.coords;this._retainParent(c.x,c.y,c.z,c.z-5)||this._retainChildren(c.x,c.y,c.z,c.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var s in this._tiles)this._tiles[s].coords.z===t&&this._removeTile(s)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ke(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,s,o,c){var d=Math.floor(t/2),p=Math.floor(s/2),w=o-1,P=new G(+d,+p);P.z=+w;var C=this._tileCoordsToKey(P),O=this._tiles[C];return O&&O.active?(O.retain=!0,!0):(O&&O.loaded&&(O.retain=!0),w>c?this._retainParent(d,p,w,c):!1)},_retainChildren:function(t,s,o,c){for(var d=2*t;d<2*t+2;d++)for(var p=2*s;p<2*s+2;p++){var w=new G(d,p);w.z=o+1;var P=this._tileCoordsToKey(w),C=this._tiles[P];if(C&&C.active){C.retain=!0;continue}else C&&C.loaded&&(C.retain=!0);o+1<c&&this._retainChildren(d,p,o+1,c)}},_resetView:function(t){var s=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),s,s)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var s=this.options;return s.minNativeZoom!==void 0&&t<s.minNativeZoom?s.minNativeZoom:s.maxNativeZoom!==void 0&&s.maxNativeZoom<t?s.maxNativeZoom:t},_setView:function(t,s,o,c){var d=Math.round(s);this.options.maxZoom!==void 0&&d>this.options.maxZoom||this.options.minZoom!==void 0&&d<this.options.minZoom?d=void 0:d=this._clampZoom(d);var p=this.options.updateWhenZooming&&d!==this._tileZoom;(!c||p)&&(this._tileZoom=d,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),d!==void 0&&this._update(t),o||this._pruneTiles(),this._noPrune=!!o),this._setZoomTransforms(t,s)},_setZoomTransforms:function(t,s){for(var o in this._levels)this._setZoomTransform(this._levels[o],t,s)},_setZoomTransform:function(t,s,o){var c=this._map.getZoomScale(o,t.zoom),d=t.origin.multiplyBy(c).subtract(this._map._getNewPixelOrigin(s,o)).round();Z.any3d?dn(t.el,d,c):Le(t.el,d)},_resetGrid:function(){var t=this._map,s=t.options.crs,o=this._tileSize=this.getTileSize(),c=this._tileZoom,d=this._map.getPixelWorldBounds(this._tileZoom);d&&(this._globalTileRange=this._pxBoundsToTileRange(d)),this._wrapX=s.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,s.wrapLng[0]],c).x/o.x),Math.ceil(t.project([0,s.wrapLng[1]],c).x/o.y)],this._wrapY=s.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([s.wrapLat[0],0],c).y/o.x),Math.ceil(t.project([s.wrapLat[1],0],c).y/o.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var s=this._map,o=s._animatingZoom?Math.max(s._animateToZoom,s.getZoom()):s.getZoom(),c=s.getZoomScale(o,this._tileZoom),d=s.project(t,this._tileZoom).floor(),p=s.getSize().divideBy(c*2);return new ue(d.subtract(p),d.add(p))},_update:function(t){var s=this._map;if(s){var o=this._clampZoom(s.getZoom());if(t===void 0&&(t=s.getCenter()),this._tileZoom!==void 0){var c=this._getTiledPixelBounds(t),d=this._pxBoundsToTileRange(c),p=d.getCenter(),w=[],P=this.options.keepBuffer,C=new ue(d.getBottomLeft().subtract([P,-P]),d.getTopRight().add([P,-P]));if(!(isFinite(d.min.x)&&isFinite(d.min.y)&&isFinite(d.max.x)&&isFinite(d.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var O in this._tiles){var j=this._tiles[O].coords;(j.z!==this._tileZoom||!C.contains(new G(j.x,j.y)))&&(this._tiles[O].current=!1)}if(Math.abs(o-this._tileZoom)>1){this._setView(t,o);return}for(var J=d.min.y;J<=d.max.y;J++)for(var re=d.min.x;re<=d.max.x;re++){var Ze=new G(re,J);if(Ze.z=this._tileZoom,!!this._isValidTile(Ze)){var Me=this._tiles[this._tileCoordsToKey(Ze)];Me?Me.current=!0:w.push(Ze)}}if(w.sort(function(Ke,zn){return Ke.distanceTo(p)-zn.distanceTo(p)}),w.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var ut=document.createDocumentFragment();for(re=0;re<w.length;re++)this._addTile(w[re],ut);this._level.el.appendChild(ut)}}}},_isValidTile:function(t){var s=this._map.options.crs;if(!s.infinite){var o=this._globalTileRange;if(!s.wrapLng&&(t.x<o.min.x||t.x>o.max.x)||!s.wrapLat&&(t.y<o.min.y||t.y>o.max.y))return!1}if(!this.options.bounds)return!0;var c=this._tileCoordsToBounds(t);return ye(this.options.bounds).overlaps(c)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var s=this._map,o=this.getTileSize(),c=t.scaleBy(o),d=c.add(o),p=s.unproject(c,t.z),w=s.unproject(d,t.z);return[p,w]},_tileCoordsToBounds:function(t){var s=this._tileCoordsToNwSe(t),o=new Se(s[0],s[1]);return this.options.noWrap||(o=this._map.wrapLatLngBounds(o)),o},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var s=t.split(":"),o=new G(+s[0],+s[1]);return o.z=+s[2],o},_removeTile:function(t){var s=this._tiles[t];s&&(ke(s.el),delete this._tiles[t],this.fire("tileunload",{tile:s.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){ne(t,"leaflet-tile");var s=this.getTileSize();t.style.width=s.x+"px",t.style.height=s.y+"px",t.onselectstart=_,t.onmousemove=_,Z.ielt9&&this.options.opacity<1&&ot(t,this.options.opacity)},_addTile:function(t,s){var o=this._getTilePos(t),c=this._tileCoordsToKey(t),d=this.createTile(this._wrapCoords(t),u(this._tileReady,this,t));this._initTile(d),this.createTile.length<2&&U(u(this._tileReady,this,t,null,d)),Le(d,o),this._tiles[c]={el:d,coords:t,current:!0},s.appendChild(d),this.fire("tileloadstart",{tile:d,coords:t})},_tileReady:function(t,s,o){s&&this.fire("tileerror",{error:s,tile:o,coords:t});var c=this._tileCoordsToKey(t);o=this._tiles[c],o&&(o.loaded=+new Date,this._map._fadeAnimated?(ot(o.el,0),he(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this)):(o.active=!0,this._pruneTiles()),s||(ne(o.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:o.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Z.ielt9||!this._map._fadeAnimated?U(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var s=new G(this._wrapX?g(t.x,this._wrapX):t.x,this._wrapY?g(t.y,this._wrapY):t.y);return s.z=t.z,s},_pxBoundsToTileRange:function(t){var s=this.getTileSize();return new ue(t.min.unscaleBy(s).floor(),t.max.unscaleBy(s).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function km(t){return new qi(t)}var Nn=qi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,s){this._url=t,s=y(this,s),s.detectRetina&&Z.retina&&s.maxZoom>0?(s.tileSize=Math.floor(s.tileSize/2),s.zoomReverse?(s.zoomOffset--,s.minZoom=Math.min(s.maxZoom,s.minZoom+1)):(s.zoomOffset++,s.maxZoom=Math.max(s.minZoom,s.maxZoom-1)),s.minZoom=Math.max(0,s.minZoom)):s.zoomReverse?s.minZoom=Math.min(s.maxZoom,s.minZoom):s.maxZoom=Math.max(s.minZoom,s.maxZoom),typeof s.subdomains=="string"&&(s.subdomains=s.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,s){return this._url===t&&s===void 0&&(s=!0),this._url=t,s||this.redraw(),this},createTile:function(t,s){var o=document.createElement("img");return ee(o,"load",u(this._tileOnLoad,this,s,o)),ee(o,"error",u(this._tileOnError,this,s,o)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(o.referrerPolicy=this.options.referrerPolicy),o.alt="",o.src=this.getTileUrl(t),o},getTileUrl:function(t){var s={r:Z.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var o=this._globalTileRange.max.y-t.y;this.options.tms&&(s.y=o),s["-y"]=o}return A(this._url,a(s,this.options))},_tileOnLoad:function(t,s){Z.ielt9?setTimeout(u(t,this,null,s),0):t(null,s)},_tileOnError:function(t,s,o){var c=this.options.errorTileUrl;c&&s.getAttribute("src")!==c&&(s.src=c),t(o,s)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,s=this.options.maxZoom,o=this.options.zoomReverse,c=this.options.zoomOffset;return o&&(t=s-t),t+c},_getSubdomain:function(t){var s=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[s]},_abortLoading:function(){var t,s;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(s=this._tiles[t].el,s.onload=_,s.onerror=_,!s.complete)){s.src=$;var o=this._tiles[t].coords;ke(s),delete this._tiles[t],this.fire("tileabort",{tile:s,coords:o})}},_removeTile:function(t){var s=this._tiles[t];if(s)return s.el.setAttribute("src",$),qi.prototype._removeTile.call(this,t)},_tileReady:function(t,s,o){if(!(!this._map||o&&o.getAttribute("src")===$))return qi.prototype._tileReady.call(this,t,s,o)}});function Lu(t,s){return new Nn(t,s)}var Eu=Nn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,s){this._url=t;var o=a({},this.defaultWmsParams);for(var c in s)c in this.options||(o[c]=s[c]);s=y(this,s);var d=s.detectRetina&&Z.retina?2:1,p=this.getTileSize();o.width=p.x*d,o.height=p.y*d,this.wmsParams=o},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var s=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[s]=this._crs.code,Nn.prototype.onAdd.call(this,t)},getTileUrl:function(t){var s=this._tileCoordsToNwSe(t),o=this._crs,c=ve(o.project(s[0]),o.project(s[1])),d=c.min,p=c.max,w=(this._wmsVersion>=1.3&&this._crs===xu?[d.y,d.x,p.y,p.x]:[d.x,d.y,p.x,p.y]).join(","),P=Nn.prototype.getTileUrl.call(this,t);return P+x(this.wmsParams,P,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+w},setParams:function(t,s){return a(this.wmsParams,t),s||this.redraw(),this}});function Cm(t,s){return new Eu(t,s)}Nn.WMS=Eu,Lu.wms=Cm;var Bt=pt.extend({options:{padding:.1},initialize:function(t){y(this,t),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ne(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,s){var o=this._map.getZoomScale(s,this._zoom),c=this._map.getSize().multiplyBy(.5+this.options.padding),d=this._map.project(this._center,s),p=c.multiplyBy(-o).add(d).subtract(this._map._getNewPixelOrigin(t,s));Z.any3d?dn(this._container,p,o):Le(this._container,p)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,s=this._map.getSize(),o=this._map.containerPointToLayerPoint(s.multiplyBy(-t)).round();this._bounds=new ue(o,o.add(s.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Ou=Bt.extend({options:{tolerance:0},getEvents:function(){var t=Bt.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Bt.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");ee(t,"mousemove",this._onMouseMove,this),ee(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ee(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){he(this._redrawRequest),delete this._ctx,ke(this._container),we(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var s in this._layers)t=this._layers[s],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Bt.prototype._update.call(this);var t=this._bounds,s=this._container,o=t.getSize(),c=Z.retina?2:1;Le(s,t.min),s.width=c*o.x,s.height=c*o.y,s.style.width=o.x+"px",s.style.height=o.y+"px",Z.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Bt.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[f(t)]=t;var s=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=s),this._drawLast=s,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var s=t._order,o=s.next,c=s.prev;o?o.prev=c:this._drawLast=c,c?c.next=o:this._drawFirst=o,delete t._order,delete this._layers[f(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var s=t.options.dashArray.split(/[, ]+/),o=[],c,d;for(d=0;d<s.length;d++){if(c=Number(s[d]),isNaN(c))return;o.push(c)}t.options._dashArray=o}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||U(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var s=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ue,this._redrawBounds.extend(t._pxBounds.min.subtract([s,s])),this._redrawBounds.extend(t._pxBounds.max.add([s,s]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var s=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,s.x,s.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,s=this._redrawBounds;if(this._ctx.save(),s){var o=s.getSize();this._ctx.beginPath(),this._ctx.rect(s.min.x,s.min.y,o.x,o.y),this._ctx.clip()}this._drawing=!0;for(var c=this._drawFirst;c;c=c.next)t=c.layer,(!s||t._pxBounds&&t._pxBounds.intersects(s))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,s){if(this._drawing){var o,c,d,p,w=t._parts,P=w.length,C=this._ctx;if(P){for(C.beginPath(),o=0;o<P;o++){for(c=0,d=w[o].length;c<d;c++)p=w[o][c],C[c?"lineTo":"moveTo"](p.x,p.y);s&&C.closePath()}this._fillStroke(C,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var s=t._point,o=this._ctx,c=Math.max(Math.round(t._radius),1),d=(Math.max(Math.round(t._radiusY),1)||c)/c;d!==1&&(o.save(),o.scale(1,d)),o.beginPath(),o.arc(s.x,s.y/d,c,0,Math.PI*2,!1),d!==1&&o.restore(),this._fillStroke(o,t)}},_fillStroke:function(t,s){var o=s.options;o.fill&&(t.globalAlpha=o.fillOpacity,t.fillStyle=o.fillColor||o.color,t.fill(o.fillRule||"evenodd")),o.stroke&&o.weight!==0&&(t.setLineDash&&t.setLineDash(s.options&&s.options._dashArray||[]),t.globalAlpha=o.opacity,t.lineWidth=o.weight,t.strokeStyle=o.color,t.lineCap=o.lineCap,t.lineJoin=o.lineJoin,t.stroke())},_onClick:function(t){for(var s=this._map.mouseEventToLayerPoint(t),o,c,d=this._drawFirst;d;d=d.next)o=d.layer,o.options.interactive&&o._containsPoint(s)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(o))&&(c=o);this._fireEvent(c?[c]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var s=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,s)}},_handleMouseOut:function(t){var s=this._hoveredLayer;s&&(Te(this._container,"leaflet-interactive"),this._fireEvent([s],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,s){if(!this._mouseHoverThrottled){for(var o,c,d=this._drawFirst;d;d=d.next)o=d.layer,o.options.interactive&&o._containsPoint(s)&&(c=o);c!==this._hoveredLayer&&(this._handleMouseOut(t),c&&(ne(this._container,"leaflet-interactive"),this._fireEvent([c],t,"mouseover"),this._hoveredLayer=c)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,s,o){this._map._fireDOMEvent(s,o||s.type,t)},_bringToFront:function(t){var s=t._order;if(s){var o=s.next,c=s.prev;if(o)o.prev=c;else return;c?c.next=o:o&&(this._drawFirst=o),s.prev=this._drawLast,this._drawLast.next=s,s.next=null,this._drawLast=s,this._requestRedraw(t)}},_bringToBack:function(t){var s=t._order;if(s){var o=s.next,c=s.prev;if(c)c.next=o;else return;o?o.prev=c:c&&(this._drawLast=c),s.prev=null,s.next=this._drawFirst,this._drawFirst.prev=s,this._drawFirst=s,this._requestRedraw(t)}}});function $u(t){return Z.canvas?new Ou(t):null}var ji=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Tm={_initContainer:function(){this._container=de("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Bt.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var s=t._container=ji("shape");ne(s,"leaflet-vml-shape "+(this.options.className||"")),s.coordsize="1 1",t._path=ji("path"),s.appendChild(t._path),this._updateStyle(t),this._layers[f(t)]=t},_addPath:function(t){var s=t._container;this._container.appendChild(s),t.options.interactive&&t.addInteractiveTarget(s)},_removePath:function(t){var s=t._container;ke(s),t.removeInteractiveTarget(s),delete this._layers[f(t)]},_updateStyle:function(t){var s=t._stroke,o=t._fill,c=t.options,d=t._container;d.stroked=!!c.stroke,d.filled=!!c.fill,c.stroke?(s||(s=t._stroke=ji("stroke")),d.appendChild(s),s.weight=c.weight+"px",s.color=c.color,s.opacity=c.opacity,c.dashArray?s.dashStyle=E(c.dashArray)?c.dashArray.join(" "):c.dashArray.replace(/( *, *)/g," "):s.dashStyle="",s.endcap=c.lineCap.replace("butt","flat"),s.joinstyle=c.lineJoin):s&&(d.removeChild(s),t._stroke=null),c.fill?(o||(o=t._fill=ji("fill")),d.appendChild(o),o.color=c.fillColor||c.color,o.opacity=c.fillOpacity):o&&(d.removeChild(o),t._fill=null)},_updateCircle:function(t){var s=t._point.round(),o=Math.round(t._radius),c=Math.round(t._radiusY||o);this._setPath(t,t._empty()?"M0 0":"AL "+s.x+","+s.y+" "+o+","+c+" 0,"+65535*360)},_setPath:function(t,s){t._path.v=s},_bringToFront:function(t){Rn(t._container)},_bringToBack:function(t){In(t._container)}},Wr=Z.vml?ji:_i,Di=Bt.extend({_initContainer:function(){this._container=Wr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Wr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ke(this._container),we(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Bt.prototype._update.call(this);var t=this._bounds,s=t.getSize(),o=this._container;(!this._svgSize||!this._svgSize.equals(s))&&(this._svgSize=s,o.setAttribute("width",s.x),o.setAttribute("height",s.y)),Le(o,t.min),o.setAttribute("viewBox",[t.min.x,t.min.y,s.x,s.y].join(" ")),this.fire("update")}},_initPath:function(t){var s=t._path=Wr("path");t.options.className&&ne(s,t.options.className),t.options.interactive&&ne(s,"leaflet-interactive"),this._updateStyle(t),this._layers[f(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ke(t._path),t.removeInteractiveTarget(t._path),delete this._layers[f(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var s=t._path,o=t.options;s&&(o.stroke?(s.setAttribute("stroke",o.color),s.setAttribute("stroke-opacity",o.opacity),s.setAttribute("stroke-width",o.weight),s.setAttribute("stroke-linecap",o.lineCap),s.setAttribute("stroke-linejoin",o.lineJoin),o.dashArray?s.setAttribute("stroke-dasharray",o.dashArray):s.removeAttribute("stroke-dasharray"),o.dashOffset?s.setAttribute("stroke-dashoffset",o.dashOffset):s.removeAttribute("stroke-dashoffset")):s.setAttribute("stroke","none"),o.fill?(s.setAttribute("fill",o.fillColor||o.color),s.setAttribute("fill-opacity",o.fillOpacity),s.setAttribute("fill-rule",o.fillRule||"evenodd")):s.setAttribute("fill","none"))},_updatePoly:function(t,s){this._setPath(t,vi(t._parts,s))},_updateCircle:function(t){var s=t._point,o=Math.max(Math.round(t._radius),1),c=Math.max(Math.round(t._radiusY),1)||o,d="a"+o+","+c+" 0 1,0 ",p=t._empty()?"M0 0":"M"+(s.x-o)+","+s.y+d+o*2+",0 "+d+-o*2+",0 ";this._setPath(t,p)},_setPath:function(t,s){t._path.setAttribute("d",s)},_bringToFront:function(t){Rn(t._path)},_bringToBack:function(t){In(t._path)}});Z.vml&&Di.include(Tm);function Mu(t){return Z.svg||Z.vml?new Di(t):null}ce.include({getRenderer:function(t){var s=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return s||(s=this._renderer=this._createRenderer()),this.hasLayer(s)||this.addLayer(s),s},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var s=this._paneRenderers[t];return s===void 0&&(s=this._createRenderer({pane:t}),this._paneRenderers[t]=s),s},_createRenderer:function(t){return this.options.preferCanvas&&$u(t)||Mu(t)}});var Ru=Dn.extend({initialize:function(t,s){Dn.prototype.initialize.call(this,this._boundsToLatLngs(t),s)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=ye(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Lm(t,s){return new Ru(t,s)}Di.create=Wr,Di.pointsToPath=vi,Dt.geometryToLayer=Dr,Dt.coordsToLatLng=Xa,Dt.coordsToLatLngs=Br,Dt.latLngToCoords=Qa,Dt.latLngsToCoords=Nr,Dt.getFeature=Bn,Dt.asFeature=zr,ce.mergeOptions({boxZoom:!0});var Iu=kt.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){ee(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){we(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ke(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Li(),Ia(),this._startPoint=this._map.mouseEventToContainerPoint(t),ee(document,{contextmenu:pn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=de("div","leaflet-zoom-box",this._container),ne(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var s=new ue(this._point,this._startPoint),o=s.getSize();Le(this._box,s.min),this._box.style.width=o.x+"px",this._box.style.height=o.y+"px"},_finish:function(){this._moved&&(ke(this._box),Te(this._container,"leaflet-crosshair")),Ei(),qa(),we(document,{contextmenu:pn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var s=new Se(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(s).fire("boxzoomend",{boxZoomBounds:s})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ce.addInitHook("addHandler","boxZoom",Iu),ce.mergeOptions({doubleClickZoom:!0});var qu=kt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var s=this._map,o=s.getZoom(),c=s.options.zoomDelta,d=t.originalEvent.shiftKey?o-c:o+c;s.options.doubleClickZoom==="center"?s.setZoom(d):s.setZoomAround(t.containerPoint,d)}});ce.addInitHook("addHandler","doubleClickZoom",qu),ce.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ju=kt.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Yt(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}ne(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Te(this._map._container,"leaflet-grab"),Te(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var s=ye(this._map.options.maxBounds);this._offsetLimit=ve(this._map.latLngToContainerPoint(s.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(s.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var s=this._lastTime=+new Date,o=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(o),this._times.push(s),this._prunePositions(s)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),s=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=s.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,s){return t-(t-s)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),s=this._offsetLimit;t.x<s.min.x&&(t.x=this._viscousLimit(t.x,s.min.x)),t.y<s.min.y&&(t.y=this._viscousLimit(t.y,s.min.y)),t.x>s.max.x&&(t.x=this._viscousLimit(t.x,s.max.x)),t.y>s.max.y&&(t.y=this._viscousLimit(t.y,s.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,s=Math.round(t/2),o=this._initialWorldOffset,c=this._draggable._newPos.x,d=(c-s+o)%t+s-o,p=(c+s+o)%t-s-o,w=Math.abs(d+o)<Math.abs(p+o)?d:p;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=w},_onDragEnd:function(t){var s=this._map,o=s.options,c=!o.inertia||t.noInertia||this._times.length<2;if(s.fire("dragend",t),c)s.fire("moveend");else{this._prunePositions(+new Date);var d=this._lastPos.subtract(this._positions[0]),p=(this._lastTime-this._times[0])/1e3,w=o.easeLinearity,P=d.multiplyBy(w/p),C=P.distanceTo([0,0]),O=Math.min(o.inertiaMaxSpeed,C),j=P.multiplyBy(O/C),J=O/(o.inertiaDeceleration*w),re=j.multiplyBy(-J/2).round();!re.x&&!re.y?s.fire("moveend"):(re=s._limitOffset(re,s.options.maxBounds),U(function(){s.panBy(re,{duration:J,easeLinearity:w,noMoveStart:!0,animate:!0})}))}}});ce.addInitHook("addHandler","dragging",ju),ce.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Du=kt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),ee(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),we(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,s=document.documentElement,o=t.scrollTop||s.scrollTop,c=t.scrollLeft||s.scrollLeft;this._map._container.focus(),window.scrollTo(c,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var s=this._panKeys={},o=this.keyCodes,c,d;for(c=0,d=o.left.length;c<d;c++)s[o.left[c]]=[-1*t,0];for(c=0,d=o.right.length;c<d;c++)s[o.right[c]]=[t,0];for(c=0,d=o.down.length;c<d;c++)s[o.down[c]]=[0,t];for(c=0,d=o.up.length;c<d;c++)s[o.up[c]]=[0,-1*t]},_setZoomDelta:function(t){var s=this._zoomKeys={},o=this.keyCodes,c,d;for(c=0,d=o.zoomIn.length;c<d;c++)s[o.zoomIn[c]]=t;for(c=0,d=o.zoomOut.length;c<d;c++)s[o.zoomOut[c]]=-t},_addHooks:function(){ee(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){we(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var s=t.keyCode,o=this._map,c;if(s in this._panKeys){if(!o._panAnim||!o._panAnim._inProgress)if(c=this._panKeys[s],t.shiftKey&&(c=H(c).multiplyBy(3)),o.options.maxBounds&&(c=o._limitOffset(H(c),o.options.maxBounds)),o.options.worldCopyJump){var d=o.wrapLatLng(o.unproject(o.project(o.getCenter()).add(c)));o.panTo(d)}else o.panBy(c)}else if(s in this._zoomKeys)o.setZoom(o.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[s]);else if(s===27&&o._popup&&o._popup.options.closeOnEscapeKey)o.closePopup();else return;pn(t)}}});ce.addInitHook("addHandler","keyboard",Du),ce.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Bu=kt.extend({addHooks:function(){ee(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){we(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var s=uu(t),o=this._map.options.wheelDebounceTime;this._delta+=s,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var c=Math.max(o-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),c),pn(t)},_performZoom:function(){var t=this._map,s=t.getZoom(),o=this._map.options.zoomSnap||0;t._stop();var c=this._delta/(this._map.options.wheelPxPerZoomLevel*4),d=4*Math.log(2/(1+Math.exp(-Math.abs(c))))/Math.LN2,p=o?Math.ceil(d/o)*o:d,w=t._limitZoom(s+(this._delta>0?p:-p))-s;this._delta=0,this._startTime=null,w&&(t.options.scrollWheelZoom==="center"?t.setZoom(s+w):t.setZoomAround(this._lastMousePos,s+w))}});ce.addInitHook("addHandler","scrollWheelZoom",Bu);var Em=600;ce.mergeOptions({tapHold:Z.touchNative&&Z.safari&&Z.mobile,tapTolerance:15});var Nu=kt.extend({addHooks:function(){ee(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){we(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var s=t.touches[0];this._startPos=this._newPos=new G(s.clientX,s.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(ee(document,"touchend",qe),ee(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",s))},this),Em),ee(document,"touchend touchcancel contextmenu",this._cancel,this),ee(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){we(document,"touchend",qe),we(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),we(document,"touchend touchcancel contextmenu",this._cancel,this),we(document,"touchmove",this._onMove,this)},_onMove:function(t){var s=t.touches[0];this._newPos=new G(s.clientX,s.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,s){var o=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:s.screenX,screenY:s.screenY,clientX:s.clientX,clientY:s.clientY});o._simulated=!0,s.target.dispatchEvent(o)}});ce.addInitHook("addHandler","tapHold",Nu),ce.mergeOptions({touchZoom:Z.touch,bounceAtZoomLimits:!0});var zu=kt.extend({addHooks:function(){ne(this._map._container,"leaflet-touch-zoom"),ee(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Te(this._map._container,"leaflet-touch-zoom"),we(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var s=this._map;if(!(!t.touches||t.touches.length!==2||s._animatingZoom||this._zooming)){var o=s.mouseEventToContainerPoint(t.touches[0]),c=s.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=s.getSize()._divideBy(2),this._startLatLng=s.containerPointToLatLng(this._centerPoint),s.options.touchZoom!=="center"&&(this._pinchStartLatLng=s.containerPointToLatLng(o.add(c)._divideBy(2))),this._startDist=o.distanceTo(c),this._startZoom=s.getZoom(),this._moved=!1,this._zooming=!0,s._stop(),ee(document,"touchmove",this._onTouchMove,this),ee(document,"touchend touchcancel",this._onTouchEnd,this),qe(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var s=this._map,o=s.mouseEventToContainerPoint(t.touches[0]),c=s.mouseEventToContainerPoint(t.touches[1]),d=o.distanceTo(c)/this._startDist;if(this._zoom=s.getScaleZoom(d,this._startZoom),!s.options.bounceAtZoomLimits&&(this._zoom<s.getMinZoom()&&d<1||this._zoom>s.getMaxZoom()&&d>1)&&(this._zoom=s._limitZoom(this._zoom)),s.options.touchZoom==="center"){if(this._center=this._startLatLng,d===1)return}else{var p=o._add(c)._divideBy(2)._subtract(this._centerPoint);if(d===1&&p.x===0&&p.y===0)return;this._center=s.unproject(s.project(this._pinchStartLatLng,this._zoom).subtract(p),this._zoom)}this._moved||(s._moveStart(!0,!1),this._moved=!0),he(this._animRequest);var w=u(s._move,s,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=U(w,this,!0),qe(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,he(this._animRequest),we(document,"touchmove",this._onTouchMove,this),we(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ce.addInitHook("addHandler","touchZoom",zu),ce.BoxZoom=Iu,ce.DoubleClickZoom=qu,ce.Drag=ju,ce.Keyboard=Du,ce.ScrollWheelZoom=Bu,ce.TapHold=Nu,ce.TouchZoom=zu,n.Bounds=ue,n.Browser=Z,n.CRS=F,n.Canvas=Ou,n.Circle=Ya,n.CircleMarker=jr,n.Class=V,n.Control=mt,n.DivIcon=Tu,n.DivOverlay=Ct,n.DomEvent=Gf,n.DomUtil=Hf,n.Draggable=Yt,n.Evented=Pe,n.FeatureGroup=qt,n.GeoJSON=Dt,n.GridLayer=qi,n.Handler=kt,n.Icon=jn,n.ImageOverlay=Fr,n.LatLng=ae,n.LatLngBounds=Se,n.Layer=pt,n.LayerGroup=qn,n.LineUtil=om,n.Map=ce,n.Marker=qr,n.Mixin=tm,n.Path=Xt,n.Point=G,n.PolyUtil=nm,n.Polygon=Dn,n.Polyline=jt,n.Popup=Ur,n.PosAnimation=cu,n.Projection=lm,n.Rectangle=Ru,n.Renderer=Bt,n.SVG=Di,n.SVGOverlay=Cu,n.TileLayer=Nn,n.Tooltip=Zr,n.Transformation=Vt,n.Util=Ae,n.VideoOverlay=ku,n.bind=u,n.bounds=ve,n.canvas=$u,n.circle=gm,n.circleMarker=pm,n.control=Mi,n.divIcon=Sm,n.extend=a,n.featureGroup=dm,n.geoJSON=Su,n.geoJson=ym,n.gridLayer=km,n.icon=fm,n.imageOverlay=wm,n.latLng=q,n.latLngBounds=ye,n.layerGroup=hm,n.map=Vf,n.marker=mm,n.point=H,n.polygon=vm,n.polyline=_m,n.popup=Am,n.rectangle=Lm,n.setOptions=y,n.stamp=f,n.svg=Mu,n.svgOverlay=xm,n.tileLayer=Lu,n.tooltip=Pm,n.transformation=At,n.version=r,n.videoOverlay=bm;var Om=window.L;n.noConflict=function(){return window.L=Om,this},window.L=n})})(ol,ol.exports);var l0=ol.exports;const Ji=lg(l0);var u0=Q('<div class="p-6 bg-gray-900 rounded-3xl"><h1 class="text-3xl font-bold text-center mb-6 text-white">PROGRAM</h1><div class=" bg-gray-800 border border-gray-700 rounded-lg shadow-lg p-6"><div class="flex justify-center items-center mb-4"><div id=map-container class="w-full h-96 bg-gray-700 rounded-lg overflow-hidden border-4 border-gray-500"></div></div><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class=" bg-gray-600 p-4 rounded-lg shadow-md transition-transform transform hover:scale-105"><h2 class="text-lg font-semibold mb-2 text-white">Podaci o najbližem avionu</h2><p class=" text-gray-300"><strong>Kut X do aviona: <!>°</strong></p><p class=text-gray-300><strong>Kut Y do aviona: <!>°</strong></p><p class=" text-gray-300"><strong>Koordinate aviona: <!>°, <!>°</strong></p><p class=text-gray-300><strong>Zračna udaljenost: <!>m</strong></p></div><div class=" bg-gray-600 p-4 rounded-lg shadow-md transition-transform transform hover:scale-105"><h2 class="text-lg font-semibold mb-2 text-white">Nagib uređaja</h2><p class=text-gray-300><strong>Alpha (Z os): <!>°</strong></p><p class=text-gray-300><strong>Beta (X os): <!>°</strong></p><p class=text-gray-300><strong>Gamma (Y os): <!>°</strong></p><p class=text-gray-300><strong>Kut gledanja: <!>°</strong></p><p class=text-gray-300><strong>Vaša Elevacija: <!>m</strong></p></div></div><div class="flex justify-center mt-6"><audio id=audiosuccess></audio><audio id=audiofail></audio><button class="bg-blue-600 text-white font-semibold py-2 px-4 w-full rounded-lg shadow-md hover:bg-blue-700 transition duration-200">Skeniraj</button></div><div class="top-16 mt-2 col-span-1 md:col-span-2 flex justify-start w-full"><div class="space-y-2 w-full">'),c0=Q('<div id=notifikacija><div class="whitespace-normal w-full">');const[h0,rh]=K([]),[us,d0]=K(null),[cs,f0]=K(null),[m0,p0]=K(0),[sh,g0]=K(0),[_0,v0]=K(0),[ah,y0]=K(null),[w0,b0]=K(null),[x0,A0]=K(null),[P0,S0]=K(null),[k0,C0]=K(null),[Oo,T0]=K(0),[Jn,L0]=K(0),[Yn,E0]=K(0),[$o,oh]=K(0),[lh,O0]=K(0),[$0,M0]=K(0),[R0,I0]=K(0),[q0,Mo]=K(void 0),[j0,uh]=K(0),[D0,ch]=K(0),[B0,hh]=K(0),[N0,dh]=K(0),[z0,fh]=K(0),[mh,F0]=K(0);function ei(i){const e=new Date(i);return new Intl.DateTimeFormat("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).format(e)}async function sn(i,e,n){const r={message:i,type:e};rh(a=>[...a,r]),setTimeout(()=>{rh(a=>a.filter(l=>l!==r))},n)}const ph=new Ji.Icon({iconUrl:a0,shadowUrl:o0,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});function U0(i){const[e,n]=K(null),r=x=>{const k=Ji.map(x,{zoomControl:!1,attributionControl:!1}).setView([51.505,-.09],13);Ji.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(k),navigator.geolocation?navigator.geolocation.getCurrentPosition(A=>{const{latitude:E,longitude:T}=A.coords;k.setView([E,T],13),Ji.marker([E,T],{icon:ph}).addTo(k).bindPopup("Vaša trenutna lokacija").openPopup()},A=>{console.error("Geolokacija nije dostupna: ",A)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):console.error("Geolokacija nije podržana u ovom pregledniku"),n(k)};Ms(()=>{e()&&e().remove()});const a=()=>{window.DeviceOrientationEvent?window.addEventListener("deviceorientationabsolute",x=>{if(x.alpha!==null){let k=x.alpha,A=x.beta,E=x.gamma;k=(k+360)%360,k<0&&(k+=360),(k>0&&k<180||k>0&&k>180)&&(k=360-k),k=k.toFixed(2),Math.abs(A)<45&&Math.abs(E)<45&&y0(k)}else sn("Nismo u mogućnosti pronaći Vašu orijentaciju.","error",5e3)}):sn("DeviceOrientation nije podržan.","error",5e3)};async function l(x,k,A,E){let T=rd.getGreatCircleBearing({latitude:x,longitude:k},{latitude:A,longitude:E});T=T-5.3,L0(T)}function u(){return new Promise((x,k)=>{"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(A=>{const E=A.coords.latitude,T=A.coords.longitude;d0(E),f0(T),x()},A=>{console.error("Error fetching geolocation:",A),k(A)})})}const h=x=>{p0(x.alpha),g0(x.beta),v0(x.gamma)},f=It();F0(f().user.id),console.log("SESSION::",mh),yh(()=>{let x=new Magnetometer;x.addEventListener("reading",A=>{T0(Math.sqrt(Math.pow(x.x,2)+Math.pow(x.y,2)+Math.pow(x.z,2))),(Oo()>65||Oo()<20)&&document.getElementById("notifikacija")===null&&sn(`Zbog snage magnetskog polja (${Oo().toFixed(2)}µT), očitanja kuteva mogla bi biti neprecizna.`,"info",5e3)}),x.start(),sn("Kako bi ste koristili magnetometar, posjetite lokaciju chrome://flags ili edge://flags te dozvolite rad magnetometra!","info",1e4),a();const k=document.getElementById("map-container");return k&&r(k),window.addEventListener("deviceorientation",h),()=>{window.removeEventListener("deviceorientation",h),x.stop()}});async function m(x,k){b0(x+13/60),A0(x-13/60);const A=13/60/Math.cos(x*Math.PI/180);S0(k+A),C0(k-A)}async function g(x,k){try{const A=await tb(x,k);A!==null&&O0(A)}catch(A){console.error("Greška pri pokušaju dohvaćanja elevacije: ",A)}}async function _(x,k,A,E,T,$,I,M,B,N,D,U,he){const V=A*(Math.PI/180),X=E*(Math.PI/180),Y=x*(Math.PI/180),Pe=k*(Math.PI/180),G=Y-V,Ue=Pe-X,H=Math.sin(G/2)**2+Math.cos(V)*Math.cos(Y)*Math.sin(Ue/2)**2,ve=6371e3*(2*Math.asin(Math.sqrt(H)));ve!=0?oh(ve):oh(T);const Se=T-I,ye=Math.atan(Se/$o())*(180/Math.PI)+90;E0(ye),l(us(),cs(),R0(),$0());const ae=Yn()+20,q=Yn()-20,F=Jn()+20,He=Jn()-20;if($>=q&&$<=ae&&M>=He&&M<=F){var Gt=document.getElementById("audiosuccess");Gt.play(),G0(A,E,T,N,D,B,mh(),U,he),error?console.error("Greška pri spremanju podataka u bazu:",error.message):console.log("Podaci spremljeni u bazu")}else{var Gt=document.getElementById("audiofail");Gt.play();let Vt=Math.min(Math.abs(Yn()-$),360-Math.abs(Yn()-$)),At=Math.min(Math.abs(Jn()-M),360-Math.abs(Jn()-M)),Jt=Vt+At;q0()?Mo(ln=>{if(Jt<ln)uh(Yn().toFixed(2)),ch(Jn().toFixed(2)),hh(A.toFixed(2)),dh(E.toFixed(2)),fh($o().toFixed(2));else return ln}):(Mo(Jt),sn("Niste usmjereni prema avionu ",D," !"),uh(Yn().toFixed(2)),ch(Jn().toFixed(2)),hh(A.toFixed(2)),dh(E.toFixed(2)),fh($o().toFixed(2)))}}const[v,b]=K(!1),S=async()=>{b(!0);try{const x=`${w0()},${x0()},${k0()},${P0()}`,k=await eb(x);k!==void 0?k.forEach(async A=>{const E=A.lat,T=A.lon,$=(A.alt/3.28).toFixed(2),I=Math.round(A.brz*1.852),M=A.modelA,B=A.call,N=A.livery,D=A.registration;I0(E),M0(T),Ji.marker([E,T],{icon:ph}).addTo(e()).bindPopup(`
            <div class="text-xs p-2 max-w-xs">
              <strong>Let:</strong> ${B}<br>
              <strong>Zrakoplov:</strong> ${M}<br>
              <strong>Altituda:</strong> ${$} m
            </div>  `).openPopup(),_(us(),cs(),E,T,$,sh(),lh(),ah(),M,I,B,N,D)}):sn("Nema aviona u zračnom prostoru!","error",5e3)}catch(x){console.error("Failed to fetch flight data:",x)}finally{b(!1)}};async function y(){Mo(void 0),await u(),await m(us(),cs()),await g(us(),cs()),await S()}return(()=>{var x=u0(),k=x.firstChild,A=k.nextSibling,E=A.firstChild,T=E.nextSibling,$=T.firstChild,I=$.firstChild,M=I.nextSibling,B=M.firstChild,N=B.firstChild,D=N.nextSibling;D.nextSibling;var U=M.nextSibling,he=U.firstChild,Ae=he.firstChild,V=Ae.nextSibling;V.nextSibling;var X=U.nextSibling,Y=X.firstChild,Pe=Y.firstChild,G=Pe.nextSibling,Ue=G.nextSibling,H=Ue.nextSibling;H.nextSibling;var ue=X.nextSibling,ve=ue.firstChild,Se=ve.firstChild,ye=Se.nextSibling;ye.nextSibling;var ae=$.nextSibling,q=ae.firstChild,F=q.nextSibling,He=F.firstChild,Gt=He.firstChild,On=Gt.nextSibling;On.nextSibling;var Vt=F.nextSibling,At=Vt.firstChild,Jt=At.firstChild,ln=Jt.nextSibling;ln.nextSibling;var _i=Vt.nextSibling,vi=_i.firstChild,yi=vi.firstChild,un=yi.nextSibling;un.nextSibling;var Ar=_i.nextSibling,wi=Ar.firstChild,bi=wi.firstChild,xi=bi.nextSibling;xi.nextSibling;var Pr=Ar.nextSibling,Sr=Pr.firstChild,ka=Sr.firstChild,$n=ka.nextSibling;$n.nextSibling;var Ai=T.nextSibling,Pi=Ai.firstChild,kr=Pi.nextSibling,Cr=kr.nextSibling,Tr=Ai.nextSibling,Ca=Tr.firstChild;return R(B,D0,D),R(he,j0,V),R(Y,B0,G),R(Y,N0,H),R(ve,z0,ye),R(He,()=>_0().toFixed(2),On),R(At,()=>m0().toFixed(2),ln),R(vi,()=>sh().toFixed(2),un),R(wi,ah,xi),R(Sr,lh,$n),Ne(Pi,"src",r0),Ne(kr,"src",s0),Cr.$$click=y,R(Ca,()=>h0().map((cn,Si)=>(()=>{var hn=c0(),Ta=hn.firstChild;return Ne(hn,"key",Si),R(Ta,()=>cn.message),xe(()=>qs(hn,`p-4 m-5 rounded  ${cn.type==="error"?"bg-red-600 animate-glow":cn.type==="success"?"bg-green-700 animate-glow5":cn.type==="info"?"bg-blue-400 animate-glow2":""} text-white shadow-md`)),hn})())),x})()}dt(["click"]);const Z0=void 0,W0=void 0,We=lv(Z0,W0),[H0,K0]=K(null);async function G0(i,e,n,r,a,l,u,h,f){const{error:m}=await We.from("avioninadjeno").insert([{latitude:i,longitude:e,altitude:n,speed:r,callsign:a,model:l,owner_id:u,livery:h,registration:f}]);m?console.error("Greška pri spremanju podataka u bazu:",m.message):(console.log("Podaci spremljeni u bazu"),sn("Podaci su spremljeni u bazu podataka.","success",5e3))}async function V0(i){const{data:e,error:n}=await We.from("avioninadjeno").select("*").order("id",{ascending:!1}).limit(5).eq("owner_id",i);if(n)return console.error("Greška pri dohvaćanju aviona:",n.message),[];console.log("Dohvaćeni podaci:",e),K0(e)}async function J0(i,e,n){const{data:r,error:a}=await We.from("avioninadjeno").update({description:e,modelnum:n}).eq("model",i);return a?(console.error("Greška pri ubacivanju opisa:",a.message),[]):r}async function Y0(){let{data:i,error:e}=await We.rpc("create_modeli_filtrirani");e&&console.error(e)}async function X0(i){await Y0();const{data:e,error:n}=await We.from("modelifiltrirani").select("*").eq("owner_id",i);return n?(console.error("Greška pri dohvaćanju filtrirane tablice:",n.message),[]):e}async function Q0(i,e,n){const{data:r,error:a}=await We.from("avioninadjeno").select("url").eq("model",i);if(a&&console.log(a),r.length)console.log("ovaj model zrakoplova već ima sliku");else{const{data:l,error:u}=await We.from("avioninadjeno").update({url:e}).eq("model",i).eq("owner_id",n);return u&&console.error("Greška pri spremanju slike",u.message),l}}const xf=ul();function It(){return Rs(xf)}function ex(i){const[e,n]=K(null),[r,a]=K(!0);return We.auth.onAuthStateChange((l,u)=>{l==="SIGNED_IN"||l==="USER_UPDATED"?(n(u),a(!1)):l==="SIGNED_OUT"?(n(null),a(!1)):l==="INITIAL_SESSION"&&a(!1)}),z(rt,{get when(){return!r()},get children(){return z(xf.Provider,{value:e,get children(){return i.children}})}})}const Os="/ZavrsniV2/assets/planefav-DkQTzJrY.png";var tx=Q('<nav class="border-gray-200 bg-gray-900"><div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4"><a href=/Pocetna class="flex items-center space-x-3 rtl:space-x-reverse"><img class=h-8 alt="Flowbite Logo"><span class="self-center text-2xl font-semibold whitespace-nowrap text-white">Plane Spotter</span></a><button class="md:hidden p-2 text-gray-500 hover:bg-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-200"aria-label="Open mobile menu"><svg class="w-6 h-6"fill=none stroke=currentColor viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 6h16M4 12h16M4 18h16"></path></svg></button><div><ul class="flex flex-col font-medium p-4 md:p-0 mt-4 border rounded-lg md:bg-gray-900 md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0 bg-gray-800 border-gray-700"><li><a href=/Pocetna class="block py-2 px-3 text-white rounded md:bg-transparent md:p-0 md:text-blue-500 hover:bg-gray-700 md:hover:bg-transparent">Pocetna</a></li><li class=relative><button id=dropdownNavbarLink class="flex items-center justify-between w-full py-2 px-3 text-white rounded hover:bg-gray-700 md:hover:bg-transparent md:border-0 md:hover:text-blue-500 md:p-0 md:w-auto focus:text-white border-gray-700">Izbornik<svg class="w-2.5 h-2.5 ms-2.5"aria-hidden=true xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 10 6"><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 d="m1 1 4 4 4-4"></path></svg></button></li><li><a href=/Onama class="block py-2 px-3 text-white rounded hover:bg-gray-600 md:hover:bg-transparent md:border-0 md:hover:text-blue-500 md:p-0 md:w-auto">O nama</a></li><li><a href=/Kontakt class="block py-2 px-3 text-white rounded hover:bg-gray-600 md:hover:bg-transparent md:border-0 md:hover:text-blue-500 md:p-0 md:w-auto">Kontakt</a></li><li><a href=/Racun class="block py-2 px-3 text-white rounded hover:bg-gray-600 md:hover:bg-transparent md:border-0 md:hover:text-blue-500 md:p-0 md:w-auto ">Račun'),nx=Q('<div class="bg-gray-800 text-gray-100 min-h-screen"><div class="mx-auto w-full max-w-screen-xl p-4 py-6 lg:py-8">'),ix=Q('<footer footer class=bg-gray-900><div class="mx-auto w-full max-w-screen-xl p-4 py-6 lg:py-8"><div class="md:flex md:justify-between"><div class="mb-6 md:mb-0"><a href=https://flowbite.com/ class="flex items-center"><img class="h-8 me-3"alt="FlowBite Logo"><span class="self-center text-2xl font-semibold whitespace-nowrap text-white">Plane Spotter</span></a></div><div class="grid grid-cols-2 gap-8 sm:gap-6 sm:grid-cols-3"><div><h2 class="mb-6 text-sm font-semibold text-white uppercase ">Izvori</h2><ul class="text-gray-400 font-medium"><li class=mb-4><a href=https://flowbite.com/ class=hover:underline>Flowbite</a></li><li><a href=https://tailwindcss.com/ class=hover:underline>Tailwind CSS</a></li></ul></div><div><h2 class="mb-6 text-sm font-semibold text-white uppercase">Pratite nas</h2><ul class="text-gray-400 font-medium"><li class=mb-4><a href=https://github.com/themesberg/flowbite class="hover:underline ">Github</a></li><li><a href=https://discord.gg/4eeurUVvTy class=hover:underline>Discord</a></li></ul></div><div><h2 class="mb-6 text-sm font-semibold text-white uppercase">Prava</h2><ul class="text-gray-400 font-medium"><li class=mb-4><a href=# class=hover:underline>Privacy Policy</a></li><li><a href=# class=hover:underline>Terms &amp; Conditions</a></li></ul></div></div></div><hr class="my-6 border-gray-700 sm:mx-auto lg:my-8"><div class="sm:flex sm:items-center sm:justify-between"><span class="text-sm text-gray-400 sm:text-center">© <a href=https://ss-obrtnicka-koprivnica.skole.hr/ class=hover:underline> OBSCK™</a> Sva prada podržana.</span><div class="flex mt-4 sm:justify-center sm:mt-0"><a href=# class="text-gray-500 hover:text-white ms-5"><svg class="w-4 h-4"aria-hidden=true xmlns=http://www.w3.org/2000/svg fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M10 .333A9.911 9.911 0 0 0 6.866 19.65c.5.092.678-.215.678-.477 0-.237-.01-1.017-.014-1.845-2.757.6-3.338-1.169-3.338-1.169a2.627 2.627 0 0 0-1.1-1.451c-.9-.615.07-.6.07-.6a2.084 2.084 0 0 1 1.518 1.021 2.11 2.11 0 0 0 2.884.823c.044-.503.268-.973.63-1.325-2.2-.25-4.516-1.1-4.516-4.9A3.832 3.832 0 0 1 4.7 7.068a3.56 3.56 0 0 1 .095-2.623s.832-.266 2.726 1.016a9.409 9.409 0 0 1 4.962 0c1.89-1.282 2.717-1.016 2.717-1.016.366.83.402 1.768.1 2.623a3.827 3.827 0 0 1 1.02 2.659c0 3.807-2.319 4.644-4.525 4.889a2.366 2.366 0 0 1 .673 1.834c0 1.326-.012 2.394-.012 2.72 0 .263.18.572.681.475A9.911 9.911 0 0 0 10 .333Z"clip-rule=evenodd></path></svg><span class=sr-only>GitHub account</span></a><a href=# class="text-gray-500 hover:text-white ms-5"><svg class="w-4 h-4"aria-hidden=true xmlns=http://www.w3.org/2000/svg fill=currentColor viewBox="0 0 8 19"><path fill-rule=evenodd d="M6.135 3H8V0H6.135a4.147 4.147 0 0 0-4.142 4.142V6H0v3h2v9.938h3V9h2.021l.592-3H5V3.591A.6.6 0 0 1 5.592 3h.543Z"clip-rule=evenodd></path></svg><span class=sr-only>Facebook page'),rx=Q('<div id=dropdownNavbar class="absolute left-0 top-full mt-1 z-10 font-normal bg-gray-700 divide-y divide-gray-600 rounded-lg shadow w-44"><ul class="py-2 text-sm text-gray-400"aria-labelledby=dropdownNavbarLink><li><a href=/Program class="block px-4 py-2 hover:bg-gray-600">Program</a></li><li><a href=/Informacije class="block px-4 py-2 hover:bg-gray-600">Informacije</a></li><li><a href=/Upute class="block px-4 py-2 hover:bg-gray-600">Upute');function en(i){const[e,n]=K(!1),[r,a]=K(!1),[l,u]=K(!1),h=()=>{a(!r()),n(!1)},f=()=>{u(!l())};return[(()=>{var m=tx(),g=m.firstChild,_=g.firstChild,v=_.firstChild,b=_.nextSibling,S=b.nextSibling,y=S.firstChild,x=y.firstChild,k=x.nextSibling,A=k.firstChild;return Ne(v,"src",Os),b.$$click=f,A.$$click=h,R(k,(()=>{var E=pe(()=>!!r());return()=>E()&&rx()})(),null),xe(()=>qs(S,`md:flex ${l()?"block":"hidden"} w-full md:w-auto`)),m})(),(()=>{var m=nx(),g=m.firstChild;return R(g,()=>i.children),m})(),(()=>{var m=ix(),g=m.firstChild,_=g.firstChild,v=_.firstChild,b=v.firstChild,S=b.firstChild,y=_.nextSibling,x=y.nextSibling,k=x.firstChild,A=k.firstChild,E=A.nextSibling;return Ne(S,"src",Os),R(k,()=>new Date().getFullYear(),E),m})()]}dt(["click"]);var sx=Q('<div class="bg-gray-900 text-gray-100 min-h-screen"><div class="mx-auto w-full max-w-screen-xl p-4 py-6 lg:py-8"></div><footer class=bg-gray-900><div class="mx-auto w-full max-w-screen-xl p-4 py-6 lg:py-8">');function hs(i){return It(),(()=>{var e=sx(),n=e.firstChild;return R(n,()=>i.children),e})()}var ax=Q('<div class="flex items-center justify-center h-screen bg-gray-900 text-gray-100"><div class="text-center p-6 bg-gray-800 shadow-lg rounded-lg"><h1 class="text-3xl font-bold text-red-500">404 - Stranica nije pronađena</h1><p class="mt-4 text-gray-300">Ova stranica ne postoji. Provjerite URL ili se vratite na početnu stranicu.</p><button class="mt-6 px-6 py-3 text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition duration-300 ease-in-out transform hover:scale-105">Vrati se na početnu');function ox(){const i=()=>{window.location.href="/"};return(()=>{var e=ax(),n=e.firstChild,r=n.firstChild,a=r.nextSibling,l=a.nextSibling;return l.$$click=i,e})()}dt(["click"]);var lx=Q('<div class="flex items-center justify-center h-screen bg-gray-900 text-gray-100"><div class="text-center p-6 bg-gray-800 shadow-lg rounded-lg"><h1 class="text-3xl font-bold text-red-500">Autentifikacija potrebna</h1><p class="mt-4 text-gray-300">Morate se prijaviti kako biste pristupili ovoj stranici.</p><button class="mt-6 px-6 py-3 text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition duration-300 ease-in-out transform hover:scale-105">Prijava');function ux(){const i=xt(),e=()=>{i("/Prijava")};return(()=>{var n=lx(),r=n.firstChild,a=r.firstChild,l=a.nextSibling,u=l.nextSibling;return u.$$click=e,n})()}dt(["click"]);var cx=Q('<img class="w-8 h-8 mr-2"alt=logo>'),hx=Q('<section class=" bg-gray-900"><div class="flex flex-col items-center justify-center px-6 py-8 mx-auto md:h-screen lg:py-0"><div class="w-full rounded-lg shadow border md:mt-0 sm:max-w-md xl:p-0 bg-gray-800 border-gray-700"><div class="p-6 space-y-4 md:space-y-6 sm:p-8"><h1 class="text-xl font-bold leading-tight tracking-tight md:text-2xl text-white">Registracija</h1><form class="space-y-4 md:space-y-6"><div><label for=email class="block mb-2 text-sm font-medium text-white">E-mail</label><input type=email name=email id=email class="border text-sm rounded-lg block w-full p-2.5 bg-gray-700 border-gray-600 placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500"placeholder=name@company.com required></div><div><label for=password class="block mb-2 text-sm font-medium text-white">Lozinka</label><input type=password name=password id=password placeholder=•••••••• class="border text-sm rounded-lg block w-full p-2.5 bg-gray-700 border-gray-600 placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500"required></div><div><label for=confirm-password class="block mb-2 text-sm font-medium text-white">Potvrdite lozinku</label><input type=password name=confirm-password id=confirm-password placeholder=•••••••• class="border text-sm rounded-lg block w-full p-2.5 bg-gray-700 border-gray-600 placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500"required></div><button type=submit class="w-full text-white focus:ring-4 focus:outline-none font-medium rounded-lg text-sm px-5 py-2.5 text-center bg-primary-600 hover:bg-primary-700 focus:ring-primary-800"></button><p class="text-sm font-light text-gray-400">Već imate račun? '),dx=Q('<div class="text-red-500 text-sm">'),fx=Q('<div class="text-green-500 text-sm">Račun uspješno registriran! Preusmjeravam na prijavu...');function mx(i){const e=xt(),[n,r]=K({email:"",password:"",confirmPassword:"",error:"",loading:!1,success:!1}),a=async l=>{if(l.preventDefault(),r({...n(),loading:!0,error:"",success:!1}),n().password!==n().confirmPassword){r({...n(),error:"Lozinke se ne poklapaju!",loading:!1});return}try{const{user:u,error:h}=await We.auth.signUp({email:n().email,password:n().password});h?r({...n(),error:`Greška prilikom registracije: ${h.message}`,loading:!1}):(r({...n(),success:!0,loading:!1}),console.log("Korisnik uspješno registriran:",u),e("/prijava"))}catch{r({...n(),error:"Došlo je do pogreške pri registraciji.",loading:!1})}};return(()=>{var l=hx(),u=l.firstChild,h=u.firstChild,f=h.firstChild,m=f.firstChild,g=m.nextSibling,_=g.firstChild,v=_.firstChild,b=v.nextSibling,S=_.nextSibling,y=S.firstChild,x=y.nextSibling,k=S.nextSibling,A=k.firstChild,E=A.nextSibling,T=k.nextSibling,$=T.nextSibling;return $.firstChild,R(u,z(No,{href:"/",className:"flex items-center mb-6 text-2xl font-semibold  text-white",get children(){return[(()=>{var I=cx();return Ne(I,"src",Os),I})(),"Plane Spotter"]}}),h),g.addEventListener("submit",a),b.$$input=I=>r({...n(),email:I.target.value}),x.$$input=I=>r({...n(),password:I.target.value}),E.$$input=I=>r({...n(),confirmPassword:I.target.value}),R(g,(()=>{var I=pe(()=>!!n().error);return()=>I()&&(()=>{var M=dx();return R(M,()=>n().error),M})()})(),T),R(g,(()=>{var I=pe(()=>!!n().success);return()=>I()&&fx()})(),T),R(T,()=>n().loading?"Registracija...":"Registracija"),R($,z(No,{href:"/prijava",className:"font-medium  hover:underline text-primary-500",children:"Prijavite se ovdje."}),null),xe(()=>T.disabled=n().loading),xe(()=>b.value=n().email),xe(()=>x.value=n().password),xe(()=>E.value=n().confirmPassword),l})()}dt(["input"]);var px=Q('<section class=bg-gray-900><div class="flex flex-col items-center justify-center px-6 py-8 mx-auto md:h-screen lg:py-0"><a href=# class="flex items-center mb-6 text-2xl font-semibold text-white"><img class="w-8 h-8 mr-2"alt=logo>Plane Spotter</a><div class="w-full bg-gray-800 rounded-lg shadow border md:mt-0 sm:max-w-md xl:p-0 border-gray-700"><div class="p-6 space-y-4 md:space-y-6 sm:p-8"><h1 class="text-xl font-bold leading-tight tracking-tight md:text-2xl text-white">Prijava</h1><form class="space-y-4 md:space-y-6"><div><label for=email class="block mb-2 text-sm font-medium text-white">E-mail</label><input type=email name=email id=email class="rounded-lg block w-full p-2.5 bg-gray-700 border-gray-600 placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500"placeholder=name@company.com required></div><div><label for=password class="block mb-2 text-sm font-medium text-white">Lozinka</label><input type=password name=password id=password placeholder=•••••••• class="border rounded-lg block w-full p-2.5 bg-gray-700 border-gray-600 placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500"required></div><div class="flex items-center justify-between"><div class="flex items-start"><div class="flex items-center h-5"><input id=remember aria-describedby=remember type=checkbox class="w-4 h-4 border rounded focus:ring-3 bg-gray-700 border-gray-600 focus:ring-primary-600 ring-offset-gray-800"></div><div class="ml-3 text-sm"><label for=remember class=" text-gray-300">Zapamti podatke</label></div></div><a href=# class="text-sm font-medium hover:underline text-primary-500">Zaboravljena lozinka?</a></div><button type=submit class="w-full text-white focus:ring-4 focus:outline-none font-medium rounded-lg text-sm px-5 py-2.5 text-center bg-primary-600 hover:bg-primary-700 focus:ring-primary-800"></button><p class="text-sm font-light text-gray-400">Nemate račun? <a href=/ class="font-medium hover:underline text-primary-500">Registracija'),gx=Q('<div class="text-red-500 text-sm">');function _x(i){const[e,n]=K(""),[r,a]=K(""),[l,u]=K(""),[h,f]=K(!1),[m,g]=K(!1),_=xt(),v=async b=>{b.preventDefault(),f(!0),u("");try{const{error:S}=await We.auth.signInWithPassword({email:e(),password:r()});S?(u("Neispravni podaci za prijavu."),console.log(S.message)):_("/pocetna")}catch(S){u("Došlo je do pogreške pri prijavi."),console.error(S)}finally{f(!1)}};return(()=>{var b=px(),S=b.firstChild,y=S.firstChild,x=y.firstChild,k=y.nextSibling,A=k.firstChild,E=A.firstChild,T=E.nextSibling,$=T.firstChild,I=$.firstChild,M=I.nextSibling,B=$.nextSibling,N=B.firstChild,D=N.nextSibling,U=B.nextSibling,he=U.firstChild,Ae=he.firstChild,V=Ae.firstChild,X=U.nextSibling;return Ne(x,"src",Os),T.addEventListener("submit",v),M.$$input=Y=>n(Y.target.value),D.$$input=Y=>a(Y.target.value),V.addEventListener("change",Y=>g(Y.target.checked)),R(T,(()=>{var Y=pe(()=>!!l());return()=>Y()&&(()=>{var Pe=gx();return R(Pe,l),Pe})()})(),X),R(X,()=>h()?"Prijava...":"Prijava"),xe(()=>X.disabled=h()),xe(()=>M.value=e()),xe(()=>D.value=r()),xe(()=>V.checked=m()),b})()}dt(["input"]);var vx=Q('<div class="min-h-screen bg-gradient-to-r from-blue-600 via-blue-500 to-blue-400 flex flex-col justify-center items-center text-white"><div class="text-center p-6"><h1 class="font-mono text-5xl font-bold mb-4">Dobrodošli na Planespotter</h1><p class="text-lg mb-8">Ova aplikacija omogućava skeniranje neba i praćenje aviona u stvarnom vremenu. Saznajte više o letovima u vašem području!');function yx(){const i=It(),e=xt();return Ht(()=>{i()===null&&e("/AuthError")}),vx()}async function wx(i){try{if(i!==null){const e=await fetch(`https://api.adsbdb.com/v0/aircraft/${i}`,{method:"GET"});if(e.ok){let r=(await e.json()).response.aircraft.url_photo;return console.log(i),r}else return console.log("Došlo je do greške pri dohvaćanju url-a slike!"),null}else return null}catch(e){console.error(e)}}var bx=Q('<div class="mt-5 flex flex-column sm:flex-row flex-wrap space-y-4 sm:space-y-0 items-center justify-between pb-4"><div><button id=dropdownRadioButton data-dropdown-toggle=dropdownRadio class="inline-flex items-center border focus:outline-none focus:ring-4 font-medium rounded-lg text-sm px-3 py-1.5 bg-gray-800 text-white border-gray-600 hover:bg-gray-700 hover:border-gray-600 focus:ring-gray-700"type=button><svg class="w-3 h-3 text-gray-400 me-3"aria-hidden=true xmlns=http://www.w3.org/2000/svg fill=currentColor viewBox="0 0 20 20"><path d="M10 0a10 10 0 1 0 10 10A10.011 10.011 0 0 0 10 0Zm3.982 13.982a1 1 0 0 1-1.414 0l-3.274-3.274A1.012 1.012 0 0 1 9 10V6a1 1 0 0 1 2 0v3.586l2.982 2.982a1 1 0 0 1 0 1.414Z"></path></svg>Last 30 days<svg class="w-2.5 h-2.5 ms-2.5"aria-hidden=true xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 10 6"><path stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 d="m1 1 4 4 4-4"></path></svg></button><div id=dropdownRadio class="z-10 hidden w-48 divide-y rounded-lg shadow bg-gray-700 divide-gray-600"data-popper-reference-hidden=""data-popper-escaped=""data-popper-placement=top style="position:absolute;inset:auto auto 0px 0px;margin:0px;transform:translate3d(522.5px, 3847.5px, 0px);"><ul class="p-3 space-y-1 text-sm text-gray-200"aria-labelledby=dropdownRadioButton><li><div class="flex items-center p-2 rounded hover:bg-gray-600"><input id=filter-radio-example-1 type=radio value=""name=filter-radio class="w-4 h-4 text-blue-600 focus:ring-blue-600 ring-offset-gray-800 focus:ring-offset-gray-800 focus:ring-2 bg-gray-700 border-gray-600"><label for=filter-radio-example-1 class="w-full ms-2 text-sm font-medium rounded text-gray-300">Last day</label></div></li><li><div class="flex items-center p-2 rounded hover:bg-gray-600"><input checked=""id=filter-radio-example-2 type=radio value=""name=filter-radio class="w-4 h-4 text-blue-600 focus:ring-blue-600 ring-offset-gray-800 focus:ring-offset-gray-800 focus:ring-2 bg-gray-700 border-gray-600"><label for=filter-radio-example-2 class="w-full ms-2 text-sm font-medium rounded text-gray-300">Last 7 days</label></div></li><li><div class="flex items-center p-2 rounded hover:bg-gray-600"><input id=filter-radio-example-3 type=radio value=""name=filter-radio class="w-4 h-4 text-blue-600 focus:ring-blue-600 ring-offset-gray-800 focus:ring-offset-gray-800 focus:ring-2 bg-gray-700 border-gray-600"><label for=filter-radio-example-3 class="w-full ms-2 text-sm font-medium rounded text-gray-300">Last 30 days</label></div></li><li><div class="flex items-center p-2 rounded hover:bg-gray-600"><input id=filter-radio-example-4 type=radio value=""name=filter-radio class="w-4 h-4 text-blue-600 focus:ring-blue-600 ring-offset-gray-800 focus:ring-offset-gray-800 focus:ring-2 bg-gray-700 border-gray-600"><label for=filter-radio-example-4 class="w-full ms-2 text-sm font-medium rounded text-gray-300">Last month</label></div></li><li><div class="flex items-center p-2 rounded hover:bg-gray-600"><input id=filter-radio-example-5 type=radio value=""name=filter-radio class="w-4 h-4 text-blue-600 focus:ring-blue-600 ring-offset-gray-800 focus:ring-offset-gray-800 focus:ring-2 bg-gray-700 border-gray-600"><label for=filter-radio-example-5 class="w-full ms-2 text-sm font-medium rounded text-gray-300">Last year</label></div></li></ul></div></div><label for=table-search class=sr-only>Search</label><div class=relative><div class="absolute inset-y-0 left-0 rtl:inset-r-0 rtl:right-0 flex items-center ps-3 pointer-events-none"><svg class="w-5 h-5 text-gray-400"aria-hidden=true fill=currentColor viewBox="0 0 20 20"xmlns=http://www.w3.org/2000/svg><path fill-rule=evenodd d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"clip-rule=evenodd></path></svg></div><input type=text id=table-search class="block p-2 ps-10 text-sm text-gray-900 border rounded-lg w-80 bg-gray-700 border-gray-600 placeholder-gray-400 :text-white focus:ring-blue-500 focus:border-blue-500"placeholder="Search for items">'),xx=Q('<div class="relative overflow-x-auto shadow-md sm:rounded-lg mt-5 border-2 border-gray-600"><table class="w-full text-sm text-left rtl:text-right text-gray-400"><caption class="p-5 text-lg font-semibold text-left rtl:text-right text-white bg-gray-800">Prikaz pronađenih zrakoplova<p class="mt-1 text-sm font-normal text-gray-400">Ovdje možete detaljnije pregledati informacije o zrakoplovima koje ste pronašli.</p></caption><thead class="text-xs uppercase bg-gray-700 text-white"><tr><th scope=col class="px-6 py-3">ID</th><th scope=col class="px-6 py-3">Model</th><th scope=col class="px-6 py-3">Vrijeme</th><th scope=col class="px-6 py-3">Latituda</th><th scope=col class="px-6 py-3">Longituda</th><th scope=col class="px-6 py-3">Altituda (m)</th><th scope=col class="px-6 py-3">Brzina (km/h)</th><th scope=col class="px-6 py-3">Više informacija</th></tr></thead><tbody>'),Ax=Q('<div class="pt-8 mt-10 font-semibold text-xl hover:text-yellow-500">'),Px=Q('<tr><td colspan=7 class="text-center py-4">Trenutno nema aviona'),Sx=Q('<tr class=" odd:bg-gray-900 even:bg-gray-800 border-b border-gray-700"><td class="px-6 py-4 font-medium text-white"></td><td class="px-6 py-4"></td><td class="px-6 py-4"></td><td class="px-6 py-4"></td><td class="px-6 py-4"></td><td class="px-6 py-4"></td><td class="px-6 py-4">'),kx=Q('<button class="bg-yellow-600 text-white font-semibold py-2 px-4 w-full rounded-lg shadow-md hover:bg-yellow-500 transition duration-200">Prouči'),Cx=Q('<td class="px-6 py-4">'),Tx=Q('<div class="flex justify-center items-center"> <a href=/MojHangar><svg class="w-6 h-6 text-yellow-400 dark:text-yellow-400 hover:text-yellow-300"aria-hidden=true xmlns=http://www.w3.org/2000/svg width=24 height=24 fill=currentColor viewBox="0 0 24 24"><path fill-rule=evenodd d="M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm13.707-1.293a1 1 0 0 0-1.414-1.414L11 12.586l-1.793-1.793a1 1 0 0 0-1.414 1.414l2.5 2.5a1 1 0 0 0 1.414 0l4-4Z"clip-rule=evenodd>');function Lx(i){const e=It(),n=xt(),[r,a]=K(window.innerWidth<1024);Ht(async()=>{e()===null&&n("/AuthError"),await V0(e().user.id);const u=()=>a(window.innerWidth<1024);return window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)});const l=async(u,h)=>{try{const f=await i0(u),m=await wx(h);await Q0(u,m,e().user.id),f!==null?sn(`${f}`,"info",2e4):console.log("OPEN AI API vratio je null vrijednost")}catch(f){console.error("Greška pri pokušaju dohvaćanja informacija: ",f)}};return[pe(()=>pe(()=>!!r())()&&z(U0,{})),bx(),(()=>{var u=xx(),h=u.firstChild,f=h.firstChild,m=f.nextSibling,g=m.nextSibling;return R(g,z(kh,{get each(){return H0()},get fallback(){return Px()},children:_=>(()=>{var v=Sx(),b=v.firstChild,S=b.nextSibling,y=S.nextSibling,x=y.nextSibling,k=x.nextSibling,A=k.nextSibling,E=A.nextSibling;return R(b,()=>_.id),R(S,()=>_.model),R(y,()=>ei(_.time)),R(x,()=>_.latitude),R(k,()=>_.longitude),R(A,()=>_.altitude),R(E,()=>_.speed),R(v,(()=>{var T=Cx();return R(T,z(rt,{get when(){return _.description===null},get fallback(){return Tx()},get children(){var $=kx();return $.$$click=()=>l(_.model,String(_.registration)),$}})),T})(),null),v})()})),u})(),(()=>{var u=Ax();return R(u,z(No,{href:"/mojHangar",children:"Kako bi vidjeli sve pronađene zrakoplove, posjetite Moj Hangar!"})),u})()]}dt(["click"]);var Ex=Q('<div class=p-8><h1 class="font-mono text-4xl mb-6">INFORMACIJE O APLIKACIJI</h1><div class=space-y-6><div><p>Ova aplikacija koristi <a href=https://www.flightradar24.com/ class="text-blue-500 hover:underline"target=_blank rel="noopener noreferrer">Flightradar24 API</a> za skeniranje neba i prikazivanje informacija o avionima u stvarnom vremenu. Korištenjem najnovijih podataka o letovima, omogućuje korisnicima praćenje avionskih ruta, visine, brzine i ostalih važnih parametara. Aplikacija omogućuje jednostavno pretraživanje i filtriranje letova na temelju različitih kriterija.</p></div><div><p><a href=https://solidjs.com/ class="text-blue-500 hover:underline"target=_blank rel="noopener noreferrer">SolidJS</a> je korišten za optimalne performanse aplikacije, dok su za dizajn korišteni <a href=https://tailwindcss.com/ class="text-blue-500 hover:underline"target=_blank rel="noopener noreferrer">TailwindCSS</a> i <a href=https://flowbite.com/ class="text-blue-500 hover:underline"target=_blank rel="noopener noreferrer">Flowbite</a>, što omogućava moderni izgled i jednostavno korisničko iskustvo.</p></div><div><p class="text-lg text-gray-300">Flightradar24 je jedan od najpoznatijih globalnih servisa za praćenje letova, a kroz našu aplikaciju, korisnici mogu uživati u brzom pristupu podacima o avionima koji lete u njihovoj blizini. Informacije o svakom letu uključuju podatke o tipu aviona, visini, poziciji, brzini leta i drugim detaljima.</p></div><div><p class="text-lg text-gray-300">Aplikacija je dizajnirana uz pomoć SolidJS-a za optimalne performanse, dok su za dizajn korišteni TailwindCSS i Flowbite, što omogućava moderni izgled i jednostavno korisničko iskustvo.');function Ox(i){const e=It(),n=xt();return Ht(()=>{e()===null&&n("/AuthError")}),Ex()}const $x="/ZavrsniV2/assets/logo-ChWoxeul.png";var Mx=Q('<div class=p-8><h1 class="font-mono text-4xl mb-6">O NAMA</h1><div class=space-y-6><div class="flex justify-center mb-10"><a href=https://ss-obrtnicka-koprivnica.skole.hr/><img alt=Logo class="w-40 h-auto rounded-full shadow-md transform hover:scale-110 transition-transform duration-300"></a></div><div><h2 class="text-xl font-semibold">Škola</h2><p>Obrtnička škola Koprivnica</p></div><div><h2 class="text-xl font-semibold">Mentor</h2><p>Tomislav Jakupić</p></div><div><h2 class="text-xl font-semibold">Učenici</h2><p class="text-lg text-gray-300">Valentin Funtak <br>Noa Golubić</p></div><div><p class="text-lg text-gray-300">');function Rx(i){const e=It(),n=xt();Ht(()=>{e()===null&&n("/AuthError")});const r=()=>{const{error:a}=We.auth.signOut();n("/Prijava"),a&&alert("Nažalost Vas nemožemo odjaviti:",a)};return(()=>{var a=Mx(),l=a.firstChild,u=l.nextSibling,h=u.firstChild,f=h.firstChild,m=f.firstChild;return f.$$click=r,Ne(m,"src",$x),a})()}dt(["click"]);var Ix=Q('<div class=p-8><h1 class="font-mono text-4xl mb-6">KONTAKT</h1><div class=space-y-6><div><h2 class="text-xl font-semibold">Obrtnička škola Koprivnica</h2><p>Posjetite <a href=https://ss-obrtnicka-koprivnica.skole.hr/ class="text-blue-500 hover:underline"target=_blank rel="noopener noreferrer">službenu stranicu škole</a> za više informacija.</p></div><div><h2 class="text-xl font-semibold">GitHub računi</h2><ul class=space-y-2><li class="flex items-center"><a href=https://github.com/valentinfuntak class="text-gray-500 hover:text-white flex items-center"target=_blank rel="noopener noreferrer"><svg class="w-4 h-4 mr-2"aria-hidden=true xmlns=http://www.w3.org/2000/svg fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M10 .333A9.911 9.911 0 0 0 6.866 19.65c.5.092.678-.215.678-.477 0-.237-.01-1.017-.014-1.845-2.757.6-3.338-1.169-3.338-1.169a2.627 2.627 0 0 0-1.1-1.451c-.9-.615.07-.6.07-.6a2.084 2.084 0 0 1 1.518 1.021 2.11 2.11 0 0 0 2.884.823c.044-.503.268-.973.63-1.325-2.2-.25-4.516-1.1-4.516-4.9A3.832 3.832 0 0 1 4.7 7.068a3.56 3.56 0 0 1 .095-2.623s.832-.266 2.726 1.016a9.409 9.409 0 0 1 4.962 0c1.89-1.282 2.717-1.016 2.717-1.016.366.83.402 1.768.1 2.623a3.827 3.827 0 0 1 1.02 2.659c0 3.807-2.319 4.644-4.525 4.889a2.366 2.366 0 0 1 .673 1.834c0 1.326-.012 2.394-.012 2.72 0 .263.18.572.681.475A9.911 9.911 0 0 0 10 .333Z"clip-rule=evenodd></path></svg>Valentin Funtak</a></li><li class="flex items-center"><a href=https://github.com/NoaGolubic class="text-gray-500 hover:text-white flex items-center"target=_blank rel="noopener noreferrer"><svg class="w-4 h-4 mr-2"aria-hidden=true xmlns=http://www.w3.org/2000/svg fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M10 .333A9.911 9.911 0 0 0 6.866 19.65c.5.092.678-.215.678-.477 0-.237-.01-1.017-.014-1.845-2.757.6-3.338-1.169-3.338-1.169a2.627 2.627 0 0 0-1.1-1.451c-.9-.615.07-.6.07-.6a2.084 2.084 0 0 1 1.518 1.021 2.11 2.11 0 0 0 2.884.823c.044-.503.268-.973.63-1.325-2.2-.25-4.516-1.1-4.516-4.9A3.832 3.832 0 0 1 4.7 7.068a3.56 3.56 0 0 1 .095-2.623s.832-.266 2.726 1.016a9.409 9.409 0 0 1 4.962 0c1.89-1.282 2.717-1.016 2.717-1.016.366.83.402 1.768.1 2.623a3.827 3.827 0 0 1 1.02 2.659c0 3.807-2.319 4.644-4.525 4.889a2.366 2.366 0 0 1 .673 1.834c0 1.326-.012 2.394-.012 2.72 0 .263.18.572.681.475A9.911 9.911 0 0 0 10 .333Z"clip-rule=evenodd></path></svg>Noa Golubić</a></li></ul></div><div><h2 class="text-xl font-semibold">Repozitorij završnog rada</h2><ul class=space-y-2><li class="flex items-center"><a href=https://github.com/valentinfuntak/ZavrsniV2 class="text-gray-500 hover:text-white flex items-center"target=_blank rel="noopener noreferrer"><svg class="w-4 h-4 mr-2"aria-hidden=true xmlns=http://www.w3.org/2000/svg fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M10 .333A9.911 9.911 0 0 0 6.866 19.65c.5.092.678-.215.678-.477 0-.237-.01-1.017-.014-1.845-2.757.6-3.338-1.169-3.338-1.169a2.627 2.627 0 0 0-1.1-1.451c-.9-.615.07-.6.07-.6a2.084 2.084 0 0 1 1.518 1.021 2.11 2.11 0 0 0 2.884.823c.044-.503.268-.973.63-1.325-2.2-.25-4.516-1.1-4.516-4.9A3.832 3.832 0 0 1 4.7 7.068a3.56 3.56 0 0 1 .095-2.623s.832-.266 2.726 1.016a9.409 9.409 0 0 1 4.962 0c1.89-1.282 2.717-1.016 2.717-1.016.366.83.402 1.768.1 2.623a3.827 3.827 0 0 1 1.02 2.659c0 3.807-2.319 4.644-4.525 4.889a2.366 2.366 0 0 1 .673 1.834c0 1.326-.012 2.394-.012 2.72 0 .263.18.572.681.475A9.911 9.911 0 0 0 10 .333Z"clip-rule=evenodd></path></svg>Završni rad</a></li></ul></div><div><h2 class="text-xl font-semibold">Kontakt e-mail</h2><ul class=space-y-2><li>Valentin Funtak: <a href=mailto:valentinfuntakk@gmail.com class="text-blue-500 hover:underline">valentinfuntakk@gmail.com</a></li><li>Noa Golubić: <a href=mailto:noagolubic030606@gmail.com class="text-blue-500 hover:underline">noagolubic030606@gmail.com');function qx(i){const e=It(),n=xt();Ht(()=>{e()===null&&n("/AuthError")});const r=()=>{const{error:a}=We.auth.signOut();n("/Prijava"),a&&alert("Nažalost Vas nemožemo odjaviti:",a)};return(()=>{var a=Ix(),l=a.firstChild,u=l.nextSibling,h=u.firstChild,f=h.firstChild,m=f.nextSibling,g=m.firstChild,_=g.nextSibling,v=h.nextSibling,b=v.firstChild,S=b.nextSibling,y=S.firstChild,x=y.firstChild,k=y.nextSibling,A=k.firstChild,E=v.nextSibling,T=E.firstChild,$=T.nextSibling,I=$.firstChild,M=I.firstChild;return _.$$click=r,x.$$click=r,A.$$click=r,M.$$click=r,a})()}dt(["click"]);var jx=Q('<div class="max-w-screen-lg mx-auto p-6 bg-gray-600 shadow-md rounded-lg"><div class="flex flex-col sm:flex-row justify-between items-start space-y-6 sm:space-y-0 sm:space-x-4 mb-0"><div class=flex-1><h1 class="font-sans text-3xl sm:text-4xl mb-3 text-yellow-400">Račun</h1><p class="text-lg font-semibold text-gray-300">Korisnik: </p></div></div><div class=" top-16 left-0 right-0 flex justify-start w-full"><div class="space-y-2 w-full">'),Dx=Q('<p class="text-lg mt-2 text-gray-300"><strong>Email:</strong> '),Bx=Q('<div class="flex flex-col items-start sm:items-end space-y-4 sm:space-y-4"><button class="w-full bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700 transition">Promjeni email</button><button class="w-full bg-yellow-600 text-white py-2 px-4 rounded hover:bg-yellow-700 transition">Promjeni lozinku</button><button class="w-full bg-red-600 text-white py-2 px-4 rounded hover:bg-red-700 transition">Odjava'),Nx=Q('<div class="mt-6 bg-white p-6 shadow-md rounded-lg"><h2 class="font-sans text-xl text-gray-800">Promjena e-maila</h2><div class=mt-4><input type=email class="border-2 border-gray-300 p-2 rounded-md w-full text-black"placeholder="Unesite novu e-mail adresu"><button class="mt-4 w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition">Potvrdi promjenu emaila'),zx=Q('<div><div class="whitespace-normal w-full">');function Fx(i){const e=It(),n=xt();Ht(()=>{e()===null&&n("/AuthError")});const[r,a]=K(""),[l,u]=K(!1),[h,f]=K(!1),[m,g]=K([]),_=(y,x,k)=>{const A={message:y,type:x};g(E=>[...E,A]),setTimeout(()=>{g(E=>E.filter(T=>T!==A))},k)},v=()=>{const{error:y}=We.auth.signOut();n("/Prijava"),y&&alert("Nažalost Vas nemožemo odjaviti:",y)},b=async()=>{const y=e().user?.email;if(y){const{error:x}=await We.auth.resetPasswordForEmail(y,{redirectTo:"https://yourapp.com/update-password"});x?_("Greška pri slanju e-maila za resetiranje lozinke: "+x.message,"error",5e3):_("E-mail za resetiranje lozinke poslan!","success",5e3)}},S=async()=>{const y=r();if(y){const{data:x,error:k}=await We.auth.updateUser({email:y});k?_("Greška pri promjeni emaila: "+k.message,"error",5e3):(u(!0),_("E-mail uspješno promijenjen. Potvrdite promjenu putem poslanog e-maila!","success",5e3))}};return(()=>{var y=jx(),x=y.firstChild,k=x.firstChild,A=k.firstChild,E=A.nextSibling;E.firstChild;var T=x.nextSibling,$=T.firstChild;return R(E,()=>e()?"Prijavljen":"Nije prijavljen",null),R(k,(()=>{var I=pe(()=>!!e());return()=>I()&&(()=>{var M=Dx(),B=M.firstChild;return B.nextSibling,R(M,()=>e().user?.email||"Nema emaila",null),M})()})(),null),R(x,(()=>{var I=pe(()=>!!e());return()=>I()&&(()=>{var M=Bx(),B=M.firstChild,N=B.nextSibling,D=N.nextSibling;return B.$$click=()=>f(!0),N.$$click=b,D.$$click=v,M})()})(),null),R(y,(()=>{var I=pe(()=>!!h());return()=>I()&&(()=>{var M=Nx(),B=M.firstChild,N=B.nextSibling,D=N.firstChild,U=D.nextSibling;return D.$$input=he=>a(he.target.value),U.$$click=S,xe(()=>D.value=r()),M})()})(),T),R($,()=>m().map((I,M)=>(()=>{var B=zx(),N=B.firstChild;return Ne(B,"key",M),R(N,()=>I.message),xe(()=>qs(B,`p-4 mt-3 rounded ${I.type==="error"?"bg-red-600":I.type==="success"?"bg-green-700":I.type==="info"?"bg-blue-400":""} text-white shadow-md`)),B})())),y})()}dt(["click","input"]);var Ux=Q('<div class=p-8><h1 class="font-mono text-4xl mb-12">Upute za korištenje</h1><div><h2 class="text-2xl text-yellow-600 font-semibold mb-8">Korištenje karte</h2><p class="font-semibold mb-10">Kartu možete koristiti kako bi se mogli što lakše pozicionirali.<br>Karta će uvjek prikazati vaš trenutačni položaj.<br>Karta se može povećati i smanjiti gestikuliranjem.<br>Nakon pritiska na gumb "Skeniraj", na karti će se prikazati svi avioni<br>u okrugu od 30km.<br></p></div><div><h2 class="text-2xl text-yellow-600 font-semibold mb-8">Alati za orijentaciju</h2><p class="font-semibold mb-10">U kućici pod nazivom "Nagib uređaja" možete vidjeti podatke o svojoj orijentaciji.<br>Ovi podaci mogu Vam biti od koristi prilikom ciljanja zrakoplova.<br>Postoje 3 osi, svaka od kojih ima svoj naziv te se njezin kut mjeri u stupnjevima.<br>Os Alpha mjeri pomak u dubinu, os Beta kružno horizontalno gibanje, a os Gamma vertikalno gibanje.<br>Kut gledanja označuje vaš smjer promatranja s obzirom na magnetski sjever.<br>Kut gledanja također sadrži dodatak, zbroj dodatka i smjera u stupnjevima udaljenost je od stvarnog sjevera.<br></p></div><div><h2 class="text-2xl text-yellow-600 font-semibold mb-8">Podaci o avionu</h2><p class="font-semibold mb-10">U kućici pod nazivom "Podaci o avionu" možete pronaći podatke o najbližem zrakoplov.<br>Vrijednosti ovih polja popunjavaju se kada korisnik ne pronađe zrakoplov<br>nakon pritiska na gumb "Skeniraj".<br>Ovdje možete pronaći podatke koji će vam pomoći da pronađete najbliži zrakoplov.<br>Podaci uključuju: koordinate zrakoplova, Vašu elevaciju, zračnu udaljenost te pogodbene kuteve.<br>Pogodbeni kutevi "Kut X do aviona" i "Kut Y do aviona" moraju biti identični<br>Vašem smjeru (zajedno sa dodatkom) te kutu Gamma.<br>Tolerancija oba kuta je +/- 5°.<br></p></div><div><h2 class="text-2xl text-yellow-600 font-semibold mb-8">Tablični prikaz</h2><p class="font-semibold mb-10">U tabličnom prikazu pojavit će se informacije o zadnjih 5 pronađenih zrakoplova.<br>Tabličan prikaz nudi pregled dodatnih činjenica o samom zrakoplovu.<br>Pritiskom na gumb "Prouči" pokrenut ćete AI asistenta koji će Vas<br>dodatno informirati o samom zrakoplovu.<br></p></div><div><h2 class="text-2xl text-yellow-600 font-semibold mb-8">Moj hangar</h2><p class="font-semibold mb-10">Pritiskom na "Kako bi vidjeli sve pronađene zrakoplove, posjetite Moj Hangar!"<br>otvorit ćete svoju personaliziranu kolekciju svih pronađenih zrakoplova.<br>Svaki zrakoplov koji proučite pritiskom na gumb "prouči"<br>biti će svrstan prema rijetkosti.<br></p></div><div><h2 class="text-2xl text-yellow-600 font-semibold mb-8">Česte notifikacije</h2><p class="font-semibold mb-10">1) "Nismo u mogućnosti pronaći Vašu orijentaciju" ili "DeviceOrientation nije podržan":<br>Vaš uređaj nažalost nije u mogućnosti prikupiti orijentaciju.<br>2) "Avion se ne nalazi u traženom zračnom prostoru":<br>Uređaj nije pravilno usmjeren prema zrakoplovu.<br>3) "Greška pri slanju e-maila za resetiranje lozinke":<br>Nažalost nismo u mogućnosti proslijediti e-mail, pokušajte ponovo kasnije.<br></p></div><h2 class="text-xl text-yellow-600 font-semibold mb-5">Želite nam postaviti pitanje?</h2><p class="font-semibold mb-10">Posjetite stranicu <a href=\\Kontakt class=hover:text-blue-400>"kontakt"</a> i kontaktirajte nas kako bi odgovorili na Vaše pitanje!<br>Kontaktirati nas možete putem naših mail adresa.<br>Unaprijed zahvaljujemo na strpljenju!<br>');function Zx(i){const e=It(),n=xt();return Ht(()=>{e()===null&&n("/AuthError")}),Ux()}var Fi=Q('<p class="pt-7 font-bold text-black dark:text-black">Livreja: '),Wx=Q('<div class="custom-card content-center pb-8 pt-9 flex items-center justify-center"><div class="bg-gradient-to-r from-slate-200 to-stone-400 block max-w-sm p-6 bg-white border border-white-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700"><h5 id=naslov class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">, ???</h5><p class="pt-5 font-bold text-black dark:text-black">Pronađen: <!>h</p><p class="pt-5 font-bold text-black dark:text-black">Registracija: </p><p class="pt-5 font-bold text-black dark:text-black">Brzina i visina: <!>km/h, <!>m</p><p class="pt-5 font-bold text-black dark:text-black">Opis: Nije istraženo!</p><p class="pt-7 font-bold text-black dark:text-black">Broj proizvedenih modela: Nije istraženo!'),ds=Q('<img class="pr-2 mb-2 mt-5 rounded-2xl">'),Hx=Q('<div class="custom-card content-center pb-8 pt-9 flex items-center justify-center"><div class="content-center p-5 flex items-center justify-center bg-red-400 rounded-md bg-clip-padding backdrop-filter backdrop-blur-md bg-opacity-20 border border-fushia-100 animate-glow duration-1000 delay-200"><div class="bg-gradient-to-r from-red-200 via-fushia-300 to-rose-500 block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700"><h5 id=naslov class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">, COMMON</h5><p class="pt-5 font-bold text-black dark:text-black">Pronađen: <!>h</p><p class="pt-5 font-bold text-black dark:text-black">Registracija: </p><p class="pt-5 font-bold text-black dark:text-black">Brzina i visina: <!>km/h, <!>m</p><p class="pt-5 font-bold text-black dark:text-black">Opis: </p><p class="pt-7 font-bold text-black dark:text-black">Broj proizvedenih modela: </p>'),Kx=Q('<div class="custom-card content-center pb-8 pt-9 flex items-center justify-center"><div class="content-center p-5 flex items-center justify-center bg-indigo-400 rounded-md bg-clip-padding backdrop-filter backdrop-blur-md bg-opacity-20 border border-gray-100 animate-glow2 duration-1000 delay-200"><div class="bg-gradient-to-r from-indigo-300 via-sky-500 to-emerald-500 block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700"><h5 id=naslov class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">, RARE</h5><p class="pt-5 font-bold text-black dark:text-black">Pronađen: <!>h</p><p class="pt-5 font-bold text-black dark:text-black">Registracija: </p><p class="pt-5 font-bold text-black dark:text-black">Brzina i visina: <!>km/h, <!>m</p><p class="pt-5 font-bold text-black dark:text-black">Opis: </p><p class="pt-7 font-bold text-black dark:text-black">Broj proizvedenih modela: '),Gx=Q('<div class="custom-card content-center pb-8 pt-9 flex items-center justify-center"><div class="content-center p-5 flex items-center justify-center bg-purple-500 rounded-md bg-clip-padding backdrop-filter backdrop-blur-md bg-opacity-20 border border-gray-100 animate-glow3 duration-1000 delay-200"><div class="bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700"><h5 id=naslov class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">, EPIC</h5><p class="pt-5 font-bold text-black dark:text-black">Pronađen: <!>h</p><p class="pt-5 font-bold text-black dark:text-black">Registracija: </p><p class="pt-5 font-bold text-black dark:text-black">Brzina i visina: <!>km/h, <!>m</p><p class="pt-5 font-bold text-black dark:text-black">Opis: </p><p class="pt-7 font-bold text-black dark:text-black">Broj proizvedenih modela: '),Vx=Q('<div class="custom-card content-center pb-8 pt-9 flex items-center justify-center"><div class="content-center p-5 flex items-center justify-center bg-yellow-300 rounded-md bg-clip-padding backdrop-filter backdrop-blur-md bg-opacity-20 border border-gray-100 animate-glow4 duration-1000 delay-200"><div class="bg-gradient-to-r from-orange-400 via-amber-500 to-yellow-400 block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700"><h5 id=naslov class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">, LEGENDARY</h5><p class="pt-5 font-bold text-black dark:text-black">Pronađen: <!>h</p><p class="pt-5 font-bold text-black dark:text-black">Registracija: </p><p class="pt-5 font-bold text-black dark:text-black">Brzina i visina: <!>km/h, <!>m</p><p class="pt-5 font-bold text-black dark:text-black">Opis: </p><p class="pt-7 font-bold text-black dark:text-black">Broj proizvedenih modela: '),Jx=Q('<div class="flex flex-row justify-center items-center space-x-2 flex-col md:flex-row"><h1 class="font-mono text-4xl leading-tight flex items-center min-w-20">Moj hangar</h1><input type=text class="form-control mt-10 text-black bg-slate-200 rounded md:w-55 w-55 h-8 mt-3 pl-3"autocomplete=off id=search-input placeholder=Pretraži...>'),Yx=Q('<tr class="flex flex-row text-3xl text-yellow-300 justify-center items-center space-x-8 flex-col md:flex-row pt-20"><td colspan=7 class="text-center py-4">Trenutno nema aviona...');function Xx(i){const e=It(),n=xt();Ht(()=>{e()===null&&n("/AuthError")}),yh(()=>{const u=document.querySelector("#search-input");u&&u.addEventListener("input",r)});function r(){const h=document.querySelector("#search-input").value.toLowerCase();document.querySelectorAll(".custom-card").forEach(m=>{m.querySelector("#naslov").textContent.toLowerCase().includes(h.toLowerCase())?m.style.display="":m.style.display="none"})}function a(u){if(u.modelnum===null)return(()=>{var h=Wx(),f=h.firstChild,m=f.firstChild,g=m.firstChild,_=m.nextSibling,v=_.firstChild,b=v.nextSibling;b.nextSibling;var S=_.nextSibling;S.firstChild;var y=S.nextSibling,x=y.firstChild,k=x.nextSibling,A=k.nextSibling,E=A.nextSibling;E.nextSibling;var T=y.nextSibling;return T.nextSibling,R(m,()=>u.model,g),R(_,()=>ei(u.time),b),R(S,()=>u.registration,null),R(y,()=>u.speed,k),R(y,()=>u.altitude,E),R(f,z(rt,{get when(){return u.livery!==null},fallback:null,get children(){return[" ",(()=>{var $=Fi();return $.firstChild,R($,()=>u.livery,null),$})()," "]}}),null),h})();if(u.modelnum>2e3)return(()=>{var h=Hx(),f=h.firstChild,m=f.firstChild,g=m.firstChild,_=g.firstChild,v=g.nextSibling,b=v.firstChild,S=b.nextSibling;S.nextSibling;var y=v.nextSibling;y.firstChild;var x=y.nextSibling,k=x.firstChild,A=k.nextSibling,E=A.nextSibling,T=E.nextSibling;T.nextSibling;var $=x.nextSibling;$.firstChild;var I=$.nextSibling;return I.firstChild,R(g,()=>u.model,_),R(m,z(rt,{get when(){return u.url!==null},fallback:null,get children(){return[" ",(()=>{var M=ds();return xe(()=>Ne(M,"src",u.url)),M})()]}}),v),R(v,()=>ei(u.time),S),R(y,()=>u.registration,null),R(x,()=>u.speed,A),R(x,()=>u.altitude,T),R($,()=>u.description,null),R(I,()=>u.modelnum,null),R(m,z(rt,{get when(){return u.livery!==null},fallback:null,get children(){return[" ",(()=>{var M=Fi();return M.firstChild,R(M,()=>u.livery,null),M})()," "]}}),null),h})();if(u.modelnum>1e3&&u.modelnum<=2e3)return console.log(u.url),(()=>{var h=Kx(),f=h.firstChild,m=f.firstChild,g=m.firstChild,_=g.firstChild,v=g.nextSibling,b=v.firstChild,S=b.nextSibling;S.nextSibling;var y=v.nextSibling;y.firstChild;var x=y.nextSibling,k=x.firstChild,A=k.nextSibling,E=A.nextSibling,T=E.nextSibling;T.nextSibling;var $=x.nextSibling;$.firstChild;var I=$.nextSibling;return I.firstChild,R(g,()=>u.model,_),R(m,z(rt,{get when(){return u.url!==null},fallback:null,get children(){return[" ",(()=>{var M=ds();return xe(()=>Ne(M,"src",u.url)),M})()]}}),v),R(v,()=>ei(u.time),S),R(y,()=>u.registration,null),R(x,()=>u.speed,A),R(x,()=>u.altitude,T),R($,()=>u.description,null),R(I,()=>u.modelnum,null),R(m,z(rt,{get when(){return u.livery!==null},fallback:null,get children(){return[" ",(()=>{var M=Fi();return M.firstChild,R(M,()=>u.livery,null),M})()," "]}}),null),h})();if(u.modelnum<=1e3&&u.modelnum>100)return(()=>{var h=Gx(),f=h.firstChild,m=f.firstChild,g=m.firstChild,_=g.firstChild,v=g.nextSibling,b=v.firstChild,S=b.nextSibling;S.nextSibling;var y=v.nextSibling;y.firstChild;var x=y.nextSibling,k=x.firstChild,A=k.nextSibling,E=A.nextSibling,T=E.nextSibling;T.nextSibling;var $=x.nextSibling;$.firstChild;var I=$.nextSibling;return I.firstChild,R(g,()=>u.model,_),R(m,z(rt,{get when(){return u.url!==null},fallback:null,get children(){return[" ",(()=>{var M=ds();return xe(()=>Ne(M,"src",u.url)),M})()]}}),v),R(v,()=>ei(u.time),S),R(y,()=>u.registration,null),R(x,()=>u.speed,A),R(x,()=>u.altitude,T),R($,()=>u.description,null),R(I,()=>u.modelnum,null),R(m,z(rt,{get when(){return u.livery!==null},fallback:null,get children(){return[" ",(()=>{var M=Fi();return M.firstChild,R(M,()=>u.livery,null),M})()," "]}}),null),h})();if(u.modelnum<=100)return(()=>{var h=Vx(),f=h.firstChild,m=f.firstChild,g=m.firstChild,_=g.firstChild,v=g.nextSibling,b=v.firstChild,S=b.nextSibling;S.nextSibling;var y=v.nextSibling;y.firstChild;var x=y.nextSibling,k=x.firstChild,A=k.nextSibling,E=A.nextSibling,T=E.nextSibling;T.nextSibling;var $=x.nextSibling;$.firstChild;var I=$.nextSibling;return I.firstChild,R(g,()=>u.model,_),R(m,z(rt,{get when(){return u.url!==null},fallback:null,get children(){return[" ",(()=>{var M=ds();return xe(()=>Ne(M,"src",u.url)),M})()]}}),v),R(v,()=>ei(u.time),S),R(y,()=>u.registration,null),R(x,()=>u.speed,A),R(x,()=>u.altitude,T),R($,()=>u.description,null),R(I,()=>u.modelnum,null),R(m,z(rt,{get when(){return u.livery!==null},fallback:null,get children(){return[" ",(()=>{var M=Fi();return M.firstChild,R(M,()=>u.livery,null),M})()," "]}}),null),h})()}const[l]=Wm(e().user.id,X0);return[Jx(),z(kh,{get each(){return l()},get fallback(){return Yx()},children:u=>a(u)})]}function Qx(){return z(ex,{get children(){return z(Xp,{get children(){return[z(ct,{path:"/",component:()=>z(hs,{get children(){return z(mx,{})}})}),z(ct,{path:"/*",component:()=>z(hs,{get children(){return z(ox,{})}})}),z(ct,{path:"/AuthError",component:()=>z(hs,{get children(){return z(ux,{})}})}),z(ct,{path:"/Prijava",component:()=>z(hs,{get children(){return z(_x,{})}})}),z(ct,{path:"/Pocetna",component:()=>z(en,{get children(){return z(yx,{})}})}),z(ct,{path:"/Program",component:()=>z(en,{get children(){return z(Lx,{})}})}),z(ct,{path:"/Informacije",component:()=>z(en,{get children(){return z(Ox,{})}})}),z(ct,{path:"/Onama",component:()=>z(en,{get children(){return z(Rx,{})}})}),z(ct,{path:"/Kontakt",component:()=>z(en,{get children(){return z(qx,{})}})}),z(ct,{path:"/Racun",component:()=>z(en,{get children(){return z(Fx,{})}})}),z(ct,{path:"/Upute",component:()=>z(en,{get children(){return z(Zx,{})}})}),z(ct,{path:"/MojHangar",component:()=>z(en,{get children(){return z(Xx,{})}})})]}})}})}const eA=document.getElementById("root");dp(()=>z(Qx,{}),eA);export{lg as g};
